/*! For license information please see main.522eb424.js.LICENSE.txt */
(()=>{var t={5810:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,i);break;default:if(!l)for(p=1,l=new Array(h-1);p<h;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==e||i&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},5345:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],u=a+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,p=null,f=3,d=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function x(t){if(g=!1,b(t),!m)if(null!==r(u))m=!0,N(E);else{var e=r(c);null!==e&&L(x,e.startTime-t)}}function E(t,n){m=!1,g&&(g=!1,v(M),M=-1),d=!0;var o=f;try{for(b(n),p=r(u);null!==p&&(!(p.expirationTime>n)||t&&!P());){var s=p.callback;if("function"===typeof s){p.callback=null,f=p.priorityLevel;var a=s(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?p.callback=a:p===r(u)&&i(u),b(n)}else i(u);p=r(u)}if(null!==p)var l=!0;else{var h=r(c);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{p=null,f=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,T=null,M=-1,R=5,A=-1;function P(){return!(e.unstable_now()-A<R)}function I(){if(null!==T){var t=e.unstable_now();A=t;var n=!0;try{n=T(!0,t)}finally{n?S():(w=!1,T=null)}}else w=!1}if("function"===typeof _)S=function(){_(I)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,O=C.port2;C.port1.onmessage=I,S=function(){O.postMessage(null)}}else S=function(){y(I,0)};function N(t){T=t,w||(w=!0,S())}function L(t,n){M=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,N(E))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(g?(v(M),M=-1):g=!0,L(x,o-s))):(t.sortIndex=a,n(u,t),m||d||(m=!0,N(E))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},4545:(t,e,n)=>{"use strict";t.exports=n(5345)},2127:(t,e,n)=>{"use strict";var r=n(2538);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},7872:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},3663:(t,e,n)=>{var r=n(4892),i=n(5450),o=n(3454),s=n(1146),a=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var f=n||{};return!!(f.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?f.strict?o(t,e):t==e:function(t,e,n){var o,f;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=s(t),m=s(e);if(d!==m)return!1;if(d||m)return t.source===e.source&&a(t)===a(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var g=p(t),y=p(e);if(g!==y)return!1;if(g||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var v=r(t),_=r(e)}catch(b){return!1}if(v.length!==_.length)return!1;for(v.sort(),_.sort(),o=v.length-1;o>=0;o--)if(v[o]!=_[o])return!1;for(o=v.length-1;o>=0;o--)if(!c(t[f=v[o]],e[f],n))return!1;return!0}(t,e,f))}function h(t){return null===t||void 0===t}function p(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},2538:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7872);function i(t,e,n){if(null!==t)for(var r,o,s,a,l,u,c,h,p=0,f=0,d=t.type,m="FeatureCollection"===d,g="Feature"===d,y=m?t.features.length:1,v=0;v<y;v++){l=(h=!!(c=m?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<l;_++){var b=0,x=0;if(null!==(a=h?c.geometries[_]:c)){u=a.coordinates;var E=a.type;switch(p=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(u,f,v,b,x))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,v,b,x))return!1;f++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-p;o++){if(!1===e(u[r][o],f,v,b,x))return!1;f++}"MultiLineString"===E&&b++,"Polygon"===E&&x++}"Polygon"===E&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,o=0;o<u[r].length;o++){for(s=0;s<u[r][o].length-p;s++){if(!1===e(u[r][o][s],f,v,b,x))return!1;f++}x++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===i(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,r,i,o,s,a,l,u,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,m=f?t.features.length:1;for(n=0;n<m;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,u=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=l?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function l(t,e){a(t,(function(t,n,i,o,s){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:a,coordinates:t.coordinates[u]};if(!1===e(r.feature(c,i),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,u=0,c=0,h=0;return!1!==i(t,(function(i,a,p,f,d){if(void 0===l||n>u||f>c||d>h)return l=i,u=n,c=f,h=d,void(s=0);var m=r.lineString([l,i],t.properties);if(!1===e(m,n,o,d,s))return!1;s++,l=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(r.lineString(s[a],t.properties),n,i,a))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)}),r),o},e.featureEach=s,e.featureReduce=function(t,e,n){var r=n;return s(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return r.point(u,l,e);case"MultiPoint":return o<0&&(o=u.length+o),r.point(u[o],l,e);case"LineString":return a<0&&(a=u.length+a),r.point(u[a],l,e);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a),r.point(u[s][a],l,e);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),r.point(u[o][a],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a),r.point(u[o][s][a],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),r.lineString([u[a],u[a+1]],l,e);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a-1),r.lineString([u[s][a],u[s][a+1]],l,e);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),r.lineString([u[o][a],u[o][a+1]],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a-1),r.lineString([u[o][s][a],u[o][s][a+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=a,e.geomReduce=function(t,e,n){var r=n;return a(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=u,e.segmentReduce=function(t,e,n){var r=n,i=!1;return u(t,(function(t,o,s,a,l){r=!1===i&&void 0===n?t:e(r,t,o,s,a,l),i=!0})),r}},4037:(t,e,n)=>{"use strict";var r=n(2506),i=n(9722),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},9722:(t,e,n)=>{"use strict";var r=n(3350),i=n(2506),o=n(5986),s=n(7822),a=i("%Function.prototype.apply%"),l=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||r.call(l,a),c=n(442),h=i("%Math.max%");t.exports=function(t){if("function"!==typeof t)throw new s("a function is required");var e=u(r,l,arguments);return o(e,1+h(0,t.length-(arguments.length-1)),!0)};var p=function(){return u(r,a,arguments)};c?c(t.exports,"apply",{value:p}):t.exports.apply=p},1694:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&t.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&t.push(a)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},4161:(t,e,n)=>{"use strict";var r=n(2110),i=n(4613),o=n(5021),s=n(4460).orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var l=[e,n,r,i],u=l.slice();for(s=0;s<t.length;s++)o(t[s],l)||u.push(t[s]);return function(t){t.sort(_);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&f(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&f(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),s=new r(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,u=[],c=0;c<i.length;c++){var h=i[c];s.remove(h),a=m(h,a),u.push(a)}var p=new r(16);for(c=0;c<u.length;c++)p.insert(d(u[c]));for(var y=e*e,v=n*n;u.length;){var b=u.shift(),x=b.p,E=b.next.p,S=g(x,E);if(!(S<v)){var w=S/y;(h=l(s,b.prev.p,x,E,b.next.next.p,w,p))&&Math.min(g(h,x),g(h,E))<=w&&(u.push(b),u.push(m(h,b)),s.remove(h),p.remove(b),p.insert(d(b)),p.insert(d(b.next)))}}b=a;var T=[];do{T.push(b.p),b=b.next}while(b!==a);return T.push(b.p),T}function l(t,e,n,r,o,s,a){for(var l=new i([],u),h=t.data;h;){for(var f=0;f<h.children.length;f++){var d=h.children[f],m=h.leaf?y(d,n,r):c(n,r,d);m>s||l.push({node:d,dist:m})}for(;l.length&&!l.peek().node.children;){var g=l.pop(),v=g.node,_=y(v,e,n),b=y(v,r,o);if(g.dist<_&&g.dist<b&&p(n,v,a)&&p(r,v,a))return v}(h=l.pop())&&(h=h.node)}return null}function u(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:l,maxX:u,maxY:c}),p=0;p<h.length;p++)if(r=h[p].p,i=h[p].next.p,o=t,r!==(s=e)&&i!==o&&f(r,i,o)>0!==f(r,i,s)>0&&f(o,s,r)>0!==f(o,s,i)>0)return!1;return!0}function f(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function m(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function g(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function y(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function v(t,e,n,r,i,o,s,a){var l,u,c,h,p=n-t,f=r-e,d=s-i,m=a-o,g=t-i,y=e-o,v=p*p+f*f,_=p*d+f*m,b=d*d+m*m,x=p*g+f*y,E=d*g+m*y,S=v*b-_*_,w=S,T=S;0===S?(u=0,w=1,h=E,T=b):(h=v*E-_*x,(u=_*E-b*x)<0?(u=0,h=E,T=b):u>w&&(u=w,h=E+_,T=b)),h<0?(h=0,-x<0?u=0:-x>v?u=w:(u=-x,w=v)):h>T&&(h=T,-x+_<0?u=0:-x+_>v?u=w:(u=-x+_,w=v));var M=(1-(c=0===h?0:h/T))*i+c*s-((1-(l=0===u?0:u/w))*t+l*n),R=(1-c)*o+c*a-((1-l)*e+l*r);return M*M+R*R}function _(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=a,t.exports.default=a},2110:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,l=r-i+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/a+h)),Math.min(o,Math.floor(r+(a-l)*c/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),s.leaf){var c=i(t,s.children,e);if(-1!==c)return s.children.splice(c,1),l.push(s),this._condense(l),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var p=c;p<=h;p+=l){var f=Math.min(p+l-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u);h<o?(o=h,i=u<i?u:i,s=l):h===o&&u<i&&(i=u,s=l)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,l,u,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var m=s(t,0,d,this.toBBox),g=s(t,d,n,this.toBBox),y=(i=m,o=g,a=void 0,l=void 0,u=void 0,h=void 0,a=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,h-l)),v=c(m)+c(g);y<p?(p=y,r=d,f=v<f?v:f):y===p&&v<f&&(f=v,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),l=s(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var p=t.children[c];a(o,t.leaf?i(p):p),u+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},7494:t=>{function e(t,e,n){var r,i,o,s,a;function l(){var u=Date.now()-s;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(o,i),o=i=null))}null==e&&(e=100);var u=function(){o=this,i=arguments,s=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}e.debounce=e,t.exports=e},9948:t=>{"use strict";var e=function(t){return function(t){return!!t&&"object"===typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?l((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function i(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function o(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function s(t,e){try{return e in t}catch(n){return!1}}function a(t,e,n){var i={};return n.isMergeableObject(t)&&o(t).forEach((function(e){i[e]=r(t[e],n)})),o(e).forEach((function(o){(function(t,e){return s(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(s(t,o)&&n.isMergeableObject(e[o])?i[o]=function(t,e){if(!e.customMerge)return l;var n=e.customMerge(t);return"function"===typeof n?n:l}(o,n)(t[o],e[o],n):i[o]=r(e[o],n))})),i}function l(t,n,o){(o=o||{}).arrayMerge=o.arrayMerge||i,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=r;var s=Array.isArray(n);return s===Array.isArray(t)?s?o.arrayMerge(t,n,o):a(t,n,o):r(n,o)}l.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return l(t,n,e)}),{})};var u=l;t.exports=u},2651:(t,e,n)=>{"use strict";var r=n(442),i=n(9082),o=n(7822),s=n(3347);t.exports=function(t,e,n){if(!t||"object"!==typeof t&&"function"!==typeof t)throw new o("`obj` must be an object or a function`");if("string"!==typeof e&&"symbol"!==typeof e)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],h=!!s&&s(t,e);if(r)r(t,e,{configurable:null===u&&h?h.configurable:!u,enumerable:null===a&&h?h.enumerable:!a,value:n,writable:null===l&&h?h.writable:!l});else{if(!c&&(a||l||u))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},9396:(t,e,n)=>{"use strict";var r=n(4892),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=n(2651),l=n(4510)(),u=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!==typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;l?a(t,e,n,!0):a(t,e,n)},c=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)u(t,o[a],e[o[a]],n[o[a]])};c.supportsDescriptors=!!l,t.exports=c},7861:t=>{function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},2601:t=>{function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],"undefined"!==typeof t&&(this.dataset=t),"undefined"!==typeof e&&(this.k=e),"undefined"!==typeof n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,l=0;l<c;l++)s[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)s[l]+=this.dataset[u][l];a++}}if(a>0){for(l=0;l<c;l++)s[l]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)"undefined"===typeof e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},3163:(t,e,n)=>{if(t.exports)var r=n(5047);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var l=new r(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(a,l))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},5047:t=>{function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},5107:(t,e,n)=>{t.exports&&(t.exports={DBSCAN:n(7861),KMEANS:n(2601),OPTICS:n(3163),PriorityQueue:n(5047)})},7089:t=>{"use strict";function e(t,e,r){r=r||2;var o,s,a,l,h,p,d,m=e&&e.length,g=m?e[0]*r:t.length,y=n(t,0,g,r,!0),v=[];if(!y||y.next===y.prev)return v;if(m&&(y=function(t,e,r,i){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(u),o=0;o<l.length;o++)r=c(l[o],r);return r}(t,e,y,r)),t.length>80*r){o=a=t[0],s=l=t[1];for(var _=r;_<g;_+=r)(h=t[_])<o&&(o=h),(p=t[_+1])<s&&(s=p),h>a&&(a=h),p>l&&(l=p);d=0!==(d=Math.max(a-o,l-s))?32767/d:0}return i(y,v,r,o,s,d,0),v}function n(t,e,n,r,i){var o,s;if(i===M(t,e,n,r)>0)for(o=e;o<n;o+=r)s=S(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=S(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(w(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(w(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,u,c,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(t,u,c,h);for(var d,m,g=t;t.prev!==t.next;)if(d=t.prev,m=t.next,h?s(t,u,c,h):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(m.i/n|0),w(t),t=m.next,g=m.next;else if((t=m)===g){f?1===f?i(t=a(r(t),e,n),e,n,u,c,h,2):2===f&&l(t,e,n,u,c,h):i(r(t),e,n,u,c,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,u=r.y,c=i<o?i<s?i:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,p=i>o?i>s?i:s:o>s?o:s,f=a>l?a>u?a:u:l>u?l:u,m=r.next;m!==e;){if(m.x>=c&&m.x<=p&&m.y>=h&&m.y<=f&&d(i,a,o,l,s,u,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(g(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,h=o.y,f=s.y,m=a<l?a<u?a:u:l<u?l:u,y=c<h?c<f?c:f:h<f?h:f,v=a>l?a>u?a:u:l>u?l:u,_=c>h?c>f?c:f:h>f?h:f,b=p(m,y,e,n,r),x=p(v,_,e,n,r),E=t.prevZ,S=t.nextZ;E&&E.z>=b&&S&&S.z<=x;){if(E.x>=m&&E.x<=v&&E.y>=y&&E.y<=_&&E!==i&&E!==s&&d(a,c,l,h,u,f,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,S.x>=m&&S.x<=v&&S.y>=y&&S.y<=_&&S!==i&&S!==s&&d(a,c,l,h,u,f,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;E&&E.z>=b;){if(E.x>=m&&E.x<=v&&E.y>=y&&E.y<=_&&E!==i&&E!==s&&d(a,c,l,h,u,f,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;S&&S.z<=x;){if(S.x>=m&&S.x<=v&&S.y>=y&&S.y<=_&&S!==i&&S!==s&&d(a,c,l,h,u,f,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!y(o,s)&&v(o,i,i.next,s)&&x(o,s)&&x(s,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),w(i),w(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,s,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(l,u)){var c=E(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,e,n,o,s,a,0),void i(c,e,n,o,s,a,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,u=n,c=n.x,p=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&d(o<p?i:s,o,c,p,o<p?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var i=E(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||y(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){var i=b(g(t,e,n)),o=b(g(t,e,r)),s=b(g(n,r,t)),a=b(g(n,r,e));return i!==o&&s!==a||(!(0!==i||!_(t,n,e))||(!(0!==o||!_(t,r,e))||(!(0!==s||!_(n,t,r))||!(0!==a||!_(n,e,r)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function E(t,e){var n=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(M(t,0,o,n));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;s-=Math.abs(M(t,u,c,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},442:(t,e,n)=>{"use strict";var r=n(2506)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(i){r=!1}t.exports=r},8678:t=>{"use strict";t.exports=EvalError},7113:t=>{"use strict";t.exports=Error},9481:t=>{"use strict";t.exports=RangeError},2347:t=>{"use strict";t.exports=ReferenceError},9082:t=>{"use strict";t.exports=SyntaxError},7822:t=>{"use strict";t.exports=TypeError},9365:t=>{"use strict";t.exports=URIError},1437:(t,e)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=n}var e,i,o;return e=t,o=[{key:"fromObject",value:function(e){return new t(e.x,e.y)}},{key:"fromArray",value:function(e){var r,i,o=(i=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(r,i)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return new t(o[0],o[1])}},{key:"lerp",value:function(e,n,r){var i;return r=(i=r)<0?0:i>1?1:i,new t(e.x+(n.x-e.x)*r,e.y+(n.y-e.y)*r)}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"add",value:function(e,n,r){return"number"==typeof n?new t(e.x+n,e.y+(r||0)):new t(e.x+n.x,e.y+n.y)}},{key:"sub",value:function(e,n,r){return"number"==typeof n?new t(e.x-n,e.y-(r||0)):new t(e.x-n.x,e.y-n.y)}},{key:"mul",value:function(e,n,r){return new t(e.x*n,e.y*(r||n))}},{key:"div",value:function(e,n,r){return new t(e.x/n,e.y/(r||n))}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"cross",value:function(t,e){return t.x*e.y-t.y*e.x}},{key:"angle",value:function(t){return Math.atan2(t.y,t.x)}},{key:"angleBetween",value:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"limit",value:function(t,e){var n=t.magnitudeSquare();return n>e*e?t.div(Math.sqrt(n)).mul(e):t.clone()}},{key:"reflect",value:function(e,n){var r=-2*t.dot(n,e);return new t(r*n.x+e.x,r*n.y+e.y)}},{key:"equals",value:function(e,n){var r=e.x-n.x,i=e.y-n.y;return r*r+i*i<t.epsilon*t.epsilon}},{key:"magnitude",value:function(e){return Math.sqrt(t.magnitudeSquare(e))}},{key:"magnitudeSquare",value:function(t){return t.x*t.x+t.y*t.y}},{key:"normalize",value:function(e){var n=t.magnitude(e);return n>t.epsilon?new t(e.x/n,e.y/n):new t(0,0)}},{key:"intersection",value:function(e,n,r,i){var o=(e.x*n.y-e.y*n.x)*(r.x-i.x)-(e.x-n.x)*(r.x*i.y-r.y*i.x),s=(e.x*n.y-e.y*n.x)*(r.y-i.y)-(e.y-n.y)*(r.x*i.y-r.y*i.x),a=(e.x-n.x)*(r.y-i.y)-(e.y-n.y)*(r.x-i.x);return 0===a?null:new t(o/a,s/a)}},{key:"zero",get:function(){return new t(0,0)}},{key:"up",get:function(){return new t(0,-1)}},{key:"down",get:function(){return new t(0,1)}},{key:"left",get:function(){return new t(-1,0)}},{key:"right",get:function(){return new t(1,0)}}],(i=[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"lerp",value:function(e,n){return t.lerp(this,e,n)}},{key:"distance",value:function(e){return t.distance(this,e)}},{key:"add",value:function(e,n){return"number"==typeof e?t.add(this,e,n):t.add(this,e)}},{key:"sub",value:function(e,n){return"number"==typeof e?t.sub(this,e,n):t.sub(this,e)}},{key:"mul",value:function(e,n){return t.mul(this,e,n)}},{key:"div",value:function(e,n){return t.div(this,e,n)}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"cross",value:function(e){return t.cross(this,e)}},{key:"limit",value:function(e){return t.limit(this,e)}},{key:"equals",value:function(e){return t.equals(this,e)}},{key:"magnitude",value:function(){return t.magnitude(this)}},{key:"magnitudeSquare",value:function(){return t.magnitudeSquare(this)}},{key:"normalize",value:function(){return t.normalize(this)}},{key:"angle",value:function(){return t.angle(this)}},{key:"angleBetween",value:function(e){return t.angleBetween(this,e)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toArray",value:function(){return[this.x,this.y]}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}])&&r(e.prototype,i),o&&r(e,o),t}();e.Z=i,i.epsilon=1e-5},222:t=>{"use strict";var e=Object.prototype.toString,n=Math.max,r=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n};t.exports=function(t){var i=this;if("function"!==typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(t,e){for(var n=[],r=e||0,i=0;r<t.length;r+=1,i+=1)n[i]=t[r];return n}(arguments,1),a=n(0,i.length-s.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(o=Function("binder","return function ("+function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=i.apply(this,r(s,arguments));return Object(e)===e?e:this}return i.apply(t,r(s,arguments))})),i.prototype){var c=function(){};c.prototype=i.prototype,o.prototype=new c,c.prototype=null}return o}},3350:(t,e,n)=>{"use strict";var r=n(222);t.exports=Function.prototype.bind||r},4583:t=>{"use strict";var e=function(){return"string"===typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(i){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var r=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"===typeof r&&""!==function(){}.bind().name},t.exports=e},4042:(t,e,n)=>{var r=n(9951),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!s(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},9951:(t,e,n)=>{var r=n(4892),i=n(5450),o=n(3454),s=n(1146),a=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var f=n||{};return!!(f.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?f.strict?o(t,e):t==e:function(t,e,n){var o,f;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=s(t),m=s(e);if(d!==m)return!1;if(d||m)return t.source===e.source&&a(t)===a(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var g=p(t),y=p(e);if(g!==y)return!1;if(g||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var v=r(t),_=r(e)}catch(b){return!1}if(v.length!==_.length)return!1;for(v.sort(),_.sort(),o=v.length-1;o>=0;o--)if(v[o]!=_[o])return!1;for(o=v.length-1;o>=0;o--)if(!c(t[f=v[o]],e[f],n))return!1;return!0}(t,e,f))}function h(t){return null===t||void 0===t}function p(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},9234:(t,e,n)=>{var r=n(2968),i=n(7872),o=n(2538),s=n(2127).Z,a=o.featureEach,l=(o.coordEach,i.polygon,i.featureCollection);function u(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return l(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},2968:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,l=r-i+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/a+h)),Math.min(o,Math.floor(r+(a-l)*c/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),s.leaf){var c=i(t,s.children,e);if(-1!==c)return s.children.splice(c,1),l.push(s),this._condense(l),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var p=c;p<=h;p+=l){var f=Math.min(p+l-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u);h<o?(o=h,i=u<i?u:i,s=l):h===o&&u<i&&(i=u,s=l)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,l,u,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var m=s(t,0,d,this.toBBox),g=s(t,d,n,this.toBBox),y=(i=m,o=g,a=void 0,l=void 0,u=void 0,h=void 0,a=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,h-l)),v=c(m)+c(g);y<p?(p=y,r=d,f=v<f?v:f):y===p&&v<f&&(f=v,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),l=s(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var p=t.children[c];a(o,t.leaf?i(p):p),u+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},2506:(t,e,n)=>{"use strict";var r,i=n(7113),o=n(8678),s=n(9481),a=n(2347),l=n(9082),u=n(7822),c=n(9365),h=Function,p=function(t){try{return h('"use strict"; return ('+t+").constructor;")()}catch(e){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(D){f=null}var d=function(){throw new u},m=f?function(){try{return d}catch(t){try{return f(arguments,"callee").get}catch(e){return d}}}():d,g=n(697)(),y=n(2203)(),v=Object.getPrototypeOf||(y?function(t){return t.__proto__}:null),_={},b="undefined"!==typeof Uint8Array&&v?v(Uint8Array):r,x={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":_,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":m,"%TypedArray%":b,"%TypeError%":u,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(v)try{null.error}catch(D){var E=v(v(D));x["%Error.prototype%"]=E}var S=function t(e){var n;if("%AsyncFunction%"===e)n=p("async function () {}");else if("%GeneratorFunction%"===e)n=p("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=p("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&v&&(n=v(i.prototype))}return x[e]=n,n},w={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=n(3350),M=n(9670),R=T.call(Function.call,Array.prototype.concat),A=T.call(Function.apply,Array.prototype.splice),P=T.call(Function.call,String.prototype.replace),I=T.call(Function.call,String.prototype.slice),C=T.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N=/\\(\\)?/g,L=function(t,e){var n,r=t;if(M(w,r)&&(r="%"+(n=w[r])[0]+"%"),M(x,r)){var i=x[r];if(i===_&&(i=S(r)),"undefined"===typeof i&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=I(t,0,1),n=I(t,-1);if("%"===e&&"%"!==n)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var r=[];return P(t,O,(function(t,e,n,i){r[r.length]=n?P(i,N,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",i=L("%"+r+"%",e),o=i.name,s=i.value,a=!1,c=i.alias;c&&(r=c[0],A(n,R([0,1],c)));for(var h=1,p=!0;h<n.length;h+=1){var d=n[h],m=I(d,0,1),g=I(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new l("property names with quotes must have matching quotes");if("constructor"!==d&&p||(a=!0),M(x,o="%"+(r+="."+d)+"%"))s=x[o];else if(null!=s){if(!(d in s)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(f&&h+1>=n.length){var y=f(s,d);s=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[d]}else p=M(s,d),s=s[d];p&&!a&&(x[o]=s)}}return s}},3347:(t,e,n)=>{"use strict";var r=n(2506)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(i){r=null}t.exports=r},4510:(t,e,n)=>{"use strict";var r=n(442),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},2203:t=>{"use strict";var e={foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof n)}},697:(t,e,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:t=>{"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:(t,e,n)=>{"use strict";var r=n(3297);t.exports=function(){return r()&&!!Symbol.toStringTag}},9670:(t,e,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(3350);t.exports=o.call(r,i)},5450:(t,e,n)=>{"use strict";var r=n(4707)(),i=n(4037)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"===typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},s=function(t){return!!o(t)||null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},2833:(t,e,n)=>{"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(4707)();t.exports=function(t){return"object"===typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(e){return!1}}(t):"[object Date]"===i.call(t))}},1146:(t,e,n)=>{"use strict";var r,i,o,s,a=n(4037),l=n(4707)();if(l){r=a("Object.prototype.hasOwnProperty"),i=a("RegExp.prototype.exec"),o={};var u=function(){throw o};s={toString:u,valueOf:u},"symbol"===typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var c=a("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!==typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,s)}catch(n){return n===o}}:function(t){return!(!t||"object"!==typeof t&&"function"!==typeof t)&&"[object RegExp]"===c(t)}},4819:t=>{var e;self,e=()=>{return t={7629:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(9474),s=n(1687),a=n(8652),l=n(8160),u=n(3292),c=n(6354),h=n(8901),p=n(9708),f=n(6914),d=n(2294),m=n(6133),g=n(1152),y=n(8863),v=n(2036),_={Base:class{constructor(t){this.type=t,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new d.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return r("function"==typeof p.describe,"Manifest functionality disabled"),p.describe(this)}allow(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(t){r(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),r(!this._inRuleset(),"Cannot set alterations inside a ruleset");const e=this.clone();e.$_terms.alterations=e.$_terms.alterations||[];for(const n in t){const i=t[n];r("function"==typeof i,"Alteration adjuster for",n,"must be a function"),e.$_terms.alterations.push({target:n,adjuster:i})}return e.$_temp.ruleset=!1,e}artifact(t){return r(void 0!==t,"Artifact cannot be undefined"),r(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return r(!1===t||"string"==typeof t,"Invalid to value"),r(!1===t||this._definition.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,e){return this._default("default",t,e)}description(t){return r(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const e=this.clone();return void 0!==t&&(t=e.$_compile(t,{override:!1})),e.$_setFlag("empty",t,{clone:!1})}error(t){return r(t,"Missing error"),r(t instanceof Error||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(void 0!==t,"Missing example"),l.assertOptions(e,["override"]),this._inner("examples",t,{single:!0,override:e.override})}external(t,e){return"object"==typeof t&&(r(!e,"Cannot combine options with description"),e=t.description,t=t.method),r("function"==typeof t,"Method must be a function"),r(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this._inner("externals",{method:t,description:e},{single:!0})}failover(t,e){return this._default("failover",t,e)}forbidden(){return this.presence("forbidden")}id(t){return t?(r("string"==typeof t,"id must be a non-empty string"),r(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._values(e,"_invalids")}label(t){return r(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return r(void 0!==t,"Meta cannot be undefined"),this._inner("metas",t,{single:!0})}note(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r(e.length,"Missing notes");for(const i of e)r(i&&"string"==typeof i,"Notes must be non-empty strings");return this._inner("notes",e)}only(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){r(t,"Missing preferences"),r(void 0===t.context,"Cannot override context"),r(void 0===t.externals,"Cannot override externals"),r(void 0===t.warnings,"Cannot override warnings"),r(void 0===t.debug,"Cannot override debug"),l.checkPreferences(t);const e=this.clone();return e._preferences=l.preferences(e._preferences,t),e}presence(t){return r(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",t?"raw":void 0)}result(t){return r(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const e=this.clone(),n=void 0!==t&&!t;return e._preferences=l.preferences(e._preferences,{convert:n}),e}strip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r(e.length,"Missing tags");for(const i of e)r(i&&"string"==typeof i,"Tags must be non-empty strings");return this._inner("tags",e)}unit(t){return r(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];l.verifyFlat(e,"valid");const r=this.allow(...e);return r.$_setFlag("only",!!r._valids,{clone:!1}),r}when(t,e){const n=this.clone();n.$_terms.whens||(n.$_terms.whens=[]);const i=u.when(n,t,e);if(!["any","link"].includes(n.type)){const t=i.is?[i]:i.switch;for(const e of t)r(!e.then||"any"===e.then.type||e.then.type===n.type,"Cannot combine",n.type,"with",e.then&&e.then.type),r(!e.otherwise||"any"===e.otherwise.type||e.otherwise.type===n.type,"Cannot combine",n.type,"with",e.otherwise&&e.otherwise.type)}return n.$_terms.whens.push(i),n.$_mutateRebuild()}cache(t){r(!this._inRuleset(),"Cannot set caching inside a ruleset"),r(!this._cache,"Cannot override schema cache"),r(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const e=this.clone();return e._cache=t||a.provider.provision(),e.$_temp.ruleset=!1,e}clone(){const t=Object.create(Object.getPrototypeOf(this));return this._assign(t)}concat(t){r(l.isSchema(t),"Invalid schema object"),r("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),r(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),r(!t._inRuleset(),"Cannot concatenate a schema with open ruleset");let e=this.clone();if("any"===this.type&&"any"!==t.type){const n=t.clone();for(const t of Object.keys(e))"type"!==t&&(n[t]=e[t]);e=n}e._ids.concat(t._ids),e._refs.register(t,m.toSibling),e._preferences=e._preferences?l.preferences(e._preferences,t._preferences):t._preferences,e._valids=v.merge(e._valids,t._valids,t._invalids),e._invalids=v.merge(e._invalids,t._invalids,t._valids);for(const n of t._singleRules.keys())e._singleRules.has(n)&&(e._rules=e._rules.filter((t=>t.keep||t.name!==n)),e._singleRules.delete(n));for(const n of t._rules)t._definition.rules[n.method].multi||e._singleRules.set(n.name,n),e._rules.push(n);if(e._flags.empty&&t._flags.empty){e._flags.empty=e._flags.empty.concat(t._flags.empty);const n=Object.assign({},t._flags);delete n.empty,s(e._flags,n)}else if(t._flags.empty){e._flags.empty=t._flags.empty;const n=Object.assign({},t._flags);delete n.empty,s(e._flags,n)}else s(e._flags,t._flags);for(const n in t.$_terms){const r=t.$_terms[n];r?e.$_terms[n]?e.$_terms[n]=e.$_terms[n].concat(r):e.$_terms[n]=r.slice():e.$_terms[n]||(e.$_terms[n]=r)}return this.$_root._tracer&&this.$_root._tracer._combine(e,[this,t]),e.$_mutateRebuild()}extend(t){return r(!t.base,"Cannot extend type with another base"),h.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this._ids.reach(t)}fork(t,e){r(!this._inRuleset(),"Cannot fork inside a ruleset");let n=this;for(let r of[].concat(t))r=Array.isArray(r)?r:r.split("."),n=n._ids.fork(r,e,n);return n.$_temp.ruleset=!1,n}rule(t){const e=this._definition;l.assertOptions(t,Object.keys(e.modifiers)),r(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const n=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;r(n>=0&&n<this._rules.length,"Cannot apply rules to empty ruleset");const o=this.clone();for(let s=n;s<o._rules.length;++s){const n=o._rules[s],a=i(n);for(const i in t)e.modifiers[i](a,t[i]),r(a.name===n.name,"Cannot change rule name");o._rules[s]=a,o._singleRules.get(a.name)===n&&o._singleRules.set(a.name,a)}return o.$_temp.ruleset=!1,o.$_mutateRebuild()}get ruleset(){r(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t._rules.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),r(!this._inRuleset(),"Cannot tailor inside a ruleset");let e=this;if(this.$_terms.alterations)for(const{target:n,adjuster:i}of this.$_terms.alterations)t.includes(n)&&(e=i(e),r(l.isSchema(e),"Alteration adjuster for",n,"failed to return a schema object"));return e=e.$_modify({each:e=>e.tailor(t),ref:!1}),e.$_temp.ruleset=!1,e.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(t,e){return y.entry(t,this,e)}validateAsync(t,e){return y.entryAsync(t,this,e)}$_addRule(t){"string"==typeof t&&(t={name:t}),r(t&&"object"==typeof t,"Invalid options"),r(t.name&&"string"==typeof t.name,"Invalid rule name");for(const s in t)r("_"!==s[0],"Cannot set private rule properties");const e=Object.assign({},t);e._resolve=[],e.method=e.method||e.name;const n=this._definition.rules[e.method],i=e.args;r(n,"Unknown rule",e.method);const o=this.clone();if(i){r(1===Object.keys(i).length||Object.keys(i).length===this._definition.rules[e.name].args.length,"Invalid rule definition for",this.type,e.name);for(const t in i){let s=i[t];if(n.argsByName){const a=n.argsByName.get(t);if(a.ref&&l.isResolvable(s))e._resolve.push(t),o.$_mutateRegister(s);else if(a.normalize&&(s=a.normalize(s),i[t]=s),a.assert){const e=l.validateArg(s,t,a);r(!e,e,"or reference")}}void 0!==s?i[t]=s:delete i[t]}}return n.multi||(o._ruleRemove(e.name,{clone:!1}),o._singleRules.set(e.name,e)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),n.priority?o._rules.unshift(e):o._rules.push(e),o}$_compile(t,e){return u.schema(this.$_root,t,e)}$_createError(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=!1!==o.flags?this._flags:{},a=o.messages?f.merge(this._definition.messages,o.messages):this._definition.messages;return new c.Report(t,e,n,s,a,r,i)}$_getFlag(t){return this._flags[t]}$_getRule(t){return this._singleRules.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this._ids.labels(t)}$_match(t,e,n,r){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,e.snapshot();const i=!y.validate(t,this,e,n,r).errors;return e.restore(),i}$_modify(t){return l.assertOptions(t,["each","once","ref","schema"]),d.schema(this,t)||this}$_mutateRebuild(){return r(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(t,e)=>{let{source:n,name:r,path:i,key:o}=e;const s=this._definition[n][r]&&this._definition[n][r].register;!1!==s&&this.$_mutateRegister(t,{family:s,key:o})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t){let{family:e,key:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._refs.register(t,e),this._ids.register(t,{key:n})}$_property(t){return this._definition.properties[t]}$_reach(t){return this._ids.reach(t)}$_rootReferences(){return this._refs.roots()}$_setFlag(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r("_"===t[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const i=this._definition.flags[t]||{};if(o(e,i.default)&&(e=void 0),o(e,this._flags[t]))return this;const s=!1!==n.clone?this.clone():this;return void 0!==e?(s._flags[t]=e,s.$_mutateRegister(e)):delete s._flags[t],"_"!==t[0]&&(s.$_temp.ruleset=!1),s}$_parent(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this[t][l.symbols.parent].call(this,...n)}$_validate(t,e,n){return y.validate(t,this,e,n)}_assign(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=Object.assign({},this.$_temp),t.$_temp.whens={},t._ids=this._ids.clone(),t._preferences=this._preferences,t._valids=this._valids&&this._valids.clone(),t._invalids=this._invalids&&this._invalids.clone(),t._rules=this._rules.slice(),t._singleRules=i(this._singleRules,{shallow:!0}),t._refs=this._refs.clone(),t._flags=Object.assign({},this._flags),t._cache=null,t.$_terms={};for(const e in this.$_terms)t.$_terms[e]=this.$_terms[e]?this.$_terms[e].slice():null;t.$_super={};for(const e in this.$_super)t.$_super[e]=this._super[e].bind(t);return t}_bare(){const t=this.clone();t._reset();const e=t._definition.terms;for(const n in e){const r=e[n];t.$_terms[n]=r.init}return t.$_mutateRebuild()}_default(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.assertOptions(n,"literal"),r(void 0!==e,"Missing",t,"value"),r("function"==typeof e||!n.literal,"Only function value supports literal option"),"function"==typeof e&&n.literal&&(e={[l.symbols.literal]:!0,literal:e}),this.$_setFlag(t,e)}_generate(t,e,n){if(!this.$_terms.whens)return{schema:this};const r=[],i=[];for(let a=0;a<this.$_terms.whens.length;++a){const o=this.$_terms.whens[a];if(o.concat){r.push(o.concat),i.push("".concat(a,".concat"));continue}const s=o.ref?o.ref.resolve(t,e,n):t,l=o.is?[o]:o.switch,u=i.length;for(let c=0;c<l.length;++c){const{is:u,then:h,otherwise:p}=l[c],f="".concat(a).concat(o.switch?"."+c:"");if(u.$_match(s,e.nest(u,"".concat(f,".is")),n)){if(h){const o=e.localize([...e.path,"".concat(f,".then")],e.ancestors,e.schemas),{schema:s,id:a}=h._generate(t,o,n);r.push(s),i.push("".concat(f,".then").concat(a?"(".concat(a,")"):""));break}}else if(p){const o=e.localize([...e.path,"".concat(f,".otherwise")],e.ancestors,e.schemas),{schema:s,id:a}=p._generate(t,o,n);r.push(s),i.push("".concat(f,".otherwise").concat(a?"(".concat(a,")"):""));break}}if(o.break&&i.length>u)break}const o=i.join(", ");if(e.mainstay.tracer.debug(e,"rule","when",o),!o)return{schema:this};if(!e.mainstay.tracer.active&&this.$_temp.whens[o])return{schema:this.$_temp.whens[o],id:o};let s=this;this._definition.generate&&(s=this._definition.generate(this,t,e,n));for(const a of r)s=s.concat(a);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...r]),this.$_temp.whens[o]=s,{schema:s,id:o}}_inner(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(!this._inRuleset(),"Cannot set ".concat(t," inside a ruleset"));const i=this.clone();return i.$_terms[t]&&!n.override||(i.$_terms[t]=[]),n.single?i.$_terms[t].push(e):i.$_terms[t].push(...e),i.$_temp.ruleset=!1,i}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(t))return this;const n=!1!==e.clone?this.clone():this;n._singleRules.delete(t);const r=[];for(let i=0;i<n._rules.length;++i){const e=n._rules[i];e.name!==t||e.keep?r.push(e):n._inRuleset()&&i<n.$_temp.ruleset&&--n.$_temp.ruleset}return n._rules=r,n}_values(t,e){l.verifyFlat(t,e.slice(1,-1));const n=this.clone(),i=t[0]===l.symbols.override;if(i&&(t=t.slice(1)),!n[e]&&t.length?n[e]=new v:i&&(n[e]=t.length?new v:null,n.$_mutateRebuild()),!n[e])return n;i&&n[e].override();for(const o of t){r(void 0!==o,"Cannot call allow/valid/invalid with undefined"),r(o!==l.symbols.override,"Override must be the first value");const t="_invalids"===e?"_valids":"_invalids";n[t]&&(n[t].remove(o),n[t].length||(r("_valids"===e||!n._flags.only,"Setting invalid value",o,"leaves schema rejecting all values due to previous valid rule"),n[t]=null)),n[e].add(o,n._refs)}return n}}};_.Base.prototype[l.symbols.any]={version:l.version,compile:u.compile,root:"$_root"},_.Base.prototype.isImmutable=!0,_.Base.prototype.deny=_.Base.prototype.invalid,_.Base.prototype.disallow=_.Base.prototype.invalid,_.Base.prototype.equal=_.Base.prototype.valid,_.Base.prototype.exist=_.Base.prototype.required,_.Base.prototype.not=_.Base.prototype.invalid,_.Base.prototype.options=_.Base.prototype.prefs,_.Base.prototype.preferences=_.Base.prototype.prefs,t.exports=new _.Base},8652:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};e.provider={provision:t=>new s.Cache(t)},s.Cache=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assertOptions(t,["max"]),r(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this._max=t.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(t,e){if(null!==t&&!s.supported.has(typeof t))return;let n=this._map.get(t);if(n)return n.value=e,void this._list.first(n);n=this._list.unshift({key:t,value:e}),this._map.set(t,n),this._compact()}get(t){const e=this._map.get(t);if(e)return this._list.first(e),i(e.value)}_compact(){if(this._map.size>this._max){const t=this._list.pop();this._map.delete(t.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this._remove(t),this.unshift(t))}pop(){return this._remove(this.tail)}_remove(t){const{next:e,prev:n}=t;return e.prev=n,n&&(n.next=e),t===this.tail&&(this.tail=e),t.prev=null,t.next=null,t}}},8160:(t,e,n)=>{"use strict";const r=n(375),i=n(7916),o=n(5934);let s,a;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=o.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},e.assertOptions=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";r(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const i=Object.keys(t).filter((t=>!e.includes(t)));r(0===i.length,"".concat(n," contain unknown keys: ").concat(i))},e.checkPreferences=function(t){a=a||n(3378);const e=a.preferences.validate(t);if(e.error)throw new i([e.error.details[0].message])},e.compare=function(t,e,n){switch(n){case"=":return t===e;case">":return t>e;case"<":return t<e;case">=":return t>=e;case"<=":return t<=e}},e.default=function(t,e){return void 0===t?e:t},e.isIsoDate=function(t){return l.isoDate.test(t)},e.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t&&t[e.symbols.any];return!!i&&(r(n.legacy||i.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(t){return Number.isSafeInteger(t)&&t>=0},e.preferences=function(t,r){s=s||n(6914),t=t||{},r=r||{};const i=Object.assign({},t,r);return r.errors&&t.errors&&(i.errors=Object.assign({},t.errors,r.errors),i.errors.wrap=Object.assign({},t.errors.wrap,r.errors.wrap)),r.messages&&(i.messages=s.compile(r.messages,t.messages)),delete i[e.symbols.prefs],i},e.tryWithPath=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return t()}catch(t){throw void 0!==t.path?t.path=e+"."+t.path:t.path=e,n.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},e.validateArg=function(t,n,r){let{assert:i,message:o}=r;if(e.isSchema(i)){const e=i.validate(t);if(!e.error)return;return e.error.message}if(!i(t))return n?"".concat(n," ").concat(o):o},e.verifyFlat=function(t,e){for(const n of t)r(!Array.isArray(n),"Method no longer accepts array arguments:",e)}},3292:(t,e,n)=>{"use strict";const r=n(375),i=n(8160),o=n(6133),s={};e.schema=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.assertOptions(n,["appendPath","override"]);try{return s.schema(t,e,n)}catch(t){throw n.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},s.schema=function(t,e,n){r(void 0!==e,"Invalid undefined schema"),Array.isArray(e)&&(r(e.length,"Invalid empty array schema"),1===e.length&&(e=e[0]));const o=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return!1!==n.override?e.valid(t.override,...i):e.valid(...i)};if(s.simple(e))return o(t,e);if("function"==typeof e)return t.custom(e);if(r("object"==typeof e,"Invalid schema content:",typeof e),i.isResolvable(e))return o(t,e);if(i.isSchema(e))return e;if(Array.isArray(e)){for(const n of e)if(!s.simple(n))return t.alternatives().try(...e);return o(t,...e)}return e instanceof RegExp?t.string().regex(e):e instanceof Date?o(t.date(),e):(r(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(e))},e.ref=function(t,e){return o.isRef(t)?t:o.create(t,e)},e.compile=function(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.assertOptions(o,["legacy"]);const a=n&&n[i.symbols.any];if(a)return r(o.legacy||a.version===i.version,"Cannot mix different versions of joi schemas:",a.version,i.version),n;if("object"!=typeof n||!o.legacy)return e.schema(t,n,{appendPath:!0});const l=s.walk(n);return l?l.compile(l.root,n):e.schema(t,n,{appendPath:!0})},s.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const e of t){const t=s.walk(e);if(t)return t}return null}const e=t[i.symbols.any];if(e)return{root:t[e.root],compile:e.compile};r(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const n in t){const e=s.walk(t[n]);if(e)return e}return null},s.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},e.when=function(t,n,a){if(void 0===a&&(r(n&&"object"==typeof n,"Missing options"),a=n,n=o.create(".")),Array.isArray(a)&&(a={switch:a}),i.assertOptions(a,["is","not","then","otherwise","switch","break"]),i.isSchema(n))return r(void 0===a.is,'"is" can not be used with a schema condition'),r(void 0===a.not,'"not" can not be used with a schema condition'),r(void 0===a.switch,'"switch" can not be used with a schema condition'),s.condition(t,{is:n,then:a.then,otherwise:a.otherwise,break:a.break});if(r(o.isRef(n)||"string"==typeof n,"Invalid condition:",n),r(void 0===a.not||void 0===a.is,'Cannot combine "is" with "not"'),void 0===a.switch){let l=a;void 0!==a.not&&(l={is:a.not,then:a.otherwise,otherwise:a.then,break:a.break});let u=void 0!==l.is?t.$_compile(l.is):t.$_root.invalid(null,!1,0,"").required();return r(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),r(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===a.is||o.isRef(a.is)||i.isSchema(a.is)||(u=u.required()),s.condition(t,{ref:e.ref(n),is:u,then:l.then,otherwise:l.otherwise,break:l.break})}r(Array.isArray(a.switch),'"switch" must be an array'),r(void 0===a.is,'Cannot combine "switch" with "is"'),r(void 0===a.not,'Cannot combine "switch" with "not"'),r(void 0===a.then,'Cannot combine "switch" with "then"');const l={ref:e.ref(n),switch:[],break:a.break};for(let e=0;e<a.switch.length;++e){const n=a.switch[e],s=e===a.switch.length-1;i.assertOptions(n,s?["is","then","otherwise"]:["is","then"]),r(void 0!==n.is,'Switch statement missing "is"'),r(void 0!==n.then,'Switch statement missing "then"');const u={is:t.$_compile(n.is),then:t.$_compile(n.then)};if(o.isRef(n.is)||i.isSchema(n.is)||(u.is=u.is.required()),s){r(void 0===a.otherwise||void 0===n.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==a.otherwise?a.otherwise:n.otherwise;void 0!==e&&(r(void 0===l.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(e))}l.switch.push(u)}return l},s.condition=function(t,e){for(const n of["then","otherwise"])void 0===e[n]?delete e[n]:e[n]=t.$_compile(e[n]);return e}},6354:(t,e,n)=>{"use strict";const r=n(5688),i=n(8160),o=n(3328);e.Report=class{constructor(t,n,r,i,o,s,a){if(this.code=t,this.flags=i,this.messages=o,this.path=s.path,this.prefs=a,this.state=s,this.value=n,this.message=null,this.template=null,this.local=r||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}_setTemplate(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this._template(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const e=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===e?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(t,n){return e.template(this.value,t,n||this.code,this.state,this.prefs)}},e.path=function(t){let e="";for(const n of t)"object"!=typeof n&&("string"==typeof n?(e&&(e+="."),e+=n):e+="[".concat(n,"]"));return e},e.template=function(t,e,n,r,s){if(!e)return;if(o.isTemplate(e))return"root"!==n?e:null;let a=s.errors.language;if(i.isResolvable(a)&&(a=a.resolve(t,r,s)),a&&e[a]){if(void 0!==e[a][n])return e[a][n];if(void 0!==e[a]["*"])return e[a]["*"]}return e[n]?e[n]:e["*"]},e.label=function(t,n,r,i){if(t.label)return t.label;if(!r.errors.label)return"";let o=n.path;return"key"===r.errors.label&&n.path.length>1&&(o=n.path.slice(-1)),e.path(o)||e.template(null,r.messages,"root",n,r)||i&&e.template(null,i,"root",n,r)||"value"},e.process=function(t,n,r){if(!t)return null;const{override:i,message:o,details:s}=e.details(t);if(i)return i;if(r.errors.stack)return new e.ValidationError(o,s,n);const a=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new e.ValidationError(o,s,n);return Error.stackTraceLimit=a,l},e.details=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];const r=[];for(const i of t){if(i instanceof Error){if(!1!==e.override)return{override:i};const t=i.toString();n.push(t),r.push({message:t,type:"override",context:{error:i}});continue}const t=i.toString();n.push(t),r.push({message:t,path:i.path.filter((t=>"object"!=typeof t)),type:i.code,context:i.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:r}},e.ValidationError=class extends Error{constructor(t,e,n){super(t),this._original=n,this.details=e}static isError(t){return t instanceof e.ValidationError}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=r.error},8901:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(8160),s=n(6914),a={};e.type=function(t,e){const n=Object.getPrototypeOf(t),l=i(n),u=t._assign(Object.create(l)),c=Object.assign({},e);delete c.base,l._definition=c;const h=n._definition||{};c.messages=s.merge(h.messages,c.messages),c.properties=Object.assign({},h.properties,c.properties),u.type=c.type,c.flags=Object.assign({},h.flags,c.flags);const p=Object.assign({},h.terms);if(c.terms)for(const i in c.terms){const t=c.terms[i];r(void 0===u.$_terms[i],"Invalid term override for",c.type,i),u.$_terms[i]=t.init,p[i]=t}c.terms=p,c.args||(c.args=h.args),c.prepare=a.prepare(c.prepare,h.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=a.coerce(c.coerce,h.coerce),c.validate=a.validate(c.validate,h.validate);const f=Object.assign({},h.rules);if(c.rules)for(const i in c.rules){const t=c.rules[i];r("object"==typeof t,"Invalid rule definition for",c.type,i);let e=t.method;if(void 0===e&&(e=function(){return this.$_addRule(i)}),e&&(r(!l[i],"Rule conflict in",c.type,i),l[i]=e),r(!f[i],"Rule conflict in",c.type,i),f[i]=t,t.alias){const e=[].concat(t.alias);for(const n of e)l[n]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),r(!t.argsByName.has(e.name),"Duplicated argument name",e.name),o.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}c.rules=f;const d=Object.assign({},h.modifiers);if(c.modifiers)for(const i in c.modifiers){r(!l[i],"Rule conflict in",c.type,i);const t=c.modifiers[i];r("function"==typeof t,"Invalid modifier definition for",c.type,i);const e=function(t){return this.rule({[i]:t})};l[i]=e,d[i]=t}if(c.modifiers=d,c.overrides){l._super=n,u.$_super={};for(const t in c.overrides)r(n[t],"Cannot override missing",t),c.overrides[t][o.symbols.parent]=n[t],u.$_super[t]=n[t].bind(u);Object.assign(l,c.overrides)}c.cast=Object.assign({},h.cast,c.cast);const m=Object.assign({},h.manifest,c.manifest);return m.build=a.build(c.manifest&&c.manifest.build,h.manifest&&h.manifest.build),c.manifest=m,c.rebuild=a.rebuild(c.rebuild,h.rebuild),u},a.build=function(t,e){return t&&e?function(n,r){return e(t(n,r),r)}:t||e},a.coerce=function(t,e){return t&&e?{from:t.from&&e.from?[...new Set([...t.from,...e.from])]:null,method(n,r){let i;if((!e.from||e.from.includes(typeof n))&&(i=e.method(n,r),i)){if(i.errors||void 0===i.value)return i;n=i.value}if(!t.from||t.from.includes(typeof n)){const e=t.method(n,r);if(e)return e}return i}}:t||e},a.prepare=function(t,e){return t&&e?function(n,r){const i=t(n,r);if(i){if(i.errors||void 0===i.value)return i;n=i.value}return e(n,r)||i}:t||e},a.rebuild=function(t,e){return t&&e?function(n){e(n),t(n)}:t||e},a.validate=function(t,e){return t&&e?function(n,r){const i=e(n,r);if(i){if(i.errors&&(!Array.isArray(i.errors)||i.errors.length))return i;n=i.value}return t(n,r)||i}:t||e}},5107:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(8652),s=n(8160),a=n(3292),l=n(6354),u=n(8901),c=n(9708),h=n(6133),p=n(3328),f=n(1152);let d;const m={types:{alternatives:n(4946),any:n(8068),array:n(546),boolean:n(4937),date:n(7500),function:n(390),link:n(8785),number:n(3832),object:n(8966),string:n(7417),symbol:n(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={_types:new Set(Object.keys(m.types))};for(const e of t._types)t[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(!n.length||["alternatives","link","object"].includes(e),"The",e,"type does not allow arguments"),m.generate(this,m.types[e],n)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(){return this.any()[e](...arguments)};Object.assign(t,m.methods);for(const e in m.aliases){const n=m.aliases[e];t[e]=t[n]}return t.x=t.expression,f.setup&&f.setup(t),t}};m.methods={ValidationError:l.ValidationError,version:s.version,cache:o.provider,assert(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];m.assert(t,e,!0,r)},attempt(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return m.assert(t,e,!1,r)},build(t){return r("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){s.checkPreferences(t)},compile(t,e){return a.compile(this,t,e)},defaults(t){r("function"==typeof t,"modifier must be a function");const e=Object.assign({},this);for(const n of e._types){const i=t(e[n]());r(s.isSchema(i),"modifier must return a valid schema object"),e[n]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.generate(this,i,e)}}return e},expression(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new p(...e)},extend(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s.verifyFlat(e,"extend"),d=d||n(3378),r(e.length,"You need to provide at least one extension"),this.assert(e,d.extensions);const o=Object.assign({},this);o._types=new Set(o._types);for(let n of e){"function"==typeof n&&(n=n(o)),this.assert(n,d.extension);const t=m.expandExtension(n,o);for(const e of t){r(void 0===o[e.type]||o._types.has(e.type),"Cannot override name",e.type);const t=e.base||this.any(),n=u.type(t,e);o._types.add(e.type),o[e.type]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return m.generate(this,n,e)}}}return o},isError:l.ValidationError.isError,isExpression:p.isTemplate,isRef:h.isRef,isSchema:s.isSchema,in(){return h.in(...arguments)},override:s.symbols.override,ref(){return h.create(...arguments)},types(){const t={};for(const e of this._types)t[e]=this[e]();for(const e in m.aliases)t[e]=this[e]();return t}},m.assert=function(t,e,n,r){const o=r[0]instanceof Error||"string"==typeof r[0]?r[0]:null,a=null!==o?r[1]:r[0],u=e.validate(t,s.preferences({errors:{stack:!0}},a||{}));let c=u.error;if(!c)return u.value;if(o instanceof Error)throw o;const h=n&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof l.ValidationError==0&&(c=i(c)),c.message=o?"".concat(o," ").concat(h):h,c},m.generate=function(t,e,n){return r(t,"Must be invoked on a Joi instance."),e.$_root=t,e._definition.args&&n.length?e._definition.args(e,...n):e},m.expandExtension=function(t,e){if("string"==typeof t.type)return[t];const n=[];for(const r of e._types)if(t.type.test(r)){const i=Object.assign({},t);i.type=r,i.base=e[r](),n.push(i)}return n},t.exports=m.root()},6914:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(3328);e.compile=function(t,e){if("string"==typeof t)return r(!e,"Cannot set single message string"),new o(t);if(o.isTemplate(t))return r(!e,"Cannot set single message template"),t;r("object"==typeof t&&!Array.isArray(t),"Invalid message options"),e=e?i(e):{};for(let n in t){const i=t[n];if("root"===n||o.isTemplate(i)){e[n]=i;continue}if("string"==typeof i){e[n]=new o(i);continue}r("object"==typeof i&&!Array.isArray(i),"Invalid message for",n);const s=n;for(n in e[s]=e[s]||{},i){const t=i[n];"root"===n||o.isTemplate(t)?e[s][n]=t:(r("string"==typeof t,"Invalid message for",n,"in",s),e[s][n]=new o(t))}}return e},e.decompile=function(t){const e={};for(let n in t){const r=t[n];if("root"===n){e.root=r;continue}if(o.isTemplate(r)){e[n]=r.describe({compact:!0});continue}const i=n;for(n in e[i]={},r){const t=r[n];"root"!==n?e[i][n]=t.describe({compact:!0}):e[i].root=t}}return e},e.merge=function(t,n){if(!t)return e.compile(n);if(!n)return t;if("string"==typeof n)return new o(n);if(o.isTemplate(n))return n;const s=i(t);for(let e in n){const t=n[e];if("root"===e||o.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new o(t);continue}r("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const i=e;for(e in s[i]=s[i]||{},t){const n=t[e];"root"===e||o.isTemplate(n)?s[i][e]=n:(r("string"==typeof n,"Invalid message for",e,"in",i),s[i][e]=new o(n))}}return s}},2294:(t,e,n)=>{"use strict";const r=n(375),i=n(8160),o=n(6133),s={};e.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const t=new s.Ids;return t._byId=new Map(this._byId),t._byKey=new Map(this._byKey),t._schemaChain=this._schemaChain,t}concat(t){t._schemaChain&&(this._schemaChain=!0);for(const[e,n]of t._byId.entries())r(!this._byKey.has(e),"Schema id conflicts with existing key:",e),this._byId.set(e,n);for(const[e,n]of t._byKey.entries())r(!this._byId.has(e),"Schema key conflicts with existing id:",e),this._byKey.set(e,n)}fork(t,e,n){const o=this._collect(t);o.push({schema:n});const a=o.shift();let l={id:a.id,schema:e(a.schema)};r(i.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const r of o)l={id:r.id,schema:s.fork(r.schema,l.id,l.schema)};return l.schema}labels(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=t[0],r=this._get(n);if(!r)return[...e,...t].join(".");const i=t.slice(1);return e=[...e,r.schema._flags.label||n],i.length?r.schema._ids.labels(i,e):e.join(".")}reach(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=t[0],i=this._get(n);r(i,"Schema does not contain path",[...e,...t].join("."));const o=t.slice(1);return o.length?i.schema._ids.reach(o,[...e,n]):i.schema}register(t){let{key:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!i.isSchema(t))return;(t.$_property("schemaChain")||t._ids._schemaChain)&&(this._schemaChain=!0);const n=t._flags.id;if(n){const e=this._byId.get(n);r(!e||e.schema===t,"Cannot add different schemas with the same id:",n),r(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,{schema:t,id:n})}e&&(r(!this._byKey.has(e),"Schema already contains key:",e),r(!this._byId.has(e),"Schema key conflicts with existing id:",e),this._byKey.set(e,{schema:t,id:e}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const i=t[0],o=this._get(i);r(o,"Schema does not contain path",[...e,...t].join(".")),n=[o,...n];const s=t.slice(1);return s.length?o.schema._ids._collect(s,[...e,i],n):n}_get(t){return this._byId.get(t)||this._byKey.get(t)}},s.fork=function(t,n,r){const i=e.schema(t,{each:(t,e)=>{let{key:i}=e;if(n===(t._flags.id||i))return r},ref:!1});return i?i.$_mutateRebuild():t},e.schema=function(t,e){let n;for(const r in t._flags){if("_"===r[0])continue;const i=s.scan(t._flags[r],{source:"flags",name:r},e);void 0!==i&&(n=n||t.clone(),n._flags[r]=i)}for(let r=0;r<t._rules.length;++r){const i=t._rules[r],o=s.scan(i.args,{source:"rules",name:i.name},e);if(void 0!==o){n=n||t.clone();const e=Object.assign({},i);e.args=o,n._rules[r]=e,n._singleRules.get(i.name)===i&&n._singleRules.set(i.name,e)}}for(const r in t.$_terms){if("_"===r[0])continue;const i=s.scan(t.$_terms[r],{source:"terms",name:r},e);void 0!==i&&(n=n||t.clone(),n.$_terms[r]=i)}return n},s.scan=function(t,e,n,r,a){const l=r||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let r=0;r<t.length;++r){const i="terms"===e.source&&"keys"===e.name&&t[r].key,o=s.scan(t[r],e,n,[r,...l],i);void 0!==o&&(u=u||t.slice(),u[r]=o)}return u}if(!1!==n.schema&&i.isSchema(t)||!1!==n.ref&&o.isRef(t)){const r=n.each(t,{...e,path:l,key:a});if(r===t)return;return r}for(const i in t){if("_"===i[0])continue;const r=s.scan(t[i],e,n,[i,...l],a);void 0!==r&&(u=u||Object.assign({},t),u[i]=r)}return u}},6133:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(9621),s=n(8160);let a;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r("string"==typeof t,"Invalid reference key:",t),s.assertOptions(e,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),r(!e.prefix||"object"==typeof e.prefix,"options.prefix must be of type object");const n=Object.assign({},l.defaults,e);delete n.prefix;const i=n.separator,o=l.context(t,i,e.prefix);if(n.type=o.type,t=o.key,"value"===n.type)if(o.root&&(r(!i||t[0]!==i,"Cannot specify relative path with root prefix"),n.ancestor="root",t||(t=null)),i&&i===t)t=null,n.ancestor=0;else if(void 0!==n.ancestor)r(!i||!t||t[0]!==i,"Cannot combine prefix with ancestor option");else{const[e,r]=l.ancestor(t,i);r&&""===(t=t.slice(r))&&(t=null),n.ancestor=e}return n.path=i?null===t?[]:t.split(i):[t],new l.Ref(n)},e.in=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.create(t,{...n,in:!0})},e.isRef=function(t){return!!t&&!!t[s.symbols.ref]},l.Ref=class{constructor(t){r("object"==typeof t,"Invalid reference construction"),s.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),r([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),r(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),r(!t.map||Array.isArray(t.map),"options.map must be an array"),r(!t.map||!t.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,t),r("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(t,e,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return r(!this.in||o.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(n.context,e,o):"local"===this.type?this._resolve(i,e,o):this.ancestor?"root"===this.ancestor?this._resolve(e.ancestors[e.ancestors.length-1],e,o):(r(this.ancestor<=e.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(e.ancestors[this.ancestor-1],e,o)):this._resolve(t,e,o)}_resolve(t,e,n){let r;if("value"===this.type&&e.mainstay.shadow&&!1!==n.shadow&&(r=e.mainstay.shadow.get(this.absolute(e))),void 0===r&&(r=o(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(r=this.adjust(r)),this.map){const t=this.map.get(r);void 0!==t&&(r=t)}return e.mainstay&&e.mainstay.tracer.resolve(e,this,r),r}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const e of["adjust","iterables","render"])null!==this[e]&&void 0!==this[e]&&(t[e]=this[e]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const e=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(e).concat(t||"")}},l.Ref.prototype[s.symbols.ref]=!0,e.build=function(t){return"value"===(t=Object.assign({},l.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new l.Ref(t)},l.context=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=t.trim(),n){const r=void 0===n.global?"$":n.global;if(r!==e&&t.startsWith(r))return{key:t.slice(r.length),type:"global"};const i=void 0===n.local?"#":n.local;if(i!==e&&t.startsWith(i))return{key:t.slice(i.length),type:"local"};const o=void 0===n.root?"/":n.root;if(o!==e&&t.startsWith(o))return{key:t.slice(o.length),type:"value",root:!0}}return{key:t,type:"value"}},l.ancestor=function(t,e){if(!e)return[1,0];if(t[0]!==e)return[1,0];if(t[1]!==e)return[0,1];let n=2;for(;t[n]===e;)++n;return[n-1,n]},e.toSibling=0,e.toParent=1,e.Manager=class{constructor(){this.refs=[]}register(t,r){if(t)if(r=void 0===r?e.toParent:r,Array.isArray(t))for(const e of t)this.register(e,r);else if(s.isSchema(t))for(const e of t._refs.refs)e.ancestor-r>=0&&this.refs.push({ancestor:e.ancestor-r,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-r>=0&&this.refs.push({ancestor:t.ancestor-r,root:t.root}),a=a||n(3328),a.isTemplate(t)&&this.register(t.refs(),r)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=i(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}}},3378:(t,e,n)=>{"use strict";const r=n(5107),i={};i.wrap=r.string().min(1).max(2).allow(!1),e.preferences=r.object({allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),context:r.object(),convert:r.boolean(),dateFormat:r.valid("date","iso","string","time","utc"),debug:r.boolean(),errors:{escapeHtml:r.boolean(),label:r.valid("path","key",!1),language:[r.string(),r.object().ref()],render:r.boolean(),stack:r.boolean(),wrap:{label:i.wrap,array:i.wrap,string:i.wrap}},externals:r.boolean(),messages:r.object(),noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:r.valid("required","optional","forbidden"),skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()}).strict(),i.nameRx=/^[a-zA-Z0-9]\w*$/,i.rule=r.object({alias:r.array().items(r.string().pattern(i.nameRx)).single(),args:r.array().items(r.string(),r.object({name:r.string().pattern(i.nameRx).required(),ref:r.boolean(),assert:r.alternatives([r.function(),r.object().schema()]).conditional("ref",{is:!0,then:r.required()}),normalize:r.function(),message:r.string().when("assert",{is:r.function(),then:r.required()})})),convert:r.boolean(),manifest:r.boolean(),method:r.function().allow(!1),multi:r.boolean(),validate:r.function()}),e.extension=r.object({type:r.alternatives([r.string(),r.object().regex()]).required(),args:r.function(),cast:r.object().pattern(i.nameRx,r.object({from:r.function().maxArity(1).required(),to:r.function().minArity(1).maxArity(2).required()})),base:r.object().schema().when("type",{is:r.object().regex(),then:r.forbidden()}),coerce:[r.function().maxArity(3),r.object({method:r.function().maxArity(3).required(),from:r.array().items(r.string()).single()})],flags:r.object().pattern(i.nameRx,r.object({setter:r.string(),default:r.any()})),manifest:{build:r.function().arity(2)},messages:[r.object(),r.string()],modifiers:r.object().pattern(i.nameRx,r.function().minArity(1).maxArity(2)),overrides:r.object().pattern(i.nameRx,r.function()),prepare:r.function().maxArity(3),rebuild:r.function().arity(1),rules:r.object().pattern(i.nameRx,i.rule),terms:r.object().pattern(i.nameRx,r.object({init:r.array().allow(null).required(),manifest:r.object().pattern(/.+/,[r.valid("schema","single"),r.object({mapped:r.object({from:r.string().required(),to:r.string().required()}).required()})])})),validate:r.function().maxArity(3)}).strict(),e.extensions=r.array().items(r.object(),r.function().arity(1)).strict(),i.desc={buffer:r.object({buffer:r.string()}),func:r.object({function:r.function().required(),options:{literal:!0}}),override:r.object({override:!0}),ref:r.object({ref:r.object({type:r.valid("value","global","local"),path:r.array().required(),separator:r.string().length(1).allow(!1),ancestor:r.number().min(0).integer().allow("root"),map:r.array().items(r.array().length(2)).min(1),adjust:r.function(),iterables:r.boolean(),in:r.boolean(),render:r.boolean()}).required()}),regex:r.object({regex:r.string().min(3)}),special:r.object({special:r.valid("deep").required()}),template:r.object({template:r.string().required(),options:r.object()}),value:r.object({value:r.alternatives([r.object(),r.array()]).required()})},i.desc.entity=r.alternatives([r.array().items(r.link("...")),r.boolean(),r.function(),r.number(),r.string(),i.desc.buffer,i.desc.func,i.desc.ref,i.desc.regex,i.desc.special,i.desc.template,i.desc.value,r.link("/")]),i.desc.values=r.array().items(null,r.boolean(),r.function(),r.number().allow(1/0,-1/0),r.string().allow(""),r.symbol(),i.desc.buffer,i.desc.func,i.desc.override,i.desc.ref,i.desc.regex,i.desc.template,i.desc.value),i.desc.messages=r.object().pattern(/.+/,[r.string(),i.desc.template,r.object().pattern(/.+/,[r.string(),i.desc.template])]),e.description=r.object({type:r.string().required(),flags:r.object({cast:r.string(),default:r.any(),description:r.string(),empty:r.link("/"),failover:i.desc.entity,id:r.string(),label:r.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:r.boolean(),unit:r.string()}).unknown(),preferences:{allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),convert:r.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:r.boolean(),label:["path","key"],language:[r.string(),i.desc.ref],wrap:{label:i.wrap,array:i.wrap}},externals:r.boolean(),messages:i.desc.messages,noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:["required","optional","forbidden"],skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()},allow:i.desc.values,invalid:i.desc.values,rules:r.array().min(1).items({name:r.string().required(),args:r.object().min(1),keep:r.boolean(),message:[r.string(),i.desc.messages],warn:r.boolean()}),keys:r.object().pattern(/.*/,r.link("/")),link:i.desc.ref}).pattern(/^[a-z]\w*$/,r.any())},493:(t,e,n)=>{"use strict";const r=n(8571),i=n(9621),o=n(8160),s={value:Symbol("value")};t.exports=s.State=class{constructor(t,e,n){this.path=t,this.ancestors=e,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=new s.State(t,e,this);return n&&r.schemas&&(r.schemas=[s.schemas(n),...r.schemas]),r}nest(t,e){const n=new s.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[s.schemas(t),...n.schemas],n.debug=e,n}shadow(t,e){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,t,e)}snapshot(){this.mainstay.shadow&&(this._snapshot=r(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(t){return o.isSchema(t)?{schema:t}:t},s.Shadow=class{constructor(){this._values=null}set(t,e,n){if(!t.length)return;if("strip"===n&&"number"==typeof t[t.length-1])return;this._values=this._values||new Map;let r=this._values;for(let i=0;i<t.length;++i){const e=t[i];let n=r.get(e);n||(n=new Map,r.set(e,n)),r=n}r[s.value]=e}get(t){const e=this.node(t);if(e)return e[s.value]}node(t){if(this._values)return i(this._values,t,{iterables:!0})}override(t,e){if(!this._values)return;const n=t.slice(0,-1),r=t[t.length-1],o=i(this._values,n,{iterables:!0});e?o.set(r,e):o&&o.delete(r)}}},3328:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(5277),s=n(1447),a=n(8160),l=n(6354),u=n(6133),c={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{constructor(t,e){if(r("string"==typeof t,"Template source must be a string"),r(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this._template=null,e){const{functions:t,...n}=e;this._settings=Object.keys(n).length?i(n):void 0,this._functions=t,this._functions&&(r(Object.keys(this._functions).every((t=>"string"==typeof t)),"Functions keys must be strings"),r(Object.values(this._functions).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const t=c.encode(this.source),e=c.split(t);let n=!1;const r=[],i=e.shift();i&&r.push(i);for(const o of e){const t="{"!==o[0],e=t?"}":"}}",i=o.indexOf(e);if(-1===i||"{"===o[1]){r.push("{".concat(c.decode(o)));continue}let s=o.slice(t?0:1,i);const a=":"===s[0];a&&(s=s.slice(1));const l=this._ref(c.decode(s),{raw:t,wrapped:a});r.push(l),"string"!=typeof l&&(n=!0);const u=o.slice(i+e.length);u&&r.push(c.decode(u))}n?this._template=r:this.rendered=r.join("")}static date(t,e){return c.dateFormat[e.dateFormat].call(t)}describe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&t.compact)return this.source;const e={template:this.source};return this._settings&&(e.options=this._settings),this._functions&&(e.functions=this._functions),e}static build(t){return new c.Template(t.template,t.options||t.functions?{...t.options,functions:t.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(t){return!!t&&!!t[a.symbols.template]}refs(){if(!this._template)return;const t=[];for(const e of this._template)"string"!=typeof e&&t.push(...e.refs);return t}resolve(t,e,n,r){return this._template&&1===this._template.length?this._part(this._template[0],t,e,n,r,{}):this.render(t,e,n,r)}_part(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.ref?t.ref.resolve(...n):t.formula.evaluate(n)}render(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;const s=[];for(const a of this._template)if("string"==typeof a)s.push(a);else{const l=this._part(a,t,e,n,r,i),u=c.stringify(l,t,e,n,r,i);if(void 0!==u){const t=a.raw||!1===(i.errors&&i.errors.escapeHtml)?u:o(u);s.push(c.wrap(t,a.wrapped&&n.errors.wrap.label))}}return s.join("")}_ref(t,e){let{raw:n,wrapped:r}=e;const i=[],o=t=>{const e=u.create(t,this._settings);return i.push(e),t=>{const n=e.resolve(...t);return void 0!==n?n:null}};try{const e=this._functions?{...c.functions,...this._functions}:c.functions;var a=new s.Parser(t,{reference:o,functions:e,constants:c.constants})}catch(e){throw e.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(e.message),e}if(a.single){if("reference"===a.single.type){const t=i[0];return{ref:t,raw:n,refs:i,wrapped:r||"local"===t.type&&"label"===t.key}}return c.stringify(a.single.value)}return{formula:a,raw:n,refs:i}}toString(){return this.source}},c.Template.prototype[a.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,e)=>c.opens.slice(0,e.length))).replace(/\\(\}+)/g,((t,e)=>c.closes.slice(0,e.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const e=[];let n="";for(let r=0;r<t.length;++r){const i=t[r];if("{"===i){let i="";for(;r+1<t.length&&"{"===t[r+1];)i+="{",++r;e.push(n),n=i}else n+=i}return e.push(n),e},c.wrap=function(t,e){return e?1===e.length?"".concat(e).concat(t).concat(e):"".concat(e[0]).concat(t).concat(e[1]):t},c.stringify=function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=typeof t,a=r&&r.errors&&r.errors.wrap||{};let l=!1;if(u.isRef(t)&&t.render&&(l=t.in,t=t.resolve(e,n,r,i,{in:t.in,...o})),null===t)return"null";if("string"===s)return c.wrap(t,o.arrayItems&&a.string);if("number"===s||"function"===s||"symbol"===s)return t.toString();if("object"!==s)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,r);if(t instanceof Map){const e=[];for(const[n,r]of t.entries())e.push("".concat(n.toString()," -> ").concat(r.toString()));t=e}if(!Array.isArray(t))return t.toString();const h=[];for(const u of t)h.push(c.stringify(u,e,n,r,i,{arrayItems:!0,...o}));return c.wrap(h.join(", "),!l&&a.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,e,n)=>t?e:n,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:Object.keys(t).length:null,msg(t){const[e,n,r,i,o]=this,s=o.messages;if(!s)return"";const a=l.template(e,s[0],t,n,r)||l.template(e,s[1],t,n,r);return a?a.render(e,n,r,i,o):""},number:t=>"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,e,n)=>{"use strict";const r=n(375),i=n(1687),o=n(8068),s=n(8160),a=n(3292),l=n(6354),u=n(6133),c={};t.exports=o.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 1===n.length&&Array.isArray(n[0])?t.try(...n[0]):t.try(...n)},validate(t,e){const{schema:n,error:r,state:o,prefs:s}=e;if(n._flags.match){const e=[],a=[];for(let r=0;r<n.$_terms.matches.length;++r){const i=n.$_terms.matches[r],l=o.nest(i.schema,"match.".concat(r));l.snapshot();const u=i.schema.$_validate(t,l,s);u.errors?(a.push(u.errors),l.restore()):(e.push(u.value),l.commit())}if(0===e.length)return{errors:r("alternatives.any",{details:a.map((t=>l.details(t,{override:!1})))})};if("one"===n._flags.match)return 1===e.length?{value:e[0]}:{errors:r("alternatives.one")};if(e.length!==n.$_terms.matches.length)return{errors:r("alternatives.all",{details:a.map((t=>l.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(n)?{value:e.reduce(((t,e)=>i(t,e,{mergeArrays:!1})))}:{value:e[e.length-1]}}const a=[];for(let i=0;i<n.$_terms.matches.length;++i){const e=n.$_terms.matches[i];if(e.schema){const n=o.nest(e.schema,"match.".concat(i));n.snapshot();const r=e.schema.$_validate(t,n,s);if(!r.errors)return n.commit(),r;n.restore(),a.push({schema:e.schema,reports:r.errors});continue}const r=e.ref?e.ref.resolve(t,o,s):t,l=e.is?[e]:e.switch;for(let n=0;n<l.length;++n){const a=l[n],{is:u,then:c,otherwise:h}=a,p="match.".concat(i).concat(e.switch?"."+n:"");if(u.$_match(r,o.nest(u,"".concat(p,".is")),s)){if(c)return c.$_validate(t,o.nest(c,"".concat(p,".then")),s)}else if(h)return h.$_validate(t,o.nest(h,"".concat(p,".otherwise")),s)}}return c.errors(a,e)},rules:{conditional:{method(t,e){r(!this._flags._endedSwitch,"Unreachable condition"),r(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),r(void 0===e.break,"Cannot use break option with alternatives conditional");const n=this.clone(),i=a.when(n,t,e),o=i.is?[i]:i.switch;for(const r of o)if(r.then&&r.otherwise){n.$_setFlag("_endedSwitch",!0,{clone:!1});break}return n.$_terms.matches.push(i),n.$_mutateRebuild()}},match:{method(t){if(r(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const e of this.$_terms.matches)r(e.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r(e.length,"Missing alternative schemas"),s.verifyFlat(e,"try"),r(!this._flags._endedSwitch,"Unreachable condition");const i=this.clone();for(const r of e)i.$_terms.matches.push({schema:i.$_compile(r)});return i.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(e,n)=>"is"!==n.path[0]?e.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:e=>{s.isSchema(e)&&"array"===e.type&&t.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(t,e){if(e.matches)for(const n of e.matches){const{schema:e,ref:r,is:i,not:o,then:s,otherwise:a}=n;t=e?t.try(e):r?t.conditional(r,{is:i,then:s,not:o,otherwise:a,switch:n.switch}):t.conditional(i,{then:s,otherwise:a})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,e){let{error:n,state:r}=e;if(!t.length)return{errors:n("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const i=new Set,o=[];for(const{reports:s,schema:a}of t){if(s.length>1)return c.unmatched(t,n);const e=s[0];if(e instanceof l.Report==0)return c.unmatched(t,n);if(e.state.path.length!==r.path.length){o.push({type:a.type,report:e});continue}if("any.only"===e.code){for(const t of e.local.valids)i.add(t);continue}const[u,h]=e.code.split(".");"base"===h?i.add(u):o.push({type:a.type,report:e})}return o.length?1===o.length?{errors:o[0].report}:c.unmatched(t,n):{errors:n("alternatives.types",{types:[...i]})}},c.unmatched=function(t,e){const n=[];for(const r of t)n.push(...r.reports);return{errors:e("alternatives.match",l.details(n,{override:!1}))}}},8068:(t,e,n)=>{"use strict";const r=n(375),i=n(7629),o=n(8160),s=n(6914);t.exports=i.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,e){return r("function"==typeof t,"Method must be a function"),r(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:e}})},validate(t,e,n){let{method:r}=n;try{return r(t,e)}catch(t){return e.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){r(o.isSchema(t)&&t._flags.id,"Schema must be a schema with an id");const e=this.clone();return e.$_terms.shared=e.$_terms.shared||[],e.$_terms.shared.push(t),e.$_mutateRegister(t),e}},warning:{method(t,e){return r(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:e},warn:!0})},validate(t,e,n){let{code:r,local:i}=n;return e.error(r,i)},args:["code","local"],multi:!0}},modifiers:{keep(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.keep=e},message(t,e){t.message=s.compile(e)},warn(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.warn=e}},manifest:{build(t,e){for(const n in e){const r=e[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const e of r)t=t[n.slice(0,-1)](e);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const e of r)t=t.shared(e)}else for(const e of r){const{ref:n,is:r,not:i,then:o,otherwise:s,concat:a}=e;t=a?t.concat(a):n?t.when(n,{is:r,not:i,then:o,otherwise:s,switch:e.switch,break:e.break}):t.when(r,{then:o,otherwise:s,break:e.break})}else{const e={};for(const{target:t,adjuster:n}of r)e[t]=n;t=t.alter(e)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,e,n)=>{"use strict";const r=n(375),i=n(9474),o=n(9621),s=n(8068),a=n(8160),l=n(3292),u={};t.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(t,e){let{schema:n,state:r,prefs:i}=e;if(!Array.isArray(t))return;const o=n.$_getRule("sort");return o?u.sort(n,t,o.args.options,r,i):void 0}},validate(t,e){let{schema:n,error:r}=e;if(!Array.isArray(t)){if(n._flags.single){const e=[t];return e[a.symbols.arraySingle]=!0,{value:e}}return{errors:r("array.base")}}if(n.$_getRule("items")||n.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const e=this.$_addRule({name:"has",args:{schema:t}});return e.$_mutateRegister(t),e},validate(t,e,n){let{state:r,prefs:i,error:o}=e,{schema:s}=n;const a=[t,...r.ancestors];for(let u=0;u<t.length;++u){const e=r.localize([...r.path,u],a,s);if(s.$_match(t[u],e,i))return t}const l=s._flags.label;return l?o("array.hasKnown",{patternLabel:l}):o("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.verifyFlat(e,"items");const r=this.$_addRule("items");for(let i=0;i<e.length;++i){const t=a.tryWithPath((()=>this.$_compile(e[i])),i,{append:!0});r.$_terms.items.push(t)}return r.$_mutateRebuild()},validate(t,e){let{schema:n,error:r,state:i,prefs:o,errorsArray:s}=e;const l=n.$_terms._requireds.slice(),c=n.$_terms.ordered.slice(),h=[...n.$_terms._inclusions,...l],p=!t[a.symbols.arraySingle];delete t[a.symbols.arraySingle];const f=s();let d=t.length;for(let a=0;a<d;++a){const e=t[a];let s=!1,m=!1;const g=p?a:new Number(a),y=[...i.path,g];if(!n._flags.sparse&&void 0===e){if(f.push(r("array.sparse",{key:g,path:y,pos:a,value:void 0},i.localize(y))),o.abortEarly)return f;c.shift();continue}const v=[t,...i.ancestors];for(const t of n.$_terms._exclusions)if(t.$_match(e,i.localize(y,v,t),o,{presence:"ignore"})){if(f.push(r("array.excludes",{pos:a,value:e},i.localize(y))),o.abortEarly)return f;s=!0,c.shift();break}if(s)continue;if(n.$_terms.ordered.length){if(c.length){const s=c.shift(),l=s.$_validate(e,i.localize(y,v,s),o);if(l.errors){if(f.push(...l.errors),o.abortEarly)return f}else if("strip"===s._flags.result)u.fastSplice(t,a),--a,--d;else{if(!n._flags.sparse&&void 0===l.value){if(f.push(r("array.sparse",{key:g,path:y,pos:a,value:void 0},i.localize(y))),o.abortEarly)return f;continue}t[a]=l.value}continue}if(!n.$_terms.items.length){if(f.push(r("array.orderedLength",{pos:a,limit:n.$_terms.ordered.length})),o.abortEarly)return f;break}}const _=[];let b=l.length;for(let c=0;c<b;++c){const s=i.localize(y,v,l[c]);s.snapshot();const h=l[c].$_validate(e,s,o);if(_[c]=h,!h.errors){if(s.commit(),t[a]=h.value,m=!0,u.fastSplice(l,c),--c,--b,!n._flags.sparse&&void 0===h.value&&(f.push(r("array.sparse",{key:g,path:y,pos:a,value:void 0},i.localize(y))),o.abortEarly))return f;break}s.restore()}if(m)continue;const x=o.stripUnknown&&!!o.stripUnknown.arrays||!1;b=h.length;for(const c of h){let h;const p=l.indexOf(c);if(-1!==p)h=_[p];else{const l=i.localize(y,v,c);if(l.snapshot(),h=c.$_validate(e,l,o),!h.errors){l.commit(),"strip"===c._flags.result?(u.fastSplice(t,a),--a,--d):n._flags.sparse||void 0!==h.value?t[a]=h.value:(f.push(r("array.sparse",{key:g,path:y,pos:a,value:void 0},i.localize(y))),s=!0),m=!0;break}l.restore()}if(1===b){if(x){u.fastSplice(t,a),--a,--d,m=!0;break}if(f.push(...h.errors),o.abortEarly)return f;s=!0;break}}if(!s&&(n.$_terms._inclusions.length||n.$_terms._requireds.length)&&!m){if(x){u.fastSplice(t,a),--a,--d;continue}if(f.push(r("array.includes",{pos:a,value:e},i.localize(y))),o.abortEarly)return f}}return l.length&&u.fillMissedErrors(n,f,l,t,i,o),c.length&&(u.fillOrderedErrors(n,f,c,t,i,o),f.length||u.fillDefault(c,t,i,o)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate(t,e,n,r){let{limit:i}=n,{name:o,operator:s,args:l}=r;return a.compare(t.length,i,s)?t:e.error("array."+o,{limit:l.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.verifyFlat(e,"ordered");const r=this.$_addRule("items");for(let i=0;i<e.length;++i){const t=a.tryWithPath((()=>this.$_compile(e[i])),i,{append:!0});u.validateSingle(t,r),r.$_mutateRegister(t),r.$_terms.ordered.push(t)}return r.$_mutateRebuild()}},single:{method(t){const e=void 0===t||!!t;return r(!e||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",e)}},sort:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assertOptions(t,["by","order"]);const e={order:t.order||"ascending"};return t.by&&(e.by=l.ref(t.by,{ancestor:0}),r(!e.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:e}})},validate(t,e,n){let{error:r,state:i,prefs:o,schema:s}=e,{options:a}=n;const{value:l,errors:c}=u.sort(s,t,a,i,o);if(c)return c;for(let u=0;u<t.length;++u)if(t[u]!==l[u])return r("array.sort",{order:a.order,by:a.by?a.by.key:"value"});return t},convert:!0},sparse:{method(t){const e=void 0===t||!!t;return this._flags.sparse===e?this:(e?this.clone():this.$_addRule("items")).$_setFlag("sparse",e,{clone:!1})}},unique:{method(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),a.assertOptions(e,["ignoreUndefined","separator"]);const n={name:"unique",args:{options:e,comparator:t}};if(t)if("string"==typeof t){const r=a.default(e.separator,".");n.path=r?t.split(r):[t]}else n.comparator=t;return this.$_addRule(n)},validate(t,e,n,s){let{state:a,error:l,schema:u}=e,{comparator:c,options:h}=n,{comparator:p,path:f}=s;const d={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=p||i,g=h.ignoreUndefined;for(let i=0;i<t.length;++i){const e=f?o(t[i],f):t[i],n=p?d.custom:d[typeof e];if(r(n,"Failed to find unique map container for type",typeof e),n instanceof Map){const r=n.entries();let o;for(;!(o=r.next()).done;)if(m(o.value[0],e)){const e=a.localize([...a.path,i],[t,...a.ancestors]),n={pos:i,value:t[i],dupePos:o.value[1],dupeValue:t[o.value[1]]};return f&&(n.path=c),l("array.unique",n,e)}n.set(e,i)}else{if((!g||void 0!==e)&&void 0!==n[e]){const r={pos:i,value:t[i],dupePos:n[e],dupeValue:t[n[e]]};return f&&(r.path=c),l("array.unique",r,a.localize([...a.path,i],[t,...a.ancestors]))}n[e]=i}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,e)=>new Set(t)}},rebuild(t){t.$_terms._inclusions=[],t.$_terms._exclusions=[],t.$_terms._requireds=[];for(const e of t.$_terms.items)u.validateSingle(e,t),"required"===e._flags.presence?t.$_terms._requireds.push(e):"forbidden"===e._flags.presence?t.$_terms._exclusions.push(e):t.$_terms._inclusions.push(e);for(const e of t.$_terms.ordered)u.validateSingle(e,t)},manifest:{build:(t,e)=>(e.items&&(t=t.items(...e.items)),e.ordered&&(t=t.ordered(...e.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,e,n,r,i,o){const s=[];let a=0;for(const l of n){const t=l._flags.label;t?s.push(t):++a}s.length?a?e.push(t.$_createError("array.includesRequiredBoth",r,{knownMisses:s,unknownMisses:a},i,o)):e.push(t.$_createError("array.includesRequiredKnowns",r,{knownMisses:s},i,o)):e.push(t.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:a},i,o))},u.fillOrderedErrors=function(t,e,n,r,i,o){const s=[];for(const a of n)"required"===a._flags.presence&&s.push(a);s.length&&u.fillMissedErrors(t,e,s,r,i,o)},u.fillDefault=function(t,e,n,r){const i=[];let o=!0;for(let s=t.length-1;s>=0;--s){const a=t[s],l=[e,...n.ancestors],u=a.$_validate(void 0,n.localize(n.path,l,a),r).value;if(o){if(void 0===u)continue;o=!1}i.unshift(u)}i.length&&e.push(...i)},u.fastSplice=function(t,e){let n=e;for(;n<t.length;)t[n++]=t[n];--t.length},u.validateSingle=function(t,e){("array"===t.type||t._flags._arrayItems)&&(r(!e._flags.single,"Cannot specify array item with single rule enabled"),e.$_setFlag("_arrayItems",!0,{clone:!1}))},u.sort=function(t,e,n,r,i){const o="ascending"===n.order?1:-1,s=-1*o,a=o,l=(l,c)=>{let h=u.compare(l,c,s,a);if(null!==h)return h;if(n.by&&(l=n.by.resolve(l,r,i),c=n.by.resolve(c,r,i)),h=u.compare(l,c,s,a),null!==h)return h;const p=typeof l;if(p!==typeof c)throw t.$_createError("array.sort.mismatching",e,null,r,i);if("number"!==p&&"string"!==p)throw t.$_createError("array.sort.unsupported",e,{type:p},r,i);return"number"===p?(l-c)*o:l<c?s:a};try{return{value:e.slice().sort(l)}}catch(t){return{errors:t}}},u.compare=function(t,e,n,r){return t===e?0:void 0===t?1:void 0===e?-1:null===t?r:null===e?n:null}},4937:(t,e,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s=n(2036),a={isBool:function(t){return"boolean"==typeof t}};t.exports=i.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,e){let{schema:n}=e;if("boolean"!=typeof t){if("string"==typeof t){const e=n._flags.sensitive?t:t.toLowerCase();t="true"===e||"false"!==e&&t}return"boolean"!=typeof t&&(t=n.$_terms.truthy&&n.$_terms.truthy.has(t,null,null,!n._flags.sensitive)||(!n.$_terms.falsy||!n.$_terms.falsy.has(t,null,null,!n._flags.sensitive))&&t),{value:t}}},validate(t,e){let{error:n}=e;if("boolean"!=typeof t)return{value:t,errors:n("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.verifyFlat(e,"truthy");const i=this.clone();i.$_terms.truthy=i.$_terms.truthy||new s;for(let o=0;o<e.length;++o){const t=e[o];r(void 0!==t,"Cannot call truthy with undefined"),i.$_terms.truthy.add(t)}return i}},falsy:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.verifyFlat(e,"falsy");const i=this.clone();i.$_terms.falsy=i.$_terms.falsy||new s;for(let o=0;o<e.length;++o){const t=e[o];r(void 0!==t,"Cannot call falsy with undefined"),i.$_terms.falsy.add(t)}return i}},sensitive:{method(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",t)}}},cast:{number:{from:a.isBool,to:(t,e)=>t?1:0},string:{from:a.isBool,to:(t,e)=>t?"true":"false"}},manifest:{build:(t,e)=>(e.truthy&&(t=t.truthy(...e.truthy)),e.falsy&&(t=t.falsy(...e.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,e,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s=n(3328),a={isDate:function(t){return t instanceof Date}};t.exports=i.extend({type:"date",coerce:{from:["number","string"],method(t,e){let{schema:n}=e;return{value:a.parse(t,n._flags.format)||t}}},validate(t,e){let{schema:n,error:r,prefs:i}=e;if(t instanceof Date&&!isNaN(t.getTime()))return;const o=n._flags.format;return i.convert&&o&&"string"==typeof t?{value:t,errors:r("date.format",{format:o})}:{value:t,errors:r("date.base")}},rules:{compare:{method:!1,validate(t,e,n,r){let{date:i}=n,{name:s,operator:a,args:l}=r;const u="now"===i?Date.now():i.getTime();return o.compare(t.getTime(),u,a)?t:e.error("date."+s,{limit:l.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:a.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return r(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return r(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:a.isDate,to:(t,e)=>t.getTime()},string:{from:a.isDate,to(t,e){let{prefs:n}=e;return s.date(t,n)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),a.parse=function(t,e){if(t instanceof Date)return t;if("string"!=typeof t&&(isNaN(t)||!isFinite(t)))return null;if(/^\s*$/.test(t))return null;if("iso"===e)return o.isIsoDate(t)?a.date(t.toString()):null;const n=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=parseFloat(t)),e){if("javascript"===e)return a.date(1*t);if("unix"===e)return a.date(1e3*t);if("string"==typeof n)return null}return a.date(t)},a.date=function(t){const e=new Date(t);return isNaN(e.getTime())?null:e}},390:(t,e,n)=>{"use strict";const r=n(375),i=n(7824);t.exports=i.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return r(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate(t,e,n){let{n:r}=n;return t.length===r?t:e.error("function.arity",{n:r})}},class:{method(){return this.$_addRule("class")},validate:(t,e)=>/^\s*class\s/.test(t.toString())?t:e.error("function.class",{value:t})},minArity:{method(t){return r(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate(t,e,n){let{n:r}=n;return t.length>=r?t:e.error("function.minArity",{n:r})}},maxArity:{method(t){return r(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate(t,e,n){let{n:r}=n;return t.length<=r?t:e.error("function.maxArity",{n:r})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,e,n)=>{"use strict";const r=n(978),i=n(375),o=n(8571),s=n(3652),a=n(8068),l=n(8160),u=n(3292),c=n(6354),h=n(6133),p=n(3328),f={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=a.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,e)=>t.keys(e),validate(t,e){let{schema:n,error:r,state:i,prefs:o}=e;if(!t||typeof t!==n.$_property("typeof")||Array.isArray(t))return{value:t,errors:r("object.base",{type:n.$_property("typeof")})};if(!(n.$_terms.renames||n.$_terms.dependencies||n.$_terms.keys||n.$_terms.patterns||n.$_terms.externals))return;t=f.clone(t,o);const s=[];if(n.$_terms.renames&&!f.rename(n,t,i,o,s))return{value:t,errors:s};if(!n.$_terms.keys&&!n.$_terms.patterns&&!n.$_terms.dependencies)return{value:t,errors:s};const a=new Set(Object.keys(t));if(n.$_terms.keys){const e=[t,...i.ancestors];for(const r of n.$_terms.keys){const n=r.key,l=t[n];a.delete(n);const u=i.localize([...i.path,n],e,r),c=r.schema.$_validate(l,u,o);if(c.errors){if(o.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[n]=c.value),s.push(...c.errors)}else"strip"===r.schema._flags.result||void 0===c.value&&void 0!==l?delete t[n]:void 0!==c.value&&(t[n]=c.value)}}if(a.size||n._flags._hasPatternMatch){const e=f.unknown(n,t,a,s,i,o);if(e)return e}if(n.$_terms.dependencies)for(const l of n.$_terms.dependencies){if(null!==l.key&&!1===f.isPresent(l.options)(l.key.resolve(t,i,o,null,{shadow:!1})))continue;const e=f.dependencies[l.rel](n,l,t,i,o);if(e){const r=n.$_createError(e.code,t,e.context,i,o);if(o.abortEarly)return{value:t,errors:r};s.push(r)}}return{value:t,errors:s}},rules:{and:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.verifyFlat(e,"and"),f.dependency(this,"and",null,e)}},append:{method(t){return null==t||0===Object.keys(t).length?this:this.keys(t)}},assert:{method(t,e,n){p.isTemplate(t)||(t=u.ref(t)),i(void 0===n||"string"==typeof n,"Message must be a string"),e=this.$_compile(e,{appendPath:!0});const r=this.$_addRule({name:"assert",args:{subject:t,schema:e,message:n}});return r.$_mutateRegister(t),r.$_mutateRegister(e),r},validate(t,e,n){let{error:r,prefs:i,state:o}=e,{subject:s,schema:a,message:l}=n;const u=s.resolve(t,o,i),c=h.isRef(s)?s.absolute(o):[];return a.$_match(u,o.localize(c,[t,...o.ancestors],a),i)?t:r("object.assert",{subject:s,message:l})},args:["subject","schema","message"],multi:!0},instance:{method(t,e){return i("function"==typeof t,"constructor must be a function"),e=e||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:e}})},validate(t,e,n){let{constructor:r,name:i}=n;return t instanceof r?t:e.error("object.instance",{type:i,value:t})},args:["constructor","name"]},keys:{method(t){i(void 0===t||"object"==typeof t,"Object schema must be a valid object"),i(!l.isSchema(t),"Object schema cannot be a joi schema");const e=this.clone();if(t)if(Object.keys(t).length){e.$_terms.keys=e.$_terms.keys?e.$_terms.keys.filter((e=>!t.hasOwnProperty(e.key))):new f.Keys;for(const n in t)l.tryWithPath((()=>e.$_terms.keys.push({key:n,schema:this.$_compile(t[n])})),n)}else e.$_terms.keys=new f.Keys;else e.$_terms.keys=null;return e.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate(t,e,n,r){let{limit:i}=n,{name:o,operator:s,args:a}=r;return l.compare(Object.keys(t).length,i,s)?t:e.error("object."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.verifyFlat(e,"nand"),f.dependency(this,"nand",null,e)}},or:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.verifyFlat(e,"or"),f.dependency(this,"or",null,e)}},oxor:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.dependency(this,"oxor",null,e)}},pattern:{method(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t instanceof RegExp;r||(t=this.$_compile(t,{appendPath:!0})),i(void 0!==e,"Invalid rule"),l.assertOptions(n,["fallthrough","matches"]),r&&i(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),e=this.$_compile(e,{appendPath:!0});const o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];const s={[r?"regex":"schema"]:t,rule:e};return n.matches&&(s.matches=this.$_compile(n.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),o.$_mutateRegister(s.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),n.fallthrough&&(s.fallthrough=!0),o.$_terms.patterns.push(s),o.$_mutateRegister(e),o}},ref:{method(){return this.$_addRule("ref")},validate:(t,e)=>h.isRef(t)?t:e.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,e)=>t instanceof RegExp?t:e.error("object.regex",{value:t})},rename:{method(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),i("string"==typeof e||e instanceof p,"Invalid rename to argument"),i(e!==t,"Cannot rename key to same name:",t),l.assertOptions(n,["alias","ignoreUndefined","override","multiple"]);const o=this.clone();o.$_terms.renames=o.$_terms.renames||[];for(const r of o.$_terms.renames)i(r.from!==t,"Cannot rename the same key multiple times");return e instanceof p&&o.$_mutateRegister(e),o.$_terms.renames.push({from:t,to:e,options:r(f.renameDefaults,n)}),o}},schema:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:t}})},validate(t,e,n){let{type:r}=n;return!l.isSchema(t)||"any"!==r&&t.type!==r?e.error("object.schema",{type:r}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.dependency(this,"with",t,e,n)}},without:{method(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.dependency(this,"without",t,e,n)}},xor:{method(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.verifyFlat(e,"xor"),f.dependency(this,"xor",null,e)}}},overrides:{default(t,e){return void 0===t&&(t=l.symbols.deepDefault),this.$_parent("default",t,e)}},rebuild(t){if(t.$_terms.keys){const e=new s.Sorter;for(const n of t.$_terms.keys)l.tryWithPath((()=>e.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);t.$_terms.keys=new f.Keys(...e.nodes)}},manifest:{build(t,e){if(e.keys&&(t=t.keys(e.keys)),e.dependencies)for(const{rel:n,key:r=null,peers:i,options:o}of e.dependencies)t=f.dependency(t,n,r,i,o);if(e.patterns)for(const{regex:n,schema:r,rule:i,fallthrough:o,matches:s}of e.patterns)t=t.pattern(n||r,i,{fallthrough:o,matches:s});if(e.renames)for(const{from:n,to:r,options:i}of e.renames)t=t.rename(n,r,i);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),f.clone=function(t,e){if("object"==typeof t){if(e.nonEnumerables)return o(t,{shallow:!0});const n=Object.create(Object.getPrototypeOf(t));return Object.assign(n,t),n}const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)};return n.prototype=o(t.prototype),Object.defineProperty(n,"name",{value:t.name,writable:!1}),Object.defineProperty(n,"length",{value:t.length,writable:!1}),Object.assign(n,t),n},f.dependency=function(t,e,n,r,o){i(null===n||"string"==typeof n,e,"key must be a strings"),o||(o=r.length>1&&"object"==typeof r[r.length-1]?r.pop():{}),l.assertOptions(o,["separator","isPresent"]),r=[].concat(r);const s=l.default(o.separator,"."),a=[];for(const l of r)i("string"==typeof l,e,"peers must be strings"),a.push(u.ref(l,{separator:s,ancestor:0,prefix:!1}));null!==n&&(n=u.ref(n,{separator:s,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new f.Dependency(e,n,a,r,o)),c},f.dependencies={and(t,e,n,r,i){const o=[],s=[],a=e.peers.length,l=f.isPresent(e.options);for(const u of e.peers)!1===l(u.resolve(n,r,i,null,{shadow:!1}))?o.push(u.key):s.push(u.key);if(o.length!==a&&s.length!==a)return{code:"object.and",context:{present:s,presentWithLabels:f.keysToLabels(t,s),missing:o,missingWithLabels:f.keysToLabels(t,o)}}},nand(t,e,n,r,i){const o=[],s=f.isPresent(e.options);for(const u of e.peers)s(u.resolve(n,r,i,null,{shadow:!1}))&&o.push(u.key);if(o.length!==e.peers.length)return;const a=e.paths[0],l=e.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:f.keysToLabels(t,a),peers:l,peersWithLabels:f.keysToLabels(t,l)}}},or(t,e,n,r,i){const o=f.isPresent(e.options);for(const s of e.peers)if(o(s.resolve(n,r,i,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:e.paths,peersWithLabels:f.keysToLabels(t,e.paths)}}},oxor(t,e,n,r,i){const o=[],s=f.isPresent(e.options);for(const l of e.peers)s(l.resolve(n,r,i,null,{shadow:!1}))&&o.push(l.key);if(!o.length||1===o.length)return;const a={peers:e.paths,peersWithLabels:f.keysToLabels(t,e.paths)};return a.present=o,a.presentWithLabels=f.keysToLabels(t,o),{code:"object.oxor",context:a}},with(t,e,n,r,i){const o=f.isPresent(e.options);for(const s of e.peers)if(!1===o(s.resolve(n,r,i,null,{shadow:!1})))return{code:"object.with",context:{main:e.key.key,mainWithLabel:f.keysToLabels(t,e.key.key),peer:s.key,peerWithLabel:f.keysToLabels(t,s.key)}}},without(t,e,n,r,i){const o=f.isPresent(e.options);for(const s of e.peers)if(o(s.resolve(n,r,i,null,{shadow:!1})))return{code:"object.without",context:{main:e.key.key,mainWithLabel:f.keysToLabels(t,e.key.key),peer:s.key,peerWithLabel:f.keysToLabels(t,s.key)}}},xor(t,e,n,r,i){const o=[],s=f.isPresent(e.options);for(const l of e.peers)s(l.resolve(n,r,i,null,{shadow:!1}))&&o.push(l.key);if(1===o.length)return;const a={peers:e.paths,peersWithLabels:f.keysToLabels(t,e.paths)};return 0===o.length?{code:"object.missing",context:a}:(a.present=o,a.presentWithLabels=f.keysToLabels(t,o),{code:"object.xor",context:a})}},f.keysToLabels=function(t,e){return Array.isArray(e)?e.map((e=>t.$_mapLabels(e))):t.$_mapLabels(e)},f.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},f.rename=function(t,e,n,r,i){const o={};for(const s of t.$_terms.renames){const a=[],l="string"!=typeof s.from;if(l)for(const t in e){if(void 0===e[t]&&s.options.ignoreUndefined)continue;if(t===s.to)continue;const n=s.from.exec(t);n&&a.push({from:t,to:s.to,match:n})}else!Object.prototype.hasOwnProperty.call(e,s.from)||void 0===e[s.from]&&s.options.ignoreUndefined||a.push(s);for(const u of a){const a=u.from;let c=u.to;if(c instanceof p&&(c=c.render(e,n,r,u.match)),a!==c){if(!s.options.multiple&&o[c]&&(i.push(t.$_createError("object.rename.multiple",e,{from:a,to:c,pattern:l},n,r)),r.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(e,c)&&!s.options.override&&!o[c]&&(i.push(t.$_createError("object.rename.override",e,{from:a,to:c,pattern:l},n,r)),r.abortEarly))return!1;void 0===e[a]?delete e[c]:e[c]=e[a],o[c]=!0,s.options.alias||delete e[a]}}}return!0},f.unknown=function(t,e,n,r,i,o){if(t.$_terms.patterns){let s=!1;const a=t.$_terms.patterns.map((t=>{if(t.matches)return s=!0,[]})),l=[e,...i.ancestors];for(const u of n){const s=e[u],c=[...i.path,u];for(let h=0;h<t.$_terms.patterns.length;++h){const p=t.$_terms.patterns[h];if(p.regex){const t=p.regex.test(u);if(i.mainstay.tracer.debug(i,"rule","pattern.".concat(h),t?"pass":"error"),!t)continue}else if(!p.schema.$_match(u,i.nest(p.schema,"pattern.".concat(h)),o))continue;n.delete(u);const f=i.localize(c,l,{schema:p.rule,key:u}),d=p.rule.$_validate(s,f,o);if(d.errors){if(o.abortEarly)return{value:e,errors:d.errors};r.push(...d.errors)}if(p.matches&&a[h].push(u),e[u]=d.value,!p.fallthrough)break}}if(s)for(let n=0;n<a.length;++n){const s=a[n];if(!s)continue;const u=t.$_terms.patterns[n].matches,h=i.localize(i.path,l,u),p=u.$_validate(s,h,o);if(p.errors){const n=c.details(p.errors,{override:!1});n.matches=s;const a=t.$_createError("object.pattern.match",e,n,i,o);if(o.abortEarly)return{value:e,errors:a};r.push(a)}}}if(n.size&&(t.$_terms.keys||t.$_terms.patterns)){if(o.stripUnknown&&!t._flags.unknown||o.skipFunctions){const t=!(!o.stripUnknown||!0!==o.stripUnknown&&!o.stripUnknown.objects);for(const r of n)t?(delete e[r],n.delete(r)):"function"==typeof e[r]&&n.delete(r)}if(!l.default(t._flags.unknown,o.allowUnknown))for(const s of n){const n=i.localize([...i.path,s],[]),a=t.$_createError("object.unknown",e[s],{child:s},n,o,{flags:!1});if(o.abortEarly)return{value:e,errors:a};r.push(a)}}},f.Dependency=class{constructor(t,e,n,r,i){this.rel=t,this.key=e,this.peers=n,this.paths=r,this.options=i}describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options={...t.options,separator:this.peers[0].separator}),this.options.isPresent&&(t.options={...t.options,isPresent:this.options.isPresent}),t}},f.Keys=class extends Array{concat(t){const e=this.slice(),n=new Map;for(let r=0;r<e.length;++r)n.set(e[r].key,r);for(const r of t){const t=r.key,i=n.get(t);void 0!==i?e[i]={key:t,schema:e[i].schema.concat(r.schema)}:e.push(r)}return e}}},8785:(t,e,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s=n(3292),a=n(6354),l={};t.exports=i.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,e)=>t.ref(e),validate(t,e){let{schema:n,state:i,prefs:o}=e;r(n.$_terms.link,"Uninitialized link schema");const s=l.generate(n,t,i,o),a=n.$_terms.link[0].ref;return s.$_validate(t,i.nest(s,"link:".concat(a.display,":").concat(s.type)),o)},generate:(t,e,n,r)=>l.generate(t,e,n,r),rules:{ref:{method(t){r(!this.$_terms.link,"Cannot reinitialize schema"),t=s.ref(t),r("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),r("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const e=this.clone();return e.$_terms.link=[{ref:t}],e}},relative:{method(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",t)}}},overrides:{concat(t){r(this.$_terms.link,"Uninitialized link schema"),r(o.isSchema(t),"Invalid schema object"),r("link"!==t.type,"Cannot merge type link with another link");const e=this.clone();return e.$_terms.whens||(e.$_terms.whens=[]),e.$_terms.whens.push({concat:t}),e.$_mutateRebuild()}},manifest:{build:(t,e)=>(r(e.link,"Invalid link description missing link"),t.ref(e.link))}}),l.generate=function(t,e,n,r){let i=n.mainstay.links.get(t);if(i)return i._generate(e,n,r).schema;const o=t.$_terms.link[0].ref,{perspective:s,path:a}=l.perspective(o,n);l.assert(s,"which is outside of schema boundaries",o,t,n,r);try{i=a.length?s.$_reach(a):s}catch(e){l.assert(!1,"to non-existing schema",o,t,n,r)}return l.assert("link"!==i.type,"which is another link",o,t,n,r),t._flags.relative||n.mainstay.links.set(t,i),i._generate(e,n,r).schema},l.perspective=function(t,e){if("local"===t.type){for(const{schema:n,key:r}of e.schemas){if((n._flags.id||r)===t.path[0])return{perspective:n,path:t.path.slice(1)};if(n.$_terms.shared)for(const e of n.$_terms.shared)if(e._flags.id===t.path[0])return{perspective:e,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:e.schemas[e.schemas.length-1].schema,path:t.path}:{perspective:e.schemas[t.ancestor]&&e.schemas[t.ancestor].schema,path:t.path}},l.assert=function(t,e,n,i,o,s){t||r(!1,'"'.concat(a.label(i._flags,o,s),'" contains link reference "').concat(n.display,'" ').concat(e))}},3832:(t,e,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};t.exports=i.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,e){let{schema:n,error:r}=e;if(!t.match(s.numberRx))return;t=t.trim();const i={value:parseFloat(t)};if(0===i.value&&(i.value=0),!n._flags.unsafe)if(t.match(/e/i)){if(s.extractSignificantDigits(t)!==s.extractSignificantDigits(String(i.value)))return i.errors=r("number.unsafe"),i}else{const e=i.value.toString();if(e.match(/e/i))return i;if(e!==s.normalizeDecimal(t))return i.errors=r("number.unsafe"),i}return i}},validate(t,e){let{schema:n,error:r,prefs:i}=e;if(t===1/0||t===-1/0)return{value:t,errors:r("number.infinity")};if(!o.isNumber(t))return{value:t,errors:r("number.base")};const s={value:t};if(i.convert){const t=n.$_getRule("precision");if(t){const e=Math.pow(10,t.args.limit);s.value=Math.round(s.value*e)/e}}return 0===s.value&&(s.value=0),!n._flags.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(s.errors=r("number.unsafe")),s},rules:{compare:{method:!1,validate(t,e,n,r){let{limit:i}=n,{name:s,operator:a,args:l}=r;return o.compare(t,i,a)?t:e.error("number."+s,{limit:l.limit,value:t})},args:[{name:"limit",ref:!0,assert:o.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,e)=>Math.trunc(t)-t==0?t:e.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){return this.$_addRule({name:"multiple",args:{base:t}})},validate(t,e,n,r){let{base:i}=n;return t*(1/i)%1==0?t:e.error("number.multiple",{multiple:r.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,e)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:e.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return r(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,e,n){let{limit:r}=n;const i=t.toString().match(s.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=r?t:e.error("number.precision",{limit:r,value:t})},convert:!0},sign:{method(t){return r(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate(t,e,n){let{sign:r}=n;return"negative"===r&&t<0||"positive"===r&&t>0?t:e.error("number.".concat(r))}},unsafe:{method(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,e)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(t){return t.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,e,n)=>{"use strict";const r=n(7824);t.exports=r.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,e)=>new Map(Object.entries(t))}}})},7417:(t,e,n)=>{"use strict";const r=n(375),i=n(5380),o=n(1745),s=n(9959),a=n(6064),l=n(9926),u=n(5752),c=n(8068),h=n(8160),p={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,e){let{schema:n,state:r,prefs:i}=e;const o=n.$_getRule("normalize");o&&(t=t.normalize(o.args.form));const s=n.$_getRule("case");s&&(t="upper"===s.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const a=n.$_getRule("trim");if(a&&a.args.enabled&&(t=t.trim()),n.$_terms.replacements)for(const u of n.$_terms.replacements)t=t.replace(u.pattern,u.replacement);const l=n.$_getRule("hex");if(l&&l.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),n.$_getRule("isoDate")){const e=p.isoDate(t);e&&(t=e)}if(n._flags.truncate){const e=n.$_getRule("max");if(e){let o=e.args.limit;if(h.isResolvable(o)&&(o=o.resolve(t,r,i),!h.limit(o)))return{value:t,errors:n.$_createError("any.ref",o,{ref:e.args.limit,arg:"limit",reason:"must be a positive integer"},r,i)};t=t.slice(0,o)}}return{value:t}}},validate(t,e){let{schema:n,error:r}=e;if("string"!=typeof t)return{value:t,errors:r("string.base")};if(""===t){const e=n.$_getRule("min");if(e&&0===e.args.limit)return;return{value:t,errors:r("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,e)=>/^[a-zA-Z0-9]+$/.test(t)?t:e.error("string.alphanum")},base64:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(t,["paddingRequired","urlSafe"]),t={urlSafe:!1,paddingRequired:!0,...t},r("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),r("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate(t,e,n){let{options:r}=n;return p.base64Regex[r.paddingRequired][r.urlSafe].test(t)?t:e.error("string.base64")}},case:{method(t){return r(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate(t,e,n){let{direction:r}=n;return"lower"===r&&t===t.toLocaleLowerCase()||"upper"===r&&t===t.toLocaleUpperCase()?t:e.error("string.".concat(r,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,e){let n=t.length,r=0,i=1;for(;n--;){const e=t.charAt(n)*i;r+=e-9*(e>9),i^=3}return r>0&&r%10==0?t:e.error("string.creditCard")}},dataUri:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(t,["paddingRequired"]),t={paddingRequired:!0,...t},r("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,e,n){let{options:r}=n;const i=t.match(p.dataUriRegex);if(i){if(!i[2])return t;if("base64"!==i[2])return t;if(p.base64Regex[r.paddingRequired].false.test(i[3]))return t}return e.error("string.dataUri")}},domain:{method(t){t&&h.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const e=p.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:e})},validate(t,e,n,r){let{address:o}=r;return i.isValid(t,o)?t:e.error("string.domain")}},email:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),r(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const e=p.addressOptions(t),n=new RegExp("\\s*[".concat(t.separator?a(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:n,address:e})},validate(t,e,n,r){let{options:i}=n,{regex:s,address:a}=r;const l=i.multiple?t.split(s):[t],u=[];for(const c of l)o.isValid(c,a)||u.push(c);return u.length?e.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(t,["version","separator"]);let e="";if(t.version){const n=[].concat(t.version);r(n.length>=1,"version must have at least 1 valid version specified");const i=new Set;for(let t=0;t<n.length;++t){const o=n[t];r("string"==typeof o,"version at position "+t+" must be a string");const s=p.guidVersions[o.toLowerCase()];r(s,"version at position "+t+" must be one of "+Object.keys(p.guidVersions).join(", ")),r(!i.has(s),"version at position "+t+" must not be a duplicate"),e+=s,i.add(s)}}r(p.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const n=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),i=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(n,")[0-9A-F]{4}\\2?[").concat(e||"0-9A-F","][0-9A-F]{3}\\2?[").concat(e?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:i})},validate(t,e,n,r){let{regex:i}=r;const o=i.exec(t);return o?p.guidBrackets[o[1]]!==o[o.length-1]?e.error("string.guid"):t:e.error("string.guid")}},hex:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(t,["byteAligned"]),t={byteAligned:!1,...t},r("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:t}})},validate(t,e,n){let{options:r}=n;return p.hexRegex.test(t)?r.byteAligned&&t.length%2!=0?e.error("string.hexAlign"):t:e.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,e)=>i.isValid(t,{minDomainSegments:1})||p.ipRegex.test(t)?t:e.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(t,["cidr","version"]);const{cidr:e,versions:n,regex:r}=s.regex(t),i=t.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:e,version:i}},regex:r})},validate(t,e,n,r){let{options:i}=n,{regex:o}=r;return o.test(t)?t:i.version?e.error("string.ipVersion",{value:t,cidr:i.cidr,version:i.version}):e.error("string.ip",{value:t,cidr:i.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(t,e){let{error:n}=e;return p.isoDate(t)?t:n("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,e)=>p.isoDurationRegex.test(t)?t:e.error("string.isoDuration")},length:{method(t,e){return p.length(this,"length",t,"=",e)},validate(t,e,n,r){let{limit:i,encoding:o}=n,{name:s,operator:a,args:l}=r;const u=!o&&t.length;return h.compare(u,i,a)?t:e.error("string."+s,{limit:l.limit,value:t,encoding:o})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,e){return p.length(this,"max",t,"<=",e)},args:["limit","encoding"]},min:{method(t,e){return p.length(this,"min",t,">=",e)},args:["limit","encoding"]},normalize:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return r(p.normalizationForms.includes(t),"normalization form must be one of "+p.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate(t,e,n){let{error:r}=e,{form:i}=n;return t===t.normalize(i)?t:r("string.normalize",{value:t,form:i})},convert:!0},pattern:{alias:"regex",method(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(t instanceof RegExp,"regex must be a RegExp"),r(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof e&&(e={name:e}),h.assertOptions(e,["invert","name"]);const n=["string.pattern",e.invert?".invert":"",e.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:e},errorCode:n})},validate(t,e,n,r){let{regex:i,options:o}=n,{errorCode:s}=r;return i.test(t)^o.invert?t:e.error(s,{name:o.name,regex:i,value:t})},args:["regex","options"],multi:!0},replace:{method(t,e){"string"==typeof t&&(t=new RegExp(a(t),"g")),r(t instanceof RegExp,"pattern must be a RegExp"),r("string"==typeof e,"replacement must be a String");const n=this.clone();return n.$_terms.replacements||(n.$_terms.replacements=[]),n.$_terms.replacements.push({pattern:t,replacement:e}),n}},token:{method(){return this.$_addRule("token")},validate:(t,e)=>/^\w+$/.test(t)?t:e.error("string.token")},trim:{method(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate(t,e,n){let{enabled:r}=n;return r&&t!==t.trim()?e.error("string.trim"):t},convert:!0},truncate:{method(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),t.domain&&h.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:e,scheme:n}=u.regex(t),r=t.domain?p.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:e,domain:r,scheme:n})},validate(t,e,n,r){let{options:o}=n,{regex:s,domain:a,scheme:l}=r;if(["http:/","https:/"].includes(t))return e.error("string.uri");const u=s.exec(t);if(u){const n=u[1]||u[2];return!a||o.allowRelative&&!n||i.isValid(n,a)?t:e.error("string.domain",{value:n})}return o.relativeOnly?e.error("string.uriRelativeOnly"):o.scheme?e.error("string.uriCustomScheme",{scheme:l,value:t}):e.error("string.uri")}}},manifest:{build(t,e){if(e.replacements)for(const{pattern:n,replacement:r}of e.replacements)t=t.replace(n,r);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),p.addressOptions=function(t){if(!t)return t;if(r(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),r(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return r(p.tlds,"Built-in TLD list disabled"),Object.assign({},t,p.tlds);r("object"==typeof t.tlds,"tlds must be true, false, or an object");const e=t.tlds.deny;if(e)return Array.isArray(e)&&(t=Object.assign({},t,{tlds:{deny:new Set(e)}})),r(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),r(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),p.validateTlds(t.tlds.deny,"tlds.deny"),t;const n=t.tlds.allow;return n?!0===n?(r(p.tlds,"Built-in TLD list disabled"),Object.assign({},t,p.tlds)):(Array.isArray(n)&&(t=Object.assign({},t,{tlds:{allow:new Set(n)}})),r(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),p.validateTlds(t.tlds.allow,"tlds.allow"),t):t},p.validateTlds=function(t,e){for(const n of t)r(i.isValid(n,{minDomainSegments:1,maxDomainSegments:1}),"".concat(e," must contain valid top level domain names"))},p.isoDate=function(t){if(!h.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const e=new Date(t);return isNaN(e.getTime())?null:e.toISOString()},p.length=function(t,e,n,i,o){return r(!o||!1,"Invalid encoding:",o),t.$_addRule({name:e,method:"length",args:{limit:n,encoding:o},operator:i})}},8826:(t,e,n)=>{"use strict";const r=n(375),i=n(8068),o={};o.Map=class extends Map{slice(){return new o.Map(this)}},t.exports=i.extend({type:"symbol",terms:{map:{init:new o.Map}},coerce:{method(t,e){let{schema:n,error:r}=e;const i=n.$_terms.map.get(t);return i&&(t=i),n._flags.only&&"symbol"!=typeof t?{value:t,errors:r("symbol.map",{map:n.$_terms.map})}:{value:t}}},validate(t,e){let{error:n}=e;if("symbol"!=typeof t)return{value:t,errors:n("symbol.base")}},rules:{map:{method(t){t&&!t[Symbol.iterator]&&"object"==typeof t&&(t=Object.entries(t)),r(t&&t[Symbol.iterator],"Iterable must be an iterable or object");const e=this.clone(),n=[];for(const i of t){r(i&&i[Symbol.iterator],"Entry must be an iterable");const[t,o]=i;r("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),r("symbol"==typeof o,"Value must be a Symbol"),e.$_terms.map.set(t,o),n.push(o)}return e.valid(...n)}}},manifest:{build:(t,e)=>(e.map&&(t=t.map(e.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(738),s=n(9621),a=n(8160),l=n(6354),u=n(493),c={result:Symbol("result")};e.entry=function(t,e,n){let i=a.defaults;n&&(r(void 0===n.warnings,"Cannot override warnings preference in synchronous validation"),r(void 0===n.artifacts,"Cannot override artifacts preference in synchronous validation"),i=a.preferences(a.defaults,n));const o=c.entry(t,e,i);r(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:o.value};return o.error&&(s.error=o.error),o.mainstay.warnings.length&&(s.warning=l.details(o.mainstay.warnings)),o.mainstay.debug&&(s.debug=o.mainstay.debug),o.mainstay.artifacts&&(s.artifacts=o.mainstay.artifacts),s},e.entryAsync=async function(t,e,n){let r=a.defaults;n&&(r=a.preferences(a.defaults,n));const i=c.entry(t,e,r),o=i.mainstay;if(i.error)throw o.debug&&(i.error.debug=o.debug),i.error;if(o.externals.length){let e=i.value;const u=[];for(const i of o.externals){const h=i.state.path,p="link"===i.schema.type?o.links.get(i.schema):null;let f,d,m=e;const g=h.length?[e]:[],y=h.length?s(t,h):t;if(h.length){f=h[h.length-1];let t=e;for(const e of h.slice(0,-1))t=t[e],g.unshift(t);d=g[0],m=d[f]}try{const t=(t,e)=>(p||i.schema).$_createError(t,m,e,i.state,r),s=await i.method(m,{schema:i.schema,linked:p,state:i.state,prefs:n,original:y,error:t,errorsArray:c.errorsArray,warn:(t,e)=>o.warnings.push((p||i.schema).$_createError(t,m,e,i.state,r)),message:(t,e)=>(p||i.schema).$_createError("external",m,e,i.state,r,{messages:t})});if(void 0===s||s===m)continue;if(s instanceof l.Report){if(o.tracer.log(i.schema,i.state,"rule","external","error"),u.push(s),r.abortEarly)break;continue}if(Array.isArray(s)&&s[a.symbols.errors]){if(o.tracer.log(i.schema,i.state,"rule","external","error"),u.push(...s),r.abortEarly)break;continue}d?(o.tracer.value(i.state,"rule",m,s,"external"),d[f]=s):(o.tracer.value(i.state,"rule",e,s,"external"),e=s)}catch(t){throw r.errors.label&&(t.message+=" (".concat(i.label,")")),t}}if(i.value=e,u.length)throw i.error=l.process(u,t,r),o.debug&&(i.error.debug=o.debug),i.error}if(!r.warnings&&!r.debug&&!r.artifacts)return i.value;const u={value:i.value};return o.warnings.length&&(u.warning=l.details(o.warnings)),o.debug&&(u.debug=o.debug),o.artifacts&&(u.artifacts=o.artifacts),u},c.Mainstay=class{constructor(t,e,n){this.externals=[],this.warnings=[],this.tracer=t,this.debug=e,this.links=n,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this._snapshots.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this._snapshots.pop()}},c.entry=function(t,n,r){const{tracer:i,cleanup:o}=c.tracer(n,r),s=r.debug?[]:null,a=n._ids._schemaChain?new Map:null,h=new c.Mainstay(i,s,a),p=n._ids._schemaChain?[{schema:n}]:null,f=new u([],[],{mainstay:h,schemas:p}),d=e.validate(t,n,f,r);o&&n.$_root.untrace();const m=l.process(d.errors,t,r);return{value:d.value,error:m,mainstay:h}},c.tracer=function(t,e){return t.$_root._tracer?{tracer:t.$_root._tracer._register(t)}:e.debug?(r(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace()._register(t),cleanup:!0}):{tracer:c.ignore}},e.validate=function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(e.$_terms.whens&&(e=e._generate(t,n,r).schema),e._preferences&&(r=c.prefs(e,r)),e._cache&&r.cache){const r=e._cache.get(t);if(n.mainstay.tracer.debug(n,"validate","cached",!!r),r)return r}const o=(i,o,s)=>e.$_createError(i,t,o,s||n,r),s={original:t,prefs:r,schema:e,state:n,error:o,errorsArray:c.errorsArray,warn:(t,e,r)=>n.mainstay.warnings.push(o(t,e,r)),message:(i,o)=>e.$_createError("custom",t,o,n,r,{messages:i})};n.mainstay.tracer.entry(e,n);const l=e._definition;if(l.prepare&&void 0!==t&&r.convert){const e=l.prepare(t,s);if(e){if(n.mainstay.tracer.value(n,"prepare",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),s);t=e.value}}if(l.coerce&&void 0!==t&&r.convert&&(!l.coerce.from||l.coerce.from.includes(typeof t))){const e=l.coerce.method(t,s);if(e){if(n.mainstay.tracer.value(n,"coerced",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),s);t=e.value}}const u=e._flags.empty;u&&u.$_match(c.trim(t,e),n.nest(u),a.defaults)&&(n.mainstay.tracer.value(n,"empty",t,void 0),t=void 0);const h=i.presence||e._flags.presence||(e._flags._endedSwitch?null:r.presence);if(void 0===t){if("forbidden"===h)return c.finalize(t,null,s);if("required"===h)return c.finalize(t,[e.$_createError("any.required",t,null,n,r)],s);if("optional"===h){if(e._flags.default!==a.symbols.deepDefault)return c.finalize(t,null,s);n.mainstay.tracer.value(n,"default",t,{}),t={}}}else if("forbidden"===h)return c.finalize(t,[e.$_createError("any.unknown",t,null,n,r)],s);const p=[];if(e._valids){const i=e._valids.get(t,n,r,e._flags.insensitive);if(i)return r.convert&&(n.mainstay.tracer.value(n,"valids",t,i.value),t=i.value),n.mainstay.tracer.filter(e,n,"valid",i),c.finalize(t,null,s);if(e._flags.only){const i=e.$_createError("any.only",t,{valids:e._valids.values({display:!0})},n,r);if(r.abortEarly)return c.finalize(t,[i],s);p.push(i)}}if(e._invalids){const i=e._invalids.get(t,n,r,e._flags.insensitive);if(i){n.mainstay.tracer.filter(e,n,"invalid",i);const o=e.$_createError("any.invalid",t,{invalids:e._invalids.values({display:!0})},n,r);if(r.abortEarly)return c.finalize(t,[o],s);p.push(o)}}if(l.validate){const e=l.validate(t,s);if(e&&(n.mainstay.tracer.value(n,"base",t,e.value),t=e.value,e.errors)){if(!Array.isArray(e.errors))return p.push(e.errors),c.finalize(t,p,s);if(e.errors.length)return p.push(...e.errors),c.finalize(t,p,s)}}return e._rules.length?c.rules(t,p,s):c.finalize(t,p,s)},c.rules=function(t,e,n){const{schema:r,state:i,prefs:o}=n;for(const s of r._rules){const l=r._definition.rules[s.method];if(l.convert&&o.convert){i.mainstay.tracer.log(r,i,"rule",s.name,"full");continue}let u,h=s.args;if(s._resolve.length){h=Object.assign({},h);for(const e of s._resolve){const n=l.argsByName.get(e),s=h[e].resolve(t,i,o),c=n.normalize?n.normalize(s):s,p=a.validateArg(c,null,n);if(p){u=r.$_createError("any.ref",s,{arg:e,ref:h[e],reason:p},i,o);break}h[e]=c}}u=u||l.validate(t,n,h,s);const p=c.rule(u,s);if(p.errors){if(i.mainstay.tracer.log(r,i,"rule",s.name,"error"),s.warn){i.mainstay.warnings.push(...p.errors);continue}if(o.abortEarly)return c.finalize(t,p.errors,n);e.push(...p.errors)}else i.mainstay.tracer.log(r,i,"rule",s.name,"pass"),i.mainstay.tracer.value(i,"rule",t,p.value,s.name),t=p.value}return c.finalize(t,e,n)},c.rule=function(t,e){return t instanceof l.Report?(c.error(t,e),{errors:[t],value:null}):Array.isArray(t)&&t[a.symbols.errors]?(t.forEach((t=>c.error(t,e))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,e){return e.message&&t._setTemplate(e.message),t},c.finalize=function(t,e,n){e=e||[];const{schema:i,state:o,prefs:s}=n;if(e.length){const r=c.default("failover",void 0,e,n);void 0!==r&&(o.mainstay.tracer.value(o,"failover",t,r),t=r,e=[])}if(e.length&&i._flags.error)if("function"==typeof i._flags.error){e=i._flags.error(e),Array.isArray(e)||(e=[e]);for(const t of e)r(t instanceof Error||t instanceof l.Report,"error() must return an Error object")}else e=[i._flags.error];if(void 0===t){const r=c.default("default",t,e,n);o.mainstay.tracer.value(o,"default",t,r),t=r}if(i._flags.cast&&void 0!==t){const e=i._definition.cast[i._flags.cast];if(e.from(t)){const r=e.to(t,n);o.mainstay.tracer.value(o,"cast",t,r,i._flags.cast),t=r}}if(i.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:r}of i.$_terms.externals)o.mainstay.externals.push({method:r,schema:i,state:o,label:l.label(i._flags,o,s)});const a={value:t,errors:e.length?e:null};return i._flags.result&&(a.value="strip"===i._flags.result?void 0:n.original,o.mainstay.tracer.value(o,i._flags.result,t,a.value),o.shadow(t,i._flags.result)),i._cache&&!1!==s.cache&&!i._refs.length&&i._cache.set(n.original,a),void 0===t||a.errors||void 0===i._flags.artifact||(o.mainstay.artifacts=o.mainstay.artifacts||new Map,o.mainstay.artifacts.has(i._flags.artifact)||o.mainstay.artifacts.set(i._flags.artifact,[]),o.mainstay.artifacts.get(i._flags.artifact).push(o.path)),a},c.prefs=function(t,e){const n=e===a.defaults;return n&&t._preferences[a.symbols.prefs]?t._preferences[a.symbols.prefs]:(e=a.preferences(e,t._preferences),n&&(t._preferences[a.symbols.prefs]=e),e)},c.default=function(t,e,n,r){const{schema:o,state:s,prefs:l}=r,u=o._flags[t];if(l.noDefaults||void 0===u)return e;if(s.mainstay.tracer.log(o,s,"rule",t,"full"),!u)return u;if("function"==typeof u){const a=u.length?[i(s.ancestors[0]),r]:[];try{return u(...a)}catch(e){return void n.push(o.$_createError("any.".concat(t),null,{error:e},s,l))}}return"object"!=typeof u?u:u[a.symbols.literal]?u.literal:a.isResolvable(u)?u.resolve(e,s,l):i(u)},c.trim=function(t,e){if("string"!=typeof t)return t;const n=e.$_getRule("trim");return n&&n.args.enabled?t.trim():t},c.ignore={active:!1,debug:o,entry:o,filter:o,log:o,resolve:o,value:o},c.errorsArray=function(){const t=[];return t[a.symbols.errors]=!0,t}},2036:(t,e,n)=>{"use strict";const r=n(375),i=n(9474),o=n(8160),s={};t.exports=s.Values=class{constructor(t,e){this._values=new Set(t),this._refs=new Set(e),this._lowercase=s.lowercases(t),this._override=!1}get length(){return this._values.size+this._refs.size}add(t,e){o.isResolvable(t)?this._refs.has(t)||(this._refs.add(t),e&&e.register(t)):this.has(t,null,null,!1)||(this._values.add(t),"string"==typeof t&&this._lowercase.set(t.toLowerCase(),t))}static merge(t,e,n){if(t=t||new s.Values,e){if(e._override)return e.clone();for(const n of[...e._values,...e._refs])t.add(n)}if(n)for(const r of[...n._values,...n._refs])t.remove(r);return t.length?t:null}remove(t){o.isResolvable(t)?this._refs.delete(t):(this._values.delete(t),"string"==typeof t&&this._lowercase.delete(t.toLowerCase()))}has(t,e,n,r){return!!this.get(t,e,n,r)}get(t,e,n,r){if(!this.length)return!1;if(this._values.has(t))return{value:t};if("string"==typeof t&&t&&r){const e=this._lowercase.get(t.toLowerCase());if(e)return{value:e}}if(!this._refs.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const o of this._values)if(i(o,t))return{value:o};if(e)for(const o of this._refs){const s=o.resolve(t,e,n,null,{in:!0});if(void 0===s)continue;const a=o.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const e of a)if(typeof e==typeof t)if(r&&t&&"string"==typeof t){if(e.toLowerCase()===t.toLowerCase())return{value:e,ref:o}}else if(i(e,t))return{value:e,ref:o}}return!1}override(){this._override=!0}values(t){if(t&&t.display){const t=[];for(const e of[...this._values,...this._refs])void 0!==e&&t.push(e);return t}return Array.from([...this._values,...this._refs])}clone(){const t=new s.Values(this._values,this._refs);return t._override=this._override,t}concat(t){r(!t._override,"Cannot concat override set of values");const e=new s.Values([...this._values,...t._values],[...this._refs,...t._refs]);return e._override=this._override,e}describe(){const t=[];this._override&&t.push({override:!0});for(const e of this._values.values())t.push(e&&"object"==typeof e?{value:e}:e);for(const e of this._refs.values())t.push(e.describe());return t}},s.Values.prototype[o.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(t){const e=new Map;if(t)for(const n of t)"string"==typeof n&&e.set(n.toLowerCase(),n);return e}},978:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(1687),s=n(9621),a={};t.exports=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(t&&"object"==typeof t,"Invalid defaults value: must be an object"),r(!e||!0===e||"object"==typeof e,"Invalid source value: must be true, falsy or an object"),r("object"==typeof n,"Invalid options: must be an object"),!e)return null;if(n.shallow)return a.applyToDefaultsWithShallow(t,e,n);const s=i(t);if(!0===e)return s;const l=void 0!==n.nullOverride&&n.nullOverride;return o(s,e,{nullOverride:l,mergeArrays:!1})},a.applyToDefaultsWithShallow=function(t,e,n){const l=n.shallow;r(Array.isArray(l),"Invalid keys");const u=new Map,c=!0===e?null:new Set;for(let r of l){r=Array.isArray(r)?r:r.split(".");const n=s(t,r);n&&"object"==typeof n?u.set(n,c&&s(e,r)||n):c&&c.add(r)}const h=i(t,{},u);if(!c)return h;for(const r of c)a.reachCopy(h,e,r);const p=void 0!==n.nullOverride&&n.nullOverride;return o(h,e,{nullOverride:p,mergeArrays:!1})},a.reachCopy=function(t,e,n){for(const o of n){if(!(o in e))return;const t=e[o];if("object"!=typeof t||null===t)return;e=t}const r=e;let i=t;for(let o=0;o<n.length-1;++o){const t=n[o];"object"!=typeof i[t]&&(i[t]={}),i=i[t]}i[n[n.length-1]]=r}},375:(t,e,n)=>{"use strict";const r=n(7916);t.exports=function(t){if(!t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(1===n.length&&n[0]instanceof Error)throw n[0];throw new r(n)}}},8571:(t,e,n)=>{"use strict";const r=n(9621),i=n(4277),o=n(7043),s={needsProtoHack:new Set([i.set,i.map,i.weakSet,i.weakMap])};t.exports=s.clone=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof t||null===t)return t;let r=s.clone,a=n;if(e.shallow){if(!0!==e.shallow)return s.cloneWithShallow(t,e);r=t=>t}else if(a){const e=a.get(t);if(e)return e}else a=new Map;const l=i.getInternalProto(t);if(l===i.buffer)return!1;if(l===i.date)return new Date(t.getTime());if(l===i.regex)return new RegExp(t);const u=s.base(t,l,e);if(u===t)return t;if(a&&a.set(t,u),l===i.set)for(const i of t)u.add(r(i,e,a));else if(l===i.map)for(const[i,o]of t)u.set(i,r(o,e,a));const c=o.keys(t,e);for(const o of c){if("__proto__"===o)continue;if(l===i.array&&"length"===o){u.length=t.length;continue}const n=Object.getOwnPropertyDescriptor(t,o);n?n.get||n.set?Object.defineProperty(u,o,n):n.enumerable?u[o]=r(t[o],e,a):Object.defineProperty(u,o,{enumerable:!1,writable:!0,configurable:!0,value:r(t[o],e,a)}):Object.defineProperty(u,o,{enumerable:!0,writable:!0,configurable:!0,value:r(t[o],e,a)})}return u},s.cloneWithShallow=function(t,e){const n=e.shallow;(e=Object.assign({},e)).shallow=!1;const i=new Map;for(const o of n){const e=r(t,o);"object"!=typeof e&&"function"!=typeof e||i.set(e,e)}return s.clone(t,e,i)},s.base=function(t,e,n){if(!1===n.prototype)return s.needsProtoHack.has(e)?new e.constructor:e===i.array?[]:{};const r=Object.getPrototypeOf(t);if(r&&r.isImmutable)return t;if(e===i.array){const t=[];return r!==e&&Object.setPrototypeOf(t,r),t}if(s.needsProtoHack.has(e)){const t=new r.constructor;return r!==e&&Object.setPrototypeOf(t,r),t}return Object.create(r)}},9474:(t,e,n)=>{"use strict";const r=n(4277),i={mismatched:null};t.exports=function(t,e,n){return n=Object.assign({prototype:!0},n),!!i.isDeepEqual(t,e,n,[])},i.isDeepEqual=function(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;const s=typeof t;if(s!==typeof e)return!1;if(null===t||null===e)return!1;if("function"===s){if(!n.deepFunction||t.toString()!==e.toString())return!1}else if("object"!==s)return t!=t&&e!=e;const a=i.getSharedType(t,e,!!n.prototype);switch(a){case r.buffer:return!1;case r.promise:return t===e;case r.regex:return t.toString()===e.toString();case i.mismatched:return!1}for(let r=o.length-1;r>=0;--r)if(o[r].isSame(t,e))return!0;o.push(new i.SeenEntry(t,e));try{return!!i.isDeepEqualObj(a,t,e,n,o)}finally{o.pop()}},i.getSharedType=function(t,e,n){if(n)return Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?i.mismatched:r.getInternalProto(t);const o=r.getInternalProto(t);return o!==r.getInternalProto(e)?i.mismatched:o},i.valueOf=function(t){const e=t.valueOf;if(void 0===e)return t;try{return e.call(t)}catch(t){return t}},i.hasOwnEnumerableProperty=function(t,e){return Object.prototype.propertyIsEnumerable.call(t,e)},i.isSetSimpleEqual=function(t,e){for(const n of Set.prototype.values.call(t))if(!Set.prototype.has.call(e,n))return!1;return!0},i.isDeepEqualObj=function(t,e,n,o,s){const{isDeepEqual:a,valueOf:l,hasOwnEnumerableProperty:u}=i,{keys:c,getOwnPropertySymbols:h}=Object;if(t===r.array){if(!o.part){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!a(e[t],n[t],o,s))return!1;return!0}for(const t of e)for(const e of n)if(a(t,e,o,s))return!0}else if(t===r.set){if(e.size!==n.size)return!1;if(!i.isSetSimpleEqual(e,n)){const t=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(e)){if(t.delete(n))continue;let e=!1;for(const r of t)if(a(n,r,o,s)){t.delete(r),e=!0;break}if(!e)return!1}}}else if(t===r.map){if(e.size!==n.size)return!1;for(const[t,r]of Map.prototype.entries.call(e)){if(void 0===r&&!Map.prototype.has.call(n,t))return!1;if(!a(r,Map.prototype.get.call(n,t),o,s))return!1}}else if(t===r.error&&(e.name!==n.name||e.message!==n.message))return!1;const p=l(e),f=l(n);if((e!==p||n!==f)&&!a(p,f,o,s))return!1;const d=c(e);if(!o.part&&d.length!==c(n).length&&!o.skip)return!1;let m=0;for(const r of d)if(o.skip&&o.skip.includes(r))void 0===n[r]&&++m;else{if(!u(n,r))return!1;if(!a(e[r],n[r],o,s))return!1}if(!o.part&&d.length-m!==c(n).length)return!1;if(!1!==o.symbols){const t=h(e),r=new Set(h(n));for(const i of t){if(!o.skip||!o.skip.includes(i))if(u(e,i)){if(!u(n,i))return!1;if(!a(e[i],n[i],o,s))return!1}else if(u(n,i))return!1;r.delete(i)}for(const e of r)if(u(n,e))return!1}return!0},i.SeenEntry=class{constructor(t,e){this.obj=t,this.ref=e}isSame(t,e){return this.obj===t&&this.ref===e}}},7916:(t,e,n)=>{"use strict";const r=n(8761);t.exports=class extends Error{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof Error?t.message:r(t))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e.assert)}}},5277:t=>{"use strict";const e={};t.exports=function(t){if(!t)return"";let n="";for(let r=0;r<t.length;++r){const i=t.charCodeAt(r);e.isSafe(i)?n+=t[r]:n+=e.escapeHtmlChar(i)}return n},e.escapeHtmlChar=function(t){return e.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},e.isSafe=function(t){return e.safeCharCodes.has(t)},e.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),e.safeCharCodes=function(){const t=new Set;for(let e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&t.add(e);return t}()},6064:t=>{"use strict";t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{"use strict";t.exports=function(){}},1687:(t,e,n)=>{"use strict";const r=n(375),i=n(8571),o=n(7043),s={};t.exports=s.merge=function(t,e,n){if(r(t&&"object"==typeof t,"Invalid target value: must be an object"),r(null==e||"object"==typeof e,"Invalid source value: must be null, undefined, or an object"),!e)return t;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(e)){r(Array.isArray(t),"Cannot merge array onto an object"),n.mergeArrays||(t.length=0);for(let r=0;r<e.length;++r)t.push(i(e[r],{symbols:n.symbols}));return t}const a=o.keys(e,n);for(let r=0;r<a.length;++r){const o=a[r];if("__proto__"===o||!Object.prototype.propertyIsEnumerable.call(e,o))continue;const l=e[o];if(l&&"object"==typeof l){if(t[o]===l)continue;!t[o]||"object"!=typeof t[o]||Array.isArray(t[o])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?t[o]=i(l,{symbols:n.symbols}):s.merge(t[o],l,n)}else(null!=l||n.nullOverride)&&(t[o]=l)}return t}},9621:(t,e,n)=>{"use strict";const r=n(375),i={};t.exports=function(t,e,n){if(!1===e||null==e)return t;"string"==typeof(n=n||{})&&(n={separator:n});const o=Array.isArray(e);r(!o||!n.separator,"Separator option is not valid for array-based chain");const s=o?e:e.split(n.separator||".");let a=t;for(let l=0;l<s.length;++l){let t=s[l];const o=n.iterables&&i.iterables(a);if(Array.isArray(a)||"set"===o){const e=Number(t);Number.isInteger(e)&&(t=e<0?a.length+e:e)}if(!a||"function"==typeof a&&!1===n.functions||!o&&void 0===a[t]){r(!n.strict||l+1===s.length,"Missing segment",t,"in reach path ",e),r("object"==typeof a||!0===n.functions||"function"!=typeof a,"Invalid segment",t,"in reach path ",e),a=n.default;break}a=o?"set"===o?[...a][t]:a.get(t):a[t]}return a},i.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{"use strict";t.exports=function(){try{return JSON.stringify(...arguments)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,e)=>{"use strict";const n={};e=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",e.error],["[object Map]",e.map],["[object Promise]",e.promise],["[object Set]",e.set],["[object WeakMap]",e.weakMap],["[object WeakSet]",e.weakSet]]),e.getInternalProto=function(t){if(Array.isArray(t))return e.array;if(t instanceof Date)return e.date;if(t instanceof RegExp)return e.regex;if(t instanceof Error)return e.error;const r=Object.prototype.toString.call(t);return n.typeMap.get(r)||e.generic}},7043:(t,e)=>{"use strict";e.keys=function(t){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(t):Object.getOwnPropertyNames(t)}},3652:(t,e,n)=>{"use strict";const r=n(375),i={};e.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(t,e){const n=[].concat((e=e||{}).before||[]),i=[].concat(e.after||[]),o=e.group||"?",s=e.sort||0;r(!n.includes(o),"Item cannot come before itself: ".concat(o)),r(!n.includes("?"),"Item cannot come before unassociated items"),r(!i.includes(o),"Item cannot come after itself: ".concat(o)),r(!i.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const r of t){const t={seq:this._items.length,sort:s,before:n,after:i,group:o,node:r};this._items.push(t)}if(!e.manual){const t=this._sort();r(t,"item","?"!==o?"added into group ".concat(o):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const n of t)if(n)for(const t of n._items)this._items.push(Object.assign({},t));this._items.sort(i.mergeSort);for(let n=0;n<this._items.length;++n)this._items[n].seq=n;const e=this._sort();return r(e,"merge created a dependencies error"),this.nodes}sort(){const t=this._sort();return r(t,"sort created a dependencies error"),this.nodes}_sort(){const t={},e=Object.create(null),n=Object.create(null);for(const a of this._items){const r=a.seq,i=a.group;n[i]=n[i]||[],n[i].push(r),t[r]=a.before;for(const t of a.after)e[t]=e[t]||[],e[t].push(r)}for(const a in t){const e=[];for(const r in t[a]){const i=t[a][r];n[i]=n[i]||[],e.push(...n[i])}t[a]=e}for(const a in e)if(n[a])for(const r of n[a])t[r].push(...e[a]);const r={};for(const a in t){const e=t[a];for(const t of e)r[t]=r[t]||[],r[t].push(a)}const i={},o=[];for(let a=0;a<this._items.length;++a){let t=a;if(r[a]){t=null;for(let e=0;e<this._items.length;++e){if(!0===i[e])continue;r[e]||(r[e]=[]);const n=r[e].length;let o=0;for(let t=0;t<n;++t)i[r[e][t]]&&++o;if(o===n){t=e;break}}}null!==t&&(i[t]=!0,o.push(t))}if(o.length!==this._items.length)return!1;const s={};for(const a of this._items)s[a.seq]=a;this._items=[],this.nodes=[];for(const a of o){const t=s[a];this.nodes.push(t.node),this._items.push(t)}return!0}},i.mergeSort=(t,e)=>t.sort===e.sort?0:t.sort<e.sort?-1:1},5380:(t,e,n)=>{"use strict";const r=n(443),i=n(2178),o={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:r.URL||URL};e.analyze=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return i.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new Error("Invalid input: domain must be a string");if(t.length>256)return i.code("DOMAIN_TOO_LONG");if(o.nonAsciiRx.test(t)){if(!1===e.allowUnicode)return i.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(o.domainControlRx.test(t))return i.code("DOMAIN_INVALID_CHARS");t=o.punycode(t),e.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const n=e.minDomainSegments||o.minDomainSegments,r=t.split(".");if(r.length<n)return i.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&r.length>e.maxDomainSegments)return i.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=e.tlds;if(s){const t=r[r.length-1].toLowerCase();if(s.deny&&s.deny.has(t)||s.allow&&!s.allow.has(t))return i.code("DOMAIN_FORBIDDEN_TLDS")}for(let a=0;a<r.length;++a){const t=r[a];if(!t.length)return i.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return i.code("DOMAIN_LONG_SEGMENT");if(a<r.length-1){if(!o.domainSegmentRx.test(t))return i.code("DOMAIN_INVALID_CHARS")}else if(!o.tldSegmentRx.test(t))return i.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,n){return!e.analyze(t,n)},o.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new o.URL("http://".concat(t)).host}catch(e){return t}}},1745:(t,e,n)=>{"use strict";const r=n(9848),i=n(5380),o=n(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(r.TextEncoder||TextEncoder)};e.analyze=function(t,e){return s.email(t,e)},e.isValid=function(t,e){return!s.email(t,e)},s.email=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)throw new Error("Invalid input: email must be a string");if(!t)return o.code("EMPTY_STRING");const n=!s.nonAsciiRx.test(t);if(!n){if(!1===e.allowUnicode)return o.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const r=t.split("@");if(2!==r.length)return r.length>2?o.code("MULTIPLE_AT_CHAR"):o.code("MISSING_AT_CHAR");const[a,l]=r;if(!a)return o.code("EMPTY_LOCAL");if(!e.ignoreLength){if(t.length>254)return o.code("ADDRESS_TOO_LONG");if(s.encoder.encode(a).length>64)return o.code("LOCAL_TOO_LONG")}return s.local(a,n)||i.analyze(l,e)},s.local=function(t,e){const n=t.split(".");for(const r of n){if(!r.length)return o.code("EMPTY_LOCAL_SEGMENT");if(e){if(!s.atextRx.test(r))return o.code("INVALID_LOCAL_CHARS")}else for(const t of r){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return o.code("INVALID_LOCAL_CHARS")}}},s.binary=function(t){return Array.from(s.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,e)=>{"use strict";e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}},9959:(t,e,n)=>{"use strict";const r=n(375),i=n(5752);e.regex=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const e=t.cidr?t.cidr.toLowerCase():"optional";r(["required","optional","forbidden"].includes(e),"options.cidr must be one of required, optional, forbidden"),r(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let n=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),r(n.length>=1,"options.version must have at least 1 version specified");for(let i=0;i<n.length;++i)r("string"==typeof n[i],"options.version must only contain strings"),n[i]=n[i].toLowerCase(),r(["ipv4","ipv6","ipvfuture"].includes(n[i]),"options.version contains unknown version "+n[i]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const o="(?:".concat(n.map((t=>{if("forbidden"===e)return i.ip[t];const n="\\/".concat("ipv4"===t?i.ip.v4Cidr:i.ip.v6Cidr);return"required"===e?"".concat(i.ip[t]).concat(n):"".concat(i.ip[t],"(?:").concat(n,")?")})).join("|"),")"),s=new RegExp("^".concat(o,"$"));return{cidr:e,versions:n,regex:s,raw:o}}},5752:(t,e,n)=>{"use strict";const r=n(375),i=n(6064),o={generate:function(){const t={},e="\\dA-Fa-f",n="["+e+"]",r="\\w-\\.~",i="!\\$&'\\(\\)\\*\\+,;=",o="%"+e,s=r+o+i+":@",a="["+s+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+l+"\\.){3}"+l;const u=n+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",h="(?:"+u+":){6}"+c,p="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,d="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,m="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,g="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,y="(?:(?:"+u+":){0,4}"+u+")?::"+c,v="(?:(?:"+u+":){0,5}"+u+")?::"+u,_="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+h+"|"+p+"|"+f+"|"+d+"|"+m+"|"+g+"|"+y+"|"+v+"|"+_+")",t.ipvFuture="v"+n+"+\\.["+r+i+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const b="["+r+o+i+":]*",x="["+r+o+i+"]{1,255}",E="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+x+")",S="(?:"+b+"@)?"+E+"(?::\\d*)?",w="(?:"+b+"@)?("+E+")(?::\\d*)?",T=a+"*",M=a+"+",R="(?:\\/"+T+")*",A="\\/(?:"+M+R+")?",P=M+R,I="["+r+o+i+"@]+"+R,C="(?:\\/\\/\\/"+T+R+")";return t.hierPart="(?:(?:\\/\\/"+S+R+")|"+A+"|"+P+"|"+C+")",t.hierPartCapture="(?:(?:\\/\\/"+w+R+")|"+A+"|"+P+")",t.relativeRef="(?:(?:\\/\\/"+S+R+")|"+A+"|"+I+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+w+R+")|"+A+"|"+I+"|)",t.query="["+s+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+s+"\\/\\?]*",t}};o.rfc3986=o.generate(),e.ip={v4Cidr:o.rfc3986.ipv4Cidr,v6Cidr:o.rfc3986.ipv6Cidr,ipv4:o.rfc3986.ipv4address,ipv6:o.rfc3986.ipv6address,ipvfuture:o.rfc3986.ipvFuture},o.createRegex=function(t){const e=o.rfc3986,n="(?:\\?"+(t.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",s=t.domain?e.relativeRefCapture:e.relativeRef;if(t.relativeOnly)return o.wrap(s+n);let a="";if(t.scheme){r(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(t.scheme);r(n.length>=1,"scheme must have at least 1 scheme specified");const o=[];for(let t=0;t<n.length;++t){const s=n[t];r(s instanceof RegExp||"string"==typeof s,"scheme at position "+t+" must be a RegExp or String"),s instanceof RegExp?o.push(s.source.toString()):(r(e.schemeRegex.test(s),"scheme at position "+t+" must be a valid scheme"),o.push(i(s)))}a=o.join("|")}const l="(?:"+(a?"(?:"+a+")":e.scheme)+":"+(t.domain?e.hierPartCapture:e.hierPart)+")",u=t.allowRelative?"(?:"+l+"|"+s+")":l;return o.wrap(u+n,a)},o.wrap=function(t,e){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:e}},o.uriRegex=o.createRegex({}),e.regex=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?o.createRegex(t):o.uriRegex}},1447:(t,e)=>{"use strict";const n={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};e.Parser=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e[n.settings]&&e.constants)for(const n in e.constants){const t=e.constants[n];if(null!==t&&!["boolean","number","string"].includes(typeof t))throw new Error("Formula constant ".concat(n," contains invalid ").concat(typeof t," value type"))}this.settings=e[n.settings]?e:Object.assign({[n.settings]:!0,constants:{},functions:{}},e),this.single=null,this._parts=null,this._parse(t)}_parse(t){let r=[],i="",o=0,s=!1;const a=t=>{if(o)throw new Error("Formula missing closing parenthesis");const a=r.length?r[r.length-1]:null;if(s||i||t){if(a&&"reference"===a.type&&")"===t)return a.type="function",a.value=this._subFormula(i,a.value),void(i="");if(")"===t){const t=new e.Parser(i,this.settings);r.push({type:"segment",value:t})}else if(s){if("]"===s)return r.push({type:"reference",value:i}),void(i="");r.push({type:"literal",value:i})}else if(n.operatorCharacters.includes(i))a&&"operator"===a.type&&n.operators.includes(a.value+i)?a.value+=i:r.push({type:"operator",value:i});else if(i.match(n.numberRx))r.push({type:"constant",value:parseFloat(i)});else if(void 0!==this.settings.constants[i])r.push({type:"constant",value:this.settings.constants[i]});else{if(!i.match(n.tokenRx))throw new Error("Formula contains invalid token: ".concat(i));r.push({type:"reference",value:i})}i=""}};for(const e of t)s?e===s?(a(),s=!1):i+=e:o?"("===e?(i+=e,++o):")"===e?(--o,o?i+=e:a(e)):i+=e:e in n.literals?s=n.literals[e]:"("===e?(a(),++o):n.operatorCharacters.includes(e)?(a(),i=e,a()):" "!==e?i+=e:a();a(),r=r.map(((t,e)=>"operator"!==t.type||"-"!==t.value||e&&"operator"!==r[e-1].type?t:{type:"operator",value:"n"}));let l=!1;for(const e of r){if("operator"===e.type){if(n.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!n.operators.includes(e.value))throw new Error("Formula contains an unknown operator ".concat(e.value))}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===r.length&&["reference","literal","constant"].includes(r[0].type)&&(this.single={type:"reference"===r[0].type?"reference":"value",value:r[0].value}),this._parts=r.map((t=>{if("operator"===t.type)return n.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new Error("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):n.reference(t.value)}))}_subFormula(t,r){const i=this.settings.functions[r];if("function"!=typeof i)throw new Error("Formula contains unknown function ".concat(r));let o=[];if(t){let e="",i=0,s=!1;const a=()=>{if(!e)throw new Error("Formula contains function ".concat(r," with invalid arguments ").concat(t));o.push(e),e=""};for(let r=0;r<t.length;++r){const o=t[r];s?(e+=o,o===s&&(s=!1)):o in n.literals&&!i?(e+=o,s=n.literals[o]):","!==o||i?(e+=o,"("===o?++i:")"===o&&--i):a()}a()}return o=o.map((t=>new e.Parser(t,this.settings))),function(t){const e=[];for(const n of o)e.push(n.evaluate(t));return i.call(t,...e)}}evaluate(t){const e=this._parts.slice();for(let r=e.length-2;r>=0;--r){const i=e[r];if(i&&"operator"===i.type){const o=e[r+1];e.splice(r+1,1);const s=n.evaluate(o,t);e[r]=n.single(i.value,s)}}return n.operatorsOrder.forEach((r=>{for(let i=1;i<e.length-1;)if(r.includes(e[i])){const r=e[i],o=n.evaluate(e[i-1],t),s=n.evaluate(e[i+1],t);e.splice(i,2);const a=n.calculate(r,o,s);e[i-1]=0===a?0:a}else i+=2})),n.evaluate(e[0],t)}},e.Parser.prototype[n.symbol]=!0,n.reference=function(t){return function(e){return e&&void 0!==e[t]?e[t]:null}},n.evaluate=function(t,e){return null===t?null:"function"==typeof t?t(e):t[n.symbol]?t.evaluate(e):t},n.single=function(t,e){if("!"===t)return!e;const n=-e;return 0===n?0:n},n.calculate=function(t,e,r){if("??"===t)return n.exists(e)?e:r;if("string"==typeof e||"string"==typeof r){if("+"===t)return(e=n.exists(e)?e:"")+(n.exists(r)?r:"")}else switch(t){case"^":return Math.pow(e,r);case"*":return e*r;case"/":return e/r;case"%":return e%r;case"+":return e+r;case"-":return e-r}switch(t){case"<":return e<r;case"<=":return e<=r;case">":return e>r;case">=":return e>=r;case"==":return e===r;case"!=":return e!==r;case"&&":return e&&r;case"||":return e||r}return null},n.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{"use strict";t.exports=JSON.parse('{"version":"17.11.0"}')}},e={},function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(5107);var t,e},t.exports=e()},5102:t=>{function e(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function n(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}t.exports=function(t,r,i){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"===typeof r&&(i=r,r={}),r=r||{},i=i||function(){},s.type=r.type||"text/javascript",s.charset=r.charset||"utf8",s.async=!("async"in r)||!!r.async,s.src=t,r.attrs&&function(t,e){for(var n in e)t.setAttribute(n,e[n])}(s,r.attrs),r.text&&(s.text=""+r.text),("onload"in s?e:n)(s,i),s.onload||e(s,i),o.appendChild(s)}},5781:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=Number.isNaN||function(t){return"number"===typeof t&&t!==t};function i(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(i=t[n],o=e[n],!(i===o||r(i)&&r(o)))return!1;var i,o;return!0}const o=function(t,e){var n;void 0===e&&(e=i);var r,o=[],s=!1;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return s&&n===this&&e(i,o)||(r=t.apply(this,i),s=!0,n=this,o=i),r}}},1725:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,i){for(var o,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))n.call(o,u)&&(a[u]=o[u]);if(e){s=e(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(a[s[c]]=o[s[c]])}}return a}},2584:(t,e,n)=>{var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,s=r&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"===typeof l.get?l.get:null,c=a&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,x=String.prototype.toLowerCase,E=RegExp.prototype.test,S=Array.prototype.concat,w=Array.prototype.join,T=Array.prototype.slice,M=Math.floor,R="function"===typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"===typeof Symbol&&"object"===typeof Symbol.iterator,C="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I||"symbol")?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,N=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function L(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||E.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof t){var r=t<0?-M(-t):M(t);if(r!==t){var i=String(r),o=v.call(e,i.length+1);return _.call(i,n,"$&_")+"."+_.call(_.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(e,n,"$&_")}var D=n(4654),U=D.custom,F=z(U)?U:null;function k(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function B(t){return _.call(String(t),/"/g,"&quot;")}function G(t){return"[object Array]"===X(t)&&(!C||!("object"===typeof t&&C in t))}function j(t){return"[object RegExp]"===X(t)&&(!C||!("object"===typeof t&&C in t))}function z(t){if(I)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!P)return!1;try{return P.call(t),!0}catch(e){}return!1}t.exports=function t(e,r,i,a){var l=r||{};if(V(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(l,"maxStringLength")&&("number"===typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var m=!V(l,"customInspect")||l.customInspect;if("boolean"!==typeof m&&"symbol"!==m)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(l,"numericSeparator")&&"boolean"!==typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var b=l.numericSeparator;if("undefined"===typeof e)return"undefined";if(null===e)return"null";if("boolean"===typeof e)return e?"true":"false";if("string"===typeof e)return Y(e,l);if("number"===typeof e){if(0===e)return 1/0/e>0?"0":"-0";var E=String(e);return b?L(e,E):E}if("bigint"===typeof e){var M=String(e)+"n";return b?L(e,M):M}var A="undefined"===typeof l.depth?5:l.depth;if("undefined"===typeof i&&(i=0),i>=A&&A>0&&"object"===typeof e)return G(e)?"[Array]":"[Object]";var U=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"===typeof t.indent&&t.indent>0))return null;n=w.call(Array(t.indent+1)," ")}return{base:n,prev:w.call(Array(e+1),n)}}(l,i);if("undefined"===typeof a)a=[];else if(W(a,e)>=0)return"[Circular]";function H(e,n,r){if(n&&(a=T.call(a)).push(n),r){var o={depth:l.depth};return V(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),t(e,o,i+1,a)}return t(e,l,i+1,a)}if("function"===typeof e&&!j(e)){var q=function(t){if(t.name)return t.name;var e=y.call(g.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),tt=Q(e,H);return"[Function"+(q?": "+q:" (anonymous)")+"]"+(tt.length>0?" { "+w.call(tt,", ")+" }":"")}if(z(e)){var et=I?_.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(e);return"object"!==typeof e||I?et:$(et)}if(function(t){if(!t||"object"!==typeof t)return!1;if("undefined"!==typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"===typeof t.nodeName&&"function"===typeof t.getAttribute}(e)){for(var nt="<"+x.call(String(e.nodeName)),rt=e.attributes||[],it=0;it<rt.length;it++)nt+=" "+rt[it].name+"="+k(B(rt[it].value),"double",l);return nt+=">",e.childNodes&&e.childNodes.length&&(nt+="..."),nt+="</"+x.call(String(e.nodeName))+">"}if(G(e)){if(0===e.length)return"[]";var ot=Q(e,H);return U&&!function(t){for(var e=0;e<t.length;e++)if(W(t[e],"\n")>=0)return!1;return!0}(ot)?"["+J(ot,U)+"]":"[ "+w.call(ot,", ")+" ]"}if(function(t){return"[object Error]"===X(t)&&(!C||!("object"===typeof t&&C in t))}(e)){var st=Q(e,H);return"cause"in Error.prototype||!("cause"in e)||O.call(e,"cause")?0===st.length?"["+String(e)+"]":"{ ["+String(e)+"] "+w.call(st,", ")+" }":"{ ["+String(e)+"] "+w.call(S.call("[cause]: "+H(e.cause),st),", ")+" }"}if("object"===typeof e&&m){if(F&&"function"===typeof e[F]&&D)return D(e,{depth:A-i});if("symbol"!==m&&"function"===typeof e.inspect)return e.inspect()}if(function(t){if(!o||!t||"object"!==typeof t)return!1;try{o.call(t);try{u.call(t)}catch(nt){return!0}return t instanceof Map}catch(e){}return!1}(e)){var at=[];return s&&s.call(e,(function(t,n){at.push(H(n,e,!0)+" => "+H(t,e))})),Z("Map",o.call(e),at,U)}if(function(t){if(!u||!t||"object"!==typeof t)return!1;try{u.call(t);try{o.call(t)}catch(e){return!0}return t instanceof Set}catch(n){}return!1}(e)){var lt=[];return c&&c.call(e,(function(t){lt.push(H(t,e))})),Z("Set",u.call(e),lt,U)}if(function(t){if(!h||!t||"object"!==typeof t)return!1;try{h.call(t,h);try{p.call(t,p)}catch(nt){return!0}return t instanceof WeakMap}catch(e){}return!1}(e))return K("WeakMap");if(function(t){if(!p||!t||"object"!==typeof t)return!1;try{p.call(t,p);try{h.call(t,h)}catch(nt){return!0}return t instanceof WeakSet}catch(e){}return!1}(e))return K("WeakSet");if(function(t){if(!f||!t||"object"!==typeof t)return!1;try{return f.call(t),!0}catch(e){}return!1}(e))return K("WeakRef");if(function(t){return"[object Number]"===X(t)&&(!C||!("object"===typeof t&&C in t))}(e))return $(H(Number(e)));if(function(t){if(!t||"object"!==typeof t||!R)return!1;try{return R.call(t),!0}catch(e){}return!1}(e))return $(H(R.call(e)));if(function(t){return"[object Boolean]"===X(t)&&(!C||!("object"===typeof t&&C in t))}(e))return $(d.call(e));if(function(t){return"[object String]"===X(t)&&(!C||!("object"===typeof t&&C in t))}(e))return $(H(String(e)));if("undefined"!==typeof window&&e===window)return"{ [object Window] }";if(e===n.g)return"{ [object globalThis] }";if(!function(t){return"[object Date]"===X(t)&&(!C||!("object"===typeof t&&C in t))}(e)&&!j(e)){var ut=Q(e,H),ct=N?N(e)===Object.prototype:e instanceof Object||e.constructor===Object,ht=e instanceof Object?"":"null prototype",pt=!ct&&C&&Object(e)===e&&C in e?v.call(X(e),8,-1):ht?"Object":"",ft=(ct||"function"!==typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(pt||ht?"["+w.call(S.call([],pt||[],ht||[]),": ")+"] ":"");return 0===ut.length?ft+"{}":U?ft+"{"+J(ut,U)+"}":ft+"{ "+w.call(ut,", ")+" }"}return String(e)};var H=Object.prototype.hasOwnProperty||function(t){return t in this};function V(t,e){return H.call(t,e)}function X(t){return m.call(t)}function W(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function Y(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Y(v.call(t,0,e.maxStringLength),e)+r}return k(_.call(_.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,q),"single",e)}function q(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+b.call(e.toString(16))}function $(t){return"Object("+t+")"}function K(t){return t+" { ? }"}function Z(t,e,n,r){return t+" ("+e+") {"+(r?J(n,r):w.call(n,", "))+"}"}function J(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+w.call(t,","+n)+"\n"+e.prev}function Q(t,e){var n=G(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=V(t,i)?e(t[i],t):""}var o,s="function"===typeof A?A(t):[];if(I){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)V(t,l)&&(n&&String(Number(l))===l&&l<t.length||I&&o["$"+l]instanceof Symbol||(E.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if("function"===typeof A)for(var u=0;u<s.length;u++)O.call(t,s[u])&&r.push("["+e(s[u])+"]: "+e(t[s[u]],t));return r}},2592:t=>{"use strict";var e=function(t){return t!==t};t.exports=function(t,n){return 0===t&&0===n?1/t===1/n:t===n||!(!e(t)||!e(n))}},3454:(t,e,n)=>{"use strict";var r=n(9396),i=n(9722),o=n(2592),s=n(3355),a=n(3118),l=i(s(),Object);r(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},3355:(t,e,n)=>{"use strict";var r=n(2592);t.exports=function(){return"function"===typeof Object.is?Object.is:r}},3118:(t,e,n)=>{"use strict";var r=n(3355),i=n(9396);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},1949:(t,e,n)=>{"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(7635),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===o.call(t),r=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=u&&n;if(a&&t.length>0&&!i.call(t,0))for(var m=0;m<t.length;++m)p.push(String(m));if(r&&t.length>0)for(var g=0;g<t.length;++g)p.push(String(g));else for(var y in t)d&&"prototype"===y||!i.call(t,y)||p.push(String(y));if(l)for(var v=function(t){if("undefined"===typeof window||!f)return h(t);try{return h(t)}catch(e){return!1}}(t),_=0;_<c.length;++_)v&&"constructor"===c[_]||!i.call(t,c[_])||p.push(c[_]);return p}}t.exports=r},4892:(t,e,n)=>{"use strict";var r=Array.prototype.slice,i=n(7635),o=Object.keys,s=o?function(t){return o(t)}:n(1949),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(r.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},7635:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},5164:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,l=0,u=a-1;l<a;u=l++){var c=e[n+2*l+0],h=e[n+2*l+1],p=e[n+2*u+0],f=e[n+2*u+1];h>o!==f>o&&i<(p-c)*(o-h)/(f-h)+c&&(s=!s)}return s}},5021:(t,e,n)=>{var r=n(5164),i=n(1850);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},1850:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,l=0,u=a-1;l<a;u=l++){var c=e[l+n][0],h=e[l+n][1],p=e[u+n][0],f=e[u+n][1];h>o!==f>o&&i<(p-c)*(o-h)/(f-h)+c&&(s=!s)}return s}},9056:function(t){t.exports=function(){"use strict";function t(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var e=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function n(t,e){return t>e?1:t<e?-1:0}function r(t,n,r){for(var i=new e(null,null),o=i,s=i;;){var a=r(t,n.key);if(a<0){if(null===n.left)break;if(r(t,n.left.key)<0){var l=n.left;if(n.left=l.right,l.right=n,null===(n=l).left)break}s.left=n,s=n,n=n.left}else{if(!(a>0))break;if(null===n.right)break;if(r(t,n.right.key)>0&&(l=n.right,n.right=l.left,l.left=n,null===(n=l).right))break;o.right=n,o=n,n=n.right}}return o.right=n.left,s.left=n.right,n.left=i.right,n.right=i.left,n}function i(t,n,i,o){var s=new e(t,n);if(null===i)return s.left=s.right=null,s;var a=o(t,(i=r(t,i,o)).key);return a<0?(s.left=i.left,s.right=i,i.left=null):a>=0&&(s.right=i.right,s.left=i,i.right=null),s}function o(t,e,n){var i=null,o=null;if(e){var s=n((e=r(t,e,n)).key,t);0===s?(i=e.left,o=e.right):s<0?(o=e.right,e.right=null,i=e):(i=e.left,e.left=null,o=e)}return{left:i,right:o}}function s(t,e,n){return null===e?t:(null===t||((e=r(t.key,e,n)).left=t),e)}function a(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&a(t.left,o,!1,r,i),t.right&&a(t.right,o,!0,r,i)}}var l=function(){function l(t){void 0===t&&(t=n),this._root=null,this._size=0,this._comparator=t}return l.prototype.insert=function(t,e){return this._size++,this._root=i(t,e,this._root,this._comparator)},l.prototype.add=function(t,n){var i=new e(t,n);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var o=this._comparator,s=r(t,this._root,o),a=o(t,s.key);return 0===a?this._root=s:(a<0?(i.left=s.left,i.right=s,s.left=null):a>0&&(i.right=s.right,i.left=s,s.right=null),this._size++,this._root=i),this._root},l.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},l.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=r(t,e,n)).key)?(null===e.left?i=e.right:(i=r(t,e.left,n)).right=e.right,this._size--,i):e},l.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=r(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},l.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},l.prototype.find=function(t){return this._root&&(this._root=r(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},l.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},l.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},l.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},l.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},l.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},l.prototype.min=function(){return this._root?this.minNode(this._root).key:null},l.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},l.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},l.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},l.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},l.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},l.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},l.prototype.clear=function(){return this._root=null,this._size=0,this},l.prototype.toList=function(){return h(this._root)},l.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&d(t,e,0,r-1,i),null===this._root)this._root=u(t,e,0,r),this._size=r;else{var o=f(this.toList(),c(t,e),i);r=this._size+r,this._root=p({head:o},0,r)}return this},l.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(l.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),l.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return a(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},l.prototype.update=function(t,e,n){var r=this._comparator,a=o(t,this._root,r),l=a.left,u=a.right;r(t,e)<0?u=i(e,n,u,r):l=i(e,n,l,r),this._root=s(l,u,r)},l.prototype.split=function(t){return o(t,this._root,this._comparator)},l.prototype[Symbol.iterator]=function(){var e,n,r;return t(this,(function(t){switch(t.label){case 0:e=this._root,n=[],r=!1,t.label=1;case 1:return r?[3,6]:null===e?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return 0===n.length?[3,4]:[4,e=n.pop()];case 3:return t.sent(),e=e.right,[3,5];case 4:r=!0,t.label=5;case 5:return[3,1];case 6:return[2]}}))},l}();function u(t,n,r,i){var o=i-r;if(o>0){var s=r+Math.floor(o/2),a=t[s],l=n[s],c=new e(a,l);return c.left=u(t,n,r,s),c.right=u(t,n,s+1,i),c}return null}function c(t,n){for(var r=new e(null,null),i=r,o=0;o<t.length;o++)i=i.next=new e(t[o],n[o]);return i.next=null,r.next}function h(t){for(var n=t,r=[],i=!1,o=new e(null,null),s=o;!i;)n?(r.push(n),n=n.left):r.length>0?n=(n=s=s.next=r.pop()).right:i=!0;return s.next=null,o.next}function p(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=p(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=p(t,i+1,n),s}return null}function f(t,n,r){for(var i=new e(null,null),o=i,s=t,a=n;null!==s&&null!==a;)r(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),i.next}function d(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}d(t,e,n,a,i),d(t,e,a+1,r,i)}}const m=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,g=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}};let y=Number.EPSILON;void 0===y&&(y=Math.pow(2,-52));const v=y*y,_=(t,e)=>{if(-y<t&&t<y&&-y<e&&e<y)return 0;const n=t-e;return n*n<v*t*e?0:t<e?-1:1};class b{constructor(){this.reset()}reset(){this.xRounder=new x,this.yRounder=new x}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}class x{constructor(){this.tree=new l,this.round(0)}round(t){const e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===_(e.key,n.key))return this.tree.remove(t),n.key;const r=this.tree.next(e);return null!==r&&0===_(e.key,r.key)?(this.tree.remove(t),r.key):t}}const E=new b,S=11102230246251565e-32,w=134217729,T=(3+8*S)*S;function M(t,e,n,r,i){let o,s,a,l,u=e[0],c=r[0],h=0,p=0;c>u===c>-u?(o=u,u=e[++h]):(o=c,c=r[++p]);let f=0;if(h<t&&p<n)for(c>u===c>-u?(s=u+o,a=o-(s-u),u=e[++h]):(s=c+o,a=o-(s-c),c=r[++p]),o=s,0!==a&&(i[f++]=a);h<t&&p<n;)c>u===c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=e[++h]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++p]),o=s,0!==a&&(i[f++]=a);for(;h<t;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=e[++h],o=s,0!==a&&(i[f++]=a);for(;p<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++p],o=s,0!==a&&(i[f++]=a);return 0===o&&0!==f||(i[f++]=o),f}function R(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function A(t){return new Float64Array(t)}const P=(3+16*S)*S,I=(2+12*S)*S,C=(9+64*S)*S*S,O=A(4),N=A(8),L=A(12),D=A(16),U=A(4);function F(t,e,n,r,i,o,s){let a,l,u,c,h,p,f,d,m,g,y,v,_,b,x,E,S,A;const P=t-i,F=n-i,k=e-o,B=r-o;b=P*B,p=w*P,f=p-(p-P),d=P-f,p=w*B,m=p-(p-B),g=B-m,x=d*g-(b-f*m-d*m-f*g),E=k*F,p=w*k,f=p-(p-k),d=k-f,p=w*F,m=p-(p-F),g=F-m,S=d*g-(E-f*m-d*m-f*g),y=x-S,h=x-y,O[0]=x-(y+h)+(h-S),v=b+y,h=v-b,_=b-(v-h)+(y-h),y=_-E,h=_-y,O[1]=_-(y+h)+(h-E),A=v+y,h=A-v,O[2]=v-(A-h)+(y-h),O[3]=A;let G=R(4,O),j=I*s;if(G>=j||-G>=j)return G;if(h=t-P,a=t-(P+h)+(h-i),h=n-F,u=n-(F+h)+(h-i),h=e-k,l=e-(k+h)+(h-o),h=r-B,c=r-(B+h)+(h-o),0===a&&0===l&&0===u&&0===c)return G;if(j=C*s+T*Math.abs(G),G+=P*c+B*a-(k*u+F*l),G>=j||-G>=j)return G;b=a*B,p=w*a,f=p-(p-a),d=a-f,p=w*B,m=p-(p-B),g=B-m,x=d*g-(b-f*m-d*m-f*g),E=l*F,p=w*l,f=p-(p-l),d=l-f,p=w*F,m=p-(p-F),g=F-m,S=d*g-(E-f*m-d*m-f*g),y=x-S,h=x-y,U[0]=x-(y+h)+(h-S),v=b+y,h=v-b,_=b-(v-h)+(y-h),y=_-E,h=_-y,U[1]=_-(y+h)+(h-E),A=v+y,h=A-v,U[2]=v-(A-h)+(y-h),U[3]=A;const z=M(4,O,4,U,N);b=P*c,p=w*P,f=p-(p-P),d=P-f,p=w*c,m=p-(p-c),g=c-m,x=d*g-(b-f*m-d*m-f*g),E=k*u,p=w*k,f=p-(p-k),d=k-f,p=w*u,m=p-(p-u),g=u-m,S=d*g-(E-f*m-d*m-f*g),y=x-S,h=x-y,U[0]=x-(y+h)+(h-S),v=b+y,h=v-b,_=b-(v-h)+(y-h),y=_-E,h=_-y,U[1]=_-(y+h)+(h-E),A=v+y,h=A-v,U[2]=v-(A-h)+(y-h),U[3]=A;const H=M(z,N,4,U,L);b=a*c,p=w*a,f=p-(p-a),d=a-f,p=w*c,m=p-(p-c),g=c-m,x=d*g-(b-f*m-d*m-f*g),E=l*u,p=w*l,f=p-(p-l),d=l-f,p=w*u,m=p-(p-u),g=u-m,S=d*g-(E-f*m-d*m-f*g),y=x-S,h=x-y,U[0]=x-(y+h)+(h-S),v=b+y,h=v-b,_=b-(v-h)+(y-h),y=_-E,h=_-y,U[1]=_-(y+h)+(h-E),A=v+y,h=A-v,U[2]=v-(A-h)+(y-h),U[3]=A;const V=M(H,L,4,U,D);return D[V-1]}function k(t,e,n,r,i,o){const s=(e-o)*(n-i),a=(t-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=P*u?l:-F(t,e,n,r,i,o,u)}const B=(t,e)=>t.x*e.y-t.y*e.x,G=(t,e)=>t.x*e.x+t.y*e.y,j=(t,e,n)=>{const r=k(t.x,t.y,e.x,e.y,n.x,n.y);return r>0?-1:r<0?1:0},z=t=>Math.sqrt(G(t,t)),H=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return B(i,r)/z(i)/z(r)},V=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return G(i,r)/z(i)/z(r)},X=(t,e,n)=>0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n},W=(t,e,n)=>0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)},Y=(t,e,n,r)=>{if(0===e.x)return W(n,r,t.x);if(0===r.x)return W(t,e,n.x);if(0===e.y)return X(n,r,t.y);if(0===r.y)return X(t,e,n.y);const i=B(e,r);if(0==i)return null;const o={x:n.x-t.x,y:n.y-t.y},s=B(o,e)/i,a=B(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}};class q{static compare(t,e){const n=q.comparePoints(t.point,e.point);return 0!==n?n:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:K.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const e=t.point.events;for(let n=0,r=e.length;n<r;n++){const t=e[n];this.point.events.push(t),t.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let e=0;e<t;e++){const n=this.point.events[e];if(void 0===n.segment.consumedBy)for(let r=e+1;r<t;r++){const t=this.point.events[r];void 0===t.consumedBy&&n.otherSE.point.events===t.otherSE.point.events&&n.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[];for(let e=0,n=this.point.events.length;e<n;e++){const n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}getLeftmostComparator(t){const e=new Map,n=n=>{const r=n.otherSE;e.set(n,{sine:H(this.point,t.point,r.point),cosine:V(this.point,t.point,r.point)})};return(t,r)=>{e.has(t)||n(t),e.has(r)||n(r);const{sine:i,cosine:o}=e.get(t),{sine:s,cosine:a}=e.get(r);return i>=0&&s>=0?o<a?1:o>a?-1:0:i<0&&s<0?o<a?-1:o>a?1:0:s<i?-1:s>i?1:0}}}let $=0;class K{static compare(t,e){const n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;const s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;const n=t.comparePoint(e.leftSE.point);if(n<0)return 1;if(n>0)return-1;const r=e.comparePoint(t.rightSE.point);return 0!==r?r:-1}if(n>r){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;const n=e.comparePoint(t.leftSE.point);if(0!==n)return n;const r=t.comparePoint(e.rightSE.point);return r<0?1:r>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){const n=e.comparePoint(t.rightSE.point);if(0!==n)return n}if(i>o){const n=t.comparePoint(e.rightSE.point);if(n<0)return 1;if(n>0)return-1}if(i!==o){const t=l-s,e=i-n,c=u-a,h=o-r;if(t>e&&c<h)return 1;if(t<e&&c>h)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,n,r){this.id=++$,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=r}static fromRing(t,e,n){let r,i,o;const s=q.comparePoints(t,e);if(s<0)r=t,i=e,o=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=e,i=t,o=-1}const a=new q(r,!0),l=new q(i,!1);return new K(a,l,[n],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;const i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;const s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}getIntersection(t){const e=this.bbox(),n=t.bbox(),r=g(e,n);if(null===r)return null;const i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=m(e,s)&&0===this.comparePoint(s),u=m(n,i)&&0===t.comparePoint(i),c=m(e,a)&&0===this.comparePoint(a),h=m(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?a:null;if(u)return c&&i.x===a.x&&i.y===a.y?null:i;if(l)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;const p=Y(i,this.vector(),s,t.vector());return null===p?null:m(r,p)?E.round(p.x,p.y):null}split(t){const e=[],n=void 0!==t.events,r=new q(t,!0),i=new q(t,!1),o=this.rightSE;this.replaceRightSE(i),e.push(i),e.push(r);const s=new K(r,o,this.rings.slice(),this.windings.slice());return q.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),q.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),i.checkForConsuming()),e}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}consume(t){let e=this,n=t;for(;e.consumedBy;)e=e.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const r=K.compare(e,n);if(0!==r){if(r>0){const t=e;e=n,n=t}if(e.prev===n){const t=e;e=n,n=t}for(let t=0,r=n.rings.length;t<r;t++){const r=n.rings[t],i=n.windings[t],o=e.rings.indexOf(r);-1===o?(e.rings.push(r),e.windings.push(i)):e.windings[o]+=i}n.rings=null,n.windings=null,n.consumedBy=e,n.leftSE.consumedBy=e.leftSE,n.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys;for(let s=0,a=this.rings.length;s<a;s++){const t=this.rings[s],r=this.windings[s],i=e.indexOf(t);-1===i?(e.push(t),n.push(r)):n[i]+=r}const i=[],o=[];for(let s=0,a=e.length;s<a;s++){if(0===n[s])continue;const t=e[s],r=t.poly;if(-1===o.indexOf(r))if(t.isExterior)i.push(r);else{-1===o.indexOf(r)&&o.push(r);const e=i.indexOf(t.poly);-1!==e&&i.splice(e,1)}}for(let s=0,a=i.length;s<a;s++){const t=i[s].multiPoly;-1===r.indexOf(t)&&r.push(t)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;const t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(at.type){case"union":{const n=0===t.length,r=0===e.length;this._isInResult=n!==r;break}case"intersection":{let n,r;t.length<e.length?(n=t.length,r=e.length):(n=e.length,r=t.length),this._isInResult=r===at.numMultiPolys&&n<r;break}case"xor":{const n=Math.abs(t.length-e.length);this._isInResult=n%2===1;break}case"difference":{const n=t=>1===t.length&&t[0].isSubject;this._isInResult=n(t)!==n(e);break}default:throw new Error("Unrecognized operation type found ".concat(at.type))}return this._isInResult}}class Z{constructor(t,e,n){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],"number"!==typeof t[0][0]||"number"!==typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=E.round(t[0][0],t[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let o=1,s=t.length;o<s;o++){if("number"!==typeof t[o][0]||"number"!==typeof t[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let e=E.round(t[o][0],t[o][1]);e.x===i.x&&e.y===i.y||(this.segments.push(K.fromRing(i,e,this)),e.x<this.bbox.ll.x&&(this.bbox.ll.x=e.x),e.y<this.bbox.ll.y&&(this.bbox.ll.y=e.y),e.x>this.bbox.ur.x&&(this.bbox.ur.x=e.x),e.y>this.bbox.ur.y&&(this.bbox.ur.y=e.y),i=e)}r.x===i.x&&r.y===i.y||this.segments.push(K.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}class J{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Z(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const e=new Z(t[n],this,!1);e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=e.bbox.ll.x),e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=e.bbox.ll.y),e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=e.bbox.ur.x),e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=e.bbox.ur.y),this.interiorRings.push(e)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getSweepEvents();for(let e=0,r=n.length;e<r;e++)t.push(n[e])}return t}}class Q{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof t[0][0][0]&&(t=[t])}catch(n){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,i=t.length;r<i;r++){const e=new J(t[r],this);e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=e.bbox.ll.x),e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=e.bbox.ll.y),e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=e.bbox.ur.x),e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=e.bbox.ur.y),this.polys.push(e)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getSweepEvents();for(let e=0,r=n.length;e<r;e++)t.push(n[e])}return t}}class tt{static factory(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!r.isInResult()||r.ringOut)continue;let i=null,o=r.leftSE,s=r.rightSE;const a=[o],l=o.point,u=[];for(;i=o,o=s,a.push(o),o.point!==l;)for(;;){const t=o.getAvailableLinkedEvents();if(0===t.length){const t=a[0].point,e=a[a.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(t.x,",")+" ".concat(t.y,"]. Last matching segment found ends at")+" [".concat(e.x,", ").concat(e.y,"]."))}if(1===t.length){s=t[0].otherSE;break}let n=null;for(let e=0,i=u.length;e<i;e++)if(u[e].point===o.point){n=e;break}if(null!==n){const t=u.splice(n)[0],r=a.splice(t.index);r.unshift(r[0].otherSE),e.push(new tt(r.reverse()));continue}u.push({index:a.length,point:o.point});const r=o.getLeftmostComparator(i);s=t.sort(r)[0].otherSE;break}e.push(new tt(a))}return e}constructor(t){this.events=t;for(let e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const e=[t];for(let l=1,u=this.events.length-1;l<u;l++){const n=this.events[l].point,r=this.events[l+1].point;0!==j(n,t,r)&&(e.push(n),t=n)}if(1===e.length)return null;const n=e[0],r=e[1];0===j(n,t,r)&&e.shift(),e.push(e[0]);const i=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,a=[];for(let l=o;l!=s;l+=i)a.push([e[l].x,e[l].y]);return a}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let r=1,i=this.events.length;r<i;r++){const e=this.events[r];q.compare(t,e)>0&&(t=e)}let e=t.segment.prevInResult(),n=e?e.prevInResult():null;for(;;){if(!e)return null;if(!n)return e.ringOut;if(n.ringOut!==e.ringOut)return n.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing();e=n.prevInResult(),n=e?e.prevInResult():null}}}class et{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}class nt{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}_composePolys(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new et(r));else{const t=r.enclosingRing();t.poly||e.push(new et(t)),t.poly.addInterior(r)}}return e}}class rt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K.compare;this.queue=t,this.tree=new l(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;const r=t.isLeft?this.tree.add(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree.");let i,o,s=r,a=r;for(;void 0===i;)s=this.tree.prev(s),null===s?i=null:void 0===s.key.consumedBy&&(i=s.key);for(;void 0===o;)a=this.tree.next(a),null===a?o=null:void 0===a.key.consumedBy&&(o=a.key);if(t.isLeft){let r=null;if(i){const t=i.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(r=t),!i.isAnEndpoint(t))){const e=this._splitSafely(i,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}}let s=null;if(o){const t=o.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(s=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}}if(null!==r||null!==s){let t=null;t=null===r?s:null===s||q.comparePoints(r,s)<=0?r:s,this.queue.remove(e.rightSE),n.push(e.rightSE);const i=e.split(t);for(let e=0,r=i.length;e<r;e++)n.push(i[e])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=i)}else{if(i&&o){const t=i.getIntersection(o);if(null!==t){if(!i.isAnEndpoint(t)){const e=this._splitSafely(i,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}}}this.tree.remove(e)}return n}_splitSafely(t,e){this.tree.remove(t);const n=t.rightSE;this.queue.remove(n);const r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.add(t),r}}const it="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ot="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class st{run(t,e,n){at.type=t,E.reset();const r=[new Q(e,!0)];for(let l=0,c=n.length;l<c;l++)r.push(new Q(n[l],!1));if(at.numMultiPolys=r.length,"difference"===at.type){const t=r[0];let e=1;for(;e<r.length;)null!==g(r[e].bbox,t.bbox)?e++:r.splice(e,1)}if("intersection"===at.type)for(let l=0,c=r.length;l<c;l++){const t=r[l];for(let e=l+1,n=r.length;e<n;e++)if(null===g(t.bbox,r[e].bbox))return[]}const i=new l(q.compare);for(let l=0,c=r.length;l<c;l++){const t=r[l].getSweepEvents();for(let e=0,n=t.length;e<n;e++)if(i.insert(t[e]),i.size>it)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new rt(i);let s=i.size,a=i.pop();for(;a;){const t=a.key;if(i.size===s){const e=t.segment;throw new Error("Unable to pop() ".concat(t.isLeft?"left":"right"," SweepEvent ")+"[".concat(t.point.x,", ").concat(t.point.y,"] from segment #").concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] from queue."))}if(i.size>it)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>ot)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const e=o.process(t);for(let n=0,r=e.length;n<r;n++){const t=e[n];void 0===t.consumedBy&&i.insert(t)}s=i.size,a=i.pop()}E.reset();const u=tt.factory(o.segments);return new nt(u).getGeom()}}const at=new st,lt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at.run("union",t,n)},ut=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at.run("intersection",t,n)},ct=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at.run("xor",t,n)},ht=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at.run("difference",t,n)};return{union:lt,intersection:ut,xor:ct,difference:ht}}()},888:(t,e,n)=>{"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:(t,e,n)=>{t.exports=n(888)()},9047:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2441:function(t){t.exports=function(){"use strict";function t(t,n,i,o,s){e(t,n,i||0,o||t.length-1,s||r)}function e(t,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,l=r-i+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-l*c/a+h)),Math.min(o,Math.floor(r+(a-l)*c/a+h)),s)}var p=t[r],f=i,d=o;for(n(t,i,r),s(t[o],p)>0&&n(t,i,o);f<d;){for(n(t,f,d),f++,d--;s(t[f],p)<0;)f++;for(;s(t[d],p)>0;)d--}0===s(t[i],p)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},1977:(t,e,n)=>{"use strict";t.exports=i,t.exports.default=i;var r=n(2441);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(s=e+Math.ceil((n-e)/i/2)*i,r(t,s,e,n,o),a.push(e,s,s,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!m(t,e))return n;for(var i,o,s,a,l=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],m(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!m(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],m(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,s,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),s=!0),a.leaf&&-1!==(i=o(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;s||a.leaf||!d(a,l)?r?(n++,a=r.children[n],s=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return s(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=g([])).leaf=!1,i.height=r;var l,u,c,h,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(y(t,e,n,f,this.compareMinX),l=e;l<=n;l+=f)for(y(t,l,c=Math.min(l+f-1,n),p,this.compareMinY),u=l;u<=c;u+=p)h=Math.min(u+p-1,c),i.children.push(this._build(t,u,h,r-1));return s(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,l,u,c,p,f,d;r.push(e),!e.leaf&&r.length-1!==n;){for(c=p=1/0,i=0,o=e.children.length;i<o;i++)l=h(s=e.children[i]),f=t,d=s,(u=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<p?(p=u,c=l<c?l:c,a=s):u===p&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),l(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,l,u,c,p;for(u=c=1/0,r=e;r<=n-e;r++)s=f(i=a(t,0,r,this.toBBox),o=a(t,r,n,this.toBBox)),l=h(i)+h(o),s<u?(u=s,p=r,c=l<c?l:c):s===u&&l<c&&(c=l,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,n-e,n,s),h=p(u)+p(c);for(i=e;i<n-e;i++)o=t.children[i],l(u,t.leaf?s(o):o),h+=p(u);for(i=n-e-1;i>=e;i--)o=t.children[i],l(c,t.leaf?s(o):o),h+=p(c);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},4463:(t,e,n)=>{"use strict";var r=n(2791),i=n(5296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(d,t)||!h.call(f,t)&&(p.test(t)?d[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=L&&t[L]||t["@@iterator"])?t:null}var U,F=Object.assign;function k(t){if(void 0===U)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);U=e&&e[1]||""}return"\n"+U+t}var B=!1;function G(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?k(t):""}function j(t){switch(t.tag){case 5:return k(t.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 2:case 15:return t=G(t.type,!1);case 11:return t=G(t.type.render,!1);case 1:return t=G(t.type,!0);default:return""}}function z(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case R:return(t.displayName||"Context")+".Consumer";case M:return(t._context.displayName||"Context")+".Provider";case A:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case C:return null!==(e=t.displayName||null)?e:z(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return z(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(e);case 8:return e===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function X(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=X(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=X(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=V(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Z(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function J(t,e){Z(t,e);var n=V(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+V(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:V(n)}}function ot(t,e){var n=V(e.value),r=V(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Et=null,St=null,wt=null;function Tt(t){if(t=_i(t)){if("function"!==typeof Et)throw Error(o(280));var e=t.stateNode;e&&(e=xi(e),Et(t.stateNode,t.type,e))}}function Mt(t){St?wt?wt.push(t):wt=[t]:St=t}function Rt(){if(St){var t=St,e=wt;if(wt=St=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function At(t,e){return t(e)}function Pt(){}var It=!1;function Ct(t,e,n){if(It)return t(e,n);It=!0;try{return At(t,e,n)}finally{It=!1,(null!==St||null!==wt)&&(Pt(),Rt())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Nt=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(ct){Nt=!1}function Dt(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ut=!1,Ft=null,kt=!1,Bt=null,Gt={onError:function(t){Ut=!0,Ft=t}};function jt(t,e,n,r,i,o,s,a,l){Ut=!1,Ft=null,Dt.apply(Gt,arguments)}function zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Vt(t){if(zt(t)!==t)throw Error(o(188))}function Xt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=zt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vt(i),t;if(s===r)return Vt(i),e;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=i.unstable_scheduleCallback,qt=i.unstable_cancelCallback,$t=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Zt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=he(a):0!==(o&=s)&&(r=he(o))}else 0!==(s=n&~i)?r=he(s):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-se(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-se(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,Ee,Se,we,Te,Me=!1,Re=[],Ae=null,Pe=null,Ie=null,Ce=new Map,Oe=new Map,Ne=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function De(t,e){switch(t){case"focusin":case"focusout":Ae=null;break;case"dragenter":case"dragleave":Pe=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Ue(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&Ee(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Fe(t){var e=vi(t.target);if(null!==e){var n=zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Te(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ke(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_i(n))&&Ee(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Be(t,e,n){ke(t)&&n.delete(e)}function Ge(){Me=!1,null!==Ae&&ke(Ae)&&(Ae=null),null!==Pe&&ke(Pe)&&(Pe=null),null!==Ie&&ke(Ie)&&(Ie=null),Ce.forEach(Be),Oe.forEach(Be)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Me||(Me=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ge)))}function ze(t){function e(e){return je(e,t)}if(0<Re.length){je(Re[0],t);for(var n=1;n<Re.length;n++){var r=Re[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ae&&je(Ae,t),null!==Pe&&je(Pe,t),null!==Ie&&je(Ie,t),Ce.forEach(e),Oe.forEach(e),n=0;n<Ne.length;n++)(r=Ne[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ne.length&&null===(n=Ne[0]).blockedOn;)Fe(n),null===n.blockedOn&&Ne.shift()}var He=b.ReactCurrentBatchConfig,Ve=!0;function Xe(t,e,n,r){var i=_e,o=He.transition;He.transition=null;try{_e=1,Ye(t,e,n,r)}finally{_e=i,He.transition=o}}function We(t,e,n,r){var i=_e,o=He.transition;He.transition=null;try{_e=4,Ye(t,e,n,r)}finally{_e=i,He.transition=o}}function Ye(t,e,n,r){if(Ve){var i=$e(t,e,n,r);if(null===i)Vr(t,e,r,qe,n),De(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ae=Ue(Ae,t,e,n,r,i),!0;case"dragenter":return Pe=Ue(Pe,t,e,n,r,i),!0;case"mouseover":return Ie=Ue(Ie,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ce.set(o,Ue(Ce.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Oe.set(o,Ue(Oe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(De(t,r),4&e&&-1<Le.indexOf(t)){for(;null!==i;){var o=_i(i);if(null!==o&&xe(o),null===(o=$e(t,e,n,r))&&Vr(t,e,r,qe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(t,e,r,null,n)}}var qe=null;function $e(t,e,n,r){if(qe=null,null!==(t=vi(t=xt(r))))if(null===(e=zt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Ze=null,Je=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Je,r=n.length,i="value"in Ze?Ze.value:Ze.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),pn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),dn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=on(vn),bn=on(F({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Tn(){return wn}var Mn=F({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Rn=on(Mn),An=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),In=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=F({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Cn),Nn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Un=c&&"TextEvent"in window&&!Dn,Fn=c&&(!Ln||Dn&&8<Dn&&11>=Dn),kn=String.fromCharCode(32),Bn=!1;function Gn(t,e){switch(t){case"keyup":return-1!==Nn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Xn(t,e,n,r){Mt(r),0<(e=Wr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Yn=null;function qn(t){kr(t,0)}function $n(t){if(Y(bi(t)))return t}function Kn(t,e){if("change"===t)return e}var Zn=!1;if(c){var Jn;if(c){var Qn="oninput"in document;if(!Qn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Qn="function"===typeof tr.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",nr),Yn=Wn=null)}function nr(t){if("value"===t.propertyName&&$n(Yn)){var e=[];Xn(e,Yn,t,xt(t)),Ct(qn,e)}}function rr(t,e,n){"focusin"===t?(er(),Yn=n,(Wn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return $n(Yn)}function or(t,e){if("click"===t)return $n(e)}function sr(t,e){if("input"===t||"change"===t)return $n(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pr(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=q((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function dr(t){var e=pr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var s=cr(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function xr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},wr={};function Tr(t){if(Sr[t])return Sr[t];if(!Er[t])return t;var e,n=Er[t];for(e in n)if(n.hasOwnProperty(e)&&e in wr)return Sr[t]=n[e];return t}c&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Mr=Tr("animationend"),Rr=Tr("animationiteration"),Ar=Tr("animationstart"),Pr=Tr("transitionend"),Ir=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){Ir.set(t,e),l(e,[t])}for(var Nr=0;Nr<Cr.length;Nr++){var Lr=Cr[Nr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Mr,"onAnimationEnd"),Or(Rr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Pr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,s,a,l,u){if(jt.apply(this,arguments),Ut){if(!Ut)throw Error(o(198));var c=Ft;Ut=!1,Ft=null,kt||(kt=!0,Bt=c)}}(r,e,void 0,t),t.currentTarget=null}function kr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,a,u),o=l}}}if(kt)throw t=Bt,kt=!1,Bt=null,t}function Br(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Hr(e,t,2,!1),n.add(r))}function Gr(t,e,n){var r=0;e&&(r|=4),Hr(n,t,r,e)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(t){if(!t[jr]){t[jr]=!0,s.forEach((function(e){"selectionchange"!==e&&(Ur.has(e)||Gr(e,!1,t),Gr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[jr]||(e[jr]=!0,Gr("selectionchange",!1,e))}}function Hr(t,e,n,r){switch(Ke(e)){case 1:var i=Xe;break;case 4:i=We;break;default:i=Ye}n=i.bind(null,e,n,t),i=void 0,!Nt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue t}a=a.parentNode}}r=r.return}Ct((function(){var r=o,i=xt(n),s=[];t:{var a=Ir.get(t);if(void 0!==a){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Rn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Mr:case Rr:case Ar:l=yn;break;case Pr:l=In;break;case"scroll":l=pn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&e),h=!c&&"scroll"===t,p=c?null!==a?a+"Capture":null:a;c=[];for(var f,d=r;null!==d;){var m=(f=d).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=Ot(d,p))&&c.push(Xr(d,m,f)))),h)break;d=d.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===bt||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[di])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=zt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=dn,m="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=An,m="onPointerLeave",p="onPointerEnter",d="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,d+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((c=new c(p,d+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(p=u,d=0,f=c=l;f;f=Yr(f))d++;for(f=0,m=p;m;m=Yr(m))f++;for(;0<d-f;)c=Yr(c),d--;for(;0<f-d;)p=Yr(p),f--;for(;d--;){if(c===p||null!==p&&c===p.alternate)break t;c=Yr(c),p=Yr(p)}c=null}else c=null;null!==l&&qr(s,a,l,c,!1),null!==u&&null!==h&&qr(s,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Kn;else if(Vn(a))if(Zn)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(t,r))?Xn(s,g,n,i):(y&&y(t,a,r),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=r?bi(r):window,t){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var v;if(Ln)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else zn?Gn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(v=tn()):(Je="value"in(Ze=i)?Ze.value:Ze.textContent,zn=!0)),0<(y=Wr(r,_)).length&&(_=new bn(_,t,null,n,i),s.push({event:_,listeners:y}),v?_.data=v:null!==(v=jn(n))&&(_.data=v))),(v=Un?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(Bn=!0,kn);case"textInput":return(t=e.data)===kn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(zn)return"compositionend"===t||!Ln&&Gn(t,e)?(t=tn(),Qe=Je=Ze=null,zn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}kr(s,e)}))}function Xr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ot(t,n))&&r.unshift(Xr(t,o,i)),null!=(o=Ot(t,e))&&r.push(Xr(t,o,i))),t=t.return}return r}function Yr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qr(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ot(n,o))&&s.unshift(Xr(n,l,a)):i||null!=(l=Ot(n,o))&&s.push(Xr(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var $r=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Zr(t){return("string"===typeof t?t:""+t).replace($r,"\n").replace(Kr,"")}function Jr(t,e,n){if(e=Zr(e),Zr(t)!==e&&n)throw Error(o(425))}function Qr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void ze(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);ze(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,di="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[di]||n[pi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[pi])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function _i(t){return!(t=t[pi]||t[di])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xi(t){return t[fi]||null}var Ei=[],Si=-1;function wi(t){return{current:t}}function Ti(t){0>Si||(t.current=Ei[Si],Ei[Si]=null,Si--)}function Mi(t,e){Si++,Ei[Si]=t.current,t.current=e}var Ri={},Ai=wi(Ri),Pi=wi(!1),Ii=Ri;function Ci(t,e){var n=t.type.contextTypes;if(!n)return Ri;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ni(){Ti(Pi),Ti(Ai)}function Li(t,e,n){if(Ai.current!==Ri)throw Error(o(168));Mi(Ai,e),Mi(Pi,n)}function Di(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,H(t)||"Unknown",i));return F({},n,r)}function Ui(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ri,Ii=Ai.current,Mi(Ai,t),Mi(Pi,Pi.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Di(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Ti(Pi),Ti(Ai),Mi(Ai,t)):Ti(Pi),Mi(Pi,n)}var ki=null,Bi=!1,Gi=!1;function ji(t){null===ki?ki=[t]:ki.push(t)}function zi(){if(!Gi&&null!==ki){Gi=!0;var t=0,e=_e;try{var n=ki;for(_e=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}ki=null,Bi=!1}catch(i){throw null!==ki&&(ki=ki.slice(t+1)),Yt(Qt,zi),i}finally{_e=e,Gi=!1}}return null}var Hi=[],Vi=0,Xi=null,Wi=0,Yi=[],qi=0,$i=null,Ki=1,Zi="";function Ji(t,e){Hi[Vi++]=Wi,Hi[Vi++]=Xi,Xi=t,Wi=e}function Qi(t,e,n){Yi[qi++]=Ki,Yi[qi++]=Zi,Yi[qi++]=$i,$i=t;var r=Ki;t=Zi;var i=32-se(r)-1;r&=~(1<<i),n+=1;var o=32-se(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-se(e)+i|n<<i|r,Zi=o+t}else Ki=1<<o|n<<i|r,Zi=t}function to(t){null!==t.return&&(Ji(t,1),Qi(t,1,0))}function eo(t){for(;t===Xi;)Xi=Hi[--Vi],Hi[Vi]=null,Wi=Hi[--Vi],Hi[Vi]=null;for(;t===$i;)$i=Yi[--qi],Yi[qi]=null,Zi=Yi[--qi],Yi[qi]=null,Ki=Yi[--qi],Yi[qi]=null}var no=null,ro=null,io=!1,oo=null;function so(t,e){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==$i?{id:Ki,overflow:Zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=ro;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=ui(n.nextSibling);var r=no;e&&ao(t,e)?so(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw po(),Error(o(418));for(;e;)so(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ui(t.stateNode.nextSibling):null;return!0}function po(){for(var t=ro;t;)t=ui(t.nextSibling)}function fo(){ro=no=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=b.ReactCurrentBatchConfig;function yo(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var vo=wi(null),_o=null,bo=null,xo=null;function Eo(){xo=bo=_o=null}function So(t){var e=vo.current;Ti(vo),t._currentValue=e}function wo(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function To(t,e){_o=t,xo=bo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(ba=!0),t.firstContext=null)}function Mo(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},null===bo){if(null===_o)throw Error(o(308));bo=t,_o.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var Ro=null;function Ao(t){null===Ro?Ro=[t]:Ro.push(t)}function Po(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Ao(e)):(n.next=i.next,i.next=n),e.interleaved=n,Io(t,r)}function Io(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Co=!1;function Oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Do(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Io(t,n)}return null===(i=r.interleaved)?(e.next=e,Ao(r)):(e.next=i.next,i.next=e),r.interleaved=e,Io(t,n)}function Uo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ko(t,e,n,r){var i=t.updateQueue;Co=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,c=u=l=null,a=o;;){var p=a.lane,f=a.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var d=t,m=a;switch(p=e,f=n,m.tag){case 1:if("function"===typeof(d=m.payload)){h=d.call(f,h,p);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=m.payload)?d.call(f,h,p):d)||void 0===p)break t;h=F({},h,p);break t;case 2:Co=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(p=i.effects)?i.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,s|=p;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Fl|=s,t.lanes=s,t.memoizedState=h}}function Bo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go=(new r.Component).refs;function jo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var zo={isMounted:function(t){return!!(t=t._reactInternals)&&zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Lo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Do(t,o,i))&&(ru(e,t,i,r),Uo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Lo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Do(t,o,i))&&(ru(e,t,i,r),Uo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eu(),r=nu(t),i=Lo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Do(t,i,r))&&(ru(e,t,r,n),Uo(e,t,r))}};function Ho(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Vo(t,e,n){var r=!1,i=Ri,o=e.contextType;return"object"===typeof o&&null!==o?o=Mo(o):(i=Oi(e)?Ii:Ai.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Ci(t,i):Ri),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=zo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Xo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zo.enqueueReplaceState(e,e.state,null)}function Wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Go,Oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Mo(o):(o=Oi(e)?Ii:Ai.current,i.context=Ci(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(jo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&zo.enqueueReplaceState(i,i.state,null),ko(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Yo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;e===Go&&(e=i.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $o(t){return(0,t._init)(t._payload)}function Ko(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Lu(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=ku(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&$o(o)===e.type)?((r=i(e,n.props)).ref=Yo(t,e,n),r.return=t,r):((r=Du(n.type,n.key,n.props,null,t.mode,r)).ref=Yo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Uu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=ku(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Du(e.type,e.key,e.props,null,t.mode,n)).ref=Yo(t,null,e),n.return=t,n;case E:return(e=Bu(e,t.mode,n)).return=t,e;case O:return p(t,(0,e._init)(e._payload),n)}if(et(e)||D(e))return(e=Uu(e,t.mode,n,null)).return=t,e;qo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(t,e,n,r):null;case E:return n.key===i?c(t,e,n,r):null;case O:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||D(n))return null!==i?null:h(t,e,n,r,null);qo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case E:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case O:return d(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||D(r))return h(e,t=t.get(n)||null,r,i,null);qo(e,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),io&&Ji(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=p(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return io&&Ji(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=d(h,i,m,a[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),io&&Ji(i,m),u}function g(i,a,l,u){var c=D(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,u);if(null===_){null===m&&(m=y);break}t&&m&&null===_.alternate&&e(i,m),a=s(_,a,g),null===h?c=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),io&&Ji(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(i,v.value,u))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return io&&Ji(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=d(m,i,g,v.value,u))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),io&&Ji(i,g),c}return function t(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:t:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&$o(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=Yo(r,c,s),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}s.type===S?((o=Uu(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Du(s.type,s.key,s.props,null,r.mode,l)).ref=Yo(r,o,s),l.return=r,r=l)}return a(r);case E:t:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Bu(s,r.mode,l)).return=r,r=o}return a(r);case O:return t(r,o,(c=s._init)(s._payload),l)}if(et(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=ku(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Zo=Ko(!0),Jo=Ko(!1),Qo={},ts=wi(Qo),es=wi(Qo),ns=wi(Qo);function rs(t){if(t===Qo)throw Error(o(174));return t}function is(t,e){switch(Mi(ns,e),Mi(es,t),Mi(ts,Qo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ti(ts),Mi(ts,e)}function os(){Ti(ts),Ti(es),Ti(ns)}function ss(t){rs(ns.current);var e=rs(ts.current),n=lt(e,t.type);e!==n&&(Mi(es,t),Mi(ts,n))}function as(t){es.current===t&&(Ti(ts),Ti(es))}var ls=wi(0);function us(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cs=[];function hs(){for(var t=0;t<cs.length;t++)cs[t]._workInProgressVersionPrimary=null;cs.length=0}var ps=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ds=0,ms=null,gs=null,ys=null,vs=!1,_s=!1,bs=0,xs=0;function Es(){throw Error(o(321))}function Ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function ws(t,e,n,r,i,s){if(ds=s,ms=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ps.current=null===t||null===t.memoizedState?aa:la,t=n(r,i),_s){s=0;do{if(_s=!1,bs=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,e.updateQueue=null,ps.current=ua,t=n(r,i)}while(_s)}if(ps.current=sa,e=null!==gs&&null!==gs.next,ds=0,ys=gs=ms=null,vs=!1,e)throw Error(o(300));return t}function Ts(){var t=0!==bs;return bs=0,t}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=t:ys=ys.next=t,ys}function Rs(){if(null===gs){var t=ms.alternate;t=null!==t?t.memoizedState:null}else t=gs.next;var e=null===ys?ms.memoizedState:ys.next;if(null!==e)ys=e,gs=t;else{if(null===t)throw Error(o(310));t={memoizedState:(gs=t).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=t:ys=ys.next=t}return ys}function As(t,e){return"function"===typeof e?e(t):e}function Ps(t){var e=Rs(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var h=c.lane;if((ds&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,a=r):u=u.next=p,ms.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,ar(r,e.memoizedState)||(ba=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,ms.lanes|=s,Fl|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Is(t){var e=Rs(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);ar(s,e.memoizedState)||(ba=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Cs(){}function Os(t,e){var n=ms,r=Rs(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Vs(Ds.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Bs(9,Ls.bind(null,n,r,i,e),void 0,null),null===Il)throw Error(o(349));0!==(30&ds)||Ns(n,e,i)}return i}function Ns(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ms.updateQueue)?(e={lastEffect:null,stores:null},ms.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ls(t,e,n,r){e.value=n,e.getSnapshot=r,Us(e)&&Fs(t)}function Ds(t,e,n){return n((function(){Us(e)&&Fs(t)}))}function Us(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Fs(t){var e=Io(t,1);null!==e&&ru(e,t,1,-1)}function ks(t){var e=Ms();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,ms,t),[e.memoizedState,t]}function Bs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ms.updateQueue)?(e={lastEffect:null,stores:null},ms.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Gs(){return Rs().memoizedState}function js(t,e,n,r){var i=Ms();ms.flags|=t,i.memoizedState=Bs(1|e,n,void 0,void 0===r?null:r)}function zs(t,e,n,r){var i=Rs();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&Ss(r,s.deps))return void(i.memoizedState=Bs(e,n,o,r))}ms.flags|=t,i.memoizedState=Bs(1|e,n,o,r)}function Hs(t,e){return js(8390656,8,t,e)}function Vs(t,e){return zs(2048,8,t,e)}function Xs(t,e){return zs(4,2,t,e)}function Ws(t,e){return zs(4,4,t,e)}function Ys(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function qs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,zs(4,4,Ys.bind(null,e,t),n)}function $s(){}function Ks(t,e){var n=Rs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ss(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zs(t,e){var n=Rs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ss(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Js(t,e,n){return 0===(21&ds)?(t.baseState&&(t.baseState=!1,ba=!0),t.memoizedState=n):(ar(n,e)||(n=me(),ms.lanes|=n,Fl|=n,t.baseState=!0),e)}function Qs(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var r=fs.transition;fs.transition={};try{t(!1),e()}finally{_e=n,fs.transition=r}}function ta(){return Rs().memoizedState}function ea(t,e,n){var r=nu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(t))ia(e,n);else if(null!==(n=Po(t,e,n,r))){ru(n,t,r,eu()),oa(n,e,r)}}function na(t,e,n){var r=nu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(t))ia(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=e.interleaved;return null===l?(i.next=i,Ao(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(n=Po(t,e,i,r))&&(ru(n,t,r,i=eu()),oa(n,e,r))}}function ra(t){var e=t.alternate;return t===ms||null!==e&&e===ms}function ia(t,e){_s=vs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oa(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var sa={readContext:Mo,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},aa={readContext:Mo,useCallback:function(t,e){return Ms().memoizedState=[t,void 0===e?null:e],t},useContext:Mo,useEffect:Hs,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,js(4194308,4,Ys.bind(null,e,t),n)},useLayoutEffect:function(t,e){return js(4194308,4,t,e)},useInsertionEffect:function(t,e){return js(4,2,t,e)},useMemo:function(t,e){var n=Ms();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ms();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,ms,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ms().memoizedState=t},useState:ks,useDebugValue:$s,useDeferredValue:function(t){return Ms().memoizedState=t},useTransition:function(){var t=ks(!1),e=t[0];return t=Qs.bind(null,t[1]),Ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ms,i=Ms();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Il)throw Error(o(349));0!==(30&ds)||Ns(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Hs(Ds.bind(null,r,s,t),[t]),r.flags|=2048,Bs(9,Ls.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ms(),e=Il.identifierPrefix;if(io){var n=Zi;e=":"+e+"R"+(n=(Ki&~(1<<32-se(Ki)-1)).toString(32)+n),0<(n=bs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=xs++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Mo,useCallback:Ks,useContext:Mo,useEffect:Vs,useImperativeHandle:qs,useInsertionEffect:Xs,useLayoutEffect:Ws,useMemo:Zs,useReducer:Ps,useRef:Gs,useState:function(){return Ps(As)},useDebugValue:$s,useDeferredValue:function(t){return Js(Rs(),gs.memoizedState,t)},useTransition:function(){return[Ps(As)[0],Rs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1},ua={readContext:Mo,useCallback:Ks,useContext:Mo,useEffect:Vs,useImperativeHandle:qs,useInsertionEffect:Xs,useLayoutEffect:Ws,useMemo:Zs,useReducer:Is,useRef:Gs,useState:function(){return Is(As)},useDebugValue:$s,useDeferredValue:function(t){var e=Rs();return null===gs?e.memoizedState=t:Js(e,gs.memoizedState,t)},useTransition:function(){return[Is(As)[0],Rs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1};function ca(t,e){try{var n="",r=e;do{n+=j(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function pa(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function da(t,e,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xl||(Xl=!0,Wl=r),pa(0,e)},n}function ma(t,e,n){(n=Lo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pa(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){pa(0,e),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ga(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fa;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Mu.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Lo(-1,1)).tag=2,Do(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var _a=b.ReactCurrentOwner,ba=!1;function xa(t,e,n,r){e.child=null===t?Jo(e,null,n,r):Zo(e,t.child,n,r)}function Ea(t,e,n,r,i){n=n.render;var o=e.ref;return To(e,i),r=ws(t,e,n,r,o,i),n=Ts(),null===t||ba?(io&&n&&to(e),e.flags|=1,xa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i))}function Sa(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Nu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Du(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,wa(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&t.ref===e.ref)return Xa(t,e,i)}return e.flags|=1,(t=Lu(o,r)).ref=e.ref,t.return=e,e.child=t}function wa(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(ba=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Xa(t,e,i);0!==(131072&t.flags)&&(ba=!0)}}return Ra(t,e,n,r,i)}function Ta(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Ll,Nl),Nl|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mi(Ll,Nl),Nl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mi(Ll,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Mi(Ll,Nl),Nl|=r;return xa(t,e,i,n),e.child}function Ma(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ra(t,e,n,r,i){var o=Oi(n)?Ii:Ai.current;return o=Ci(e,o),To(e,i),n=ws(t,e,n,r,o,i),r=Ts(),null===t||ba?(io&&r&&to(e),e.flags|=1,xa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i))}function Aa(t,e,n,r,i){if(Oi(n)){var o=!0;Ui(e)}else o=!1;if(To(e,i),null===e.stateNode)Va(t,e),Vo(e,n,r),Wo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=Mo(u):u=Ci(e,u=Oi(n)?Ii:Ai.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Xo(e,s,r,u),Co=!1;var p=e.memoizedState;s.state=p,ko(e,r,s,i),l=e.memoizedState,a!==r||p!==l||Pi.current||Co?("function"===typeof c&&(jo(e,n,c,r),l=e.memoizedState),(a=Co||Ho(e,n,a,r,p,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,No(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:yo(e.type,a),s.props=u,h=e.pendingProps,p=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Mo(l):l=Ci(e,l=Oi(n)?Ii:Ai.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||p!==l)&&Xo(e,s,r,l),Co=!1,p=e.memoizedState,s.state=p,ko(e,r,s,i);var d=e.memoizedState;a!==h||p!==d||Pi.current||Co?("function"===typeof f&&(jo(e,n,f,r),d=e.memoizedState),(u=Co||Ho(e,n,u,r,p,d,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),s.props=r,s.state=d,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pa(t,e,n,r,o,i)}function Pa(t,e,n,r,i,o){Ma(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&Fi(e,n,!1),Xa(t,e,o);r=e.stateNode,_a.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=Zo(e,t.child,null,o),e.child=Zo(e,null,a,o)):xa(t,e,a,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function Ia(t){var e=t.stateNode;e.pendingContext?Li(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Li(0,e.context,!1),is(t,e.containerInfo)}function Ca(t,e,n,r,i){return fo(),mo(i),e.flags|=256,xa(t,e,n,r),e.child}var Oa,Na,La,Da,Ua={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function ka(t,e,n){var r,i=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Mi(ls,1&s),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,i,0,null),t=Uu(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fa(n),e.memoizedState=Ua,t):Ba(e,l));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,n,r,i,s,a){if(n)return 256&e.flags?(e.flags&=-257,Ga(t,e,a,r=ha(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(s=Uu(s,i,a,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&Zo(e,t.child,null,a),e.child.memoizedState=Fa(a),e.memoizedState=Ua,s);if(0===(1&e.mode))return Ga(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ga(t,e,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&t.childLanes),ba||l){if(null!==(r=Il)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Io(t,i),ru(r,t,i,-1))}return gu(),Ga(t,e,a,r=ha(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Au.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ro=ui(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Yi[qi++]=Ki,Yi[qi++]=Zi,Yi[qi++]=$i,Ki=t.id,Zi=t.overflow,$i=e),e=Ba(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,s,n);if(a){a=i.fallback,l=e.mode,r=(s=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Lu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lu(r,a):(a=Uu(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Ua,i}return t=(a=t.child).sibling,i=Lu(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ba(t,e){return(e=Fu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ga(t,e,n,r){return null!==r&&mo(r),Zo(e,t.child,null,n),(t=Ba(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function ja(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),wo(t.return,e,n)}function za(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ha(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xa(t,e,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ja(t,n,e);else if(19===t.tag)ja(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mi(ls,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===us(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),za(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===us(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}za(e,!0,n,null,o);break;case"together":za(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Va(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Lu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Lu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Wa(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ya(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qa(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(e),null;case 1:case 17:return Oi(e.type)&&Ni(),Ya(e),null;case 3:return r=e.stateNode,os(),Ti(Pi),Ti(Ai),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(au(oo),oo=null))),Na(t,e),Ya(e),null;case 5:as(e);var i=rs(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)La(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Ya(e),null}if(t=rs(ts.current),ho(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pi]=e,r[fi]=s,t=0!==(1&e.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":K(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":it(r,s),Br("invalid",r)}for(var l in vt(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,u,t),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,u,t),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":W(r),Q(r,s,!0);break;case"textarea":W(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Qr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[pi]=e,t[fi]=r,Oa(t,e,!1,!1),e.stateNode=t;t:{switch(l=_t(n,r),n){case"dialog":Br("cancel",t),Br("close",t),i=r;break;case"iframe":case"object":case"embed":Br("load",t),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],t);i=r;break;case"source":Br("error",t),i=r;break;case"img":case"image":case"link":Br("error",t),Br("load",t),i=r;break;case"details":Br("toggle",t),i=r;break;case"input":K(t,r),i=$(t,r),Br("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Br("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Br("invalid",t)}for(s in vt(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?gt(t,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Br("scroll",t):null!=c&&_(t,s,c,l))}switch(n){case"input":W(t),Q(t,r,!1);break;case"textarea":W(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+V(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?nt(t,!!r.multiple,s,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ya(e),null;case 6:if(t&&null!=e.stateNode)Da(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(ts.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[pi]=e,(s=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=e,e.stateNode=r}return Ya(e),null;case 13:if(Ti(ls),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))po(),fo(),e.flags|=98560,s=!1;else if(s=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[pi]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ya(e),s=!1}else null!==oo&&(au(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Dl&&(Dl=3):gu())),null!==e.updateQueue&&(e.flags|=4),Ya(e),null);case 4:return os(),Na(t,e),null===t&&zr(e.stateNode.containerInfo),Ya(e),null;case 10:return So(e.type._context),Ya(e),null;case 19:if(Ti(ls),null===(s=e.memoizedState))return Ya(e),null;if(r=0!==(128&e.flags),null===(l=s.rendering))if(r)Wa(s,!1);else{if(0!==Dl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=us(t))){for(e.flags|=128,Wa(s,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mi(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&Zt()>Hl&&(e.flags|=128,r=!0,Wa(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=us(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Wa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ya(e),null}else 2*Zt()-s.renderingStartTime>Hl&&1073741824!==n&&(e.flags|=128,r=!0,Wa(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zt(),e.sibling=null,n=ls.current,Mi(ls,r?1&n|2:1&n),e):(Ya(e),null);case 22:case 23:return pu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Nl)&&(Ya(e),6&e.subtreeFlags&&(e.flags|=8192)):Ya(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function $a(t,e){switch(eo(e),e.tag){case 1:return Oi(e.type)&&Ni(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Ti(Pi),Ti(Ai),hs(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Ti(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ti(ls),null;case 4:return os(),null;case 10:return So(e.type._context),null;case 22:case 23:return pu(),null;default:return null}}Oa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},La=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rs(ts.current);var o,s=null;switch(n){case"input":i=$(t,i),r=$(t,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=rt(t,i),r=rt(t,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Qr)}for(c in vt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}},Da=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ka=!1,Za=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Qa=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tu(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Tu(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pi],delete e[fi],delete e[mi],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qr));else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var hl=null,pl=!1;function fl(t,e,n){for(n=n.child;null!==n;)dl(t,e,n),n=n.sibling}function dl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:Za||tl(n,e);case 6:var r=hl,i=pl;hl=null,fl(t,e,n),pl=i,null!==(hl=r)&&(pl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(pl?(t=hl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),ze(t)):li(hl,n.stateNode));break;case 4:r=hl,i=pl,hl=n.stateNode.containerInfo,pl=!0,fl(t,e,n),hl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,e,s),i=i.next}while(i!==r)}fl(t,e,n);break;case 1:if(!Za&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tu(n,e,a)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,fl(t,e,n),Za=r):fl(t,e,n);break;default:fl(t,e,n)}}function ml(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var r=Pu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,pl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,pl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));dl(s,a,i),hl=null,pl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Tu(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(g){Tu(t,t.return,g)}try{rl(5,t,t.return)}catch(g){Tu(t,t.return,g)}}break;case 1:gl(e,t),vl(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(gl(e,t),vl(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{pt(i,"")}catch(g){Tu(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(i,s),_t(l,a);var c=_t(l,s);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];"style"===h?gt(i,p):"dangerouslySetInnerHTML"===h?ht(i,p):"children"===h?pt(i,p):_(i,h,p,c)}switch(l){case"input":J(i,s);break;case"textarea":ot(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;null!=d?nt(i,!!s.multiple,d,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Tu(t,t.return,g)}}break;case 6:if(gl(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Tu(t,t.return,g)}}break;case 3:if(gl(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{ze(e.containerInfo)}catch(g){Tu(t,t.return,g)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Zt())),4&r&&ml(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Za=(c=Za)||h,gl(e,t),Za=c):gl(e,t),vl(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Qa=t,h=t.child;null!==h;){for(p=Qa=h;null!==Qa;){switch(d=(f=Qa).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Tu(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){El(p);continue}}null!==d?(d.return=f,Qa=d):El(p)}h=h.sibling}t:for(h=null,p=t;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=p.stateNode,a=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",a))}catch(g){Tu(t,t.return,g)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){Tu(t,t.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(e,t),vl(t),4&r&&ml(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),cl(t,ll(t),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ul(t,ll(t),s);break;default:throw Error(o(161))}}catch(a){Tu(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,n){Qa=t,bl(t,e,n)}function bl(t,e,n){for(var r=0!==(1&t.mode);null!==Qa;){var i=Qa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ka;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=Ka;var u=Za;if(Ka=s,(Za=l)&&!u)for(Qa=i;null!==Qa;)l=(s=Qa).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Qa=l):Sl(i);for(;null!==o;)Qa=o,bl(o,e,n),o=o.sibling;Qa=i,Ka=a,Za=u}xl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qa=o):xl(t)}}function xl(t){for(;null!==Qa;){var e=Qa;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Za||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Za)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Bo(e,s,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bo(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&ze(p)}}}break;default:throw Error(o(163))}Za||512&e.flags&&ol(e)}catch(f){Tu(e,e.return,f)}}if(e===t){Qa=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qa=n;break}Qa=e.return}}function El(t){for(;null!==Qa;){var e=Qa;if(e===t){Qa=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qa=n;break}Qa=e.return}}function Sl(t){for(;null!==Qa;){var e=Qa;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Tu(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Tu(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Tu(e,o,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Tu(e,s,l)}}}catch(l){Tu(e,e.return,l)}if(e===t){Qa=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Qa=a;break}Qa=e.return}}var wl,Tl=Math.ceil,Ml=b.ReactCurrentDispatcher,Rl=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Pl=0,Il=null,Cl=null,Ol=0,Nl=0,Ll=wi(0),Dl=0,Ul=null,Fl=0,kl=0,Bl=0,Gl=null,jl=null,zl=0,Hl=1/0,Vl=null,Xl=!1,Wl=null,Yl=null,ql=!1,$l=null,Kl=0,Zl=0,Jl=null,Ql=-1,tu=0;function eu(){return 0!==(6&Pl)?Zt():-1!==Ql?Ql:Ql=Zt()}function nu(t){return 0===(1&t.mode)?1:0!==(2&Pl)&&0!==Ol?Ol&-Ol:null!==go.transition?(0===tu&&(tu=me()),tu):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function ru(t,e,n,r){if(50<Zl)throw Zl=0,Jl=null,Error(o(185));ye(t,n,r),0!==(2&Pl)&&t===Il||(t===Il&&(0===(2&Pl)&&(kl|=n),4===Dl&&lu(t,Ol)),iu(t,r),1===n&&0===Pl&&0===(1&e.mode)&&(Hl=Zt()+500,Bi&&zi()))}function iu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r=pe(t,t===Il?Ol:0);if(0===r)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){Bi=!0,ji(t)}(uu.bind(null,t)):ji(uu.bind(null,t)),si((function(){0===(6&Pl)&&zi()})),n=null;else{switch(be(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Iu(n,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ou(t,e){if(Ql=-1,tu=0,0!==(6&Pl))throw Error(o(327));var n=t.callbackNode;if(Su()&&t.callbackNode!==n)return null;var r=pe(t,t===Il?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=yu(t,r);else{e=r;var i=Pl;Pl|=2;var s=mu();for(Il===t&&Ol===e||(Vl=null,Hl=Zt()+500,fu(t,e));;)try{_u();break}catch(l){du(t,l)}Eo(),Ml.current=s,Pl=i,null!==Cl?e=0:(Il=null,Ol=0,e=Dl)}if(0!==e){if(2===e&&(0!==(i=de(t))&&(r=i,e=su(t,i))),1===e)throw n=Ul,fu(t,0),lu(t,r),iu(t,Zt()),n;if(6===e)lu(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=yu(t,r))&&(0!==(s=de(t))&&(r=s,e=su(t,s))),1===e))throw n=Ul,fu(t,0),lu(t,r),iu(t,Zt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:Eu(t,jl,Vl);break;case 3:if(lu(t,r),(130023424&r)===r&&10<(e=zl+500-Zt())){if(0!==pe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(Eu.bind(null,t,jl,Vl),e);break}Eu(t,jl,Vl);break;case 4:if(lu(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-se(r);s=1<<a,(a=e[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Zt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){t.timeoutHandle=ri(Eu.bind(null,t,jl,Vl),r);break}Eu(t,jl,Vl);break;default:throw Error(o(329))}}}return iu(t,Zt()),t.callbackNode===n?ou.bind(null,t):null}function su(t,e){var n=Gl;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),2!==(t=yu(t,e))&&(e=jl,jl=n,null!==e&&au(e)),t}function au(t){null===jl?jl=t:jl.push.apply(jl,t)}function lu(t,e){for(e&=~Bl,e&=~kl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),r=1<<n;t[n]=-1,e&=~r}}function uu(t){if(0!==(6&Pl))throw Error(o(327));Su();var e=pe(t,0);if(0===(1&e))return iu(t,Zt()),null;var n=yu(t,e);if(0!==t.tag&&2===n){var r=de(t);0!==r&&(e=r,n=su(t,r))}if(1===n)throw n=Ul,fu(t,0),lu(t,e),iu(t,Zt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eu(t,jl,Vl),iu(t,Zt()),null}function cu(t,e){var n=Pl;Pl|=1;try{return t(e)}finally{0===(Pl=n)&&(Hl=Zt()+500,Bi&&zi())}}function hu(t){null!==$l&&0===$l.tag&&0===(6&Pl)&&Su();var e=Pl;Pl|=1;var n=Al.transition,r=_e;try{if(Al.transition=null,_e=1,t)return t()}finally{_e=r,Al.transition=n,0===(6&(Pl=e))&&zi()}}function pu(){Nl=Ll.current,Ti(Ll)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:os(),Ti(Pi),Ti(Ai),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ti(ls);break;case 10:So(r.type._context);break;case 22:case 23:pu()}n=n.return}if(Il=t,Cl=t=Lu(t.current,null),Ol=Nl=e,Dl=0,Ul=null,Bl=kl=Fl=0,jl=Gl=null,null!==Ro){for(e=0;e<Ro.length;e++)if(null!==(r=(n=Ro[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ro=null}return t}function du(t,e){for(;;){var n=Cl;try{if(Eo(),ps.current=sa,vs){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ds=0,ys=gs=ms=null,_s=!1,bs=0,Rl.current=null,null===n||null===n.return){Dl=1,Ul=e,Cl=null;break}t:{var s=t,a=n.return,l=n,u=e;if(e=Ol,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=ya(a);if(null!==d){d.flags&=-257,va(d,a,l,0,e),1&d.mode&&ga(s,c,e),u=c;var m=(e=d).updateQueue;if(null===m){var g=new Set;g.add(u),e.updateQueue=g}else m.add(u);break t}if(0===(1&e)){ga(s,c,e),gu();break t}u=Error(o(426))}else if(io&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),mo(ca(u,l));break t}}s=u=ca(u,l),4!==Dl&&(Dl=2),null===Gl?Gl=[s]:Gl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Fo(s,da(0,u,e));break t;case 1:l=u;var v=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yl||!Yl.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e,Fo(s,ma(s,l,e));break t}}s=s.return}while(null!==s)}xu(n)}catch(b){e=b,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function mu(){var t=Ml.current;return Ml.current=sa,null===t?sa:t}function gu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Il||0===(268435455&Fl)&&0===(268435455&kl)||lu(Il,Ol)}function yu(t,e){var n=Pl;Pl|=2;var r=mu();for(Il===t&&Ol===e||(Vl=null,fu(t,e));;)try{vu();break}catch(i){du(t,i)}if(Eo(),Pl=n,Ml.current=r,null!==Cl)throw Error(o(261));return Il=null,Ol=0,Dl}function vu(){for(;null!==Cl;)bu(Cl)}function _u(){for(;null!==Cl&&!$t();)bu(Cl)}function bu(t){var e=wl(t.alternate,t,Nl);t.memoizedProps=t.pendingProps,null===e?xu(t):Cl=e,Rl.current=null}function xu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=qa(n,e,Nl)))return void(Cl=n)}else{if(null!==(n=$a(n,e)))return n.flags&=32767,void(Cl=n);if(null===t)return Dl=6,void(Cl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Cl=e);Cl=e=t}while(null!==e);0===Dl&&(Dl=5)}function Eu(t,e,n){var r=_e,i=Al.transition;try{Al.transition=null,_e=1,function(t,e,n,r){do{Su()}while(null!==$l);if(0!==(6&Pl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,s),t===Il&&(Cl=Il=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Iu(ee,(function(){return Su(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Al.transition,Al.transition=null;var a=_e;_e=1;var l=Pl;Pl|=4,Rl.current=null,function(t,e){if(ti=Ve,fr(t=pr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break t}var a=0,l=-1,u=-1,c=0,h=0,p=t,f=null;e:for(;;){for(var d;p!==n||0!==i&&3!==p.nodeType||(l=a+i),p!==s||0!==r&&3!==p.nodeType||(u=a+r),3===p.nodeType&&(a+=p.nodeValue.length),null!==(d=p.firstChild);)f=p,p=d;for(;;){if(p===t)break e;if(f===n&&++c===i&&(l=a),f===s&&++h===r&&(u=a),null!==(d=p.nextSibling))break;f=(p=f).parentNode}p=d}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ve=!1,Qa=e;null!==Qa;)if(t=(e=Qa).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qa=t;else for(;null!==Qa;){e=Qa;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:yo(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Tu(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Qa=t;break}Qa=e.return}m=nl,nl=!1}(t,n),yl(n,t),dr(ei),Ve=!!ti,ei=ti=null,t.current=n,_l(n,t,i),Kt(),Pl=l,_e=a,Al.transition=s}else t.current=n;if(ql&&(ql=!1,$l=t,Kl=i),s=t.pendingLanes,0===s&&(Yl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),iu(t,Zt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xl)throw Xl=!1,t=Wl,Wl=null,t;0!==(1&Kl)&&0!==t.tag&&Su(),s=t.pendingLanes,0!==(1&s)?t===Jl?Zl++:(Zl=0,Jl=t):Zl=0,zi()}(t,e,n,r)}finally{Al.transition=i,_e=r}return null}function Su(){if(null!==$l){var t=be(Kl),e=Al.transition,n=_e;try{if(Al.transition=null,_e=16>t?16:t,null===$l)var r=!1;else{if(t=$l,$l=null,Kl=0,0!==(6&Pl))throw Error(o(331));var i=Pl;for(Pl|=4,Qa=t.current;null!==Qa;){var s=Qa,a=s.child;if(0!==(16&Qa.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qa=c;null!==Qa;){var h=Qa;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var p=h.child;if(null!==p)p.return=h,Qa=p;else for(;null!==Qa;){var f=(h=Qa).sibling,d=h.return;if(sl(h),h===c){Qa=null;break}if(null!==f){f.return=d,Qa=f;break}Qa=d}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Qa=a;else t:for(;null!==Qa;){if(0!==(2048&(s=Qa).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Qa=v;break t}Qa=s.return}}var _=t.current;for(Qa=_;null!==Qa;){var b=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Qa=b;else t:for(a=_;null!==Qa;){if(0!==(2048&(l=Qa).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Tu(l,l.return,E)}if(l===a){Qa=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Qa=x;break t}Qa=l.return}}if(Pl=i,zi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(E){}r=!0}return r}finally{_e=n,Al.transition=e}}return!1}function wu(t,e,n){t=Do(t,e=da(0,e=ca(n,e),1),1),e=eu(),null!==t&&(ye(t,1,e),iu(t,e))}function Tu(t,e,n){if(3===t.tag)wu(t,t,n);else for(;null!==e;){if(3===e.tag){wu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){e=Do(e,t=ma(e,t=ca(n,t),1),1),t=eu(),null!==e&&(ye(e,1,t),iu(e,t));break}}e=e.return}}function Mu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&n,Il===t&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Zt()-zl?fu(t,0):Bl|=n),iu(t,e)}function Ru(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eu();null!==(t=Io(t,e))&&(ye(t,e,n),iu(t,n))}function Au(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ru(t,n)}function Pu(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Ru(t,n)}function Iu(t,e){return Yt(t,e)}function Cu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(t,e,n,r){return new Cu(t,e,n,r)}function Nu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lu(t,e){var n=t.alternate;return null===n?((n=Ou(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Du(t,e,n,r,i,s){var a=2;if(r=t,"function"===typeof t)Nu(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Uu(n.children,i,s,e);case w:a=8,i|=8;break;case T:return(t=Ou(12,n,e,2|i)).elementType=T,t.lanes=s,t;case P:return(t=Ou(13,n,e,i)).elementType=P,t.lanes=s,t;case I:return(t=Ou(19,n,e,i)).elementType=I,t.lanes=s,t;case N:return Fu(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case M:a=10;break t;case R:a=9;break t;case A:a=11;break t;case C:a=14;break t;case O:a=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Ou(a,n,e,i)).elementType=t,e.type=r,e.lanes=s,e}function Uu(t,e,n,r){return(t=Ou(7,t,r,e)).lanes=n,t}function Fu(t,e,n,r){return(t=Ou(22,t,r,e)).elementType=N,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return(t=Ou(6,t,null,e)).lanes=n,t}function Bu(t,e,n){return(e=Ou(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gu(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(t,e,n,r,i,o,s,a,l){return t=new Gu(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Ou(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),t}function zu(t){if(!t)return Ri;t:{if(zt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Oi(n))return Di(t,n,e)}return e}function Hu(t,e,n,r,i,o,s,a,l){return(t=ju(n,r,!0,t,0,o,0,a,l)).context=zu(null),n=t.current,(o=Lo(r=eu(),i=nu(n))).callback=void 0!==e&&null!==e?e:null,Do(n,o,i),t.current.lanes=i,ye(t,i,r),iu(t,r),t}function Vu(t,e,n,r){var i=e.current,o=eu(),s=nu(i);return n=zu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Lo(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Do(i,e,s))&&(ru(t,i,s,o),Uo(t,i,s)),s}function Xu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Wu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Yu(t,e){Wu(t,e),(t=t.alternate)&&Wu(t,e)}wl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Pi.current)ba=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return ba=!1,function(t,e,n){switch(e.tag){case 3:Ia(e),fo();break;case 5:ss(e);break;case 1:Oi(e.type)&&Ui(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Mi(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Mi(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?ka(t,e,n):(Mi(ls,1&ls.current),null!==(t=Xa(t,e,n))?t.sibling:null);Mi(ls,1&ls.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Ha(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(ls,ls.current),r)break;return null;case 22:case 23:return e.lanes=0,Ta(t,e,n)}return Xa(t,e,n)}(t,e,n);ba=0!==(131072&t.flags)}else ba=!1,io&&0!==(1048576&e.flags)&&Qi(e,Wi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Va(t,e),t=e.pendingProps;var i=Ci(e,Ai.current);To(e,n),i=ws(null,e,r,t,i,n);var s=Ts();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)?(s=!0,Ui(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(e),i.updater=zo,e.stateNode=i,i._reactInternals=e,Wo(e,r,t,n),e=Pa(null,e,r,!0,s,n)):(e.tag=0,io&&s&&to(e),xa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Va(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Nu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===A)return 11;if(t===C)return 14}return 2}(r),t=yo(r,t),i){case 0:e=Ra(null,e,r,t,n);break t;case 1:e=Aa(null,e,r,t,n);break t;case 11:e=Ea(null,e,r,t,n);break t;case 14:e=Sa(null,e,r,yo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ra(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Aa(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 3:t:{if(Ia(e),null===t)throw Error(o(387));r=e.pendingProps,i=(s=e.memoizedState).element,No(t,e),ko(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Ca(t,e,r,n,i=ca(Error(o(423)),e));break t}if(r!==i){e=Ca(t,e,r,n,i=ca(Error(o(424)),e));break t}for(ro=ui(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Jo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){e=Xa(t,e,n);break t}xa(t,e,r,n)}e=e.child}return e;case 5:return ss(e),null===t&&uo(e),r=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(e.flags|=32),Ma(t,e),xa(t,e,a,n),e.child;case 6:return null===t&&uo(e),null;case 13:return ka(t,e,n);case 4:return is(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Zo(e,null,r,n):xa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ea(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 7:return xa(t,e,e.pendingProps,n),e.child;case 8:case 12:return xa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Mi(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Pi.current){e=Xa(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Lo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),wo(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),wo(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,To(e,n),r=r(i=Mo(i)),e.flags|=1,xa(t,e,r,n),e.child;case 14:return i=yo(r=e.type,e.pendingProps),Sa(t,e,r,i=yo(r.type,i),n);case 15:return wa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),Va(t,e),e.tag=1,Oi(r)?(t=!0,Ui(e)):t=!1,To(e,n),Vo(e,r,i),Wo(e,r,i,n),Pa(null,e,r,!0,t,n);case 19:return Ha(t,e,n);case 22:return Ta(t,e,n)}throw Error(o(156,e.tag))};var qu="function"===typeof reportError?reportError:function(t){console.error(t)};function $u(t){this._internalRoot=t}function Ku(t){this._internalRoot=t}function Zu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qu(){}function tc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var t=Xu(s);a.call(t)}}Vu(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Xu(s);o.call(t)}}var s=Hu(e,r,t,0,null,!1,0,"",Qu);return t._reactRootContainer=s,t[di]=s.current,zr(8===t.nodeType?t.parentNode:t),hu(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var a=r;r=function(){var t=Xu(l);a.call(t)}}var l=ju(t,0,!1,null,0,!1,0,"",Qu);return t._reactRootContainer=l,t[di]=l.current,zr(8===t.nodeType?t.parentNode:t),hu((function(){Vu(e,l,n,r)})),l}(n,e,t,i,r);return Xu(s)}Ku.prototype.render=$u.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Vu(t,e,null,null)},Ku.prototype.unmount=$u.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){Vu(null,t,null,null)})),e[di]=null}},Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=we();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ne.length&&0!==e&&e<Ne[n].priority;n++);Ne.splice(n,0,t),0===n&&Fe(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),iu(e,Zt()),0===(6&Pl)&&(Hl=Zt()+500,zi()))}break;case 13:hu((function(){var e=Io(t,1);if(null!==e){var n=eu();ru(e,t,1,n)}})),Yu(t,1)}},Ee=function(t){if(13===t.tag){var e=Io(t,134217728);if(null!==e)ru(e,t,134217728,eu());Yu(t,134217728)}},Se=function(t){if(13===t.tag){var e=nu(t),n=Io(t,e);if(null!==n)ru(n,t,e,eu());Yu(t,e)}},we=function(){return _e},Te=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},Et=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xi(r);if(!i)throw Error(o(90));Y(r),J(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},At=cu,Pt=hu;var ec={usingClientEntryPoint:!1,Events:[_i,bi,xi,Mt,Rt,cu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Xt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),oe=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Zu(t))throw Error(o(299));var n=!1,r="",i=qu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=ju(t,1,!1,null,0,n,0,r,i),t[di]=e.current,zr(8===t.nodeType?t.parentNode:t),new $u(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Xt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,n){if(!Ju(e))throw Error(o(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Zu(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Hu(e,null,t,1,null!=n?n:null,i,0,s,a),t[di]=e.current,zr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ku(e)},e.render=function(t,e,n){if(!Ju(e))throw Error(o(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(o(40));return!!t._reactRootContainer&&(hu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[di]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ju(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:(t,e,n)=>{"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},77:t=>{var e="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var a,l,u,c;if(Array.isArray(t)){if((a=t.length)!=s.length)return!1;for(l=a;0!==l--;)if(!o(t[l],s[l]))return!1;return!0}if(n&&t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!s.has(l.value[0]))return!1;for(c=t.entries();!(l=c.next()).done;)if(!o(l.value[1],s.get(l.value[0])))return!1;return!0}if(r&&t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if((a=t.length)!=s.length)return!1;for(l=a;0!==l--;)if(t[l]!==s[l])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf&&"function"===typeof t.valueOf&&"function"===typeof s.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString&&"function"===typeof t.toString&&"function"===typeof s.toString)return t.toString()===s.toString();if((a=(u=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(l=a;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,u[l]))return!1;if(e&&t instanceof Element)return!1;for(l=a;0!==l--;)if(("_owner"!==u[l]&&"__v"!==u[l]&&"__o"!==u[l]||!t.$$typeof)&&!o(t[u[l]],s[u[l]]))return!1;return!0}return t!==t&&s!==s}t.exports=function(t,e){try{return o(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},9434:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),s=(i=n(77))&&i.__esModule?i:{default:i},a=n(9174),l=n(135);function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function c(){return c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c.apply(this,arguments)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return d(t)}(this,n)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,r,i=f(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(d(t=i.call.apply(i,[this].concat(n))),"mounted",!1),g(d(t),"isReady",!1),g(d(t),"isPlaying",!1),g(d(t),"isLoading",!0),g(d(t),"loadOnReady",null),g(d(t),"startOnPlay",!0),g(d(t),"seekOnPlay",null),g(d(t),"onDurationCalled",!1),g(d(t),"handlePlayerMount",(function(e){t.player||(t.player=e,t.player.load(t.props.url)),t.progress()})),g(d(t),"getInternalPlayer",(function(e){return t.player?t.player[e]:null})),g(d(t),"progress",(function(){if(t.props.url&&t.player&&t.isReady){var e=t.getCurrentTime()||0,n=t.getSecondsLoaded(),r=t.getDuration();if(r){var i={playedSeconds:e,played:e/r};null!==n&&(i.loadedSeconds=n,i.loaded=n/r),i.playedSeconds===t.prevPlayed&&i.loadedSeconds===t.prevLoaded||t.props.onProgress(i),t.prevPlayed=i.playedSeconds,t.prevLoaded=i.loadedSeconds}}t.progressTimeout=setTimeout(t.progress,t.props.progressFrequency||t.props.progressInterval)})),g(d(t),"handleReady",(function(){if(t.mounted){t.isReady=!0,t.isLoading=!1;var e=t.props,n=e.onReady,r=e.playing,i=e.volume,o=e.muted;n(),o||null===i||t.player.setVolume(i),t.loadOnReady?(t.player.load(t.loadOnReady,!0),t.loadOnReady=null):r&&t.player.play(),t.handleDurationCheck()}})),g(d(t),"handlePlay",(function(){t.isPlaying=!0,t.isLoading=!1;var e=t.props,n=e.onStart,r=e.onPlay,i=e.playbackRate;t.startOnPlay&&(t.player.setPlaybackRate&&1!==i&&t.player.setPlaybackRate(i),n(),t.startOnPlay=!1),r(),t.seekOnPlay&&(t.seekTo(t.seekOnPlay),t.seekOnPlay=null),t.handleDurationCheck()})),g(d(t),"handlePause",(function(e){t.isPlaying=!1,t.isLoading||t.props.onPause(e)})),g(d(t),"handleEnded",(function(){var e=t.props,n=e.activePlayer,r=e.loop,i=e.onEnded;n.loopOnEnded&&r&&t.seekTo(0),r||(t.isPlaying=!1,i())})),g(d(t),"handleError",(function(){var e;t.isLoading=!1,(e=t.props).onError.apply(e,arguments)})),g(d(t),"handleDurationCheck",(function(){clearTimeout(t.durationCheckTimeout);var e=t.getDuration();e?t.onDurationCalled||(t.props.onDuration(e),t.onDurationCalled=!0):t.durationCheckTimeout=setTimeout(t.handleDurationCheck,100)})),g(d(t),"handleLoaded",(function(){t.isLoading=!1})),t}return e=a,n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(t){var e=this;if(this.player){var n=this.props,r=n.url,i=n.playing,o=n.volume,a=n.muted,u=n.playbackRate,c=n.pip,h=n.loop,p=n.activePlayer,f=n.disableDeferredLoading;if(!(0,s.default)(t.url,r)){if(this.isLoading&&!p.forceLoad&&!f&&!(0,l.isMediaStream)(r))return console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),void(this.loadOnReady=r);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}t.playing||!i||this.isPlaying||this.player.play(),t.playing&&!i&&this.isPlaying&&this.player.pause(),!t.pip&&c&&this.player.enablePIP&&this.player.enablePIP(),t.pip&&!c&&this.player.disablePIP&&this.player.disablePIP(),t.volume!==o&&null!==o&&this.player.setVolume(o),t.muted!==a&&(a?this.player.mute():(this.player.unmute(),null!==o&&setTimeout((function(){return e.player.setVolume(o)})))),t.playbackRate!==u&&this.player.setPlaybackRate&&this.player.setPlaybackRate(u),t.loop!==h&&this.player.setLoop&&this.player.setLoop(h)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(t,e,n){var r=this;if(this.isReady){if(e?"fraction"===e:t>0&&t<1){var i=this.player.getDuration();return i?void this.player.seekTo(i*t,n):void console.warn("ReactPlayer: could not seek using fraction \u2013\xa0duration not yet available")}this.player.seekTo(t,n)}else 0!==t&&(this.seekOnPlay=t,setTimeout((function(){r.seekOnPlay=null}),5e3))}},{key:"render",value:function(){var t=this.props.activePlayer;return t?o.default.createElement(t,c({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],n&&h(e.prototype,n),r&&h(e,r),a}(o.Component);e.default=y,g(y,"displayName","Player"),g(y,"propTypes",a.propTypes),g(y,"defaultProps",a.defaultProps)},8275:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}n.default=t,e&&e.set(t,n);return n}(n(2791));function o(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return h(t)}(this,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d="64px",m={},g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(s,t);var e,n,r,o=c(s);function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f(h(t=o.call.apply(o,[this].concat(n))),"mounted",!1),f(h(t),"state",{image:null}),f(h(t),"handleKeyPress",(function(e){"Enter"!==e.key&&" "!==e.key||t.props.onClick()})),t}return e=s,(n=[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.url,r=e.light;t.url===n&&t.light===r||this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(t){var e=this,n=t.url,r=t.light,o=t.oEmbedUrl;if(!i.default.isValidElement(r))if("string"!==typeof r){if(!m[n])return this.setState({image:null}),window.fetch(o.replace("{url}",n)).then((function(t){return t.json()})).then((function(t){if(t.thumbnail_url&&e.mounted){var r=t.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");e.setState({image:r}),m[n]=r}}));this.setState({image:m[n]})}else this.setState({image:r})}},{key:"render",value:function(){var t=this.props,e=t.light,n=t.onClick,r=t.playIcon,o=t.previewTabIndex,s=this.state.image,l=i.default.isValidElement(e),u={display:"flex",alignItems:"center",justifyContent:"center"},c={preview:a({width:"100%",height:"100%",backgroundImage:s&&!l?"url(".concat(s,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},u),shadow:a({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:d,width:d,height:d,position:l?"absolute":void 0},u),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},h=i.default.createElement("div",{style:c.shadow,className:"react-player__shadow"},i.default.createElement("div",{style:c.playIcon,className:"react-player__play-icon"}));return i.default.createElement("div",{style:c.preview,className:"react-player__preview",onClick:n,tabIndex:o,onKeyPress:this.handleKeyPress},l?e:null,r||h)}}])&&l(e.prototype,n),r&&l(e,r),s}(i.Component);e.default=g},2646:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createReactPlayer=void 0;var r=w(n(2791)),i=c(n(9948)),o=c(n(5781)),s=c(n(77)),a=n(9174),l=n(135),u=c(n(9434));function c(t){return t&&t.__esModule?t:{default:t}}function h(t){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(){return d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d.apply(this,arguments)}function m(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},v(t,e)}function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===h(e)||"function"===typeof e))return e;return b(t)}(this,n)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return S=function(){return t},t}function w(t){if(t&&t.__esModule)return t;if(null===t||"object"!==h(t)&&"function"!==typeof t)return{default:t};var e=S();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}var T=(0,r.lazy)((function(){return Promise.resolve().then((function(){return w(n(8275))}))})),M="undefined"!==typeof window&&window.document,R="undefined"!==typeof n.g&&n.g.window&&n.g.window.document,A=Object.keys(a.propTypes),P=M||R?r.Suspense:function(){return null},I=[];e.createReactPlayer=function(t,e){var n,c;return c=n=function(n){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(x,n);var c,h,p,g=_(x);function x(){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x);for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];return E(b(n=g.call.apply(g,[this].concat(c))),"state",{showPreview:!!n.props.light}),E(b(n),"references",{wrapper:function(t){n.wrapper=t},player:function(t){n.player=t}}),E(b(n),"handleClickPreview",(function(t){n.setState({showPreview:!1}),n.props.onClickPreview(t)})),E(b(n),"showPreview",(function(){n.setState({showPreview:!0})})),E(b(n),"getDuration",(function(){return n.player?n.player.getDuration():null})),E(b(n),"getCurrentTime",(function(){return n.player?n.player.getCurrentTime():null})),E(b(n),"getSecondsLoaded",(function(){return n.player?n.player.getSecondsLoaded():null})),E(b(n),"getInternalPlayer",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(t):null})),E(b(n),"seekTo",(function(t,e,r){if(!n.player)return null;n.player.seekTo(t,e,r)})),E(b(n),"handleReady",(function(){n.props.onReady(b(n))})),E(b(n),"getActivePlayer",(0,o.default)((function(n){for(var r=0,i=[].concat(I,m(t));r<i.length;r++){var o=i[r];if(o.canPlay(n))return o}return e||null}))),E(b(n),"getConfig",(0,o.default)((function(t,e){var r=n.props.config;return i.default.all([a.defaultProps.config,a.defaultProps.config[e]||{},r,r[e]||{}])}))),E(b(n),"getAttributes",(0,o.default)((function(t){return(0,l.omit)(n.props,A)}))),E(b(n),"renderActivePlayer",(function(t){if(!t)return null;var e=n.getActivePlayer(t);if(!e)return null;var i=n.getConfig(t,e.key);return r.default.createElement(u.default,d({},n.props,{key:e.key,ref:n.references.player,config:i,activePlayer:e.lazyPlayer||e,onReady:n.handleReady}))})),n}return c=x,h=[{key:"shouldComponentUpdate",value:function(t,e){return!(0,s.default)(this.props,t)||!(0,s.default)(this.state,e)}},{key:"componentDidUpdate",value:function(t){var e=this.props.light;!t.light&&e&&this.setState({showPreview:!0}),t.light&&!e&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(t){if(!t)return null;var e=this.props,n=e.light,i=e.playIcon,o=e.previewTabIndex,s=e.oEmbedUrl;return r.default.createElement(T,{url:t,light:n,playIcon:i,previewTabIndex:o,oEmbedUrl:s,onClick:this.handleClickPreview})}},{key:"render",value:function(){var t=this.props,e=t.url,n=t.style,i=t.width,o=t.height,s=t.fallback,a=t.wrapper,l=this.state.showPreview,u=this.getAttributes(e),c="string"===typeof a?this.references.wrapper:void 0;return r.default.createElement(a,d({ref:c,style:f(f({},n),{},{width:i,height:o})},u),r.default.createElement(P,{fallback:s},l?this.renderPreview(e):this.renderActivePlayer(e)))}}],h&&y(c.prototype,h),p&&y(c,p),x}(r.Component),E(n,"displayName","ReactPlayer"),E(n,"propTypes",a.propTypes),E(n,"defaultProps",a.defaultProps),E(n,"addCustomPlayer",(function(t){I.push(t)})),E(n,"removeCustomPlayers",(function(){I.length=0})),E(n,"canPlay",(function(e){for(var n=0,r=[].concat(I,m(t));n<r.length;n++){if(r[n].canPlay(e))return!0}return!1})),E(n,"canEnablePIP",(function(e){for(var n=0,r=[].concat(I,m(t));n<r.length;n++){var i=r[n];if(i.canEnablePIP&&i.canEnablePIP(e))return!0}return!1})),c}},6710:(t,e,n)=>{"use strict";e.Z=void 0;var r,i=(r=n(4687))&&r.__esModule?r:{default:r},o=n(2646);var s=i.default[i.default.length-1],a=(0,o.createReactPlayer)(i.default,s);e.Z=a},365:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canPlay=e.FLV_EXTENSIONS=e.DASH_EXTENSIONS=e.HLS_EXTENSIONS=e.VIDEO_EXTENSIONS=e.AUDIO_EXTENSIONS=e.MATCH_URL_KALTURA=e.MATCH_URL_VIDYARD=e.MATCH_URL_MIXCLOUD=e.MATCH_URL_DAILYMOTION=e.MATCH_URL_TWITCH_CHANNEL=e.MATCH_URL_TWITCH_VIDEO=e.MATCH_URL_WISTIA=e.MATCH_URL_STREAMABLE=e.MATCH_URL_FACEBOOK_WATCH=e.MATCH_URL_FACEBOOK=e.MATCH_URL_VIMEO=e.MATCH_URL_SOUNDCLOUD=e.MATCH_URL_YOUTUBE=void 0;var r=n(135);function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;e.MATCH_URL_YOUTUBE=s;var a=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;e.MATCH_URL_SOUNDCLOUD=a;var l=/vimeo\.com\/(?!progressive_redirect).+/;e.MATCH_URL_VIMEO=l;var u=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;e.MATCH_URL_FACEBOOK=u;var c=/^https?:\/\/fb\.watch\/.+$/;e.MATCH_URL_FACEBOOK_WATCH=c;var h=/streamable\.com\/([a-z0-9]+)$/;e.MATCH_URL_STREAMABLE=h;var p=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/;e.MATCH_URL_WISTIA=p;var f=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;e.MATCH_URL_TWITCH_VIDEO=f;var d=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;e.MATCH_URL_TWITCH_CHANNEL=d;var m=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;e.MATCH_URL_DAILYMOTION=m;var g=/mixcloud\.com\/([^/]+\/[^/]+)/;e.MATCH_URL_MIXCLOUD=g;var y=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;e.MATCH_URL_VIDYARD=y;var v=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;e.MATCH_URL_KALTURA=v;var _=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;e.AUDIO_EXTENSIONS=_;var b=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;e.VIDEO_EXTENSIONS=b;var x=/\.(m3u8)($|\?)/i;e.HLS_EXTENSIONS=x;var E=/\.(mpd)($|\?)/i;e.DASH_EXTENSIONS=E;var S=/\.(flv)($|\?)/i;e.FLV_EXTENSIONS=S;var w={youtube:function(t){return t instanceof Array?t.every((function(t){return s.test(t)})):s.test(t)},soundcloud:function(t){return a.test(t)&&!_.test(t)},vimeo:function(t){return l.test(t)&&!b.test(t)&&!x.test(t)},facebook:function(t){return u.test(t)||c.test(t)},streamable:function(t){return h.test(t)},wistia:function(t){return p.test(t)},twitch:function(t){return f.test(t)||d.test(t)},dailymotion:function(t){return m.test(t)},mixcloud:function(t){return g.test(t)},vidyard:function(t){return y.test(t)},kaltura:function(t){return v.test(t)},file:function t(e){if(e instanceof Array){var n,o=i(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("string"===typeof s&&t(s))return!0;if(t(s.src))return!0}}catch(a){o.e(a)}finally{o.f()}return!1}return!(!(0,r.isMediaStream)(e)&&!(0,r.isBlobUrl)(e))||(_.test(e)||b.test(e)||x.test(e)||E.test(e)||S.test(e))}};e.canPlay=w},4303:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return m(t)}(this,n)}}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(l,t);var e,n,r,a=d(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(m(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),y(m(t),"onDurationChange",(function(){var e=t.getDuration();t.props.onDuration(e)})),y(m(t),"mute",(function(){t.callPlayer("setMuted",!0)})),y(m(t),"unmute",(function(){t.callPlayer("setMuted",!1)})),y(m(t),"ref",(function(e){t.container=e})),t}return e=l,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this,n=this.props,r=n.controls,i=n.config,a=n.onError,l=n.playing,h=c(t.match(s.MATCH_URL_DAILYMOTION),2)[1];this.player?this.player.load(h,{start:(0,o.parseStartTime)(t),autoplay:l}):(0,o.getSDK)("https://api.dmcdn.net/all.js","DM","dmAsyncInit",(function(t){return t.player})).then((function(n){if(e.container){var s=n.player;e.player=new s(e.container,{width:"100%",height:"100%",video:h,params:u({controls:r,autoplay:e.props.playing,mute:e.props.muted,start:(0,o.parseStartTime)(t),origin:window.location.origin},i.params),events:{apiready:e.props.onReady,seeked:function(){return e.props.onSeek(e.player.currentTime)},video_end:e.props.onEnded,durationchange:e.onDurationChange,pause:e.props.onPause,playing:e.props.onPlay,waiting:e.props.onBuffer,error:function(t){return a(t)}}})}}),a)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("seek",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var t={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("div",{style:t},i.default.createElement("div",{ref:this.ref}))}}],n&&p(e.prototype,n),r&&p(e,r),l}(i.Component);e.default=v,y(v,"displayName","DailyMotion"),y(v,"canPlay",s.canPlay.dailymotion),y(v,"loopOnEnded",!0)},4793:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(){return l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return p(t)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m="https://connect.facebook.net/en_US/sdk.js",g="fbAsyncInit",y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(a,t);var e,n,r,s=h(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(p(t=s.call.apply(s,[this].concat(n))),"callPlayer",o.callPlayer),d(p(t),"playerID",t.props.config.playerId||"".concat("facebook-player-").concat((0,o.randomString)())),d(p(t),"mute",(function(){t.callPlayer("mute")})),d(p(t),"unmute",(function(){t.callPlayer("unmute")})),t}return e=a,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t,e){var n=this;e?(0,o.getSDK)(m,"FB",g).then((function(t){return t.XFBML.parse()})):(0,o.getSDK)(m,"FB",g).then((function(t){t.init({appId:n.props.config.appId,xfbml:!0,version:n.props.config.version}),t.Event.subscribe("xfbml.render",(function(t){n.props.onLoaded()})),t.Event.subscribe("xfbml.ready",(function(t){"video"===t.type&&t.id===n.playerID&&(n.player=t.instance,n.player.subscribe("startedPlaying",n.props.onPlay),n.player.subscribe("paused",n.props.onPause),n.player.subscribe("finishedPlaying",n.props.onEnded),n.player.subscribe("startedBuffering",n.props.onBuffer),n.player.subscribe("finishedBuffering",n.props.onBufferEnd),n.player.subscribe("error",n.props.onError),n.props.muted?n.callPlayer("mute"):n.callPlayer("unmute"),n.props.onReady(),document.getElementById(n.playerID).querySelector("iframe").style.visibility="visible")}))}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("seek",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var t=this.props.config.attributes;return i.default.createElement("div",l({style:{width:"100%",height:"100%"},id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},t))}}],n&&u(e.prototype,n),r&&u(e,r),a}(i.Component);e.default=y,d(y,"displayName","Facebook"),d(y,"canPlay",s.canPlay.facebook),d(y,"loopOnEnded",!0)},8997:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(){return l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return p(t)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m="undefined"!==typeof navigator,g=m&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,y=m&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||g)&&!window.MSStream,v=m&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,_=/www\.dropbox\.com\/.+/,b=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,x=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,a=h(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(p(t=a.call.apply(a,[this].concat(n))),"onReady",(function(){var e;return(e=t.props).onReady.apply(e,arguments)})),d(p(t),"onPlay",(function(){var e;return(e=t.props).onPlay.apply(e,arguments)})),d(p(t),"onBuffer",(function(){var e;return(e=t.props).onBuffer.apply(e,arguments)})),d(p(t),"onBufferEnd",(function(){var e;return(e=t.props).onBufferEnd.apply(e,arguments)})),d(p(t),"onPause",(function(){var e;return(e=t.props).onPause.apply(e,arguments)})),d(p(t),"onEnded",(function(){var e;return(e=t.props).onEnded.apply(e,arguments)})),d(p(t),"onError",(function(){var e;return(e=t.props).onError.apply(e,arguments)})),d(p(t),"onPlayBackRateChange",(function(e){return t.props.onPlaybackRateChange(e.target.playbackRate)})),d(p(t),"onEnablePIP",(function(){var e;return(e=t.props).onEnablePIP.apply(e,arguments)})),d(p(t),"onDisablePIP",(function(e){var n=t.props,r=n.onDisablePIP,i=n.playing;r(e),i&&t.play()})),d(p(t),"onPresentationModeChange",(function(e){if(t.player&&(0,o.supportsWebKitPresentationMode)(t.player)){var n=t.player.webkitPresentationMode;"picture-in-picture"===n?t.onEnablePIP(e):"inline"===n&&t.onDisablePIP(e)}})),d(p(t),"onSeek",(function(e){t.props.onSeek(e.target.currentTime)})),d(p(t),"mute",(function(){t.player.muted=!0})),d(p(t),"unmute",(function(){t.player.muted=!1})),d(p(t),"renderSourceElement",(function(t,e){return"string"===typeof t?i.default.createElement("source",{key:e,src:t}):i.default.createElement("source",l({key:e},t))})),d(p(t),"renderTrack",(function(t,e){return i.default.createElement("track",l({key:e},t))})),d(p(t),"ref",(function(e){t.player&&(t.prevPlayer=t.player),t.player=e})),t}return e=f,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player);var t=this.getSource(this.props.url);t&&(this.player.src=t),(y||this.props.config.forceDisableHls)&&this.player.load()}},{key:"componentDidUpdate",value:function(t){this.shouldUseAudio(this.props)!==this.shouldUseAudio(t)&&(this.removeListeners(this.prevPlayer,t.url),this.addListeners(this.player)),this.props.url===t.url||(0,o.isMediaStream)(this.props.url)||this.props.url instanceof Array||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.removeAttribute("src"),this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(t){var e=this.props,n=e.url,r=e.playsinline;t.addEventListener("play",this.onPlay),t.addEventListener("waiting",this.onBuffer),t.addEventListener("playing",this.onBufferEnd),t.addEventListener("pause",this.onPause),t.addEventListener("seeked",this.onSeek),t.addEventListener("ended",this.onEnded),t.addEventListener("error",this.onError),t.addEventListener("ratechange",this.onPlayBackRateChange),t.addEventListener("enterpictureinpicture",this.onEnablePIP),t.addEventListener("leavepictureinpicture",this.onDisablePIP),t.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(n)||t.addEventListener("canplay",this.onReady),r&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(t,e){t.removeEventListener("canplay",this.onReady),t.removeEventListener("play",this.onPlay),t.removeEventListener("waiting",this.onBuffer),t.removeEventListener("playing",this.onBufferEnd),t.removeEventListener("pause",this.onPause),t.removeEventListener("seeked",this.onSeek),t.removeEventListener("ended",this.onEnded),t.removeEventListener("error",this.onError),t.removeEventListener("ratechange",this.onPlayBackRateChange),t.removeEventListener("enterpictureinpicture",this.onEnablePIP),t.removeEventListener("leavepictureinpicture",this.onDisablePIP),t.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(e)||t.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(t){return!t.config.forceVideo&&!t.config.attributes.poster&&(s.AUDIO_EXTENSIONS.test(t.url)||t.config.forceAudio)}},{key:"shouldUseHLS",value:function(t){return!!(v&&this.props.config.forceSafariHLS||this.props.config.forceHLS)||!y&&!this.props.config.forceDisableHls&&(s.HLS_EXTENSIONS.test(t)||b.test(t))}},{key:"shouldUseDASH",value:function(t){return s.DASH_EXTENSIONS.test(t)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(t){return s.FLV_EXTENSIONS.test(t)||this.props.config.forceFLV}},{key:"load",value:function(t){var e=this,n=this.props.config,r=n.hlsVersion,i=n.hlsOptions,s=n.dashVersion,a=n.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(t)&&(0,o.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",r),"Hls").then((function(n){if(e.hls=new n(i),e.hls.on(n.Events.MANIFEST_PARSED,(function(){e.props.onReady()})),e.hls.on(n.Events.ERROR,(function(t,r){e.props.onError(t,r,e.hls,n)})),b.test(t)){var r=t.match(b)[1];e.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",r))}else e.hls.loadSource(t);e.hls.attachMedia(e.player),e.props.onLoaded()})),this.shouldUseDASH(t)&&(0,o.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",s),"dashjs").then((function(n){e.dash=n.MediaPlayer().create(),e.dash.initialize(e.player,t,e.props.playing),e.dash.on("error",e.props.onError),parseInt(s)<3?e.dash.getDebug().setLogToBrowserConsole(!1):e.dash.updateSettings({debug:{logLevel:n.Debug.LOG_LEVEL_NONE}}),e.props.onLoaded()})),this.shouldUseFLV(t)&&(0,o.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",a),"flvjs").then((function(n){e.flv=n.createPlayer({type:"flv",url:t}),e.flv.attachMediaElement(e.player),e.flv.on(n.Events.ERROR,(function(t,r){e.props.onError(t,r,e.flv,n)})),e.flv.load(),e.props.onLoaded()})),t instanceof Array)this.player.load();else if((0,o.isMediaStream)(t))try{this.player.srcObject=t}catch(l){this.player.src=window.URL.createObjectURL(t)}}},{key:"play",value:function(){var t=this.player.play();t&&t.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.player.currentTime=t,e||this.pause()}},{key:"setVolume",value:function(t){this.player.volume=t}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,o.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,o.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(t){try{this.player.playbackRate=t}catch(e){this.props.onError(e)}}},{key:"getDuration",value:function(){if(!this.player)return null;var t=this.player,e=t.duration,n=t.seekable;return e===1/0&&n.length>0?n.end(n.length-1):e}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var t=this.player.buffered;if(0===t.length)return 0;var e=t.end(t.length-1),n=this.getDuration();return e>n?n:e}},{key:"getSource",value:function(t){var e=this.shouldUseHLS(t),n=this.shouldUseDASH(t),r=this.shouldUseFLV(t);if(!(t instanceof Array||(0,o.isMediaStream)(t)||e||n||r))return _.test(t)?t.replace("www.dropbox.com","dl.dropboxusercontent.com"):t}},{key:"render",value:function(){var t=this.props,e=t.url,n=t.playing,r=t.loop,o=t.controls,s=t.muted,a=t.config,u=t.width,c=t.height,h=this.shouldUseAudio(this.props)?"audio":"video",p={width:"auto"===u?u:"100%",height:"auto"===c?c:"100%"};return i.default.createElement(h,l({ref:this.ref,src:this.getSource(e),style:p,preload:"auto",autoPlay:n||void 0,controls:o,muted:s,loop:r},a.attributes),e instanceof Array&&e.map(this.renderSourceElement),a.tracks.map(this.renderTrack))}}],n&&u(e.prototype,n),r&&u(e,r),f}(i.Component);e.default=x,d(x,"displayName","FilePlayer"),d(x,"canPlay",s.canPlay.file)},9332:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return h(t)}(this,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t);var e,n,r,s=c(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f(h(t=s.call.apply(s,[this].concat(n))),"callPlayer",o.callPlayer),f(h(t),"duration",null),f(h(t),"currentTime",null),f(h(t),"secondsLoaded",null),f(h(t),"mute",(function(){t.callPlayer("mute")})),f(h(t),"unmute",(function(){t.callPlayer("unmute")})),f(h(t),"ref",(function(e){t.iframe=e})),t}return e=a,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this;(0,o.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(t){e.iframe&&(e.player=new t.Player(e.iframe),e.player.on("ready",(function(){setTimeout((function(){e.player.isReady=!0,e.player.setLoop(e.props.loop),e.props.muted&&e.player.mute(),e.addListeners(e.player,e.props),e.props.onReady()}),500)})))}),this.props.onError)}},{key:"addListeners",value:function(t,e){var n=this;t.on("play",e.onPlay),t.on("pause",e.onPause),t.on("ended",e.onEnded),t.on("error",e.onError),t.on("timeupdate",(function(t){var e=t.duration,r=t.seconds;n.duration=e,n.currentTime=r}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("setCurrentTime",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"setLoop",value:function(t){this.callPlayer("setLoop",t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){return i.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}],n&&l(e.prototype,n),r&&l(e,r),a}(i.Component);e.default=d,f(d,"displayName","Kaltura"),f(d,"canPlay",s.canPlay.kaltura)},2732:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return f(t)}(this,n)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,t);var e,n,r,a=p(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(f(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),m(f(t),"duration",null),m(f(t),"currentTime",null),m(f(t),"secondsLoaded",null),m(f(t),"mute",(function(){})),m(f(t),"unmute",(function(){})),m(f(t),"ref",(function(e){t.iframe=e})),t}return e=l,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this;(0,o.getSDK)("https://widget.mixcloud.com/media/js/widgetApi.js","Mixcloud").then((function(t){e.player=t.PlayerWidget(e.iframe),e.player.ready.then((function(){e.player.events.play.on(e.props.onPlay),e.player.events.pause.on(e.props.onPause),e.player.events.ended.on(e.props.onEnded),e.player.events.error.on(e.props.error),e.player.events.progress.on((function(t,n){e.currentTime=t,e.duration=n})),e.props.onReady()}))}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("seek",t),e||this.pause()}},{key:"setVolume",value:function(t){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var t=this.props,e=t.url,n=t.config,r=e.match(s.MATCH_URL_MIXCLOUD)[1],a=(0,o.queryString)(u(u({},n.options),{},{feed:"/".concat(r,"/")}));return i.default.createElement("iframe",{key:r,ref:this.ref,style:{width:"100%",height:"100%"},src:"https://www.mixcloud.com/widget/iframe/?".concat(a),frameBorder:"0",allow:"autoplay"})}}],n&&c(e.prototype,n),r&&c(e,r),l}(i.Component);e.default=g,m(g,"displayName","Mixcloud"),m(g,"canPlay",s.canPlay.mixcloud),m(g,"loopOnEnded",!0)},1801:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return f(t)}(this,n)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(a,t);var e,n,r,s=p(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(f(t=s.call.apply(s,[this].concat(n))),"callPlayer",o.callPlayer),m(f(t),"duration",null),m(f(t),"currentTime",null),m(f(t),"fractionLoaded",null),m(f(t),"mute",(function(){t.setVolume(0)})),m(f(t),"unmute",(function(){null!==t.props.volume&&t.setVolume(t.props.volume)})),m(f(t),"ref",(function(e){t.iframe=e})),t}return e=a,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t,e){var n=this;(0,o.getSDK)("https://w.soundcloud.com/player/api.js","SC").then((function(r){if(n.iframe){var i=r.Widget.Events,o=i.PLAY,s=i.PLAY_PROGRESS,a=i.PAUSE,l=i.FINISH,c=i.ERROR;e||(n.player=r.Widget(n.iframe),n.player.bind(o,n.props.onPlay),n.player.bind(a,(function(){n.duration-n.currentTime<.05||n.props.onPause()})),n.player.bind(s,(function(t){n.currentTime=t.currentPosition/1e3,n.fractionLoaded=t.loadedProgress})),n.player.bind(l,(function(){return n.props.onEnded()})),n.player.bind(c,(function(t){return n.props.onError(t)}))),n.player.load(t,u(u({},n.props.config.options),{},{callback:function(){n.player.getDuration((function(t){n.duration=t/1e3,n.props.onReady()}))}}))}}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("seekTo",1e3*t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",100*t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var t={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:t,frameBorder:0,allow:"autoplay"})}}],n&&c(e.prototype,n),r&&c(e,r),a}(i.Component);e.default=g,m(g,"displayName","SoundCloud"),m(g,"canPlay",s.canPlay.soundcloud),m(g,"loopOnEnded",!0)},1286:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return h(t)}(this,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,r,a=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f(h(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),f(h(t),"duration",null),f(h(t),"currentTime",null),f(h(t),"secondsLoaded",null),f(h(t),"mute",(function(){t.callPlayer("mute")})),f(h(t),"unmute",(function(){t.callPlayer("unmute")})),f(h(t),"ref",(function(e){t.iframe=e})),t}return e=p,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this;(0,o.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(t){e.iframe&&(e.player=new t.Player(e.iframe),e.player.setLoop(e.props.loop),e.player.on("ready",e.props.onReady),e.player.on("play",e.props.onPlay),e.player.on("pause",e.props.onPause),e.player.on("seeked",e.props.onSeek),e.player.on("ended",e.props.onEnded),e.player.on("error",e.props.onError),e.player.on("timeupdate",(function(t){var n=t.duration,r=t.seconds;e.duration=n,e.currentTime=r})),e.player.on("buffered",(function(t){var n=t.percent;e.duration&&(e.secondsLoaded=e.duration*n)})),e.props.muted&&e.player.mute())}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("setCurrentTime",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",100*t)}},{key:"setLoop",value:function(t){this.callPlayer("setLoop",t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var t=this.props.url.match(s.MATCH_URL_STREAMABLE)[1];return i.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(t),frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;"})}}],n&&l(e.prototype,n),r&&l(e,r),p}(i.Component);e.default=d,f(d,"displayName","Streamable"),f(d,"canPlay",s.canPlay.streamable)},6741:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return p(t)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,a=h(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(p(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),d(p(t),"playerID",t.props.config.playerId||"".concat("twitch-player-").concat((0,o.randomString)())),d(p(t),"mute",(function(){t.callPlayer("setMuted",!0)})),d(p(t),"unmute",(function(){t.callPlayer("setMuted",!1)})),t}return e=f,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t,e){var n=this,r=this.props,i=r.playsinline,a=r.onError,u=r.config,c=r.controls,h=s.MATCH_URL_TWITCH_CHANNEL.test(t),p=h?t.match(s.MATCH_URL_TWITCH_CHANNEL)[1]:t.match(s.MATCH_URL_TWITCH_VIDEO)[1];e?h?this.player.setChannel(p):this.player.setVideo("v"+p):(0,o.getSDK)("https://player.twitch.tv/js/embed/v1.js","Twitch").then((function(e){n.player=new e.Player(n.playerID,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({video:h?"":p,channel:h?p:"",height:"100%",width:"100%",playsinline:i,autoplay:n.props.playing,muted:n.props.muted,controls:!!h||c,time:(0,o.parseStartTime)(t)},u.options));var r=e.Player,s=r.READY,a=r.PLAYING,f=r.PAUSE,m=r.ENDED,g=r.ONLINE,y=r.OFFLINE,v=r.SEEK;n.player.addEventListener(s,n.props.onReady),n.player.addEventListener(a,n.props.onPlay),n.player.addEventListener(f,n.props.onPause),n.player.addEventListener(m,n.props.onEnded),n.player.addEventListener(v,n.props.onSeek),n.player.addEventListener(g,n.props.onLoaded),n.player.addEventListener(y,n.props.onLoaded)}),a)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("seek",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return i.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID})}}],n&&u(e.prototype,n),r&&u(e,r),f}(i.Component);e.default=m,d(m,"displayName","Twitch"),d(m,"canPlay",s.canPlay.twitch),d(m,"loopOnEnded",!0)},5561:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return p(t)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,a=h(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(p(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),d(p(t),"mute",(function(){t.setVolume(0)})),d(p(t),"unmute",(function(){null!==t.props.volume&&t.setVolume(t.props.volume)})),d(p(t),"ref",(function(e){t.container=e})),t}return e=f,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this,n=this.props,r=n.playing,i=n.config,a=n.onError,u=n.onDuration,c=t&&t.match(s.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,o.getSDK)("https://play.vidyard.com/embed/v4.js","VidyardV4","onVidyardAPI").then((function(t){e.container&&(t.api.addReadyListener((function(t,n){e.player||(e.player=n,e.player.on("ready",e.props.onReady),e.player.on("play",e.props.onPlay),e.player.on("pause",e.props.onPause),e.player.on("seek",e.props.onSeek),e.player.on("playerComplete",e.props.onEnded))}),c),t.api.renderPlayer(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({uuid:c,container:e.container,autoplay:r?1:0},i.options)),t.api.getPlayerMetadata(c).then((function(t){e.duration=t.length_in_seconds,u(t.length_in_seconds)})))}),a)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("seek",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"setPlaybackRate",value:function(t){this.callPlayer("setPlaybackSpeed",t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var t={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("div",{style:t},i.default.createElement("div",{ref:this.ref}))}}],n&&u(e.prototype,n),r&&u(e,r),f}(i.Component);e.default=m,d(m,"displayName","Vidyard"),d(m,"canPlay",s.canPlay.vidyard)},7600:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return p(t)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){return t.replace("/manage/videos","")},g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(a,t);var e,n,r,s=h(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(p(t=s.call.apply(s,[this].concat(n))),"callPlayer",o.callPlayer),d(p(t),"duration",null),d(p(t),"currentTime",null),d(p(t),"secondsLoaded",null),d(p(t),"mute",(function(){t.setMuted(!0)})),d(p(t),"unmute",(function(){t.setMuted(!1)})),d(p(t),"ref",(function(e){t.container=e})),t}return e=a,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this;this.duration=null,(0,o.getSDK)("https://player.vimeo.com/api/player.js","Vimeo").then((function(n){if(e.container){var r=e.props.config,i=r.playerOptions,o=r.title;e.player=new n.Player(e.container,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({url:m(t),autoplay:e.props.playing,muted:e.props.muted,loop:e.props.loop,playsinline:e.props.playsinline,controls:e.props.controls},i)),e.player.ready().then((function(){var t=e.container.querySelector("iframe");t.style.width="100%",t.style.height="100%",o&&(t.title=o)})).catch(e.props.onError),e.player.on("loaded",(function(){e.props.onReady(),e.refreshDuration()})),e.player.on("play",(function(){e.props.onPlay(),e.refreshDuration()})),e.player.on("pause",e.props.onPause),e.player.on("seeked",(function(t){return e.props.onSeek(t.seconds)})),e.player.on("ended",e.props.onEnded),e.player.on("error",e.props.onError),e.player.on("timeupdate",(function(t){var n=t.seconds;e.currentTime=n})),e.player.on("progress",(function(t){var n=t.seconds;e.secondsLoaded=n})),e.player.on("bufferstart",e.props.onBuffer),e.player.on("bufferend",e.props.onBufferEnd),e.player.on("playbackratechange",(function(t){return e.props.onPlaybackRateChange(t.playbackRate)}))}}),this.props.onError)}},{key:"refreshDuration",value:function(){var t=this;this.player.getDuration().then((function(e){t.duration=e}))}},{key:"play",value:function(){var t=this.callPlayer("play");t&&t.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("setCurrentTime",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",t)}},{key:"setMuted",value:function(t){this.callPlayer("setMuted",t)}},{key:"setLoop",value:function(t){this.callPlayer("setLoop",t)}},{key:"setPlaybackRate",value:function(t){this.callPlayer("setPlaybackRate",t)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var t={width:"100%",height:"100%",overflow:"hidden",display:this.props.display};return i.default.createElement("div",{key:this.props.url,ref:this.ref,style:t})}}],n&&u(e.prototype,n),r&&u(e,r),a}(i.Component);e.default=g,d(g,"displayName","Vimeo"),d(g,"canPlay",s.canPlay.vimeo),d(g,"forceLoad",!0)},5793:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return f(t)}(this,n)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,t);var e,n,r,a=p(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(f(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),m(f(t),"playerID",t.props.config.playerId||"".concat("wistia-player-").concat((0,o.randomString)())),m(f(t),"onPlay",(function(){var e;return(e=t.props).onPlay.apply(e,arguments)})),m(f(t),"onPause",(function(){var e;return(e=t.props).onPause.apply(e,arguments)})),m(f(t),"onSeek",(function(){var e;return(e=t.props).onSeek.apply(e,arguments)})),m(f(t),"onEnded",(function(){var e;return(e=t.props).onEnded.apply(e,arguments)})),m(f(t),"onPlaybackRateChange",(function(){var e;return(e=t.props).onPlaybackRateChange.apply(e,arguments)})),m(f(t),"mute",(function(){t.callPlayer("mute")})),m(f(t),"unmute",(function(){t.callPlayer("unmute")})),t}return e=l,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(t){var e=this,n=this.props,r=n.playing,i=n.muted,s=n.controls,a=n.onReady,l=n.config,c=n.onError;(0,o.getSDK)("https://fast.wistia.com/assets/external/E-v1.js","Wistia").then((function(t){l.customControls&&l.customControls.forEach((function(e){return t.defineControl(e)})),window._wq=window._wq||[],window._wq.push({id:e.playerID,options:u({autoPlay:r,silentAutoPlay:"allow",muted:i,controlsVisibleOnLoad:s,fullscreenButton:s,playbar:s,playbackRateControl:s,qualityControl:s,volumeControl:s,settingsControl:s,smallPlayButton:s},l.options),onReady:function(t){e.player=t,e.unbind(),e.player.bind("play",e.onPlay),e.player.bind("pause",e.onPause),e.player.bind("seek",e.onSeek),e.player.bind("end",e.onEnded),e.player.bind("playbackratechange",e.onPlaybackRateChange),a()}})}),c)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callPlayer("time",t),e||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("volume",t)}},{key:"setPlaybackRate",value:function(t){this.callPlayer("playbackRate",t)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var t=this.props.url,e=t&&t.match(s.MATCH_URL_WISTIA)[1],n="wistia_embed wistia_async_".concat(e);return i.default.createElement("div",{id:this.playerID,key:e,className:n,style:{width:"100%",height:"100%"}})}}],n&&c(e.prototype,n),r&&c(e,r),l}(i.Component);e.default=g,m(g,"displayName","Wistia"),m(g,"canPlay",s.canPlay.wistia),m(g,"loopOnEnded",!0)},8322:(t,e,n)=>{"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(2791)),o=n(135),s=n(365);function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return m(t)}(this,n)}}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,_=/user\/([a-zA-Z0-9_-]+)\/?/,b=/youtube-nocookie\.com/,x=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(l,t);var e,n,r,a=d(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(m(t=a.call.apply(a,[this].concat(n))),"callPlayer",o.callPlayer),y(m(t),"parsePlaylist",(function(e){return e instanceof Array?{listType:"playlist",playlist:e.map(t.getID).join(",")}:v.test(e)?{listType:"playlist",list:c(e.match(v),2)[1].replace(/^UC/,"UU")}:_.test(e)?{listType:"user_uploads",list:c(e.match(_),2)[1]}:{}})),y(m(t),"onStateChange",(function(e){var n=e.data,r=t.props,i=r.onPlay,o=r.onPause,s=r.onBuffer,a=r.onBufferEnd,l=r.onEnded,u=r.onReady,c=r.loop,h=r.config,p=h.playerVars,f=h.onUnstarted,d=window.YT.PlayerState,m=d.UNSTARTED,g=d.PLAYING,y=d.PAUSED,v=d.BUFFERING,_=d.ENDED,b=d.CUED;if(n===m&&f(),n===g&&(i(),a()),n===y&&o(),n===v&&s(),n===_){var x=!!t.callPlayer("getPlaylist");c&&!x&&(p.start?t.seekTo(p.start):t.play()),l()}n===b&&u()})),y(m(t),"mute",(function(){t.callPlayer("mute")})),y(m(t),"unmute",(function(){t.callPlayer("unMute")})),y(m(t),"ref",(function(e){t.container=e})),t}return e=l,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(t){return!t||t instanceof Array||v.test(t)?null:t.match(s.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(t,e){var n=this,r=this.props,i=r.playing,s=r.muted,a=r.playsinline,l=r.controls,c=r.loop,h=r.config,p=r.onError,f=h.playerVars,d=h.embedOptions,m=this.getID(t);if(e)return v.test(t)||_.test(t)||t instanceof Array?void this.player.loadPlaylist(this.parsePlaylist(t)):void this.player.cueVideoById({videoId:m,startSeconds:(0,o.parseStartTime)(t)||f.start,endSeconds:(0,o.parseEndTime)(t)||f.end});(0,o.getSDK)("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady",(function(t){return t.loaded})).then((function(e){n.container&&(n.player=new e.Player(n.container,u({width:"100%",height:"100%",videoId:m,playerVars:u(u({autoplay:i?1:0,mute:s?1:0,controls:l?1:0,start:(0,o.parseStartTime)(t),end:(0,o.parseEndTime)(t),origin:window.location.origin,playsinline:a?1:0},n.parsePlaylist(t)),f),events:{onReady:function(){c&&n.player.setLoop(!0),n.props.onReady()},onPlaybackRateChange:function(t){return n.props.onPlaybackRateChange(t.data)},onPlaybackQualityChange:function(t){return n.props.onPlaybackQualityChange(t)},onStateChange:n.onStateChange,onError:function(t){return p(t.data)}},host:b.test(t)?"https://www.youtube-nocookie.com":void 0},d)))}),p),d.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer\u2019s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.callPlayer("seekTo",t),e||this.props.playing||this.pause()}},{key:"setVolume",value:function(t){this.callPlayer("setVolume",100*t)}},{key:"setPlaybackRate",value:function(t){this.callPlayer("setPlaybackRate",t)}},{key:"setLoop",value:function(t){this.callPlayer("setLoop",t)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var t={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("div",{style:t},i.default.createElement("div",{ref:this.ref}))}}],n&&p(e.prototype,n),r&&p(e,r),l}(i.Component);e.default=x,y(x,"displayName","YouTube"),y(x,"canPlay",s.canPlay.youtube)},4687:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(2791),i=n(135),o=n(365);function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}var u=[{key:"youtube",name:"YouTube",canPlay:o.canPlay.youtube,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(8322))}))}))},{key:"soundcloud",name:"SoundCloud",canPlay:o.canPlay.soundcloud,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(1801))}))}))},{key:"vimeo",name:"Vimeo",canPlay:o.canPlay.vimeo,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(7600))}))}))},{key:"facebook",name:"Facebook",canPlay:o.canPlay.facebook,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(4793))}))}))},{key:"streamable",name:"Streamable",canPlay:o.canPlay.streamable,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(1286))}))}))},{key:"wistia",name:"Wistia",canPlay:o.canPlay.wistia,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(5793))}))}))},{key:"twitch",name:"Twitch",canPlay:o.canPlay.twitch,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(6741))}))}))},{key:"dailymotion",name:"DailyMotion",canPlay:o.canPlay.dailymotion,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(4303))}))}))},{key:"mixcloud",name:"Mixcloud",canPlay:o.canPlay.mixcloud,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(2732))}))}))},{key:"vidyard",name:"Vidyard",canPlay:o.canPlay.vidyard,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(5561))}))}))},{key:"kaltura",name:"Kaltura",canPlay:o.canPlay.kaltura,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(9332))}))}))},{key:"file",name:"FilePlayer",canPlay:o.canPlay.file,canEnablePIP:function(t){return o.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,i.supportsWebKitPresentationMode)())&&!o.AUDIO_EXTENSIONS.test(t)},lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return l(n(8997))}))}))}];e.default=u},9174:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultProps=e.propTypes=void 0;var r,i=(r=n(2007))&&r.__esModule?r:{default:r};var o=i.default.string,s=i.default.bool,a=i.default.number,l=i.default.array,u=i.default.oneOfType,c=i.default.shape,h=i.default.object,p=i.default.func,f=i.default.node,d={url:u([o,l,h]),playing:s,loop:s,controls:s,volume:a,muted:s,playbackRate:a,width:u([o,a]),height:u([o,a]),style:h,progressInterval:a,playsinline:s,pip:s,stopOnUnmount:s,light:u([s,o,h]),playIcon:f,previewTabIndex:a,fallback:f,oEmbedUrl:o,wrapper:u([o,p,c({render:p.isRequired})]),config:c({soundcloud:c({options:h}),youtube:c({playerVars:h,embedOptions:h,onUnstarted:p}),facebook:c({appId:o,version:o,playerId:o,attributes:h}),dailymotion:c({params:h}),vimeo:c({playerOptions:h,title:o}),file:c({attributes:h,tracks:l,forceVideo:s,forceAudio:s,forceHLS:s,forceSafariHLS:s,forceDisableHls:s,forceDASH:s,forceFLV:s,hlsOptions:h,hlsVersion:o,dashVersion:o,flvVersion:o}),wistia:c({options:h,playerId:o,customControls:l}),mixcloud:c({options:h}),twitch:c({options:h,playerId:o}),vidyard:c({options:h})}),onReady:p,onStart:p,onPlay:p,onPause:p,onBuffer:p,onBufferEnd:p,onEnded:p,onError:p,onDuration:p,onSeek:p,onPlaybackRateChange:p,onPlaybackQualityChange:p,onProgress:p,onClickPreview:p,onEnablePIP:p,onDisablePIP:p};e.propTypes=d;var m=function(){},g={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:m},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onPlaybackRateChange:m,onPlaybackQualityChange:m,onProgress:m,onClickPreview:m,onEnablePIP:m,onDisablePIP:m};e.defaultProps=g},135:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseStartTime=function(t){return p(t,l)},e.parseEndTime=function(t){return p(t,u)},e.randomString=function(){return Math.random().toString(36).substr(2,5)},e.queryString=function(t){return Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&")},e.getSDK=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.default,s=f(e);if(s&&i(s))return Promise.resolve(s);return new Promise((function(r,i){if(d[t])d[t].push({resolve:r,reject:i});else{d[t]=[{resolve:r,reject:i}];var s=function(e){d[t].forEach((function(t){return t.resolve(e)}))};if(n){var a=window[n];window[n]=function(){a&&a(),s(f(e))}}o(t,(function(r){r?(d[t].forEach((function(t){return t.reject(r)})),d[t]=null):n||s(f(e))}))}}))},e.getConfig=function(t,e){return(0,i.default)(e.config,t.config)},e.omit=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=(e=[]).concat.apply(e,r),s={},a=Object.keys(t),l=0,u=a;l<u.length;l++){var c=u[l];-1===o.indexOf(c)&&(s[c]=t[c])}return s},e.callPlayer=function(t){var e;if(!this.player||!this.player[t]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(t,"%c \u2013 ");return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(e=this.player)[t].apply(e,i)},e.isMediaStream=function(t){return"undefined"!==typeof window&&"undefined"!==typeof window.MediaStream&&t instanceof window.MediaStream},e.isBlobUrl=function(t){return/^blob:/.test(t)},e.supportsWebKitPresentationMode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),e=!1===/iPhone|iPod/.test(navigator.userAgent);return t.webkitSupportsPresentationMode&&"function"===typeof t.webkitSetPresentationMode&&e};var r=o(n(5102)),i=o(n(9948));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l=/[?&#](?:start|t)=([0-9hms]+)/,u=/[?&#]end=([0-9hms]+)/,c=/(\d+)(h|m|s)/g,h=/^\d+$/;function p(t,e){if(!(t instanceof Array)){var n=t.match(e);if(n){var r=n[1];if(r.match(c))return function(t){var e=0,n=c.exec(t);for(;null!==n;){var r=s(n,3),i=r[1],o=r[2];"h"===o&&(e+=60*parseInt(i,10)*60),"m"===o&&(e+=60*parseInt(i,10)),"s"===o&&(e+=parseInt(i,10)),n=c.exec(t)}return e}(r);if(h.test(r))return parseInt(r)}}}function f(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}var d={}},4976:(t,e)=>{"use strict";e.ConcurrentRoot=1,e.ContinuousEventPriority=4,e.DefaultEventPriority=16,e.DiscreteEventPriority=1},3721:(t,e,n)=>{t.exports=function(t){var e={},r=n(2791),i=n(3100),o=Object.assign;function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function E(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=x&&t[x]||t["@@iterator"])?t:null}function S(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case c:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case d:return(t.displayName||"Context")+".Consumer";case f:return(t._context.displayName||"Context")+".Provider";case m:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case v:return null!==(e=t.displayName||null)?e:S(t.type)||"Memo";case _:e=t._payload,t=t._init;try{return S(t(e))}catch(n){}}return null}function w(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(e);case 8:return e===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function T(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function M(t){if(T(t)!==t)throw Error(s(188))}function R(t){var e=t.alternate;if(!e){if(null===(e=T(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return M(i),t;if(o===r)return M(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}function A(t){return null!==(t=R(t))?P(t):null}function P(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=P(t);if(null!==e)return e;t=t.sibling}return null}function I(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var e=I(t);if(null!==e)return e}t=t.sibling}return null}var C,O=Array.isArray,N=t.getPublicInstance,L=t.getRootHostContext,D=t.getChildHostContext,U=t.prepareForCommit,F=t.resetAfterCommit,k=t.createInstance,B=t.appendInitialChild,G=t.finalizeInitialChildren,j=t.prepareUpdate,z=t.shouldSetTextContent,H=t.createTextInstance,V=t.scheduleTimeout,X=t.cancelTimeout,W=t.noTimeout,Y=t.isPrimaryRenderer,q=t.supportsMutation,$=t.supportsPersistence,K=t.supportsHydration,Z=t.getInstanceFromNode,J=t.preparePortalMount,Q=t.getCurrentEventPriority,tt=t.detachDeletedInstance,et=t.supportsMicrotasks,nt=t.scheduleMicrotask,rt=t.supportsTestSelectors,it=t.findFiberRoot,ot=t.getBoundingRect,st=t.getTextContent,at=t.isHiddenSubtree,lt=t.matchAccessibilityRole,ut=t.setFocusIfFocusable,ct=t.setupIntersectionObserver,ht=t.appendChild,pt=t.appendChildToContainer,ft=t.commitTextUpdate,dt=t.commitMount,mt=t.commitUpdate,gt=t.insertBefore,yt=t.insertInContainerBefore,vt=t.removeChild,_t=t.removeChildFromContainer,bt=t.resetTextContent,xt=t.hideInstance,Et=t.hideTextInstance,St=t.unhideInstance,wt=t.unhideTextInstance,Tt=t.clearContainer,Mt=t.cloneInstance,Rt=t.createContainerChildSet,At=t.appendChildToContainerChildSet,Pt=t.finalizeContainerChildren,It=t.replaceContainerChildren,Ct=t.cloneHiddenInstance,Ot=t.cloneHiddenTextInstance,Nt=t.canHydrateInstance,Lt=t.canHydrateTextInstance,Dt=t.canHydrateSuspenseInstance,Ut=t.isSuspenseInstancePending,Ft=t.isSuspenseInstanceFallback,kt=t.registerSuspenseInstanceRetry,Bt=t.getNextHydratableSibling,Gt=t.getFirstHydratableChild,jt=t.getFirstHydratableChildWithinContainer,zt=t.getFirstHydratableChildWithinSuspenseInstance,Ht=t.hydrateInstance,Vt=t.hydrateTextInstance,Xt=t.hydrateSuspenseInstance,Wt=t.getNextHydratableInstanceAfterSuspenseInstance,Yt=t.commitHydratedContainer,qt=t.commitHydratedSuspenseInstance,$t=t.clearSuspenseBoundary,Kt=t.clearSuspenseBoundaryFromContainer,Zt=t.shouldDeleteUnhydratedTailInstances,Jt=t.didNotMatchHydratedContainerTextInstance,Qt=t.didNotMatchHydratedTextInstance;function te(t){if(void 0===C)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);C=e&&e[1]||""}return"\n"+C+t}var ee=!1;function ne(t,e){if(!t||ee)return"";ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{ee=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?te(t):""}var re=Object.prototype.hasOwnProperty,ie=[],oe=-1;function se(t){return{current:t}}function ae(t){0>oe||(t.current=ie[oe],ie[oe]=null,oe--)}function le(t,e){oe++,ie[oe]=t.current,t.current=e}var ue={},ce=se(ue),he=se(!1),pe=ue;function fe(t,e){var n=t.type.contextTypes;if(!n)return ue;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function de(t){return null!==(t=t.childContextTypes)&&void 0!==t}function me(){ae(he),ae(ce)}function ge(t,e,n){if(ce.current!==ue)throw Error(s(168));le(ce,e),le(he,n)}function ye(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,w(t)||"Unknown",i));return o({},n,r)}function ve(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ue,pe=ce.current,le(ce,t),le(he,he.current),!0}function _e(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=ye(t,e,pe),r.__reactInternalMemoizedMergedChildContext=t,ae(he),ae(ce),le(ce,t)):ae(he),le(he,n)}var be=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(xe(t)/Ee|0)|0},xe=Math.log,Ee=Math.LN2;var Se=64,we=4194304;function Te(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Me(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=Te(a):0!==(o&=s)&&(r=Te(o))}else 0!==(s=n&~i)?r=Te(s):0!==o&&(r=Te(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-be(e)),r|=t[n],e&=~i;return r}function Re(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ae(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Pe(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ie(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-be(e)]=n}function Ce(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-be(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function Ne(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Le=i.unstable_scheduleCallback,De=i.unstable_cancelCallback,Ue=i.unstable_shouldYield,Fe=i.unstable_requestPaint,ke=i.unstable_now,Be=i.unstable_ImmediatePriority,Ge=i.unstable_UserBlockingPriority,je=i.unstable_NormalPriority,ze=i.unstable_IdlePriority,He=null,Ve=null;var Xe="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},We=null,Ye=!1,qe=!1;function $e(t){null===We?We=[t]:We.push(t)}function Ke(){if(!qe&&null!==We){qe=!0;var t=0,e=Oe;try{var n=We;for(Oe=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}We=null,Ye=!1}catch(i){throw null!==We&&(We=We.slice(t+1)),Le(Be,Ke),i}finally{Oe=e,qe=!1}}return null}var Ze=a.ReactCurrentBatchConfig;function Je(t,e){if(Xe(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(e,i)||!Xe(t[i],e[i]))return!1}return!0}function Qe(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ne(t.type,!1);case 11:return t=ne(t.type.render,!1);case 1:return t=ne(t.type,!0);default:return""}}function tn(t,e){if(t&&t.defaultProps){for(var n in e=o({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var en=se(null),nn=null,rn=null,on=null;function sn(){on=rn=nn=null}function an(t,e,n){Y?(le(en,e._currentValue),e._currentValue=n):(le(en,e._currentValue2),e._currentValue2=n)}function ln(t){var e=en.current;ae(en),Y?t._currentValue=e:t._currentValue2=e}function un(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cn(t,e){nn=t,on=rn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ui=!0),t.firstContext=null)}function hn(t){var e=Y?t._currentValue:t._currentValue2;if(on!==t)if(t={context:t,memoizedValue:e,next:null},null===rn){if(null===nn)throw Error(s(308));rn=t,nn.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var pn=null,fn=!1;function dn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,null!==$o&&0!==(1&t.mode)&&0===(2&qo)?(null===(t=n.interleaved)?(e.next=e,null===pn?pn=[n]:pn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function vn(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Ce(t,n)}}function _n(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bn(t,e,n,r){var i=t.updateQueue;fn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?s=c:a.next=c,a=u;var h=t.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===l?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(null!==s){var p=i.baseState;for(a=0,h=c=u=null,l=s;;){var f=l.lane,d=l.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var m=t,g=l;switch(f=e,d=n,g.tag){case 1:if("function"===typeof(m=g.payload)){p=m.call(d,p,f);break t}p=m;break t;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(d,p,f):m)||void 0===f)break t;p=o({},p,f);break t;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else d={eventTime:d,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(c=h=d,u=p):h=h.next=d,a|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===s&&(i.shared.lanes=0);ns|=a,t.lanes=a,t.memoizedState=p}}function xn(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var En=(new r.Component).refs;function Sn(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:o({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var wn={isMounted:function(t){return!!(t=t._reactInternals)&&T(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xs(),i=Es(t),o=gn(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),yn(t,o),null!==(e=Ss(t,i,r))&&vn(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xs(),i=Es(t),o=gn(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),yn(t,o),null!==(e=Ss(t,i,r))&&vn(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xs(),r=Es(t),i=gn(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),yn(t,i),null!==(e=Ss(t,r,n))&&vn(e,t,r)}};function Tn(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!Je(n,r)||!Je(i,o))}function Mn(t,e,n){var r=!1,i=ue,o=e.contextType;return"object"===typeof o&&null!==o?o=hn(o):(i=de(e)?pe:ce.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?fe(t,i):ue),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=wn,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Rn(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wn.enqueueReplaceState(e,e.state,null)}function An(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=En,dn(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=hn(o):(o=de(e)?pe:ce.current,i.context=fe(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Sn(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&wn.enqueueReplaceState(i,i.state,null),bn(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}var Pn=[],In=0,Cn=null,On=0,Nn=[],Ln=0,Dn=null,Un=1,Fn="";function kn(t,e){Pn[In++]=On,Pn[In++]=Cn,Cn=t,On=e}function Bn(t,e,n){Nn[Ln++]=Un,Nn[Ln++]=Fn,Nn[Ln++]=Dn,Dn=t;var r=Un;t=Fn;var i=32-be(r)-1;r&=~(1<<i),n+=1;var o=32-be(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Un=1<<32-be(e)+i|n<<i|r,Fn=o+t}else Un=1<<o|n<<i|r,Fn=t}function Gn(t){null!==t.return&&(kn(t,1),Bn(t,1,0))}function jn(t){for(;t===Cn;)Cn=Pn[--In],Pn[In]=null,On=Pn[--In],Pn[In]=null;for(;t===Dn;)Dn=Nn[--Ln],Nn[Ln]=null,Fn=Nn[--Ln],Nn[Ln]=null,Un=Nn[--Ln],Nn[Ln]=null}var zn=null,Hn=null,Vn=!1,Xn=!1,Wn=null;function Yn(t,e){var n=Js(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function qn(t,e){switch(t.tag){case 5:return null!==(e=Nt(e,t.type,t.pendingProps))&&(t.stateNode=e,zn=t,Hn=Gt(e),!0);case 6:return null!==(e=Lt(e,t.pendingProps))&&(t.stateNode=e,zn=t,Hn=null,!0);case 13:if(null!==(e=Dt(e))){var n=null!==Dn?{id:Un,overflow:Fn}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Js(18,null,null,0)).stateNode=e,n.return=t,t.child=n,zn=t,Hn=null,!0}return!1;default:return!1}}function $n(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function Kn(t){if(Vn){var e=Hn;if(e){var n=e;if(!qn(t,e)){if($n(t))throw Error(s(418));e=Bt(n);var r=zn;e&&qn(t,e)?Yn(r,n):(t.flags=-4097&t.flags|2,Vn=!1,zn=t)}}else{if($n(t))throw Error(s(418));t.flags=-4097&t.flags|2,Vn=!1,zn=t}}}function Zn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;zn=t}function Jn(t){if(!K||t!==zn)return!1;if(!Vn)return Zn(t),Vn=!0,!1;if(3!==t.tag&&(5!==t.tag||Zt(t.type)&&!z(t.type,t.memoizedProps))){var e=Hn;if(e){if($n(t)){for(t=Hn;t;)t=Bt(t);throw Error(s(418))}for(;e;)Yn(t,e),e=Bt(e)}}if(Zn(t),13===t.tag){if(!K)throw Error(s(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));Hn=Wt(t)}else Hn=zn?Bt(t.stateNode):null;return!0}function Qn(){K&&(Hn=zn=null,Xn=Vn=!1)}function tr(t){null===Wn?Wn=[t]:Wn.push(t)}function er(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs;e===En&&(e=i.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function nr(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rr(t){return(0,t._init)(t._payload)}function ir(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=ta(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function h(t,e,n,r){return null===e||6!==e.tag?((e=ia(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n,r){var o=n.type;return o===c?d(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===_&&rr(o)===e.type)?((r=i(e,n.props)).ref=er(t,e,n),r.return=t,r):((r=ea(n.type,n.key,n.props,null,t.mode,r)).ref=er(t,e,n),r.return=t,r)}function f(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=oa(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function d(t,e,n,r,o){return null===e||7!==e.tag?((e=na(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function m(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=ia(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case l:return(n=ea(e.type,e.key,e.props,null,t.mode,n)).ref=er(t,null,e),n.return=t,n;case u:return(e=oa(e,t.mode,n)).return=t,e;case _:return m(t,(0,e._init)(e._payload),n)}if(O(e)||E(e))return(e=na(e,t.mode,n,null)).return=t,e;nr(t,e)}return null}function g(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:h(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?p(t,e,n,r):null;case u:return n.key===i?f(t,e,n,r):null;case _:return g(t,e,(i=n._init)(n._payload),r)}if(O(n)||E(n))return null!==i?null:d(t,e,n,r,null);nr(t,n)}return null}function y(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return h(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return p(e,t=t.get(null===r.key?n:r.key)||null,r,i);case u:return f(e,t=t.get(null===r.key?n:r.key)||null,r,i);case _:return y(t,e,n,(0,r._init)(r._payload),i)}if(O(r)||E(r))return d(e,t=t.get(n)||null,r,i,null);nr(e,r)}return null}function v(i,s,a,l){for(var u=null,c=null,h=s,p=s=0,f=null;null!==h&&p<a.length;p++){h.index>p?(f=h,h=null):f=h.sibling;var d=g(i,h,a[p],l);if(null===d){null===h&&(h=f);break}t&&h&&null===d.alternate&&e(i,h),s=o(d,s,p),null===c?u=d:c.sibling=d,c=d,h=f}if(p===a.length)return n(i,h),Vn&&kn(i,p),u;if(null===h){for(;p<a.length;p++)null!==(h=m(i,a[p],l))&&(s=o(h,s,p),null===c?u=h:c.sibling=h,c=h);return Vn&&kn(i,p),u}for(h=r(i,h);p<a.length;p++)null!==(f=y(h,i,p,a[p],l))&&(t&&null!==f.alternate&&h.delete(null===f.key?p:f.key),s=o(f,s,p),null===c?u=f:c.sibling=f,c=f);return t&&h.forEach((function(t){return e(i,t)})),Vn&&kn(i,p),u}function b(i,a,l,u){var c=E(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,p=a,f=a=0,d=null,v=l.next();null!==p&&!v.done;f++,v=l.next()){p.index>f?(d=p,p=null):d=p.sibling;var _=g(i,p,v.value,u);if(null===_){null===p&&(p=d);break}t&&p&&null===_.alternate&&e(i,p),a=o(_,a,f),null===h?c=_:h.sibling=_,h=_,p=d}if(v.done)return n(i,p),Vn&&kn(i,f),c;if(null===p){for(;!v.done;f++,v=l.next())null!==(v=m(i,v.value,u))&&(a=o(v,a,f),null===h?c=v:h.sibling=v,h=v);return Vn&&kn(i,f),c}for(p=r(i,p);!v.done;f++,v=l.next())null!==(v=y(p,i,f,v.value,u))&&(t&&null!==v.alternate&&p.delete(null===v.key?f:v.key),a=o(v,a,f),null===h?c=v:h.sibling=v,h=v);return t&&p.forEach((function(t){return e(i,t)})),Vn&&kn(i,f),c}return function t(r,o,s,h){if("object"===typeof s&&null!==s&&s.type===c&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case l:t:{for(var p=s.key,f=o;null!==f;){if(f.key===p){if((p=s.type)===c){if(7===f.tag){n(r,f.sibling),(o=i(f,s.props.children)).return=r,r=o;break t}}else if(f.elementType===p||"object"===typeof p&&null!==p&&p.$$typeof===_&&rr(p)===f.type){n(r,f.sibling),(o=i(f,s.props)).ref=er(r,f,s),o.return=r,r=o;break t}n(r,f);break}e(r,f),f=f.sibling}s.type===c?((o=na(s.props.children,r.mode,h,s.key)).return=r,r=o):((h=ea(s.type,s.key,s.props,null,r.mode,h)).ref=er(r,o,s),h.return=r,r=h)}return a(r);case u:t:{for(f=s.key;null!==o;){if(o.key===f){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=oa(s,r.mode,h)).return=r,r=o}return a(r);case _:return t(r,o,(f=s._init)(s._payload),h)}if(O(s))return v(r,o,s,h);if(E(s))return b(r,o,s,h);nr(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=ia(s,r.mode,h)).return=r,r=o),a(r)):n(r,o)}}var or=ir(!0),sr=ir(!1),ar={},lr=se(ar),ur=se(ar),cr=se(ar);function hr(t){if(t===ar)throw Error(s(174));return t}function pr(t,e){le(cr,e),le(ur,t),le(lr,ar),t=L(e),ae(lr),le(lr,t)}function fr(){ae(lr),ae(ur),ae(cr)}function dr(t){var e=hr(cr.current),n=hr(lr.current);n!==(e=D(n,t.type,e))&&(le(ur,t),le(lr,e))}function mr(t){ur.current===t&&(ae(lr),ae(ur))}var gr=se(0);function yr(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ut(n)||Ft(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vr=[];function _r(){for(var t=0;t<vr.length;t++){var e=vr[t];Y?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}vr.length=0}var br=a.ReactCurrentDispatcher,xr=a.ReactCurrentBatchConfig,Er=0,Sr=null,wr=null,Tr=null,Mr=!1,Rr=!1,Ar=0,Pr=0;function Ir(){throw Error(s(321))}function Cr(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xe(t[n],e[n]))return!1;return!0}function Or(t,e,n,r,i,o){if(Er=o,Sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,br.current=null===t||null===t.memoizedState?di:mi,t=n(r,i),Rr){o=0;do{if(Rr=!1,Ar=0,25<=o)throw Error(s(301));o+=1,Tr=wr=null,e.updateQueue=null,br.current=gi,t=n(r,i)}while(Rr)}if(br.current=fi,e=null!==wr&&null!==wr.next,Er=0,Tr=wr=Sr=null,Mr=!1,e)throw Error(s(300));return t}function Nr(){var t=0!==Ar;return Ar=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Tr?Sr.memoizedState=Tr=t:Tr=Tr.next=t,Tr}function Dr(){if(null===wr){var t=Sr.alternate;t=null!==t?t.memoizedState:null}else t=wr.next;var e=null===Tr?Sr.memoizedState:Tr.next;if(null!==e)Tr=e,wr=t;else{if(null===t)throw Error(s(310));t={memoizedState:(wr=t).memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},null===Tr?Sr.memoizedState=Tr=t:Tr=Tr.next=t}return Tr}function Ur(t,e){return"function"===typeof e?e(t):e}function Fr(t){var e=Dr(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=wr,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((Er&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,a=r):u=u.next=p,Sr.lanes|=h,ns|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,Xe(r,e.memoizedState)||(Ui=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,Sr.lanes|=o,ns|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kr(t){var e=Dr(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);Xe(o,e.memoizedState)||(Ui=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Br(){}function Gr(t,e){var n=Sr,r=Dr(),i=e(),o=!Xe(r.memoizedState,i);if(o&&(r.memoizedState=i,Ui=!0),r=r.queue,Zr(Hr.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==Tr&&1&Tr.memoizedState.tag){if(n.flags|=2048,Wr(9,zr.bind(null,n,r,i,e),void 0,null),null===$o)throw Error(s(349));0!==(30&Er)||jr(n,e,i)}return i}function jr(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=Sr.updateQueue)?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function zr(t,e,n,r){e.value=n,e.getSnapshot=r,Vr(e)&&Ss(t,1,-1)}function Hr(t,e,n){return n((function(){Vr(e)&&Ss(t,1,-1)}))}function Vr(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xe(t,n)}catch(r){return!0}}function Xr(t){var e=Lr();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:t},e.queue=t,t=t.dispatch=li.bind(null,Sr,t),[e.memoizedState,t]}function Wr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Sr.updateQueue)?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Yr(){return Dr().memoizedState}function qr(t,e,n,r){var i=Lr();Sr.flags|=t,i.memoizedState=Wr(1|e,n,void 0,void 0===r?null:r)}function $r(t,e,n,r){var i=Dr();r=void 0===r?null:r;var o=void 0;if(null!==wr){var s=wr.memoizedState;if(o=s.destroy,null!==r&&Cr(r,s.deps))return void(i.memoizedState=Wr(e,n,o,r))}Sr.flags|=t,i.memoizedState=Wr(1|e,n,o,r)}function Kr(t,e){return qr(8390656,8,t,e)}function Zr(t,e){return $r(2048,8,t,e)}function Jr(t,e){return $r(4,2,t,e)}function Qr(t,e){return $r(4,4,t,e)}function ti(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ei(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,$r(4,4,ti.bind(null,e,t),n)}function ni(){}function ri(t,e){var n=Dr();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Cr(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ii(t,e){var n=Dr();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Cr(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oi(t,e){var n=Oe;Oe=0!==n&&4>n?n:4,t(!0);var r=xr.transition;xr.transition={};try{t(!1),e()}finally{Oe=n,xr.transition=r}}function si(){return Dr().memoizedState}function ai(t,e,n){var r=Es(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(t)?ci(e,n):(hi(t,e,n),null!==(t=Ss(t,r,n=xs()))&&pi(t,e,r))}function li(t,e,n){var r=Es(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(t))ci(e,i);else{hi(t,e,i);var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Xe(a,s))return}catch(l){}null!==(t=Ss(t,r,n=xs()))&&pi(t,e,r)}}function ui(t){var e=t.alternate;return t===Sr||null!==e&&e===Sr}function ci(t,e){Rr=Mr=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hi(t,e,n){null!==$o&&0!==(1&t.mode)&&0===(2&qo)?(null===(t=e.interleaved)?(n.next=n,null===pn?pn=[e]:pn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function pi(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Ce(t,n)}}var fi={readContext:hn,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},di={readContext:hn,useCallback:function(t,e){return Lr().memoizedState=[t,void 0===e?null:e],t},useContext:hn,useEffect:Kr,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,qr(4194308,4,ti.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qr(4194308,4,t,e)},useInsertionEffect:function(t,e){return qr(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ai.bind(null,Sr,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Lr().memoizedState=t},useState:Xr,useDebugValue:ni,useDeferredValue:function(t){var e=Xr(t),n=e[0],r=e[1];return Kr((function(){var e=xr.transition;xr.transition={};try{r(t)}finally{xr.transition=e}}),[t]),n},useTransition:function(){var t=Xr(!1),e=t[0];return t=oi.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Sr,i=Lr();if(Vn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===$o)throw Error(s(349));0!==(30&Er)||jr(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Kr(Hr.bind(null,r,o,t),[t]),r.flags|=2048,Wr(9,zr.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Lr(),e=$o.identifierPrefix;if(Vn){var n=Fn;e=":"+e+"R"+(n=(Un&~(1<<32-be(Un)-1)).toString(32)+n),0<(n=Ar++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Pr++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Zr,useImperativeHandle:ei,useInsertionEffect:Jr,useLayoutEffect:Qr,useMemo:ii,useReducer:Fr,useRef:Yr,useState:function(){return Fr(Ur)},useDebugValue:ni,useDeferredValue:function(t){var e=Fr(Ur),n=e[0],r=e[1];return Zr((function(){var e=xr.transition;xr.transition={};try{r(t)}finally{xr.transition=e}}),[t]),n},useTransition:function(){return[Fr(Ur)[0],Dr().memoizedState]},useMutableSource:Br,useSyncExternalStore:Gr,useId:si,unstable_isNewReconciler:!1},gi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Zr,useImperativeHandle:ei,useInsertionEffect:Jr,useLayoutEffect:Qr,useMemo:ii,useReducer:kr,useRef:Yr,useState:function(){return kr(Ur)},useDebugValue:ni,useDeferredValue:function(t){var e=kr(Ur),n=e[0],r=e[1];return Zr((function(){var e=xr.transition;xr.transition={};try{r(t)}finally{xr.transition=e}}),[t]),n},useTransition:function(){return[kr(Ur)[0],Dr().memoizedState]},useMutableSource:Br,useSyncExternalStore:Gr,useId:si,unstable_isNewReconciler:!1};function yi(t,e){try{var n="",r=e;do{n+=Qe(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function vi(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var _i,bi,xi,Ei,Si="function"===typeof WeakMap?WeakMap:Map;function wi(t,e,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hs||(hs=!0,ps=r),vi(0,e)},n}function Ti(t,e,n){(n=gn(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vi(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){vi(0,e),"function"!==typeof r&&(null===fs?fs=new Set([this]):fs.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Mi(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new Si;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ws.bind(null,t,e,n),e.then(t,t))}function Ri(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function Ai(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=gn(-1,1)).tag=2,yn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}function Pi(t){t.flags|=4}function Ii(t,e){if(null!==t&&t.child===e.child)return!0;if(0!==(16&e.flags))return!1;for(t=e.child;null!==t;){if(0!==(12854&t.flags)||0!==(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(q)_i=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)B(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},bi=function(){},xi=function(t,e,n,r,i){if((t=t.memoizedProps)!==r){var o=e.stateNode,s=hr(lr.current);n=j(o,n,t,r,i,s),(e.updateQueue=n)&&Pi(e)}},Ei=function(t,e,n,r){n!==r&&Pi(e)};else if($){_i=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ct(o,i.type,i.memoizedProps,i)),B(t,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Ot(o,i.memoizedProps,i)),B(t,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),_i(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Ci=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ct(o,i.type,i.memoizedProps,i)),At(t,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Ot(o,i.memoizedProps,i)),At(t,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Ci(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};bi=function(t,e){var n=e.stateNode;if(!Ii(t,e)){t=n.containerInfo;var r=Rt(t);Ci(r,e,!1,!1),n.pendingChildren=r,Pi(e),Pt(t,r)}},xi=function(t,e,n,r,i){var o=t.stateNode,s=t.memoizedProps;if((t=Ii(t,e))&&s===r)e.stateNode=o;else{var a=e.stateNode,l=hr(lr.current),u=null;s!==r&&(u=j(a,n,s,r,i,l)),t&&null===u?e.stateNode=o:(o=Mt(o,u,n,s,r,e,t,a),G(o,n,r,i,l)&&Pi(e),e.stateNode=o,t?Pi(e):_i(o,e,!1,!1))}},Ei=function(t,e,n,r){n!==r?(t=hr(cr.current),n=hr(lr.current),e.stateNode=H(r,t,n,e),Pi(e)):e.stateNode=t.stateNode}}else bi=function(){},xi=function(){},Ei=function(){};function Oi(t,e){if(!Vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ni(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Li(t,e,n){var r=e.pendingProps;switch(jn(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(e),null;case 1:case 17:return de(e.type)&&me(),Ni(e),null;case 3:return r=e.stateNode,fr(),ae(he),ae(ce),_r(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Jn(e)?Pi(e):null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==Wn&&(As(Wn),Wn=null))),bi(t,e),Ni(e),null;case 5:mr(e),n=hr(cr.current);var i=e.type;if(null!==t&&null!=e.stateNode)xi(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(s(166));return Ni(e),null}if(t=hr(lr.current),Jn(e)){if(!K)throw Error(s(175));t=Ht(e.stateNode,e.type,e.memoizedProps,n,t,e,!Xn),e.updateQueue=t,null!==t&&Pi(e)}else{var o=k(i,r,n,t,e);_i(o,e,!1,!1),e.stateNode=o,G(o,i,r,n,t)&&Pi(e)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ni(e),null;case 6:if(t&&null!=e.stateNode)Ei(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(s(166));if(t=hr(cr.current),n=hr(lr.current),Jn(e)){if(!K)throw Error(s(176));if(t=e.stateNode,r=e.memoizedProps,(n=Vt(t,r,e,!Xn))&&null!==(i=zn))switch(o=0!==(1&i.mode),i.tag){case 3:Jt(i.stateNode.containerInfo,t,r,o);break;case 5:Qt(i.type,i.memoizedProps,i.stateNode,t,r,o)}n&&Pi(e)}else e.stateNode=H(r,t,n,e)}return Ni(e),null;case 13:if(ae(gr),r=e.memoizedState,Vn&&null!==Hn&&0!==(1&e.mode)&&0===(128&e.flags)){for(t=Hn;t;)t=Bt(t);return Qn(),e.flags|=98560,e}if(null!==r&&null!==r.dehydrated){if(r=Jn(e),null===t){if(!r)throw Error(s(318));if(!K)throw Error(s(344));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(s(317));Xt(t,e)}else Qn(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return Ni(e),null}return null!==Wn&&(As(Wn),Wn=null),0!==(128&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?Jn(e):n=null!==t.memoizedState,r&&!n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&gr.current)?0===ts&&(ts=3):Us())),null!==e.updateQueue&&(e.flags|=4),Ni(e),null);case 4:return fr(),bi(t,e),null===t&&J(e.stateNode.containerInfo),Ni(e),null;case 10:return ln(e.type._context),Ni(e),null;case 19:if(ae(gr),null===(i=e.memoizedState))return Ni(e),null;if(r=0!==(128&e.flags),null===(o=i.rendering))if(r)Oi(i,!1);else{if(0!==ts||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(o=yr(t))){for(e.flags|=128,Oi(i,!1),null!==(t=o.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,r=e.child;null!==r;)i=t,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return le(gr,1&gr.current|2),e.child}t=t.sibling}null!==i.tail&&ke()>ls&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=yr(o))){if(e.flags|=128,r=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.flags|=4),Oi(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Vn)return Ni(e),null}else 2*ke()-i.renderingStartTime>ls&&1073741824!==n&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(null!==(t=i.last)?t.sibling=o:e.child=o,i.last=o)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,t=gr.current,le(gr,r?1&t|2:1&t),e):(Ni(e),null);case 22:case 23:return Os(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Jo)&&(Ni(e),q&&6&e.subtreeFlags&&(e.flags|=8192)):Ni(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}var Di=a.ReactCurrentOwner,Ui=!1;function Fi(t,e,n,r){e.child=null===t?sr(e,null,n,r):or(e,t.child,n,r)}function ki(t,e,n,r,i){n=n.render;var o=e.ref;return cn(e,i),r=Or(t,e,n,r,o,i),n=Nr(),null===t||Ui?(Vn&&n&&Gn(e),e.flags|=1,Fi(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i))}function Bi(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Qs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=ea(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Gi(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:Je)(s,r)&&t.ref===e.ref)return io(t,e,i)}return e.flags|=1,(t=ta(o,r)).ref=e.ref,t.return=e,e.child=t}function Gi(t,e,n,r,i){if(null!==t&&Je(t.memoizedProps,r)&&t.ref===e.ref){if(Ui=!1,0===(t.lanes&i))return e.lanes=t.lanes,io(t,e,i);0!==(131072&t.flags)&&(Ui=!0)}return Hi(t,e,n,r,i)}function ji(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null},le(Qo,Jo),Jo|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,le(Qo,Jo),Jo|=t,null;e.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,le(Qo,Jo),Jo|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,le(Qo,Jo),Jo|=r;return Fi(t,e,i,n),e.child}function zi(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hi(t,e,n,r,i){var o=de(n)?pe:ce.current;return o=fe(e,o),cn(e,i),n=Or(t,e,n,r,o,i),r=Nr(),null===t||Ui?(Vn&&r&&Gn(e),e.flags|=1,Fi(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i))}function Vi(t,e,n,r,i){if(de(n)){var o=!0;ve(e)}else o=!1;if(cn(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Mn(e,n,r),An(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=hn(u):u=fe(e,u=de(n)?pe:ce.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Rn(e,s,r,u),fn=!1;var p=e.memoizedState;s.state=p,bn(e,r,s,i),l=e.memoizedState,a!==r||p!==l||he.current||fn?("function"===typeof c&&(Sn(e,n,c,r),l=e.memoizedState),(a=fn||Tn(e,n,a,r,p,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,mn(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:tn(e.type,a),s.props=u,h=e.pendingProps,p=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=fe(e,l=de(n)?pe:ce.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||p!==l)&&Rn(e,s,r,l),fn=!1,p=e.memoizedState,s.state=p,bn(e,r,s,i);var d=e.memoizedState;a!==h||p!==d||he.current||fn?("function"===typeof f&&(Sn(e,n,f,r),d=e.memoizedState),(u=fn||Tn(e,n,u,r,p,d,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),s.props=r,s.state=d,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Xi(t,e,n,r,o,i)}function Xi(t,e,n,r,i,o){zi(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&_e(e,n,!1),io(t,e,o);r=e.stateNode,Di.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=or(e,t.child,null,o),e.child=or(e,null,a,o)):Fi(t,e,a,o),e.memoizedState=r.state,i&&_e(e,n,!0),e.child}function Wi(t){var e=t.stateNode;e.pendingContext?ge(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ge(0,e.context,!1),pr(t,e.containerInfo)}function Yi(t,e,n,r,i){return Qn(),tr(i),e.flags|=256,Fi(t,e,n,r),e.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function $i(t){return{baseLanes:t,cachePool:null}}function Ki(t,e,n){var r,i=e.pendingProps,o=gr.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),le(gr,1&o),null===t)return Kn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:Ft(t)?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=ra(o,i,0,null),t=na(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=$i(n),e.memoizedState=qi,t):Zi(e,o));if(null!==(o=t.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&e.flags?(e.flags&=-257,to(t,e,n,Error(s(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,o=e.mode,i=ra({mode:"visible",children:i.children},o,0,null),(a=na(a,o,n,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&or(e,t.child,null,n),e.child.memoizedState=$i(n),e.memoizedState=qi,a);if(0===(1&e.mode))e=to(t,e,n,null);else if(Ft(r))e=to(t,e,n,Error(s(419)));else if(i=0!==(n&t.childLanes),Ui||i){if(null!==(i=$o)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(i=0!==(a&(i.suspendedLanes|n))?0:a)&&i!==o.retryLane&&(o.retryLane=i,Ss(t,i,-1))}Us(),e=to(t,e,n,Error(s(421)))}else Ut(r)?(e.flags|=128,e.child=t.child,e=qs.bind(null,t),kt(r,e),e=null):(n=o.treeContext,K&&(Hn=zt(r),zn=e,Vn=!0,Wn=null,Xn=!1,null!==n&&(Nn[Ln++]=Un,Nn[Ln++]=Fn,Nn[Ln++]=Dn,Un=n.id,Fn=n.overflow,Dn=e)),(e=Zi(e,e.pendingProps.children)).flags|=4096);return e}return a?(i=Qi(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?$i(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=t.childLanes&~n,e.memoizedState=qi,i):(n=Ji(t,e,i.children,n),e.memoizedState=null,n)}return a?(i=Qi(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?$i(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=t.childLanes&~n,e.memoizedState=qi,i):(n=Ji(t,e,i.children,n),e.memoizedState=null,n)}function Zi(t,e){return(e=ra({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ji(t,e,n,r){var i=t.child;return t=i.sibling,n=ta(i,{mode:"visible",children:n}),0===(1&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function Qi(t,e,n,r,i){var o=e.mode,s=(t=t.child).sibling,a={mode:"hidden",children:n};return 0===(1&o)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=a,e.deletions=null):(n=ta(t,a)).subtreeFlags=14680064&t.subtreeFlags,null!==s?r=ta(s,r):(r=na(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function to(t,e,n,r){return null!==r&&tr(r),or(e,t.child,null,n),(t=Zi(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function eo(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),un(t.return,e,n)}function no(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ro(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Fi(t,e,r.children,n),0!==(2&(r=gr.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&eo(t,n,e);else if(19===t.tag)eo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(gr,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===yr(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),no(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===yr(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}no(e,!0,n,null,o);break;case"together":no(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function io(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),ns|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=ta(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ta(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function oo(t,e){switch(jn(e),e.tag){case 1:return de(e.type)&&me(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return fr(),ae(he),ae(ce),_r(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return mr(e),null;case 13:if(ae(gr),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));Qn()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return ae(gr),null;case 4:return fr(),null;case 10:return ln(e.type._context),null;case 22:case 23:return Os(),null;default:return null}}var so=!1,ao=!1,lo="function"===typeof WeakSet?WeakSet:Set,uo=null;function co(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Xs(t,e,r)}else n.current=null}function ho(t,e,n){try{n()}catch(r){Xs(t,e,r)}}var po=!1;function fo(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&ho(e,n,o)}i=i.next}while(i!==r)}}function mo(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function go(t){var e=t.ref;if(null!==e){var n=t.stateNode;if(5===t.tag)t=N(n);else t=n;"function"===typeof e?e(t):e.current=t}}function yo(t,e,n){if(Ve&&"function"===typeof Ve.onCommitFiberUnmount)try{Ve.onCommitFiberUnmount(He,e)}catch(s){}switch(e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t=t.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&ho(e,n,o),r=r.next}while(r!==t)}break;case 1:if(co(e,n),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){Xs(e,n,s)}break;case 5:co(e,n);break;case 4:q?To(t,e,n):$&&$&&(e=e.stateNode.containerInfo,n=Rt(e),It(e,n))}}function vo(t,e,n){for(var r=e;;)if(yo(t,r,n),null===r.child||q&&4===r.tag){if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function _o(t){var e=t.alternate;null!==e&&(t.alternate=null,_o(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&tt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bo(t){return 5===t.tag||3===t.tag||4===t.tag}function xo(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||bo(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function Eo(t){if(q){t:{for(var e=t.return;null!==e;){if(bo(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(n.tag){case 5:e=n.stateNode,32&n.flags&&(bt(e),n.flags&=-33),wo(t,n=xo(t),e);break;case 3:case 4:e=n.stateNode.containerInfo,So(t,n=xo(t),e);break;default:throw Error(s(161))}}}function So(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?yt(n,t,e):pt(n,t);else if(4!==r&&null!==(t=t.child))for(So(t,e,n),t=t.sibling;null!==t;)So(t,e,n),t=t.sibling}function wo(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?gt(n,t,e):ht(n,t);else if(4!==r&&null!==(t=t.child))for(wo(t,e,n),t=t.sibling;null!==t;)wo(t,e,n),t=t.sibling}function To(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag)vo(t,o,n),i?_t(r,o.stateNode):vt(r,o.stateNode);else if(18===o.tag)i?Kt(r,o.stateNode):$t(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(yo(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Mo(t,e){if(q){switch(e.tag){case 0:case 11:case 14:case 15:return fo(3,e,e.return),mo(3,e),void fo(5,e,e.return);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&mt(n,o,i,t,r,e)}return;case 6:if(null===e.stateNode)throw Error(s(162));return n=e.memoizedProps,void ft(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(K&&null!==t&&t.memoizedState.isDehydrated&&Yt(e.stateNode.containerInfo));case 13:case 19:return void Ro(e)}throw Error(s(163))}switch(e.tag){case 0:case 11:case 14:case 15:return fo(3,e,e.return),mo(3,e),void fo(5,e,e.return);case 12:case 22:case 23:return;case 13:case 19:return void Ro(e);case 3:K&&null!==t&&t.memoizedState.isDehydrated&&Yt(e.stateNode.containerInfo)}t:if($){switch(e.tag){case 1:case 5:case 6:break t;case 3:case 4:e=e.stateNode,It(e.containerInfo,e.pendingChildren);break t}throw Error(s(163))}}function Ro(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new lo),e.forEach((function(e){var r=$s.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Ao(t,e,n){uo=t,Po(t,e,n)}function Po(t,e,n){for(var r=0!==(1&t.mode);null!==uo;){var i=uo,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||so;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||ao;a=so;var u=ao;if(so=s,(ao=l)&&!u)for(uo=i;null!==uo;)l=(s=uo).child,22===s.tag&&null!==s.memoizedState?Oo(i):null!==l?(l.return=s,uo=l):Oo(i);for(;null!==o;)uo=o,Po(o,e,n),o=o.sibling;uo=i,so=a,ao=u}Io(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,uo=o):Io(t)}}function Io(t){for(;null!==uo;){var e=uo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:ao||mo(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!ao)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&xn(e,o,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:n=N(e.child.stateNode);break;case 1:n=e.child.stateNode}xn(e,a,n)}break;case 5:var l=e.stateNode;null===n&&4&e.flags&&dt(l,e.type,e.memoizedProps,e);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===e.memoizedState){var u=e.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}ao||512&e.flags&&go(e)}catch(p){Xs(e,e.return,p)}}if(e===t){uo=null;break}if(null!==(n=e.sibling)){n.return=e.return,uo=n;break}uo=e.return}}function Co(t){for(;null!==uo;){var e=uo;if(e===t){uo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,uo=n;break}uo=e.return}}function Oo(t){for(;null!==uo;){var e=uo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mo(4,e)}catch(l){Xs(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Xs(e,i,l)}}var o=e.return;try{go(e)}catch(l){Xs(e,o,l)}break;case 5:var s=e.return;try{go(e)}catch(l){Xs(e,s,l)}}}catch(l){Xs(e,e.return,l)}if(e===t){uo=null;break}var a=e.sibling;if(null!==a){a.return=e.return,uo=a;break}uo=e.return}}var No=0,Lo=1,Do=2,Uo=3,Fo=4;if("function"===typeof Symbol&&Symbol.for){var ko=Symbol.for;No=ko("selector.component"),Lo=ko("selector.has_pseudo_class"),Do=ko("selector.role"),Uo=ko("selector.test_id"),Fo=ko("selector.text")}function Bo(t){var e=Z(t);if(null!=e){if("string"!==typeof e.memoizedProps["data-testname"])throw Error(s(364));return e}if(null===(t=it(t)))throw Error(s(362));return t.stateNode.current}function Go(t,e){switch(e.$$typeof){case No:if(t.type===e.value)return!0;break;case Lo:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],o=e[i];if(5!==r.tag||!at(r)){for(;null!=o&&Go(r,o);)o=e[++i];if(i===e.length){e=!0;break t}for(r=r.child;null!==r;)t.push(r,i),r=r.sibling}}e=!1}return e;case Do:if(5===t.tag&&lt(t.stateNode,e.value))return!0;break;case Fo:if((5===t.tag||6===t.tag)&&(null!==(t=st(t))&&0<=t.indexOf(e.value)))return!0;break;case Uo:if(5===t.tag&&("string"===typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function jo(t){switch(t.$$typeof){case No:return"<"+(S(t.value)||"Unknown")+">";case Lo:return":has("+(jo(t)||"")+")";case Do:return'[role="'+t.value+'"]';case Fo:return'"'+t.value+'"';case Uo:return'[data-testname="'+t.value+'"]';default:throw Error(s(365))}}function zo(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],o=t[r++],s=e[o];if(5!==i.tag||!at(i)){for(;null!=s&&Go(i,s);)s=e[++o];if(o===e.length)n.push(i);else for(i=i.child;null!==i;)t.push(i,o),i=i.sibling}}return n}function Ho(t,e){if(!rt)throw Error(s(363));t=zo(t=Bo(t),e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(5===r.tag)at(r)||e.push(r.stateNode);else for(r=r.child;null!==r;)t.push(r),r=r.sibling}return e}var Vo=Math.ceil,Xo=a.ReactCurrentDispatcher,Wo=a.ReactCurrentOwner,Yo=a.ReactCurrentBatchConfig,qo=0,$o=null,Ko=null,Zo=0,Jo=0,Qo=se(0),ts=0,es=null,ns=0,rs=0,is=0,os=null,ss=null,as=0,ls=1/0;function us(){ls=ke()+500}var cs,hs=!1,ps=null,fs=null,ds=!1,ms=null,gs=0,ys=0,vs=null,_s=-1,bs=0;function xs(){return 0!==(6&qo)?ke():-1!==_s?_s:_s=ke()}function Es(t){return 0===(1&t.mode)?1:0!==(2&qo)&&0!==Zo?Zo&-Zo:null!==Ze.transition?(0===bs&&(t=Se,0===(4194240&(Se<<=1))&&(Se=64),bs=t),bs):0!==(t=Oe)?t:Q()}function Ss(t,e,n){if(50<ys)throw ys=0,vs=null,Error(s(185));var r=ws(t,e);return null===r?null:(Ie(r,e,n),0!==(2&qo)&&r===$o||(r===$o&&(0===(2&qo)&&(rs|=e),4===ts&&Ps(r,Zo)),Ts(r,n),1===e&&0===qo&&0===(1&t.mode)&&(us(),Ye&&Ke())),r)}function ws(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function Ts(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-be(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=Re(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r=Me(t,t===$o?Zo:0);if(0===r)null!==n&&De(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&De(n),1===e)0===t.tag?function(t){Ye=!0,$e(t)}(Is.bind(null,t)):$e(Is.bind(null,t)),et?nt((function(){0===qo&&Ke()})):Le(Be,Ke),n=null;else{switch(Ne(r)){case 1:n=Be;break;case 4:n=Ge;break;case 16:default:n=je;break;case 536870912:n=ze}n=Ks(n,Ms.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ms(t,e){if(_s=-1,bs=0,0!==(6&qo))throw Error(s(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=Me(t,t===$o?Zo:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=Fs(t,r);else{e=r;var i=qo;qo|=2;var o=Ds();for($o===t&&Zo===e||(us(),Ns(t,e));;)try{Bs();break}catch(l){Ls(t,l)}sn(),Xo.current=o,qo=i,null!==Ko?e=0:($o=null,Zo=0,e=ts)}if(0!==e){if(2===e&&(0!==(i=Ae(t))&&(r=i,e=Rs(t,i))),1===e)throw n=es,Ns(t,0),Ps(t,r),Ts(t,ke()),n;if(6===e)Ps(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Xe(o(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=Fs(t,r))&&(0!==(o=Ae(t))&&(r=o,e=Rs(t,o))),1===e))throw n=es,Ns(t,0),Ps(t,r),Ts(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(s(345));case 2:case 5:zs(t,ss);break;case 3:if(Ps(t,r),(130023424&r)===r&&10<(e=as+500-ke())){if(0!==Me(t,0))break;if(((i=t.suspendedLanes)&r)!==r){xs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=V(zs.bind(null,t,ss),e);break}zs(t,ss);break;case 4:if(Ps(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-be(r);o=1<<a,(a=e[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vo(r/1960))-r)){t.timeoutHandle=V(zs.bind(null,t,ss),r);break}zs(t,ss);break;default:throw Error(s(329))}}}return Ts(t,ke()),t.callbackNode===n?Ms.bind(null,t):null}function Rs(t,e){var n=os;return t.current.memoizedState.isDehydrated&&(Ns(t,e).flags|=256),2!==(t=Fs(t,e))&&(e=ss,ss=n,null!==e&&As(e)),t}function As(t){null===ss?ss=t:ss.push.apply(ss,t)}function Ps(t,e){for(e&=~is,e&=~rs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-be(e),r=1<<n;t[n]=-1,e&=~r}}function Is(t){if(0!==(6&qo))throw Error(s(327));Hs();var e=Me(t,0);if(0===(1&e))return Ts(t,ke()),null;var n=Fs(t,e);if(0!==t.tag&&2===n){var r=Ae(t);0!==r&&(e=r,n=Rs(t,r))}if(1===n)throw n=es,Ns(t,0),Ps(t,e),Ts(t,ke()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,ss),Ts(t,ke()),null}function Cs(t){null!==ms&&0===ms.tag&&0===(6&qo)&&Hs();var e=qo;qo|=1;var n=Yo.transition,r=Oe;try{if(Yo.transition=null,Oe=1,t)return t()}finally{Oe=r,Yo.transition=n,0===(6&(qo=e))&&Ke()}}function Os(){Jo=Qo.current,ae(Qo)}function Ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==W&&(t.timeoutHandle=W,X(n)),null!==Ko)for(n=Ko.return;null!==n;){var r=n;switch(jn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&me();break;case 3:fr(),ae(he),ae(ce),_r();break;case 5:mr(r);break;case 4:fr();break;case 13:case 19:ae(gr);break;case 10:ln(r.type._context);break;case 22:case 23:Os()}n=n.return}if($o=t,Ko=t=ta(t.current,null),Zo=Jo=e,ts=0,es=null,is=rs=ns=0,ss=os=null,null!==pn){for(e=0;e<pn.length;e++)if(null!==(r=(n=pn[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}pn=null}return t}function Ls(t,e){for(;;){var n=Ko;try{if(sn(),br.current=fi,Mr){for(var r=Sr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Mr=!1}if(Er=0,Tr=wr=Sr=null,Rr=!1,Ar=0,Wo.current=null,null===n||null===n.return){ts=1,es=e,Ko=null;break}t:{var o=t,a=n.return,l=n,u=e;if(e=Zo,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=Ri(a);if(null!==d){d.flags&=-257,Ai(d,a,l,0,e),1&d.mode&&Mi(o,c,e),u=c;var m=(e=d).updateQueue;if(null===m){var g=new Set;g.add(u),e.updateQueue=g}else m.add(u);break t}if(0===(1&e)){Mi(o,c,e),Us();break t}u=Error(s(426))}else if(Vn&&1&l.mode){var y=Ri(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Ai(y,a,l,0,e),tr(u);break t}}o=u,4!==ts&&(ts=2),null===os?os=[o]:os.push(o),u=yi(u,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,_n(l,wi(0,u,e));break t;case 1:o=u;var v=l.type,_=l.stateNode;if(0===(128&l.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===fs||!fs.has(_)))){l.flags|=65536,e&=-e,l.lanes|=e,_n(l,Ti(l,o,e));break t}}l=l.return}while(null!==l)}js(n)}catch(b){e=b,Ko===n&&null!==n&&(Ko=n=n.return);continue}break}}function Ds(){var t=Xo.current;return Xo.current=fi,null===t?fi:t}function Us(){0!==ts&&3!==ts&&2!==ts||(ts=4),null===$o||0===(268435455&ns)&&0===(268435455&rs)||Ps($o,Zo)}function Fs(t,e){var n=qo;qo|=2;var r=Ds();for($o===t&&Zo===e||Ns(t,e);;)try{ks();break}catch(i){Ls(t,i)}if(sn(),qo=n,Xo.current=r,null!==Ko)throw Error(s(261));return $o=null,Zo=0,ts}function ks(){for(;null!==Ko;)Gs(Ko)}function Bs(){for(;null!==Ko&&!Ue();)Gs(Ko)}function Gs(t){var e=cs(t.alternate,t,Jo);t.memoizedProps=t.pendingProps,null===e?js(t):Ko=e,Wo.current=null}function js(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Li(n,e,Jo)))return void(Ko=n)}else{if(null!==(n=oo(n,e)))return n.flags&=32767,void(Ko=n);if(null===t)return ts=6,void(Ko=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ko=e);Ko=e=t}while(null!==e);0===ts&&(ts=5)}function zs(t,e){var n=Oe,r=Yo.transition;try{Yo.transition=null,Oe=1,function(t,e,n){do{Hs()}while(null!==ms);if(0!==(6&qo))throw Error(s(327));var r=t.finishedWork,i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-be(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,o),t===$o&&(Ko=$o=null,Zo=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||ds||(ds=!0,Ks(je,(function(){return Hs(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Yo.transition,Yo.transition=null;var a=Oe;Oe=1;var l=qo;qo|=4,Wo.current=null,function(t,e){for(U(t.containerInfo),uo=e;null!==uo;)if(e=(t=uo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,uo=e;else for(;null!==uo;){t=uo;try{var n=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=t.stateNode,a=o.getSnapshotBeforeUpdate(t.elementType===t.type?r:tn(t.type,r),i);o.__reactInternalSnapshotBeforeUpdate=a}break;case 3:q&&Tt(t.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(l){Xs(t,t.return,l)}if(null!==(e=t.sibling)){e.return=t.return,uo=e;break}uo=t.return}n=po,po=!1}(t,r),function(t,e){for(uo=e;null!==uo;){var n=(e=uo).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t;q?To(o,i,e):vo(o,i,e);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(x){Xs(i,e,x)}}if(n=e.child,0!==(12854&e.subtreeFlags)&&null!==n)n.return=e,uo=n;else for(;null!==uo;){e=uo;try{var a=e.flags;if(32&a&&q&&bt(e.stateNode),512&a){var l=e.alternate;if(null!==l){var u=l.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}if(8192&a)switch(e.tag){case 13:if(null!==e.memoizedState){var c=e.alternate;null!==c&&null!==c.memoizedState||(as=ke())}break;case 22:var h=null!==e.memoizedState,p=e.alternate,f=null!==p&&null!==p.memoizedState;if(n=e,q)t:if(r=n,i=h,o=null,q)for(var d=r;;){if(5===d.tag){if(null===o){o=d;var m=d.stateNode;i?xt(m):St(d.stateNode,d.memoizedProps)}}else if(6===d.tag){if(null===o){var g=d.stateNode;i?Et(g):wt(g,d.memoizedProps)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===r)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===r)break;for(;null===d.sibling;){if(null===d.return||d.return===r)break t;o===d&&(o=null),d=d.return}o===d&&(o=null),d.sibling.return=d.return,d=d.sibling}if(h&&!f&&0!==(1&n.mode)){uo=n;for(var y=n.child;null!==y;){for(n=uo=y;null!==uo;){var v=(r=uo).child;switch(r.tag){case 0:case 11:case 14:case 15:fo(4,r,r.return);break;case 1:co(r,r.return);var _=r.stateNode;if("function"===typeof _.componentWillUnmount){var b=r.return;try{_.props=r.memoizedProps,_.state=r.memoizedState,_.componentWillUnmount()}catch(x){Xs(r,b,x)}}break;case 5:co(r,r.return);break;case 22:if(null!==r.memoizedState){Co(n);continue}}null!==v?(v.return=r,uo=v):Co(n)}y=y.sibling}}}switch(4102&a){case 2:Eo(e),e.flags&=-3;break;case 6:Eo(e),e.flags&=-3,Mo(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Mo(e.alternate,e);break;case 4:Mo(e.alternate,e)}}catch(x){Xs(e,e.return,x)}if(null!==(n=e.sibling)){n.return=e.return,uo=n;break}uo=e.return}}}(t,r),F(t.containerInfo),t.current=r,Ao(r,t,i),Fe(),qo=l,Oe=a,Yo.transition=o}else t.current=r;if(ds&&(ds=!1,ms=t,gs=i),o=t.pendingLanes,0===o&&(fs=null),function(t){if(Ve&&"function"===typeof Ve.onCommitFiberRoot)try{Ve.onCommitFiberRoot(He,t,void 0,128===(128&t.current.flags))}catch(e){}}(r.stateNode),Ts(t,ke()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)n(e[r]);if(hs)throw hs=!1,t=ps,ps=null,t;0!==(1&gs)&&0!==t.tag&&Hs(),o=t.pendingLanes,0!==(1&o)?t===vs?ys++:(ys=0,vs=t):ys=0,Ke()}(t,e,n)}finally{Yo.transition=r,Oe=n}return null}function Hs(){if(null!==ms){var t=Ne(gs),e=Yo.transition,n=Oe;try{if(Yo.transition=null,Oe=16>t?16:t,null===ms)var r=!1;else{if(t=ms,ms=null,gs=0,0!==(6&qo))throw Error(s(331));var i=qo;for(qo|=4,uo=t.current;null!==uo;){var o=uo,a=o.child;if(0!==(16&uo.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(uo=c;null!==uo;){var h=uo;switch(h.tag){case 0:case 11:case 15:fo(8,h,o)}var p=h.child;if(null!==p)p.return=h,uo=p;else for(;null!==uo;){var f=(h=uo).sibling,d=h.return;if(_o(h),h===c){uo=null;break}if(null!==f){f.return=d,uo=f;break}uo=d}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}uo=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,uo=a;else t:for(;null!==uo;){if(0!==(2048&(o=uo).flags))switch(o.tag){case 0:case 11:case 15:fo(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,uo=v;break t}uo=o.return}}var _=t.current;for(uo=_;null!==uo;){var b=(a=uo).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,uo=b;else t:for(a=_;null!==uo;){if(0!==(2048&(l=uo).flags))try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(E){Xs(l,l.return,E)}if(l===a){uo=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,uo=x;break t}uo=l.return}}if(qo=i,Ke(),Ve&&"function"===typeof Ve.onPostCommitFiberRoot)try{Ve.onPostCommitFiberRoot(He,t)}catch(E){}r=!0}return r}finally{Oe=n,Yo.transition=e}}return!1}function Vs(t,e,n){yn(t,e=wi(0,e=yi(n,e),1)),e=xs(),null!==(t=ws(t,1))&&(Ie(t,1,e),Ts(t,e))}function Xs(t,e,n){if(3===t.tag)Vs(t,t,n);else for(;null!==e;){if(3===e.tag){Vs(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===fs||!fs.has(r))){yn(e,t=Ti(e,t=yi(n,t),1)),t=xs(),null!==(e=ws(e,1))&&(Ie(e,1,t),Ts(e,t));break}}e=e.return}}function Ws(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=xs(),t.pingedLanes|=t.suspendedLanes&n,$o===t&&(Zo&n)===n&&(4===ts||3===ts&&(130023424&Zo)===Zo&&500>ke()-as?Ns(t,0):is|=n),Ts(t,e)}function Ys(t,e){0===e&&(0===(1&t.mode)?e=1:(e=we,0===(130023424&(we<<=1))&&(we=4194304)));var n=xs();null!==(t=ws(t,e))&&(Ie(t,e,n),Ts(t,n))}function qs(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ys(t,n)}function $s(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(e),Ys(t,n)}function Ks(t,e){return Le(t,e)}function Zs(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(t,e,n,r){return new Zs(t,e,n,r)}function Qs(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ta(t,e){var n=t.alternate;return null===n?((n=Js(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ea(t,e,n,r,i,o){var a=2;if(r=t,"function"===typeof t)Qs(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case c:return na(n.children,i,o,e);case h:a=8,i|=8;break;case p:return(t=Js(12,n,e,2|i)).elementType=p,t.lanes=o,t;case g:return(t=Js(13,n,e,i)).elementType=g,t.lanes=o,t;case y:return(t=Js(19,n,e,i)).elementType=y,t.lanes=o,t;case b:return ra(n,i,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case f:a=10;break t;case d:a=9;break t;case m:a=11;break t;case v:a=14;break t;case _:a=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Js(a,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function na(t,e,n,r){return(t=Js(7,t,r,e)).lanes=n,t}function ra(t,e,n,r){return(t=Js(22,t,r,e)).elementType=b,t.lanes=n,t.stateNode={},t}function ia(t,e,n){return(t=Js(6,t,null,e)).lanes=n,t}function oa(t,e,n){return(e=Js(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sa(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pe(0),this.expirationTimes=Pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.identifierPrefix=r,this.onRecoverableError=i,K&&(this.mutableSourceEagerHydrationData=null)}function aa(t,e,n,r,i,o,s,a,l){return t=new sa(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Js(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},dn(o),t}function la(t){if(!t)return ue;t:{if(T(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(de(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(de(n))return ye(t,n,e)}return e}function ua(t){var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return null===(t=A(e))?null:t.stateNode}function ca(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ha(t,e){ca(t,e),(t=t.alternate)&&ca(t,e)}function pa(t){return null===(t=A(t))?null:t.stateNode}function fa(){return null}return cs=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||he.current)Ui=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return Ui=!1,function(t,e,n){switch(e.tag){case 3:Wi(e),Qn();break;case 5:dr(e);break;case 1:de(e.type)&&ve(e);break;case 4:pr(e,e.stateNode.containerInfo);break;case 10:an(0,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(null!==r)return null!==r.dehydrated?(le(gr,1&gr.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Ki(t,e,n):(le(gr,1&gr.current),null!==(t=io(t,e,n))?t.sibling:null);le(gr,1&gr.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return ro(t,e,n);e.flags|=128}var i=e.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),le(gr,gr.current),r)break;return null;case 22:case 23:return e.lanes=0,ji(t,e,n)}return io(t,e,n)}(t,e,n);Ui=0!==(131072&t.flags)}else Ui=!1,Vn&&0!==(1048576&e.flags)&&Bn(e,On,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=fe(e,ce.current);cn(e,n),i=Or(null,e,r,t,i,n);var o=Nr();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,de(r)?(o=!0,ve(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,dn(e),i.updater=wn,e.stateNode=i,i._reactInternals=e,An(e,r,t,n),e=Xi(null,e,r,!0,o,n)):(e.tag=0,Vn&&o&&Gn(e),Fi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Qs(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===m)return 11;if(t===v)return 14}return 2}(r),t=tn(r,t),i){case 0:e=Hi(null,e,r,t,n);break t;case 1:e=Vi(null,e,r,t,n);break t;case 11:e=ki(null,e,r,t,n);break t;case 14:e=Bi(null,e,r,tn(r.type,t),n);break t}throw Error(s(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Hi(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 1:return r=e.type,i=e.pendingProps,Vi(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 3:t:{if(Wi(e),null===t)throw Error(s(387));r=e.pendingProps,i=(o=e.memoizedState).element,mn(t,e),bn(e,r,null,n);var a=e.memoizedState;if(r=a.element,K&&o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Yi(t,e,r,n,i=Error(s(423)));break t}if(r!==i){e=Yi(t,e,r,n,i=Error(s(424)));break t}for(K&&(Hn=jt(e.stateNode.containerInfo),zn=e,Vn=!0,Wn=null,Xn=!1),n=sr(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){e=io(t,e,n);break t}Fi(t,e,r,n)}e=e.child}return e;case 5:return dr(e),null===t&&Kn(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,z(r,i)?a=null:null!==o&&z(r,o)&&(e.flags|=32),zi(t,e),Fi(t,e,a,n),e.child;case 6:return null===t&&Kn(e),null;case 13:return Ki(t,e,n);case 4:return pr(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=or(e,null,r,n):Fi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ki(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 7:return Fi(t,e,e.pendingProps,n),e.child;case 8:case 12:return Fi(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,an(0,r,a=i.value),null!==o)if(Xe(o.value,a)){if(o.children===i.children&&!he.current){e=io(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=gn(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),un(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),un(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Fi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cn(e,n),r=r(i=hn(i)),e.flags|=1,Fi(t,e,r,n),e.child;case 14:return i=tn(r=e.type,e.pendingProps),Bi(t,e,r,i=tn(r.type,i),n);case 15:return Gi(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,de(r)?(t=!0,ve(e)):t=!1,cn(e,n),Mn(e,r,i),An(e,r,i,n),Xi(null,e,r,!0,t,n);case 19:return ro(t,e,n);case 22:return ji(t,e,n)}throw Error(s(156,e.tag))},e.attemptContinuousHydration=function(t){13===t.tag&&(Ss(t,134217728,xs()),ha(t,134217728))},e.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var e=xs(),n=Es(t);Ss(t,n,e),ha(t,n)}},e.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Te(e.pendingLanes);0!==n&&(Ce(e,1|n),Ts(e,ke()),0===(6&qo)&&(us(),Ke()))}break;case 13:var r=xs();Cs((function(){return Ss(t,1,r)})),ha(t,1)}},e.batchedUpdates=function(t,e){var n=qo;qo|=1;try{return t(e)}finally{0===(qo=n)&&(us(),Ye&&Ke())}},e.createComponentSelector=function(t){return{$$typeof:No,value:t}},e.createContainer=function(t,e,n,r,i,o,s){return aa(t,e,!1,null,0,r,0,o,s)},e.createHasPseudoClassSelector=function(t){return{$$typeof:Lo,value:t}},e.createHydrationContainer=function(t,e,n,r,i,o,s,a,l){return(t=aa(n,r,!0,t,0,o,0,a,l)).context=la(null),n=t.current,(o=gn(r=xs(),i=Es(n))).callback=void 0!==e&&null!==e?e:null,yn(n,o),t.current.lanes=i,Ie(t,i,r),Ts(t,r),t},e.createPortal=function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}},e.createRoleSelector=function(t){return{$$typeof:Do,value:t}},e.createTestNameSelector=function(t){return{$$typeof:Uo,value:t}},e.createTextSelector=function(t){return{$$typeof:Fo,value:t}},e.deferredUpdates=function(t){var e=Oe,n=Yo.transition;try{return Yo.transition=null,Oe=16,t()}finally{Oe=e,Yo.transition=n}},e.discreteUpdates=function(t,e,n,r,i){var o=Oe,s=Yo.transition;try{return Yo.transition=null,Oe=1,t(e,n,r,i)}finally{Oe=o,Yo.transition=s,0===qo&&us()}},e.findAllNodes=Ho,e.findBoundingRects=function(t,e){if(!rt)throw Error(s(363));e=Ho(t,e),t=[];for(var n=0;n<e.length;n++)t.push(ot(e[n]));for(e=t.length-1;0<e;e--)for(var r=(n=t[e]).x,i=r+n.width,o=n.y,a=o+n.height,l=e-1;0<=l;l--)if(e!==l){var u=t[l],c=u.x,h=c+u.width,p=u.y,f=p+u.height;if(r>=c&&o>=p&&i<=h&&a<=f){t.splice(e,1);break}if(!(r!==c||n.width!==u.width||f<o||p>a)){p>o&&(u.height+=p-o,u.y=o),f<a&&(u.height=a-p),t.splice(e,1);break}if(!(o!==p||n.height!==u.height||h<r||c>i)){c>r&&(u.width+=c-r,u.x=r),h<i&&(u.width=i-c),t.splice(e,1);break}}return t},e.findHostInstance=ua,e.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=R(t))?I(t):null)?null:t.stateNode},e.findHostInstanceWithWarning=function(t){return ua(t)},e.flushControlled=function(t){var e=qo;qo|=1;var n=Yo.transition,r=Oe;try{Yo.transition=null,Oe=1,t()}finally{Oe=r,Yo.transition=n,0===(qo=e)&&(us(),Ke())}},e.flushPassiveEffects=Hs,e.flushSync=Cs,e.focusWithin=function(t,e){if(!rt)throw Error(s(363));for(e=zo(t=Bo(t),e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!at(n)){if(5===n.tag&&ut(n.stateNode))return!0;for(n=n.child;null!==n;)e.push(n),n=n.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Oe},e.getFindAllNodesFailureDescription=function(t,e){if(!rt)throw Error(s(363));var n=0,r=[];t=[Bo(t),0];for(var i=0;i<t.length;){var o=t[i++],a=t[i++],l=e[a];if((5!==o.tag||!at(o))&&(Go(o,l)&&(r.push(jo(l)),++a>n&&(n=a)),a<e.length))for(o=o.child;null!==o;)t.push(o,a),o=o.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(jo(e[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},e.getPublicRootInstance=function(t){return(t=t.current).child?5===t.child.tag?N(t.child.stateNode):t.child.stateNode:null},e.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:pa,findFiberByHostInstance:t.findFiberByHostInstance||fa,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{He=e.inject(t),Ve=e}catch(n){}t=!!e.checkDCE}}return t},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(t,e,n,r){if(!rt)throw Error(s(363));t=Ho(t,e);var i=ct(t,n,r).disconnect;return{disconnect:function(){i()}}},e.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},e.runWithPriority=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(t,e,n,r){var i=e.current,o=xs(),s=Es(i);return n=la(n),null===e.context?e.context=n:e.pendingContext=n,(e=gn(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),yn(i,e),null!==(t=Ss(i,s,o))&&vn(t,i,s),s},e}},4585:(t,e,n)=>{"use strict";t.exports=n(4976)},258:(t,e,n)=>{"use strict";t.exports=n(3721)},5783:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],u=a+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,p=null,f=3,d=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function x(t){if(g=!1,b(t),!m)if(null!==r(u))m=!0,N(E);else{var e=r(c);null!==e&&L(x,e.startTime-t)}}function E(t,n){m=!1,g&&(g=!1,v(M),M=-1),d=!0;var o=f;try{for(b(n),p=r(u);null!==p&&(!(p.expirationTime>n)||t&&!P());){var s=p.callback;if("function"===typeof s){p.callback=null,f=p.priorityLevel;var a=s(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?p.callback=a:p===r(u)&&i(u),b(n)}else i(u);p=r(u)}if(null!==p)var l=!0;else{var h=r(c);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{p=null,f=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,T=null,M=-1,R=5,A=-1;function P(){return!(e.unstable_now()-A<R)}function I(){if(null!==T){var t=e.unstable_now();A=t;var n=!0;try{n=T(!0,t)}finally{n?S():(w=!1,T=null)}}else w=!1}if("function"===typeof _)S=function(){_(I)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,O=C.port2;C.port1.onmessage=I,S=function(){O.postMessage(null)}}else S=function(){y(I,0)};function N(t){T=t,w||(w=!0,S())}function L(t,n){M=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,N(E))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(g?(v(M),M=-1):g=!0,L(x,o-s))):(t.sortIndex=a,n(u,t),m||d||(m=!0,N(E))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},3100:(t,e,n)=>{"use strict";t.exports=n(5783)},6374:(t,e,n)=>{"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:a.current}}e.Fragment=o,e.jsx=u,e.jsxs=u},9117:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}function v(){}function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,r){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)E.call(e,i)&&!w.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:S.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var R=/\/+/g;function A(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function P(t,e,i,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=t),t=""===o?"."+A(l,0):o,x(s)?(i="",null!=t&&(i=t.replace(R,"$&/")+"/"),P(s,e,i,"",(function(t){return t}))):null!=s&&(M(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(R,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",x(t))for(var u=0;u<t.length;u++){var c=o+A(a=t[u],u);l+=P(a,e,i,c,s)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=P(a=a.value,e,i,c=o+A(a,u++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function I(t,e,n){if(null==t)return t;var r=[],i=0;return P(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function C(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},N={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!M(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=s,e.PureComponent=_,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)E.call(e,u)&&!w.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=M,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:C}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=N.transition;N.transition={};try{t()}finally{N.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.2.0"},2791:(t,e,n)=>{"use strict";t.exports=n(9117)},184:(t,e,n)=>{"use strict";t.exports=n(6374)},5844:(t,e,n)=>{"use strict";var r=n(2422),i=Object,o=TypeError;t.exports=r((function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0)},3535:(t,e,n)=>{"use strict";var r=n(9396),i=n(9722),o=n(5844),s=n(1334),a=n(7888),l=i(s());r(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},1334:(t,e,n)=>{"use strict";var r=n(5844),i=n(9396).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"===typeof t.get&&"boolean"===typeof RegExp.prototype.dotAll&&"boolean"===typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return r}},7888:(t,e,n)=>{"use strict";var r=n(9396).supportsDescriptors,i=n(1334),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!r||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=l(u),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},4460:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){let o,s,a,l,u=e[0],c=r[0],h=0,p=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=r[++p]);let f=0;if(h<t&&p<n)for(c>u==c>-u?(a=o-((s=u+o)-u),u=e[++h]):(a=o-((s=c+o)-c),c=r[++p]),o=s,0!==a&&(i[f++]=a);h<t&&p<n;)c>u==c>-u?(a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++h]):(a=o-((s=o+c)-(l=s-o))+(c-l),c=r[++p]),o=s,0!==a&&(i[f++]=a);for(;h<t;)a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++h],o=s,0!==a&&(i[f++]=a);for(;p<n;)a=o-((s=o+c)-(l=s-o))+(c-l),c=r[++p],o=s,0!==a&&(i[f++]=a);return 0===o&&0!==f||(i[f++]=o),f}function i(t){return new Float64Array(t)}const o=33306690738754716e-32,s=22204460492503146e-32,a=11093356479670487e-47,l=i(4),u=i(8),c=i(12),h=i(16),p=i(4);t.orient2d=function(t,i,f,d,m,g){const y=(i-g)*(f-m),v=(t-m)*(d-g),_=y-v;if(0===y||0===v||y>0!=v>0)return _;const b=Math.abs(y+v);return Math.abs(_)>=o*b?_:-function(t,i,o,f,d,m,g){let y,v,_,b,x,E,S,w,T,M,R,A,P,I,C,O,N,L;const D=t-d,U=o-d,F=i-m,k=f-m;x=(C=(w=D-(S=(E=e*D)-(E-D)))*(M=k-(T=(E=e*k)-(E-k)))-((I=D*k)-S*T-w*T-S*M))-(R=C-(N=(w=F-(S=(E=e*F)-(E-F)))*(M=U-(T=(E=e*U)-(E-U)))-((O=F*U)-S*T-w*T-S*M))),l[0]=C-(R+x)+(x-N),x=(P=I-((A=I+R)-(x=A-I))+(R-x))-(R=P-O),l[1]=P-(R+x)+(x-O),x=(L=A+R)-A,l[2]=A-(L-x)+(R-x),l[3]=L;let B=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,l),G=s*g;if(B>=G||-B>=G)return B;if(y=t-(D+(x=t-D))+(x-d),_=o-(U+(x=o-U))+(x-d),v=i-(F+(x=i-F))+(x-m),b=f-(k+(x=f-k))+(x-m),0===y&&0===v&&0===_&&0===b)return B;if(G=a*g+n*Math.abs(B),(B+=D*b+k*y-(F*_+U*v))>=G||-B>=G)return B;x=(C=(w=y-(S=(E=e*y)-(E-y)))*(M=k-(T=(E=e*k)-(E-k)))-((I=y*k)-S*T-w*T-S*M))-(R=C-(N=(w=v-(S=(E=e*v)-(E-v)))*(M=U-(T=(E=e*U)-(E-U)))-((O=v*U)-S*T-w*T-S*M))),p[0]=C-(R+x)+(x-N),x=(P=I-((A=I+R)-(x=A-I))+(R-x))-(R=P-O),p[1]=P-(R+x)+(x-O),x=(L=A+R)-A,p[2]=A-(L-x)+(R-x),p[3]=L;const j=r(4,l,4,p,u);x=(C=(w=D-(S=(E=e*D)-(E-D)))*(M=b-(T=(E=e*b)-(E-b)))-((I=D*b)-S*T-w*T-S*M))-(R=C-(N=(w=F-(S=(E=e*F)-(E-F)))*(M=_-(T=(E=e*_)-(E-_)))-((O=F*_)-S*T-w*T-S*M))),p[0]=C-(R+x)+(x-N),x=(P=I-((A=I+R)-(x=A-I))+(R-x))-(R=P-O),p[1]=P-(R+x)+(x-O),x=(L=A+R)-A,p[2]=A-(L-x)+(R-x),p[3]=L;const z=r(j,u,4,p,c);x=(C=(w=y-(S=(E=e*y)-(E-y)))*(M=b-(T=(E=e*b)-(E-b)))-((I=y*b)-S*T-w*T-S*M))-(R=C-(N=(w=v-(S=(E=e*v)-(E-v)))*(M=_-(T=(E=e*_)-(E-_)))-((O=v*_)-S*T-w*T-S*M))),p[0]=C-(R+x)+(x-N),x=(P=I-((A=I+R)-(x=A-I))+(R-x))-(R=P-O),p[1]=P-(R+x)+(x-O),x=(L=A+R)-A,p[2]=A-(L-x)+(R-x),p[3]=L;const H=r(z,c,4,p,h);return h[H-1]}(t,i,f,d,m,g,b)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},6813:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],u=a+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,p=null,f=3,d=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function x(t){if(g=!1,b(t),!m)if(null!==r(u))m=!0,N(E);else{var e=r(c);null!==e&&L(x,e.startTime-t)}}function E(t,n){m=!1,g&&(g=!1,v(M),M=-1),d=!0;var o=f;try{for(b(n),p=r(u);null!==p&&(!(p.expirationTime>n)||t&&!P());){var s=p.callback;if("function"===typeof s){p.callback=null,f=p.priorityLevel;var a=s(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?p.callback=a:p===r(u)&&i(u),b(n)}else i(u);p=r(u)}if(null!==p)var l=!0;else{var h=r(c);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{p=null,f=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,T=null,M=-1,R=5,A=-1;function P(){return!(e.unstable_now()-A<R)}function I(){if(null!==T){var t=e.unstable_now();A=t;var n=!0;try{n=T(!0,t)}finally{n?S():(w=!1,T=null)}}else w=!1}if("function"===typeof _)S=function(){_(I)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,O=C.port2;C.port1.onmessage=I,S=function(){O.postMessage(null)}}else S=function(){y(I,0)};function N(t){T=t,w||(w=!0,S())}function L(t,n){M=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,N(E))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(g?(v(M),M=-1):g=!0,L(x,o-s))):(t.sortIndex=a,n(u,t),m||d||(m=!0,N(E))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},5296:(t,e,n)=>{"use strict";t.exports=n(6813)},5986:(t,e,n)=>{"use strict";var r=n(2506),i=n(2651),o=n(4510)(),s=n(3347),a=n(7822),l=r("%Math.floor%");t.exports=function(t,e){if("function"!==typeof t)throw new a("`fn` is not a function");if("number"!==typeof e||e<0||e>4294967295||l(e)!==e)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in t&&s){var c=s(t,"length");c&&!c.configurable&&(r=!1),c&&!c.writable&&(u=!1)}return(r||u||!n)&&(o?i(t,"length",e,!0,!0):i(t,"length",e)),t}},2422:(t,e,n)=>{"use strict";var r=n(2651),i=n(4510)(),o=n(4583).functionsHaveConfigurableNames(),s=TypeError;t.exports=function(t,e){if("function"!==typeof t)throw new s("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!o||(i?r(t,"name",e,!0,!0):r(t,"name",e)),t}},581:(t,e,n)=>{"use strict";var r=n(2506),i=n(4037),o=n(2584),s=n(7822),a=r("%WeakMap%",!0),l=r("%Map%",!0),u=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),p=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),d=i("Map.prototype.has",!0),m=function(t,e){for(var n,r=t;null!==(n=r.next);r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n};t.exports=function(){var t,e,n,r={assert:function(t){if(!r.has(t))throw new s("Side channel does not contain "+o(t))},get:function(r){if(a&&r&&("object"===typeof r||"function"===typeof r)){if(t)return u(t,r)}else if(l){if(e)return p(e,r)}else if(n)return function(t,e){var n=m(t,e);return n&&n.value}(n,r)},has:function(r){if(a&&r&&("object"===typeof r||"function"===typeof r)){if(t)return h(t,r)}else if(l){if(e)return d(e,r)}else if(n)return function(t,e){return!!m(t,e)}(n,r);return!1},set:function(r,i){a&&r&&("object"===typeof r||"function"===typeof r)?(t||(t=new a),c(t,r,i)):l?(e||(e=new l),f(e,r,i)):(n||(n={key:{},next:null}),function(t,e,n){var r=m(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}}(n,r,i))}};return r}},1848:t=>{"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},3556:(t,e,n)=>{"use strict";var r=n(1848),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;n[l]||(n[l]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)];a&&l.join("_");for(r.push(l);r.length<e;){for(var u=[],c=r.length,h=0,p=[],f=0;f<s;f++){for(var d=1/0,m=0;m<c;m++){var g=n(t[f],r[m]);g<=d&&(d=g)}u[f]=d}for(var y=0;y<s;y++)h+=u[y];for(var v=0;v<s;v++)p[v]={i:v,v:t[v],pr:u[v]/h,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var _=1;_<s;_++)p[_].cs=p[_-1].cs+p[_].pr;for(var b=Math.random(),x=0;x<s-1&&p[x++].cs<b;);r.push(p[x-1].v)}return r}}},6530:(t,e,n)=>{"use strict";var r=n(1848),i=n(3556),o=r.eudist,s=(r.mandist,r.dist,i.kmrand),a=i.kmpp;function l(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],u=[],c=[],h=[],p=!1,f=r||1e4,d=t.length,m=t[0].length,g=m>0,y=[];if(n)i="kmrand"==n?s(t,e):"kmpp"==n?a(t,e):n;else for(var v={};i.length<e;){var _=Math.floor(Math.random()*d);v[_]||(v[_]=!0,i.push(t[_]))}do{l(e,0,y);for(var b=0;b<d;b++){for(var x=1/0,E=0,S=0;S<e;S++){(h=g?o(t[b],i[S]):Math.abs(t[b]-i[S]))<=x&&(x=h,E=S)}c[b]=E,y[E]++}for(var w=[],T=(u=[],0);T<e;T++)w[T]=g?l(m,0,w[T]):0,u[T]=i[T];if(g){for(var M=0;M<e;M++)i[M]=[];for(var R=0;R<d;R++)for(var A=w[c[R]],P=t[R],I=0;I<m;I++)A[I]+=P[I];p=!0;for(var C=0;C<e;C++){for(var O=i[C],N=w[C],L=u[C],D=y[C],U=0;U<m;U++)O[U]=N[U]/D||0;if(p)for(var F=0;F<m;F++)if(L[F]!=O[F]){p=!1;break}}}else{for(var k=0;k<d;k++){w[c[k]]+=t[k]}for(var B=0;B<e;B++)i[B]=w[B]/y[B]||0;p=!0;for(var G=0;G<e;G++)if(u[G]!=i[G]){p=!1;break}}p=p||--f<=0}while(!p);return{it:1e4-f,k:e,idxs:c,centroids:i}}},4613:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const s=r+1;if(s<this.length&&n(e[s],o)<0&&(r=s,o=e[s]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function i(t,e){return t<e?-1:t>e?1:0}},4035:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?Lt:t.color}function a(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function m(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},E=function(){},S=function(){},w=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},T={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};w.prototype.setOrdinate=function(t,e){switch(t){case w.X:this.x=e;break;case w.Y:this.y=e;break;case w.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},w.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},w.prototype.getOrdinate=function(t){switch(t){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.z}throw new v("Invalid ordinate index: "+t)},w.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},w.prototype.equals=function(t){return t instanceof w&&this.equals2D(t)},w.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},w.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},w.prototype.clone=function(){},w.prototype.copy=function(){return new w(this)},w.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},w.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},w.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},w.prototype.hashCode=function(){var t=17;return 37*(t=37*t+w.hashCode(this.x))+w.hashCode(this.y)},w.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},w.prototype.interfaces_=function(){return[x,E,e]},w.prototype.getClass=function(){return w},w.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},T.DimensionalComparator.get=function(){return M},T.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},T.NULL_ORDINATE.get=function(){return _.NaN},T.X.get=function(){return 0},T.Y.get=function(){return 1},T.Z.get=function(){return 2},Object.defineProperties(w,T);var M=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};M.prototype.compare=function(t,e){var n=t,r=e,i=M.compare(n.x,r.x);if(0!==i)return i;var o=M.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:M.compare(n.z,r.z)},M.prototype.interfaces_=function(){return[S]},M.prototype.getClass=function(){return M},M.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var R=function(){};R.prototype.create=function(){},R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R};var A=function(){},P={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.toLocationSymbol=function(t){switch(t){case A.EXTERIOR:return"e";case A.BOUNDARY:return"b";case A.INTERIOR:return"i";case A.NONE:return"-"}throw new v("Unknown location value: "+t)},P.INTERIOR.get=function(){return 0},P.BOUNDARY.get=function(){return 1},P.EXTERIOR.get=function(){return 2},P.NONE.get=function(){return-1},Object.defineProperties(A,P);var I=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},C=function(){},O={LOG_10:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/C.LOG_10},C.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},C.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},C.wrap=function(t,e){return t<0?e- -t%e:t%e},C.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},C.average=function(t,e){return(t+e)/2},O.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(C,O);var N=function(t){this.str=t};N.prototype.append=function(t){this.str+=t},N.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},N.prototype.toString=function(t){return this.str};var L=function(t){this.value=t};L.prototype.intValue=function(){return this.value},L.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},L.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var U=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};U.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},U.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=U.magnitude(n._hi),i=U.TEN.pow(r);(n=n.divide(i)).gt(U.TEN)?(n=n.divide(U.TEN),r+=1):n.lt(U.ONE)&&(n=n.multiply(U.TEN),r-=1);for(var o=r+1,s=new N,a=U.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,s.append(h),n=n.subtract(U.valueOf(u)).multiply(U.TEN),c&&n.selfAdd(U.TEN);var p=!0,f=U.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-l&&(p=!1),!p)break}return e[0]=r,s.toString()},U.prototype.sqr=function(){return this.multiply(this)},U.prototype.doubleValue=function(){return this._hi+this._lo},U.prototype.subtract=function(){if(arguments[0]instanceof U){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},U.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},U.prototype.isZero=function(){return 0===this._hi&&0===this._lo},U.prototype.selfSubtract=function(){if(arguments[0]instanceof U){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},U.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},U.prototype.min=function(t){return this.le(t)?this:t},U.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof U){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(i=(u=U.SPLIT*l)-(i=u-l))*(s=(h=U.SPLIT*n)-(s=h-n))-(c=l*n)+i*(a=n-s)+(o=l-i)*s+o*a,h=l+(u=(this._hi-c-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+u,this}},U.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},U.prototype.divide=function(){if(arguments[0]instanceof U){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,l=null;return n=(o=this._hi/t._hi)-(e=(s=U.SPLIT*o)-(e=s-o)),l=e*(r=(l=U.SPLIT*t._hi)-(r=l-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-l+this._lo-o*t._lo)/t._hi,new U(l=o+s,o-l+s)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?U.createNaN():U.copy(this).selfDivide(u,0)}},U.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},U.prototype.pow=function(t){if(0===t)return U.valueOf(1);var e=new U(this),n=U.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},U.prototype.ceil=function(){if(this.isNaN())return U.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new U(t,e)},U.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},U.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},U.prototype.setValue=function(){if(arguments[0]instanceof U){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},U.prototype.max=function(t){return this.ge(t)?this:t},U.prototype.sqrt=function(){if(this.isZero())return U.valueOf(0);if(this.isNegative())return U.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=U.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},U.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof U){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,p=null,f=null,d=null,m=null,g=null;f=this._hi+l,h=this._lo+u,d=f-(m=f-this._hi),p=h-(g=h-this._lo);var y=(c=f+(m=(d=l-m+(this._hi-d))+h))+(m=(p=u-g+(this._lo-p))+(m+(f-c))),v=m+(c-y);return this._hi=y,this._lo=v,this}},U.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof U){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,l=null,u=null;i=(l=U.SPLIT*this._hi)-this._hi,u=U.SPLIT*n,i=l-i,o=this._hi-i,s=u-n;var c=(l=this._hi*n)+(u=i*(s=u-s)-l+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=u+(i=l-c);return this._hi=c,this._lo=h,this}},U.prototype.selfSqr=function(){return this.selfMultiply(this)},U.prototype.floor=function(){if(this.isNaN())return U.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new U(t,e)},U.prototype.negate=function(){return this.isNaN()?this:new U(-this._hi,-this._lo)},U.prototype.clone=function(){},U.prototype.multiply=function(){if(arguments[0]instanceof U){var t=arguments[0];return t.isNaN()?U.createNaN():U.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?U.createNaN():U.copy(this).selfMultiply(e,0)}},U.prototype.isNaN=function(){return _.isNaN(this._hi)},U.prototype.intValue=function(){return Math.trunc(this._hi)},U.prototype.toString=function(){var t=U.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},U.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+U.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+U.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},U.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=U.SPLIT*i)-(t=o-i)),n=(a=U.SPLIT*this._hi)-this._hi;var l=i+(o=(1-(s=i*this._hi)-(a=t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new U(l,i-l+o)},U.prototype.toSciNotation=function(){if(this.isZero())return U.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=U.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},U.prototype.abs=function(){return this.isNaN()?U.NaN:this.isNegative()?this.negate():new U(this)},U.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},U.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},U.prototype.add=function(){if(arguments[0]instanceof U){var t=arguments[0];return U.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return U.copy(this).selfAdd(e)}},U.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof U){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},U.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},U.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},U.prototype.trunc=function(){return this.isNaN()?U.NaN:this.isPositive()?this.floor():this.ceil()},U.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},U.prototype.interfaces_=function(){return[e,x,E]},U.prototype.getClass=function(){return U},U.sqr=function(t){return U.valueOf(t).selfMultiply(t)},U.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return U.parse(t)}if("number"==typeof arguments[0])return new U(arguments[0])},U.sqrt=function(t){return U.valueOf(t).sqrt()},U.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new U,s=0,a=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,D.isDigit(u)){var c=u-"0";o.selfMultiply(U.TEN),o.selfAdd(c),s++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=L.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-l;if(0===f)p=o;else if(f>0){var d=U.TEN.pow(f);p=o.divide(d)}else if(f<0){var m=U.TEN.pow(-f);p=o.multiply(m)}return r?p.negate():p},U.createNaN=function(){return new U(_.NaN,_.NaN)},U.copy=function(t){return new U(t)},U.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},U.stringOfChar=function(t,e){for(var n=new N,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new U(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new U(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new U(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new U(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new U(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return U.valueOf(10)},F.ONE.get=function(){return U.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(U,F);var k=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k},k.orientationIndex=function(t,e,n){var r=k.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=U.valueOf(e.x).selfAdd(-t.x),o=U.valueOf(e.y).selfAdd(-t.y),s=U.valueOf(n.x).selfAdd(-e.x),a=U.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},k.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},k.intersection=function(t,e,n,r){var i=U.valueOf(r.y).selfSubtract(n.y).selfMultiply(U.valueOf(e.x).selfSubtract(t.x)),o=U.valueOf(r.x).selfSubtract(n.x).selfMultiply(U.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=U.valueOf(r.x).selfSubtract(n.x).selfMultiply(U.valueOf(t.y).selfSubtract(n.y)),l=U.valueOf(r.y).selfSubtract(n.y).selfMultiply(U.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(s).doubleValue(),c=U.valueOf(t.x).selfAdd(U.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=U.valueOf(e.x).selfSubtract(t.x).selfMultiply(U.valueOf(t.y).selfSubtract(n.y)),p=U.valueOf(e.y).selfSubtract(t.y).selfMultiply(U.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=U.valueOf(n.y).selfAdd(U.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new w(c,d)},k.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return k.signum(s);r=i+o}else{if(!(i<0))return k.signum(s);if(o>=0)return k.signum(s);r=-i-o}var a=k.DP_SAFE_EPSILON*r;return s>=a||-s>=a?k.signum(s):2},k.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(k,B);var G=function(){},j={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};j.X.get=function(){return 0},j.Y.get=function(){return 1},j.Z.get=function(){return 2},j.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[E]},G.prototype.getClass=function(){return G},Object.defineProperties(G,j);var z=function(){},H=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(z),V=function(){};V.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var X=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof w&&arguments[1]instanceof w){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],m=h.y-p.y,g=p.x-h.x,y=h.x*p.y-p.x*h.y,v=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=g*b-_*y,this.y=v*y-m*b,this.w=m*_-v*g}};X.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new H;return t},X.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new H;return t},X.prototype.getCoordinate=function(){var t=new w;return t.x=this.getX(),t.y=this.getY(),t},X.prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-a*o,h=(o*u-l*s)/c,p=(a*s-i*u)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(p)||_.isInfinite(p))throw new H;return new w(h,p)};var W=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof w){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.init(o,s,a,l)}},Y={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(t){if(!(t instanceof W))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new W(e,r,n,i)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof W){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof w){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},W.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},W.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},W.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof w){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},W.prototype.centre=function(){return this.isNull()?null:new w((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},W.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+w.hashCode(this._minx))+w.hashCode(this._maxx))+w.hashCode(this._miny))+w.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[x,e]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l)&&!(c<a)&&(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(u>l)&&!(c<a))}},Y.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,Y);var q={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$=function(t){this.geometryFactory=t||new ye};$.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=q.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=q.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Z[n]&&(e=Z[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},$.prototype.write=function(t){return this.extractGeometry(t)},$.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+K[e].apply(this,[t])+")"};var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Z={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(q.spaces);return this.geometryFactory.createPoint(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(Z.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(q.spaces),r.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(q.spaces),r.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(q.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(Z.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(q.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(q.trimParens,"$1"),n=Z.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(q.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(Z.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new $(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new w,this._intPt[1]=new w,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new N;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new W(this._inputLines[0][0],this._inputLines[0][1]),n=new W(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,W.intersects(n,r,e)&&0===at.orientationIndex(n,r,e)&&0===at.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=X.intersection(t,n,r,i)}catch(s){if(!(s instanceof H))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new w(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=k.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new w(t),o=new w(e),s=new w(n),a=new w(r),l=new w;this.normalizeToEnvCentre(i,o,s,a,l);var u=this.safeHCoordinateIntersection(i,o,s,a);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=W.intersects(e,n,r),s=W.intersects(e,n,i),a=W.intersects(r,i,e),l=W.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>u?o:u)+(a<h?a:h))/2,d=((s>c?s:c)+(l<p?l:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!W.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,r),s=at.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(r,i,e),l=at.orientationIndex(r,i,n);return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new w(r):0===s?this._intPt[0]=new w(i):0===a?this._intPt[0]=new w(e):0===l&&(this._intPt[0]=new w(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=at.distancePointLine(t,n,r),s=at.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=at.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(r,i,o,s)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=ot.signOfDet2x2(i,o,s,a);if(0===l)return this._isPointOnSegment=!0,null;a<o&&(l=-l),l>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==A.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?A.BOUNDARY:this._crossingCount%2==1?A.INTERIOR:A.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof w&&I(arguments[1],G)){for(var t=arguments[1],e=new st(arguments[0]),n=new w,r=new w,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof w&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var l=o[a],u=o[a-1];if(s.countSegment(l,u),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return k.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(I(arguments[0],G)){var s=arguments[0],a=s.size();if(a<3)return 0;var l=new w,u=new w,c=new w;s.getCoordinate(0,u),s.getCoordinate(1,c);var h=u.x;c.x-=h;for(var p=0,f=1;f<a-1;f++)l.y=u.y,u.x=c.x,u.y=c.y,s.getCoordinate(f+1,c),c.x-=h,p+=u.x*(l.y-c.y);return p/2}},at.distanceLineLine=function(t,e,n,r){if(t.equals(e))return at.distancePointLine(t,n,r);if(n.equals(r))return at.distancePointLine(r,t,e);var i=!1;if(W.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?C.min(at.distancePointLine(t,n,r),at.distancePointLine(e,n,r),at.distancePointLine(n,t,e),at.distancePointLine(r,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==A.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new w;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,l=r.y,u=a-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=a,o=l}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var l=t[s],u=t[a];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=at.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=at.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),u=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l;if(u<=0)return o.distance(s);if(u>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l;return Math.abs(c)*Math.sqrt(l)}},at.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return at.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return at.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,lt);var ut=function(){};ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[E,x,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ct,ht);var pt=function(){};pt.interfaces_=function(){return[ut]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},mt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},mt.Mod2BoundaryNodeRule.get=function(){return gt},mt.EndPointBoundaryNodeRule.get=function(){return yt},mt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},mt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},mt.MOD2_BOUNDARY_RULE.get=function(){return new gt},mt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},mt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},mt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},mt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,mt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[dt]},gt.prototype.getClass=function(){return gt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var St=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new wt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Et),wt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),Tt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof w&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<a.length;u++)this.add(a[u],l);else for(var c=a.length-1;c>=0;c--)this.add(a[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof w){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],m=arguments[1],g=arguments[2],y=arguments[3],v=1;g>y&&(v=-1);for(var _=g;_!==y;_+=v)this.add(d[_],m);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new w(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(St),Mt=function(){},Rt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Rt.ForwardComparator.get=function(){return At},Rt.BidirectionalComparator.get=function(){return Pt},Rt.coordArrayType.get=function(){return new Array(0).fill(null)},Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Mt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Mt.indexOf(r,e)<0)return r}return null},Mt.scroll=function(t,e){var n=Mt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);V.arraycopy(t,n,r,0,t.length-n),V.arraycopy(t,0,r,t.length-n,n),V.arraycopy(r,0,t,0,t.length)},Mt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Mt.intersection=function(t,e){for(var n=new Tt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Mt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Mt.removeRepeatedPoints=function(t){return Mt.hasRepeatedPoints(t)?new Tt(t,!1).toCoordinateArray():t},Mt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Mt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Mt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new w(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new w(r[i+l])},Mt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Mt.envelope=function(t){for(var e=new W,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Mt.toCoordinateArray=function(t){return t.toArray(Mt.coordArrayType)},Mt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Mt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Mt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Mt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Mt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Mt.extract=function(t,e,n){e=C.clamp(e,0,t.length);var r=(n=C.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Mt,Rt);var At=function(){};At.prototype.compare=function(t,e){return Mt.compare(t,e)},At.prototype.interfaces_=function(){return[S]},At.prototype.getClass=function(){return At};var Pt=function(){};Pt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Mt.compare(n,r);return Mt.isEqualReversed(n,r)?0:i},Pt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Mt.increasingDirection(n),o=Mt.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(r[a]);if(0!==u)return u;s+=i,a+=o}return 0},Pt.prototype.interfaces_=function(){return[S]},Pt.prototype.getClass=function(){return Pt};var It=function(){};It.prototype.get=function(){},It.prototype.put=function(){},It.prototype.size=function(){},It.prototype.values=function(){},It.prototype.entrySet=function(){};var Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(It);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Ot=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Nt(this)},e}(o),Nt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),Lt=0;(h.prototype=new Ct).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Lt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Lt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===u(a(a(t)))){var e=c(a(a(t)));1===s(e)?(l(a(t),Lt),l(e,Lt),l(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),l(a(t),Lt),l(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=u(a(a(t)));1===s(n)?(l(a(t),Lt),l(n,Lt),l(a(a(t)),1),t=a(a(t))):(t===u(a(t))&&(t=a(t),this.rotateRight(t)),l(a(t),Lt),l(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Lt},h.prototype.values=function(){var t=new St,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Ot,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Dt=function(){};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Ut(this)};var Ut=function(t){this.treeSet_=t,this.position_=0};Ut.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Ut.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ut.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new St,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var kt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.toDimensionSymbol=function(t){switch(t){case kt.FALSE:return kt.SYM_FALSE;case kt.TRUE:return kt.SYM_TRUE;case kt.DONTCARE:return kt.SYM_DONTCARE;case kt.P:return kt.SYM_P;case kt.L:return kt.SYM_L;case kt.A:return kt.SYM_A}throw new v("Unknown dimension value: "+t)},kt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case kt.SYM_FALSE:return kt.FALSE;case kt.SYM_TRUE:return kt.TRUE;case kt.SYM_DONTCARE:return kt.DONTCARE;case kt.SYM_P:return kt.P;case kt.SYM_L:return kt.L;case kt.SYM_A:return kt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(kt,Bt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var jt=function(){};jt.prototype.filter=function(t,e){},jt.prototype.isDone=function(){},jt.prototype.isGeometryChanged=function(){},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt};var zt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new W,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=kt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=kt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Ft.asList(this._geometries)),n=new f(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var l=this.getGeometryN(a),u=i.getGeometryN(a),c=l.compareToSameClass(u,r);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(I(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(I(arguments[0],jt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(I(arguments[0],ut)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Ht=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(zt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof $t?this.boundaryLineString(this._geom):this._geom instanceof Ht?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new St;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Mt.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Xt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){return 1===arguments.length?new Vt(arguments[0]).getBoundary():2===arguments.length?new Vt(arguments[0],arguments[1]).getBoundary():void 0};var Xt=function(){this.count=null};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var Wt=function(){},Yt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Wt.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Wt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Wt.split=function(t,e){for(var n=e.length,r=new St,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),l=0;l<a.length;l++)a[l]=r.get(l);return a},Wt.toString=function(){if(1===arguments.length){var t=arguments[0];return Wt.SIMPLE_ORDINATE_FORMAT.format(t)}},Wt.spaces=function(t){return Wt.chars(" ",t)},Yt.NEWLINE.get=function(){return V.getProperty("line.separator")},Yt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,Yt);var qt=function(){};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},qt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},qt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!_.isNaN(s)||!_.isNaN(a)))return!1}return!0},qt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(qt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)qt.copy(e,i-1,r,o,1);return r},qt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)qt.swap(t,r,e-r)},qt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},qt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)qt.copyCoord(t,e+o,n,r+o)},qt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new N;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},qt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?qt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:qt.createClosedRing(t,e,n+1)},qt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();qt.copy(e,0,r,0,i);for(var o=i;o<n;o++)qt.copy(e,0,r,o,1);return r};var $t=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&qt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return qt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(I(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(I(arguments[0],jt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],Gt)||I(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Zt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var t=new W;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return kt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(I(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(I(arguments[0],jt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],Gt)||I(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o===(u!==s))return!1;o=l,s=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Mt.minCoordinate(e.getCoordinates());Mt.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],at.isCCW(e.getCoordinates())===n&&Mt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),p=i.getInteriorRingN(c),f=h.compareToSameClass(p,r);if(0!==f)return f;c++}return c<l?1:c<u?-1:0}},e.prototype.apply=function(t){if(I(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(I(t,jt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(I(t,Gt))t.filter(this);else if(I(t,ut)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return kt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(zt),ee=function(t){function e(e,n){e instanceof w&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return kt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return qt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}($t),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new St,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(zt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Zt||t instanceof $t?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new St,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ht?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new St,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return se},ie.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof $t?e.createLineString(n):t instanceof Zt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof $t?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new w}else if(I(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var l=0;l<s;l++)this._coordinates[l]=new w}},ue={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new w(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new N(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[G,e]},le.prototype.getClass=function(){return le},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ue);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(I(arguments[0],G))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ce.prototype.interfaces_=function(){return[R,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new St,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Ot;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(It),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof me){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new L(n).compareTo(new L(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof w){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,x]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var me=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};me.prototype.readResolve=function(){return me.nameToTypeMap.get(this._name)},me.prototype.toString=function(){return this._name},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new pe},Object.defineProperties(me,ge),fe.Type=me,fe.FIXED=new me("FIXED"),fe.FLOATING=new me("FLOATING"),fe.FLOATING_SINGLE=new me("FLOATING SINGLE");var ye=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?I(arguments[0],R)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new w(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new w(t.getMinX(),t.getMinY()),new w(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new w(t.getMinX(),t.getMinY()),new w(t.getMinX(),t.getMaxY()),new w(t.getMaxX(),t.getMaxY()),new w(t.getMaxX(),t.getMinY()),new w(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new $t(this.getCoordinateSequenceFactory().create(t),this):I(t,G)?new $t(t,this):void 0:new $t(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new Ht(null,this):1===arguments.length?new Ht(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ye.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Qt)return this.createMultiPolygon(ye.toPolygonArray(t));if(a instanceof $t)return this.createMultiLineString(ye.toLineStringArray(t));if(a instanceof Zt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(I(arguments[0],G))return new Zt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(I(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new zt(null,this):1===arguments.length?new zt(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(I(arguments[0],G))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(I(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());qt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ye};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new w(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new w(t[0],t[1]),new w(t[2],t[1]),new w(t[2],t[3]),new w(t[0],t[3]),new w(t[0],t[1])])},Point:function(t){var e=new w(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=xe.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ee.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ee.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ee[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Se=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Se.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Se.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var we=function(){this.parser=new be(this.geometryFactory)};we.prototype.write=function(t){return this.parser.write(t)};var Te=function(){},Me={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te},Te.opposite=function(t){return t===Te.LEFT?Te.RIGHT:t===Te.RIGHT?Te.LEFT:t},Me.ON.get=function(){return 0},Me.LEFT.get=function(){return 1},Me.RIGHT.get=function(){return 2},Object.defineProperties(Te,Me),(m.prototype=new Error).name="EmptyStackException",(g.prototype=new Et).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new m;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new m;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Re=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Re.prototype.getCoordinate=function(){return this._minCoord},Re.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Re.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=at.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===at.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Re.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Te.LEFT;return n[e].y<n[e+1].y&&(r=Te.RIGHT),r},Re.prototype.getEdge=function(){return this._orientedDe},Re.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Re.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Re.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Te.LEFT&&(this._orientedDe=this._minDe.getSym())},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ae=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new w(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Pe=function(){this.array_=[]};Pe.prototype.addLast=function(t){this.array_.push(t)},Pe.prototype.removeFirst=function(){return this.array_.shift()},Pe.prototype.isEmpty=function(){return 0===this.array_.length};var Ie=function(){this._finder=null,this._dirEdgeList=new St,this._nodes=new St,this._rightMostCoord=null,this._env=null,this._finder=new Re};Ie.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ie.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ie.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ae("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ie.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Te.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ie.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ie.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Te.RIGHT)>=1&&e.getDepth(Te.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ie.prototype.computeDepths=function(t){var e=new Ot,n=new Pe,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ie.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ie.prototype.getEnvelope=function(){if(null===this._env){for(var t=new W,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ie.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ie.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Te.LEFT,t.getDepth(Te.RIGHT)),e.setDepth(Te.RIGHT,t.getDepth(Te.LEFT))},Ie.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ie.prototype.getNodes=function(){return this._nodes},Ie.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ie.prototype.interfaces_=function(){return[x]},Ie.prototype.getClass=function(){return Ie};var Ce=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Te.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Te.ON]=o,this.location[Te.LEFT]=s,this.location[Te.RIGHT]=a}};Ce.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ce.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==A.NONE)return!1;return!0},Ce.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===A.NONE&&(this.location[e]=t)},Ce.prototype.isLine=function(){return 1===this.location.length},Ce.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Te.ON]=this.location[Te.ON],e[Te.LEFT]=A.NONE,e[Te.RIGHT]=A.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===A.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ce.prototype.getLocations=function(){return this.location},Ce.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Te.LEFT];this.location[Te.LEFT]=this.location[Te.RIGHT],this.location[Te.RIGHT]=t},Ce.prototype.toString=function(){var t=new N;return this.location.length>1&&t.append(A.toLocationSymbol(this.location[Te.LEFT])),t.append(A.toLocationSymbol(this.location[Te.ON])),this.location.length>1&&t.append(A.toLocationSymbol(this.location[Te.RIGHT])),t.toString()},Ce.prototype.setLocations=function(t,e,n){this.location[Te.ON]=t,this.location[Te.LEFT]=e,this.location[Te.RIGHT]=n},Ce.prototype.get=function(t){return t<this.location.length?this.location[t]:A.NONE},Ce.prototype.isArea=function(){return this.location.length>1},Ce.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===A.NONE)return!0;return!1},Ce.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Te.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ce.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(A.NONE)},Ce.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ce.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce};var Oe=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ce(e),this.elt[1]=new Ce(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ce(n.elt[0]),this.elt[1]=new Ce(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ce(A.NONE),this.elt[1]=new Ce(A.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Ce(o,s,a),this.elt[1]=new Ce(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Ce(A.NONE,A.NONE,A.NONE),this.elt[1]=new Ce(A.NONE,A.NONE,A.NONE),this.elt[l].setLocations(u,c,h)}};Oe.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Oe.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Oe.prototype.isNull=function(t){return this.elt[t].isNull()},Oe.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Oe.prototype.isLine=function(t){return this.elt[t].isLine()},Oe.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ce(t.elt[e]):this.elt[e].merge(t.elt[e])},Oe.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Oe.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Te.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Oe.prototype.toString=function(){var t=new N;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Oe.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Oe.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Oe.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Te.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Oe.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Oe.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Oe.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ce(this.elt[t].location[0]))},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe},Oe.toLineLabel=function(t){for(var e=new Oe(A.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ne=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new St,this._pts=new St,this._label=new Oe(A.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new St,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ne.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Ne.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ne.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ae("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ae("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ne.prototype.getLinearRing=function(){return this._ring},Ne.prototype.getCoordinate=function(t){return this._pts.get(t)},Ne.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ne.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Ne.prototype.isHole=function(){return this._isHole},Ne.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ne.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ne.prototype.addHole=function(t){this._holes.add(t)},Ne.prototype.isShell=function(){return null===this._shell},Ne.prototype.getLabel=function(){return this._label},Ne.prototype.getEdges=function(){return this._edges},Ne.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ne.prototype.getShell=function(){return this._shell},Ne.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Te.RIGHT);if(n===A.NONE)return null;if(this._label.getLocation(e)===A.NONE)return this._label.setLocation(e,n),null}},Ne.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ne.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Le=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new St,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Le(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),Ue=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Ue.prototype.setVisited=function(t){this._isVisited=t},Ue.prototype.setInResult=function(t){this._isInResult=t},Ue.prototype.isCovered=function(){return this._isCovered},Ue.prototype.isCoveredSet=function(){return this._isCoveredSet},Ue.prototype.setLabel=function(t){this._label=t},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ue.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Ue.prototype.isInResult=function(){return this._isInResult},Ue.prototype.isVisited=function(){return this._isVisited},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Oe(0,A.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=A.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==A.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Oe(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Oe)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===A.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=A.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case A.BOUNDARY:n=A.INTERIOR;break;case A.INTERIOR:default:n=A.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),ke=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ke.prototype.find=function(t){return this.nodeMap.get(t)},ke.prototype.addNode=function(){if(arguments[0]instanceof w){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},ke.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ke.prototype.iterator=function(){return this.nodeMap.values().iterator()},ke.prototype.values=function(){return this.nodeMap.values()},ke.prototype.getBoundaryNodes=function(t){for(var e=new St,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===A.BOUNDARY&&e.add(r)}return e},ke.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Be=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof w&&arguments[1]instanceof w){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Be,Ge);var je=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};je.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},je.prototype.getDy=function(){return this._dy},je.prototype.getCoordinate=function(){return this._p0},je.prototype.setNode=function(t){this._node=t},je.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},je.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},je.prototype.getDirectedCoordinate=function(){return this._p1},je.prototype.getDx=function(){return this._dx},je.prototype.getLabel=function(){return this._label},je.prototype.getEdge=function(){return this._edge},je.prototype.getQuadrant=function(){return this._quadrant},je.prototype.getNode=function(){return this._node},je.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},je.prototype.computeLabel=function(t){},je.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},je.prototype.interfaces_=function(){return[x]},je.prototype.getClass=function(){return je};var ze=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Oe(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ae("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Te.LEFT)===A.INTERIOR&&this._label.getLocation(e,Te.RIGHT)===A.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Te.LEFT]+"/"+this._depth[Te.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,A.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,A.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Te.LEFT&&(r=-1);var i=Te.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===A.EXTERIOR&&e===A.INTERIOR?1:t===A.INTERIOR&&e===A.EXTERIOR?-1:0},e}(je),He=function(){};He.prototype.createNode=function(t){return new Fe(t,null)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ve=function(){if(this._edges=new St,this._nodes=null,this._edgeEndList=new St,0===arguments.length)this._nodes=new ke(new He);else if(1===arguments.length){var t=arguments[0];this._nodes=new ke(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof w){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===A.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&at.computeOrientation(t,e,r)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new ze(n,!0),i=new ze(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Xe=function(){this._geometryFactory=null,this._shellList=new St;var t=arguments[0];this._geometryFactory=t};Xe.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Xe.prototype.computePolygons=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Xe.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ae("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Xe.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new St,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Xe.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Xe.prototype.buildMaximalEdgeRings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new De(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Xe.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Xe.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Xe.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&at.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=l)}return o},Xe.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Xe.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new St,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){};We.prototype.getBounds=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ye=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ye.prototype.getItem=function(){return this._item},Ye.prototype.getBounds=function(){return this._bounds},Ye.prototype.interfaces_=function(){return[We,e]},Ye.prototype.getClass=function(){return Ye};var qe=function(){this._size=null,this._items=null,this._size=0,this._items=new St,this._items.add(null)};qe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},qe.prototype.size=function(){return this._size},qe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},qe.prototype.clear=function(){this._size=0,this._items.clear()},qe.prototype.isEmpty=function(){return 0===this._size},qe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var $e=function(){};$e.prototype.visitItem=function(t){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ke=function(){};Ke.prototype.insert=function(t,e){},Ke.prototype.remove=function(t,e){},Ke.prototype.query=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Ze=function(){if(this._childBoundables=new St,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ze.prototype.getLevel=function(){return this._level},Ze.prototype.size=function(){return this._childBoundables.size()},Ze.prototype.getChildBoundables=function(){return this._childBoundables},Ze.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ze.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ze.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ze.prototype.interfaces_=function(){return[We,e]},Ze.prototype.getClass=function(){return Ze},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ze,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new St;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ze};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new St,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ze?t+=this.size(n):n instanceof Ye&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ye&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new St:t}if(1===arguments.length){for(var e=arguments[0],n=new St,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ze){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Ye?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ye(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new St;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ze?this.boundablesAtLevel(n,s,i):(et.isTrue(s instanceof Ye),-1===n&&i.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new St;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(I(arguments[2],$e)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze)for(var i=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var l=s.get(a);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Ze?this.query(i,l,o):l instanceof Ye?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(I(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze)for(var u=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),u)&&(f instanceof Ze?this.query(u,f,c):f instanceof Ye?c.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ze&&(o=this.remove(n,l,i))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ze){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new St;n.add(this.createNode(e));var r=new St(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new St,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new St;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(I(arguments[2],$e)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(I(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze){var a=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,a,l,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new St(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(I(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&I(arguments[1],on)){var i=arguments[0],o=arguments[1],s=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],u=null,c=new qe;for(c.add(a);!c.isEmpty()&&l>0;){var h=c.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new Ye(arguments[0],arguments[1]),m=new tn(this.getRoot(),d,f);return this.nearestNeighbour(m)[0]}},n.prototype.interfaces_=function(){return[Ke,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return an},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new W(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ze),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ln.relativeSign(e.x,n.x),i=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(r,i);case 1:return ln.compareValue(i,r);case 2:return ln.compareValue(i,-r);case 3:return ln.compareValue(-r,i);case 4:return ln.compareValue(-r,-i);case 5:return ln.compareValue(-i,-r);case 6:return ln.compareValue(-i,r);case 7:return ln.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new w(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[x]},un.prototype.getClass=function(){return un};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Tt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new St;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new L(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new w(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new w(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new L(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new w(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new w(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof w&&arguments[1]instanceof w){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new v("Cannot compute the octant for two identical points "+i);return hn.octant(s,a)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new w(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new le(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new St;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var mn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new w,this.p1=new w;else if(1===arguments.length){var t=arguments[0];this.p0=new w(t.p0),this.p1=new w(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new w(e,n),this.p1=new w(r,i)}},gn={serialVersionUID:{configurable:!0}};mn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mn.prototype.orientationIndex=function(){if(arguments[0]instanceof mn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof w){var r=arguments[0];return at.orientationIndex(this.p0,this.p1,r)}},mn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mn.prototype.isVertical=function(){return this.p0.x===this.p1.x},mn.prototype.equals=function(t){if(!(t instanceof mn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mn.prototype.project=function(){if(arguments[0]instanceof w){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new w(t);var e=this.projectionFactor(t),n=new w;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new mn(s,a)}},mn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},mn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mn.prototype.midPoint=function(){return mn.midPoint(this.p0,this.p1)},mn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},mn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},mn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mn.prototype.getLength=function(){return this.p0.distance(this.p1)},mn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mn.prototype.lineIntersection=function(t){try{return X.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof H))throw t}return null},mn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,l=e*o/s}return new w(n-l,r+a)},mn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},mn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mn.prototype.distance=function(){if(arguments[0]instanceof mn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof w){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},mn.prototype.pointAlong=function(t){var e=new w;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mn.prototype.interfaces_=function(){return[x,e]},mn.prototype.getClass=function(){return mn},mn.midPoint=function(t,e){return new w((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mn,gn);var yn=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new mn,this._overlapSeg2=new mn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new W(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new St;n.add(new L(e));do{var r=_n.findChainEnd(t,e);n.add(new L(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new St,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new vn(e,i[o],i[o+1],n);r.add(s)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var En=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new St,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Sn},Object.defineProperties(e,n),e}(xn),Sn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),wn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Tn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};wn.prototype.getEndCapStyle=function(){return this._endCapStyle},wn.prototype.isSingleSided=function(){return this._isSingleSided},wn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=wn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=wn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==wn.JOIN_ROUND&&(this._quadrantSegments=wn.DEFAULT_QUADRANT_SEGMENTS)},wn.prototype.getJoinStyle=function(){return this._joinStyle},wn.prototype.setJoinStyle=function(t){this._joinStyle=t},wn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},wn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},wn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},wn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},wn.prototype.getMitreLimit=function(){return this._mitreLimit},wn.prototype.setMitreLimit=function(t){this._mitreLimit=t},wn.prototype.setSingleSided=function(t){this._isSingleSided=t},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Tn.CAP_ROUND.get=function(){return 1},Tn.CAP_FLAT.get=function(){return 2},Tn.CAP_SQUARE.get=function(){return 3},Tn.JOIN_ROUND.get=function(){return 1},Tn.JOIN_MITRE.get=function(){return 2},Tn.JOIN_BEVEL.get=function(){return 3},Tn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Tn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Tn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(wn,Tn);var Mn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Rn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Mn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Mn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Mn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Mn.prototype.isShallowConcavity=function(t,e,n,r){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<r},Mn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Mn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Mn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Mn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Mn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Mn.DELETE;)e++;return e},Mn.prototype.isShallow=function(t,e,n,r){return at.distancePointLine(e,t,n)<r},Mn.prototype.collapseLine=function(){for(var t=new Tt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Mn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.simplify=function(t,e){return new Mn(t).simplify(e)},Rn.INIT.get=function(){return 0},Rn.DELETE.get=function(){return 1},Rn.KEEP.get=function(){return 1},Rn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Mn,Rn);var An=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new St},Pn={COORDINATE_ARRAY_TYPE:{configurable:!0}};An.prototype.getCoordinates=function(){return this._ptList.toArray(An.COORDINATE_ARRAY_TYPE)},An.prototype.setPrecisionModel=function(t){this._precisionModel=t},An.prototype.addPt=function(t){var e=new w(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},An.prototype.revere=function(){},An.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},An.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},An.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},An.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new w(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},An.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Pn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(An,Pn);var In=function(){},Cn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.toDegrees=function(t){return 180*t/Math.PI},In.normalize=function(t){for(;t>Math.PI;)t-=In.PI_TIMES_2;for(;t<=-Math.PI;)t+=In.PI_TIMES_2;return t},In.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},In.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},In.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},In.interiorAngle=function(t,e,n){var r=In.angle(e,t),i=In.angle(e,n);return Math.abs(i-r)},In.normalizePositive=function(t){if(t<0){for(;t<0;)t+=In.PI_TIMES_2;t>=In.PI_TIMES_2&&(t=0)}else{for(;t>=In.PI_TIMES_2;)t-=In.PI_TIMES_2;t<0&&(t=0)}return t},In.angleBetween=function(t,e,n){var r=In.angle(e,t),i=In.angle(e,n);return In.diff(r,i)},In.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},In.toRadians=function(t){return t*Math.PI/180},In.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?In.COUNTERCLOCKWISE:n<0?In.CLOCKWISE:In.NONE},In.angleBetweenOriented=function(t,e,n){var r=In.angle(e,t),i=In.angle(e,n)-r;return i<=-Math.PI?i+In.PI_TIMES_2:i>Math.PI?i-In.PI_TIMES_2:i},Cn.PI_TIMES_2.get=function(){return 2*Math.PI},Cn.PI_OVER_2.get=function(){return Math.PI/2},Cn.PI_OVER_4.get=function(){return Math.PI/4},Cn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Cn.CLOCKWISE.get=function(){return at.CLOCKWISE},Cn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(In,Cn);var On=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mn,this._seg1=new mn,this._offset0=new mn,this._offset1=new mn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===wn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Nn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};On.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),r=n===at.CLOCKWISE&&this._side===Te.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Te.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},On.prototype.addLineEndCap=function(t,e){var n=new mn(t,e),r=new mn;this.computeOffsetSegment(n,Te.LEFT,this._distance,r);var i=new mn;this.computeOffsetSegment(n,Te.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case wn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case wn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case wn.CAP_SQUARE:var l=new w;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new w(r.p1.x+l.x,r.p1.y+l.y),c=new w(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},On.prototype.getCoordinates=function(){return this._segList.getCoordinates()},On.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=X.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof H))throw t;o=new w(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},On.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===at.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)},On.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*On.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===wn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===wn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},On.prototype.createSquare=function(t){this._segList.addPt(new w(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new w(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},On.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},On.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},On.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},On.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},On.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=In.angle(i,this._seg0.p0),s=In.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=In.normalize(o+s),l=In.normalize(a+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(s)),h=i.x+u*Math.cos(l),p=i.y+u*Math.sin(l),f=new w(h,p),d=new mn(i,f),m=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Te.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},On.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Te.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=i*n*o/a,u=i*n*s/a;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},On.prototype.addFilletArc=function(t,e,n,r,i){var o=r===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=0,c=new w;u<s;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},On.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new w((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new w((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},On.prototype.createCircle=function(t){var e=new w(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},On.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},On.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new An,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},On.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===wn.JOIN_BEVEL||this._bufParams.getJoinStyle()===wn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},On.prototype.closeRing=function(){this._segList.closeRing()},On.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},Nn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Nn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Nn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Nn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(On,Nn);var Ln=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Ln.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Mt.reverse(o),o},Ln.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Mn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Te.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Mn.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],Te.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},Ln.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Te.RIGHT&&(r=-r);var i=Mn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Ln.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Mn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Te.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Mn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Te.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ln.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case wn.CAP_ROUND:e.createCircle(t);break;case wn.CAP_SQUARE:e.createSquare(t)}},Ln.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Ln.prototype.getBufferParameters=function(){return this._bufParams},Ln.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ln.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ln.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Ln.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Mn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Te.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Mn.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],Te.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},Ln.prototype.getSegGen=function(t){return new On(this._precisionModel,this._bufParams,t)},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new w(t[n]);return e};var Dn=function(){this._subgraphs=null,this._seg=new mn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Un={DepthSegment:{configurable:!0}};Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new St,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(I(arguments[2],Et)&&arguments[0]instanceof w&&arguments[1]instanceof ze){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(Te.LEFT);this._seg.p0.equals(l[u])||(c=s.getDepth(Te.RIGHT));var h=new Fn(this._seg,c);a.add(h)}}else if(I(arguments[2],Et)&&arguments[0]instanceof w&&I(arguments[1],Et))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var m=d.next();m.isForward()&&this.findStabbedSegments(p,m,f)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Un.DepthSegment.get=function(){return Fn},Object.defineProperties(Dn,Un);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var kn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};kn.prototype.area=function(){return kn.area(this.p0,this.p1,this.p2)},kn.prototype.signedArea=function(){return kn.signedArea(this.p0,this.p1,this.p2)},kn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return kn.interpolateZ(t,this.p0,this.p1,this.p2)},kn.prototype.longestSideLength=function(){return kn.longestSideLength(this.p0,this.p1,this.p2)},kn.prototype.isAcute=function(){return kn.isAcute(this.p0,this.p1,this.p2)},kn.prototype.circumcentre=function(){return kn.circumcentre(this.p0,this.p1,this.p2)},kn.prototype.area3D=function(){return kn.area3D(this.p0,this.p1,this.p2)},kn.prototype.centroid=function(){return kn.centroid(this.p0,this.p1,this.p2)},kn.prototype.inCentre=function(){return kn.inCentre(this.p0,this.p1,this.p2)},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},kn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},kn.det=function(t,e,n,r){return t*r-e*n},kn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,l=n.y-o,u=r.y-o,c=s*u-a*l,h=t.x-i,p=t.y-o,f=(u*h-a*p)/c,d=(-l*h+s*p)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},kn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},kn.isAcute=function(t,e,n){return!!In.isAcute(t,e,n)&&!!In.isAcute(e,n,t)&&!!In.isAcute(n,t,e)},kn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,l=e.y-i,u=2*kn.det(o,s,a,l),c=kn.det(s,o*o+s*s,l,a*a+l*l),h=kn.det(o,o*o+s*s,a,a*a+l*l);return new w(r-c/u,i+h/u)},kn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new X(t.x+n/2,t.y+r/2,1),o=new X(t.x-r+n/2,t.y+n+r/2,1);return new X(i,o)},kn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new w(t.x+i*o,t.y+i*s)},kn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=i*l-o*a,c=o*s-r*l,h=r*a-i*s,p=u*u+c*c+h*h;return Math.sqrt(p)/2},kn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new w(r,i)},kn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,l=(r*t.y+i*e.y+o*n.y)/s;return new w(a,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Te.LEFT;this._distance<0&&(e=-this._distance,n=Te.RIGHT);var r=t.getExteriorRing(),i=Mt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,A.EXTERIOR,A.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Mt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Te.opposite(n),A.INTERIOR,A.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new kn(t[0],t[1],t[2]),r=n.inCentre();return at.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Mt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Oe(0,A.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=i,s=r,n=Te.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof $t?this.addLineString(t):t instanceof Zt?this.addPoint(t):(t instanceof te||t instanceof Ht||t instanceof ne||t instanceof zt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var jn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};jn.prototype.next=function(){if(this._atStart)return this._atStart=!1,jn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof zt?(this._subcollectionIterator=new jn(t),this._subcollectionIterator.next()):t},jn.prototype.remove=function(){throw new Error(this.getClass().getName())},jn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},jn.prototype.interfaces_=function(){return[xt]},jn.prototype.getClass=function(){return jn},jn.isAtomic=function(t){return!(t instanceof zt)};var zn=function(){this._geom=null;var t=arguments[0];this._geom=t};zn.prototype.locate=function(t){return zn.locate(t,this._geom)},zn.prototype.interfaces_=function(){return[Gn]},zn.prototype.getClass=function(){return zn},zn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},zn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!zn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(zn.isPointInRing(t,i))return!1}return!0},zn.containsPoint=function(t,e){if(e instanceof Qt)return zn.containsPointInPolygon(t,e);if(e instanceof zt)for(var n=new jn(e);n.hasNext();){var r=n.next();if(r!==e&&zn.containsPoint(t,r))return!0}return!1},zn.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:zn.containsPoint(t,e)?A.INTERIOR:A.EXTERIOR};var Hn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[A.NONE,A.NONE]};Hn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Hn.prototype.propagateSideLabels=function(t){for(var e=A.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Te.LEFT)!==A.NONE&&(e=r.getLocation(t,Te.LEFT))}if(e===A.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Te.ON)===A.NONE&&a.setLocation(t,Te.ON,i),a.isArea(t)){var l=a.getLocation(t,Te.LEFT),u=a.getLocation(t,Te.RIGHT);if(u!==A.NONE){if(u!==i)throw new Ae("side location conflict",s.getCoordinate());l===A.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=l}else et.isTrue(a.getLocation(t,Te.LEFT)===A.NONE,"found single null side"),a.setLocation(t,Te.RIGHT,i),a.setLocation(t,Te.LEFT,i)}}},Hn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Hn.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Hn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Te.LEFT);et.isTrue(r!==A.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Te.LEFT),l=s.getLocation(t,Te.RIGHT);if(a===l)return!1;if(l!==i)return!1;i=a}return!0},Hn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Hn.prototype.iterator=function(){return this.getEdges().iterator()},Hn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new St(this._edgeMap.values())),this._edgeList},Hn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===A.NONE&&(this._ptInAreaLocation[t]=zn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Hn.prototype.toString=function(){var t=new N;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Hn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Hn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===A.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=A.NONE;if(e[l])u=A.EXTERIOR;else{var c=s.getCoordinate();u=this.getLocation(l,c,t)}a.setAllLocationsIfNull(l,u)}},Hn.prototype.getDegree=function(){return this._edgeMap.size()},Hn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Vn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ae("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new St;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Te.LEFT),r=t.getDepth(Te.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ae("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var l=this._edgeList.get(a);l.setEdgeDepths(Te.RIGHT,s),s=l.getDepth(Te.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=A.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=A.INTERIOR;break}if(r.isInResult()){t=A.EXTERIOR;break}}}if(t===A.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===A.INTERIOR):(s.isInResult()&&(i=A.EXTERIOR),a.isInResult()&&(i=A.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Oe(A.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==A.INTERIOR&&o!==A.BOUNDARY||this._label.setLocation(i,A.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hn),Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new Vn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(He),Wn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wn.prototype.compareTo=function(t){var e=t;return Wn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wn.prototype.interfaces_=function(){return[x]},Wn.prototype.getClass=function(){return Wn},Wn.orientation=function(t){return 1===Mt.increasingDirection(t)},Wn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===s,p=(u+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Yn=function(){this._edges=new St,this._ocaMap=new h};Yn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Yn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Yn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Yn.prototype.iterator=function(){return this._edges.iterator()},Yn.prototype.getEdges=function(){return this._edges},Yn.prototype.get=function(t){return this._edges.get(t)},Yn.prototype.findEqualEdge=function(t){var e=new Wn(t.getCoordinates());return this._ocaMap.get(e)},Yn.prototype.add=function(t){this._edges.add(t);var e=new Wn(t.getCoordinates());this._ocaMap.put(e,t)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var qn=function(){};qn.prototype.processIntersections=function(t,e,n,r){},qn.prototype.isDone=function(){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var $n=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$n.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if($n.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},$n.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$n.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$n.prototype.getLineIntersector=function(){return this._li},$n.prototype.hasProperIntersection=function(){return this._hasProper},$n.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$n.prototype.hasIntersection=function(){return this._hasIntersection},$n.prototype.isDone=function(){return!1},$n.prototype.hasInteriorIntersection=function(){return this._hasInterior},$n.prototype.interfaces_=function(){return[qn]},$n.prototype.getClass=function(){return $n},$n.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new w(t),this.segmentIndex=e,this.dist=n};Kn.prototype.getSegmentIndex=function(){return this.segmentIndex},Kn.prototype.getCoordinate=function(){return this.coord},Kn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kn.prototype.getDistance=function(){return this.dist},Kn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kn.prototype.interfaces_=function(){return[x]},Kn.prototype.getClass=function(){return Kn};var Zn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Zn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Zn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Zn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Zn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new w(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new nr(o,new Oe(this.edge._label))},Zn.prototype.add=function(t,e,n){var r=new Kn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Zn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new St;n.add(new L(e));do{var r=this.findChainEnd(t,e);n.add(new L(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[l];if(o-i==1&&l-a==1)return u.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),m=Math.trunc((a+l)/2);i<d&&(a<m&&this.computeIntersectsForChain(i,d,s,a,m,u),m<l&&this.computeIntersectsForChain(i,d,s,m,l,u)),d<o&&(a<m&&this.computeIntersectsForChain(d,o,s,a,m,u),m<l&&this.computeIntersectsForChain(d,o,s,m,l,u))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Te.RIGHT]-this._depth[t][Te.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?A.EXTERIOR:A.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==A.EXTERIOR&&r!==A.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===A.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===A.EXTERIOR?0:t===A.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Zn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Oe.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new W;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new w(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var l=this.pts[a];i.equals2D(l)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new N;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Te.ON),e.getLocation(1,Te.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Te.LEFT),e.getLocation(1,Te.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Te.RIGHT),e.getLocation(1,Te.RIGHT),2))},e}(Ue),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Yn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Oe(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new St,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Dn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new St,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ie;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new En,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new $n(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Ln(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ve(new Xn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Xe(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new nr(i.getCoordinates(),new Oe(s));this.insertUniqueEdge(a)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Te.LEFT),n=t.getLocation(0,Te.RIGHT);return e===A.INTERIOR&&n===A.EXTERIOR?1:e===A.EXTERIOR&&n===A.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ye,n=new St;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(I(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},ir.prototype.scale=function(){if(I(arguments[0],bt)){for(var t=arguments[0],e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new w(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Mt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},sr={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],m=c.getCoordinates()[h+1],g=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,m)||this.hasInteriorIntersection(this._li,g,y)))throw new Q("found non-noded intersection at "+d+"-"+m+" and "+g+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},sr.fact.get=function(){return new ye},Object.defineProperties(or,sr);var ar=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new w(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new w,this._p1Scaled=new w),this.initCorners(this._pt)},lr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ar.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ar.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new w(this._maxx,this._maxy),this._corner[1]=new w(this._minx,this._maxy),this._corner[2]=new w(this._minx,this._miny),this._corner[3]=new w(this._maxx,this._miny)},ar.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ar.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ar.prototype.getCoordinate=function(){return this._originalPt},ar.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ar.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ar.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ar.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},ar.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},ar.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},lr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ar,lr);var ur=function(){this.tempEnv1=new W,this.selectedSegment=new mn};ur.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[$e]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(cr,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new St};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[qn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof z))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(I(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new ar(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new ar(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var mr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new wn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ae))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=mr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},mr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},mr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new mr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new mr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof wn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new mr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],l=new mr(arguments[0]);return l.setQuadrantSegments(s),l.setEndCapStyle(a),l.getResultGeometry(o)}},mr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=C.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},gr.CAP_ROUND.get=function(){return wn.CAP_ROUND},gr.CAP_BUTT.get=function(){return wn.CAP_FLAT},gr.CAP_FLAT.get=function(){return wn.CAP_FLAT},gr.CAP_SQUARE.get=function(){return wn.CAP_SQUARE},gr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mr,gr);var yr=function(){this._pt=[new w,new w],this._distance=_.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(t){return this._pt[t]},yr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof $t&&arguments[1]instanceof w)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new mn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yr&&arguments[0]instanceof Qt&&arguments[1]instanceof w){var s=arguments[0],a=arguments[1],l=arguments[2];vr.computeDistance(s.getExteriorRing(),a,l);for(var u=0;u<s.getNumInteriorRing();u++)vr.computeDistance(s.getInteriorRingN(u),a,l)}else if(arguments[2]instanceof yr&&arguments[0]instanceof ct&&arguments[1]instanceof w){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof $t)vr.computeDistance(c,h,p);else if(c instanceof Qt)vr.computeDistance(c,h,p);else if(c instanceof zt)for(var f=c,d=0;d<f.getNumGeometries();d++){var m=f.getGeometryN(d);vr.computeDistance(m,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof yr&&arguments[0]instanceof mn&&arguments[1]instanceof w){var g=arguments[1],y=arguments[2],v=arguments[0].closestPoint(g);y.setMinimum(v,g)}};var _r=function(t){this._maxPtDist=new yr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new Er(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return Er},Object.defineProperties(_r,br);var xr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[ft]},xr.prototype.getClass=function(){return xr};var Er=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};Er.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new w((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Er.prototype.isDone=function(){return!1},Er.prototype.isGeometryChanged=function(){return!1},Er.prototype.getMaxPointDistance=function(){return this._maxPtDist},Er.prototype.interfaces_=function(){return[jt]},Er.prototype.getClass=function(){return Er};var Sr=function(t){this._comps=t||null};Sr.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Sr.prototype.interfaces_=function(){return[Gt]},Sr.prototype.getClass=function(){return Sr},Sr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Sr.getPolygons(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof zt&&e.apply(new Sr(n)),n}};var wr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};wr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof $t&&this._lines.add(t)},wr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},wr.prototype.interfaces_=function(){return[ut]},wr.prototype.getClass=function(){return wr},wr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(wr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(wr.getLines(e,n))}},wr.getLines=function(){if(1===arguments.length){var t=arguments[0];return wr.getLines(t,!1)}if(2===arguments.length){if(I(arguments[0],bt)&&I(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();wr.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new St;return i.apply(new wr(s,o)),s}if(arguments[0]instanceof ct&&I(arguments[1],bt)){var a=arguments[0],l=arguments[1];return a instanceof $t?l.add(a):a.apply(new wr(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&I(arguments[0],bt)&&I(arguments[1],bt)){for(var u=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();wr.getLines(p,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&I(arguments[1],bt)){var f=arguments[1],d=arguments[2];return arguments[0].apply(new wr(f,d)),f}}};var Tr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Tr.prototype.locateInternal=function(){if(arguments[0]instanceof w&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return A.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===A.EXTERIOR)return A.EXTERIOR;if(r===A.BOUNDARY)return A.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===A.INTERIOR)return A.EXTERIOR;if(s===A.BOUNDARY)return A.BOUNDARY}return A.INTERIOR}if(arguments[0]instanceof w&&arguments[1]instanceof $t){var a=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(a))return A.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!a.equals(u[0])&&!a.equals(u[u.length-1])?at.isOnLine(a,u)?A.INTERIOR:A.EXTERIOR:A.BOUNDARY}if(arguments[0]instanceof w&&arguments[1]instanceof Zt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?A.INTERIOR:A.EXTERIOR}},Tr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):A.EXTERIOR},Tr.prototype.intersects=function(t,e){return this.locate(t,e)!==A.EXTERIOR},Tr.prototype.updateLocationInfo=function(t){t===A.INTERIOR&&(this._isIn=!0),t===A.BOUNDARY&&this._numBoundaries++},Tr.prototype.computeLocation=function(t,e){if(e instanceof Zt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ht)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof zt)for(var l=new jn(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Tr.prototype.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:e instanceof $t||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?A.BOUNDARY:this._numBoundaries>0||this._isIn?A.INTERIOR:A.EXTERIOR)},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var Mr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Rr={INSIDE_AREA:{configurable:!0}};Mr.prototype.isInsideArea=function(){return this._segIndex===Mr.INSIDE_AREA},Mr.prototype.getCoordinate=function(){return this._pt},Mr.prototype.getGeometryComponent=function(){return this._component},Mr.prototype.getSegmentIndex=function(){return this._segIndex},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Rr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Mr,Rr);var Ar=function(t){this._pts=t||null};Ar.prototype.filter=function(t){t instanceof Zt&&this._pts.add(t)},Ar.prototype.interfaces_=function(){return[Gt]},Ar.prototype.getClass=function(){return Ar},Ar.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Zt?Qe.singletonList(t):Ar.getPoints(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Zt?n.add(e):e instanceof zt&&e.apply(new Ar(n)),n}};var Pr=function(){this._locations=null;var t=arguments[0];this._locations=t};Pr.prototype.filter=function(t){(t instanceof Zt||t instanceof $t||t instanceof Qt)&&this._locations.add(new Mr(t,0,t.getCoordinate()))},Pr.prototype.interfaces_=function(){return[Gt]},Pr.prototype.getClass=function(){return Pr},Pr.getLocations=function(t){var e=new St;return t.apply(new Pr(e)),e};var Ir=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Tr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Ir.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Sr.getPolygons(this._geom[e]);if(i.size()>0){var o=Pr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&I(arguments[0],Et)&&I(arguments[1],Et)){for(var s=arguments[0],a=arguments[1],l=arguments[2],u=0;u<s.size();u++)for(var c=s.get(u),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Mr&&arguments[1]instanceof Qt){var p=arguments[0],f=arguments[1],d=arguments[2],m=p.getCoordinate();if(A.EXTERIOR!==this._ptLocator.locate(m,f))return this._minDistance=0,d[0]=p,d[1]=new Mr(f,m),null}},Ir.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Ir.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=wr.getLines(this._geom[0]),n=wr.getLines(this._geom[1]),r=Ar.getPoints(this._geom[0]),i=Ar.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Ir.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ir.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ir.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ir.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof $t&&arguments[1]instanceof Zt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=at.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new mn(r[o],r[o+1]).closestPoint(i);n[0]=new Mr(t,o,a),n[1]=new Mr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof $t&&arguments[1]instanceof $t){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),p=u.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var m=at.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(m<this._minDistance){this._minDistance=m;var g=new mn(h[f],h[f+1]),y=new mn(p[d],p[d+1]),v=g.closestPoints(y);c[0]=new Mr(l,f,v[0]),c[1]=new Mr(u,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ir.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Mr(i,0,i.getCoordinate()),n[1]=new Mr(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ir.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ir.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.distance=function(t,e){return new Ir(t,e).distance()},Ir.isWithinDistance=function(t,e,n){return new Ir(t,e,n).distance()<=n},Ir.nearestPoints=function(t,e){return new Ir(t,e).nearestPoints()};var Cr=function(){this._pt=[new w,new w],this._distance=_.NaN,this._isNull=!0};Cr.prototype.getCoordinates=function(){return this._pt},Cr.prototype.getCoordinate=function(t){return this._pt[t]},Cr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Cr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Cr.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Cr.prototype.getDistance=function(){return this._distance},Cr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Or=function(){};Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.computeDistance=function(){if(arguments[2]instanceof Cr&&arguments[0]instanceof $t&&arguments[1]instanceof w)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new mn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Cr&&arguments[0]instanceof Qt&&arguments[1]instanceof w){var a=arguments[0],l=arguments[1],u=arguments[2];Or.computeDistance(a.getExteriorRing(),l,u);for(var c=0;c<a.getNumInteriorRing();c++)Or.computeDistance(a.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Cr&&arguments[0]instanceof ct&&arguments[1]instanceof w){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof $t)Or.computeDistance(h,p,f);else if(h instanceof Qt)Or.computeDistance(h,p,f);else if(h instanceof zt)for(var d=h,m=0;m<d.getNumGeometries();m++){var g=d.getGeometryN(m);Or.computeDistance(g,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Cr&&arguments[0]instanceof mn&&arguments[1]instanceof w){var y=arguments[1],v=arguments[2],_=arguments[0].closestPoint(y);v.setMinimum(_,y)}};var Nr=function(){this._g0=null,this._g1=null,this._ptDist=new Cr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Lr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Nr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Nr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Nr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Nr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Nr.prototype.computeOrientedDistance=function(t,e,n){var r=new Dr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Ur(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Nr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.distance=function(){if(2===arguments.length)return new Nr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Nr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Lr.MaxPointDistanceFilter.get=function(){return Dr},Lr.MaxDensifiedByFractionDistanceFilter.get=function(){return Ur},Object.defineProperties(Nr,Lr);var Dr=function(){this._maxPtDist=new Cr,this._minPtDist=new Cr,this._euclideanDist=new Or,this._geom=null;var t=arguments[0];this._geom=t};Dr.prototype.filter=function(t){this._minPtDist.initialize(),Or.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[ft]},Dr.prototype.getClass=function(){return Dr};var Ur=function(){this._maxPtDist=new Cr,this._minPtDist=new Cr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Ur.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,l=n.y+s*o,u=new w(a,l);this._minPtDist.initialize(),Or.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ur.prototype.isDone=function(){return!1},Ur.prototype.isGeometryChanged=function(){return!1},Ur.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ur.prototype.interfaces_=function(){return[jt]},Ur.prototype.getClass=function(){return Ur};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},kr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Nr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof zt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Ir(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new St,n=new wr(e),r=Sr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},kr.VERBOSE.get=function(){return!1},kr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,kr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new W(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,Gr);var jr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};jr.prototype.getCoordinates=function(){return this._pts},jr.prototype.size=function(){return this._pts.length},jr.prototype.getCoordinate=function(t){return this._pts[t]},jr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},jr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},jr.prototype.setData=function(t){this._data=t},jr.prototype.getData=function(){return this._data},jr.prototype.toString=function(){return J.toLineString(new le(this._pts))},jr.prototype.interfaces_=function(){return[pn]},jr.prototype.getClass=function(){return jr};var zr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new St,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zr.prototype.getIntersectionSegments=function(){return this._intSegments},zr.prototype.count=function(){return this._intersectionCount},zr.prototype.getIntersections=function(){return this._intersections},zr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zr.prototype.interfaces_=function(){return[qn]},zr.prototype.getClass=function(){return zr},zr.createAllIntersectionsFinder=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e},zr.createAnyIntersectionFinder=function(t){return new zr(t)},zr.createIntersectionCounter=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Hr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Hr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Hr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hr.prototype.isValid=function(){return this.execute(),this._isValid},Hr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new En;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ae(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.computeIntersections=function(t){var e=new Hr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vr=function t(){this._nv=null;var e=arguments[0];this._nv=new Hr(t.toSegmentStrings(e))};Vr.prototype.checkValid=function(){this._nv.checkValid()},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.toSegmentStrings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new jr(r.getCoordinates(),r))}return e},Vr.checkValid=function(t){new Vr(t).checkValid()};var Xr=function(t){this._mapOp=t};Xr.prototype.map=function(t){for(var e=new St,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Xr.map=function(t,e){return new Xr(e).map(t)};var Wr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new St,this._resultLineList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Mi.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Mi.isResultOfOp(r,e)&&e===Mi.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Yr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new St;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Yr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Yr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Mi.INTERSECTION)){var r=n.getLabel();Mi.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Yr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var qr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};qr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},qr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new St,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new St;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},qr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},qr.prototype.getInputGeometry=function(){return this._inputGeom},qr.prototype.transformMultiLineString=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.transformCoordinates=function(t,e){return this.copy(t)},qr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},qr.prototype.transformMultiPoint=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.transformMultiPolygon=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.copy=function(t){return t.copy()},qr.prototype.transformGeometryCollection=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},qr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Zt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof $t)return this.transformLineString(t,null);if(t instanceof Ht)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof zt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},qr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr};var $r=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof $t&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};$r.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new w(o)),0===r&&this._isClosed&&t.set(t.size()-1,new w(o)))}},$r.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},$r.prototype.snapTo=function(t){var e=new Tt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$r.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new w(i),!1)}},$r.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},$r.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Kr=function(t){this._srcGeom=t||null},Zr={SNAP_PRECISION_FACTOR:{configurable:!0}};Kr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},Kr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&I(i,Jt)&&(i=r.buffer(0)),i},Kr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Kr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Kr(t);r[0]=i.snapTo(e,n);var o=new Kr(e);return r[1]=o.snapTo(r[0],n),r},Kr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Kr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Kr.computeOverlaySnapTolerance(i),Kr.computeOverlaySnapTolerance(o))}},Kr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kr.SNAP_PRECISION_FACTOR},Kr.snapToSelf=function(t,e,n){return new Kr(t).snapToSelf(e,n)},Zr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kr,Zr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new $r(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new w(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new w(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[jt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Kr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Mi.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Kr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Mi.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Mi.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Mi.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Mi.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Mi.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Mi.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Mi.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Mi.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Mi.DIFFERENCE)};var si=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};si.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var ai=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},li={INSERT:{configurable:!0},DELETE:{configurable:!0}};ai.prototype.isDelete=function(){return this._eventType===ai.DELETE},ai.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ai.prototype.getObject=function(){return this._obj},ai.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ai.prototype.getInsertEvent=function(){return this._insertEvent},ai.prototype.isInsert=function(){return this._eventType===ai.INSERT},ai.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ai.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ai.prototype.interfaces_=function(){return[x]},ai.prototype.getClass=function(){return ai},li.INSERT.get=function(){return 1},li.DELETE.get=function(){return 2},Object.defineProperties(ai,li);var ui=function(){};ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new St,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&I(arguments[0],Et)&&I(arguments[1],Et)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&I(arguments[0],Et)&&arguments[1]instanceof ci){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new si(n,i),s=new ai(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ai(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return J.toLineString(new w(this._min,0),new w(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},fi.NodeComparator.get=function(){return di},Object.defineProperties(pi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[S]},di.prototype.getClass=function(){return di};var mi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),gi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(){this._leaves=new St,this._root=null,this._level=0};yi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new St;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mi(t,e,n))},yi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){V.out.println(J.toLineString(new w(t._min,this._level),new w(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new gi(t.get(n),t.get(n+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){this._items=new St};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[$e]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var t=arguments[0];if(!I(t,Jt))throw new v("Argument must be Polygonal");this._index=new Ei(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new st(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Gn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return Ei},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[$e]},xi.prototype.getClass=function(){return xi};var Ei=function(){this._index=new yi;var t=arguments[0];this.init(t)};Ei.prototype.init=function(t){for(var e=wr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ei.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Ei.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Si=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Tr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;A.NONE,r.getLocation(t,Te.ON)===A.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,a=n||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Zt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,A.INTERIOR)}else if(arguments[0]instanceof w){var e=arguments[0];this.insertPoint(this._argIndex,e,A.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),A.EXTERIOR,A.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,A.INTERIOR,A.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],A.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],A.BOUNDARY)},e.prototype.addLineString=function(t){var e=Mt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Oe(this._argIndex,A.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===A.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Mt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;at.isCCW(r)&&(i=n,o=e);var s=new nr(r,new Oe(this._argIndex,A.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],A.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Oe(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof $t)this.addLineString(e);else if(e instanceof Zt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ht)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof zt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return I(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?A.BOUNDARY:A.INTERIOR},e}(Ve),wi=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Si(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,e,r),this._arg[1]=new Si(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,i,s),this._arg[1]=new Si(1,o,s)}};wi.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},wi.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ti=function(){};Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.map=function(){if(arguments[0]instanceof ct&&I(arguments[1],Ti.MapOp)){for(var t=arguments[0],e=arguments[1],n=new St,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(I(arguments[0],bt)&&I(arguments[1],Ti.MapOp)){for(var o=arguments[0],s=arguments[1],a=new St,l=o.iterator();l.hasNext();){var u=l.next(),c=s.map(u);null!==c&&a.add(c)}return a}},Ti.MapOp=function(){};var Mi=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Tr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Yn,this._resultPolyList=new St,this._resultLineList=new St,this._resultPointList=new St,this._graph=new Ve(new Xn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Oe(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new St;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==A.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new St,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new St;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Xe(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Yr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Te.RIGHT),i.getLocation(1,Te.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Te.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Te.LEFT,r.getLocation(i,Te.LEFT)),et.isTrue(!r.isNull(i,Te.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Te.RIGHT,r.getLocation(i,Te.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wi);Mi.overlayOp=function(t,e,n){return new Mi(t,e).getResultGeometry(n)},Mi.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Mi.createEmptyResult(Mi.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Xr.map(t,{interfaces_:function(){return[Ti.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Mi.INTERSECTION)},Mi.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Mi.createEmptyResult(Mi.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Mi.SYMDIFFERENCE)},Mi.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Mi.INTERSECTION:o=Math.min(r,i);break;case Mi.UNION:o=Math.max(r,i);break;case Mi.DIFFERENCE:o=r;break;case Mi.SYMDIFFERENCE:o=Math.max(r,i)}return o},Mi.createEmptyResult=function(t,e,n,r){var i=null;switch(Mi.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Mi.difference=function(t,e){return t.isEmpty()?Mi.createEmptyResult(Mi.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Mi.DIFFERENCE))},Mi.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Mi.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===A.BOUNDARY&&(i=A.INTERIOR),o===A.BOUNDARY&&(o=A.INTERIOR),s){case Mi.INTERSECTION:return i===A.INTERIOR&&o===A.INTERIOR;case Mi.UNION:return i===A.INTERIOR||o===A.INTERIOR;case Mi.DIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR;case Mi.SYMDIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR||i!==A.INTERIOR&&o===A.INTERIOR}return!1}},Mi.INTERSECTION=1,Mi.UNION=2,Mi.DIFFERENCE=3,Mi.SYMDIFFERENCE=4;var Ri=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Tr,this._seg=new mn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ri.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ri.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?A.BOUNDARY:this._ptLocator.locate(t,this._g)},Ri.prototype.extractLinework=function(t){var e=new Ai;t.apply(e);var n=e.getLinework(),r=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri};var Ai=function(){this._linework=null,this._linework=new St};Ai.prototype.getLinework=function(){return this._linework},Ai.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ai.prototype.interfaces_=function(){return[Gt]},Ai.prototype.getClass=function(){return Ai};var Pi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Pi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pi.prototype.getPoints=function(t){for(var e=new St,n=wr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Pi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,l=n*o/s,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new w(u-l,c+a);r.add(h)}if(this._doRight){var p=new w(u+l,c-a);r.add(p)}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var Ii=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new St;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ri(this._geom[0],this._boundaryDistanceTolerance),new Ri(this._geom[1],this._boundaryDistanceTolerance),new Ri(this._geom[2],this._boundaryDistanceTolerance)]},Ci={TOLERANCE:{configurable:!0}};Ii.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+A.toLocationSymbol(e[0])+" B:"+A.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+A.toLocationSymbol(e[2]))},Ii.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ii.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ii.hasLocation(this._location,A.BOUNDARY)||this.isValidResult(r,this._location)}},Ii.prototype.addTestPts=function(t){var e=new Pi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ii.prototype.isValidResult=function(t,e){var n=Mi.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===A.INTERIOR);return r||this.reportResult(t,e,n),r},Ii.prototype.getInvalidLocation=function(){return this._invalidLocation},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ii.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kr.computeSizeBasedSnapTolerance(t),Kr.computeSizeBasedSnapTolerance(e))},Ii.isValid=function(t,e,n,r){return new Ii(t,e,r).isValid(n)},Ci.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ii,Ci);var Oi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Oi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Oi.prototype.combine=function(){for(var t=new St,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.combine=function(){if(1===arguments.length)return new Oi(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Oi(Oi.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Oi(Oi.createList(n,r,i)).combine()}},Oi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Oi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new St;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new St;return s.add(r),s.add(i),s.add(o),s}};var Ni=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new St)},Li={STRTREE_NODE_CAPACITY:{configurable:!0}};Ni.prototype.reduceToGeometries=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next(),i=null;I(r,Et)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Ni.prototype.extractByEnvelope=function(t,e,n){for(var r=new St,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ni.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Oi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ni.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Ni.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ni.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ni.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ni.getGeometry(e,n),Ni.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Ni.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ni.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ni.prototype.unionActual=function(t,e){return Ni.restrictToPolygons(t.union(e))},Ni.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ni.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new St,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Oi.combine(r)},Ni.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.restrictToPolygons=function(t){if(I(t,Jt))return t;var e=Sr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Ni.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ni.union=function(t){return new Ni(t).union()},Li.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ni,Li);var Di=function(){};Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Mi.createEmptyResult(Mi.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Mi.UNION)},t.GeoJSONReader=Se,t.GeoJSONWriter=we,t.OverlayOp=Mi,t.UnionOp=Di,t.BufferOp=mr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},6369:function(t,e,n){var r;t=n.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,l=36,u=1,c=26,h=38,p=700,f=72,d=128,m="-",g=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-u,x=Math.floor,E=String.fromCharCode;function S(t){throw new RangeError(_[t])}function w(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function T(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+w((t=t.replace(v,".")).split("."),e).join(".")}function M(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function R(t){return w(t,(function(t){var e="";return t>65535&&(e+=E((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=E(t)})).join("")}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,n){var r=0;for(t=n?x(t/p):t>>1,t+=x(t/e);t>b*c>>1;r+=l)t=x(t/b);return x(r+(b+1)*t/(t+h))}function I(t){var e,n,r,i,o,s,h,p,g,y,v,_=[],b=t.length,E=0,w=d,T=f;for((n=t.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&S("not-basic"),_.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=E,s=1,h=l;i>=b&&S("invalid-input"),((p=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:l)>=l||p>x((a-E)/s))&&S("overflow"),E+=p*s,!(p<(g=h<=T?u:h>=T+c?c:h-T));h+=l)s>x(a/(y=l-g))&&S("overflow"),s*=y;T=P(E-o,e=_.length+1,0==o),x(E/e)>a-w&&S("overflow"),w+=x(E/e),E%=e,_.splice(E++,0,w)}return R(_)}function C(t){var e,n,r,i,o,s,h,p,g,y,v,_,b,w,T,R=[];for(_=(t=M(t)).length,e=d,n=0,o=f,s=0;s<_;++s)(v=t[s])<128&&R.push(E(v));for(r=i=R.length,i&&R.push(m);r<_;){for(h=a,s=0;s<_;++s)(v=t[s])>=e&&v<h&&(h=v);for(h-e>x((a-n)/(b=r+1))&&S("overflow"),n+=(h-e)*b,e=h,s=0;s<_;++s)if((v=t[s])<e&&++n>a&&S("overflow"),v==e){for(p=n,g=l;!(p<(y=g<=o?u:g>=o+c?c:g-o));g+=l)T=p-y,w=l-y,R.push(E(A(y+T%w,0))),p=x(T/w);R.push(E(A(p,0))),o=P(n,b,r==i),n=0,++r}++n,++e}return R.join("")}s={version:"1.4.1",ucs2:{decode:M,encode:R},decode:I,encode:C,toASCII:function(t){return T(t,(function(t){return y.test(t)?"xn--"+C(t):t}))},toUnicode:function(t){return T(t,(function(t){return g.test(t)?I(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},2951:t=>{"use strict";var e=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";t.exports={default:i,formatters:{RFC1738:function(t){return e.call(t,n,"+")},RFC3986:function(t){return String(t)}},RFC1738:r,RFC3986:i}},7915:(t,e,n)=>{"use strict";var r=n(9034),i=n(1580),o=n(2951);t.exports={formats:o,parse:i,stringify:r}},1580:(t,e,n)=>{"use strict";var r=n(5838),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},l=function(t,e){return t&&"string"===typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},u=function(t,e,n,r){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(o),u=a?o.slice(0,a.index):o,c=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var h=0;n.depth>0&&null!==(a=s.exec(o))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+o.slice(a.index)+"]"),function(t,e,n,r){for(var i=r?e:l(e,n),o=t.length-1;o>=0;--o){var s,a=t[o];if("[]"===a&&n.parseArrays)s=n.allowEmptyArrays&&""===i?[]:[].concat(i);else{s=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=n.decodeDotInKeys?u.replace(/%2E/g,"."):u,h=parseInt(c,10);n.parseArrays||""!==c?!isNaN(h)&&a!==c&&String(h)===c&&h>=0&&n.parseArrays&&h<=n.arrayLimit?(s=[])[h]=i:"__proto__"!==c&&(s[c]=i):s={0:i}}i=s}return i}(c,e,n,r)}};t.exports=function(t,e){var n=function(t){if(!t)return s;if("undefined"!==typeof t.allowEmptyArrays&&"boolean"!==typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof t.decodeDotInKeys&&"boolean"!==typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&"undefined"!==typeof t.decoder&&"function"!==typeof t.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e="undefined"===typeof t.charset?s.charset:t.charset,n="undefined"===typeof t.duplicates?s.duplicates:t.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:"undefined"===typeof t.allowDots?!0===t.decodeDotInKeys||s.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"===typeof t.allowEmptyArrays?!!t.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:"boolean"===typeof t.allowPrototypes?t.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"===typeof t.allowSparse?t.allowSparse:s.allowSparse,arrayLimit:"number"===typeof t.arrayLimit?t.arrayLimit:s.arrayLimit,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:s.charsetSentinel,comma:"boolean"===typeof t.comma?t.comma:s.comma,decodeDotInKeys:"boolean"===typeof t.decodeDotInKeys?t.decodeDotInKeys:s.decodeDotInKeys,decoder:"function"===typeof t.decoder?t.decoder:s.decoder,delimiter:"string"===typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:s.delimiter,depth:"number"===typeof t.depth||!1===t.depth?+t.depth:s.depth,duplicates:n,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof t.interpretNumericEntities?t.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"===typeof t.parameterLimit?t.parameterLimit:s.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"===typeof t.plainObjects?t.plainObjects:s.plainObjects,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:s.strictNullHandling}}(e);if(""===t||null===t||"undefined"===typeof t)return n.plainObjects?Object.create(null):{};for(var c="string"===typeof t?function(t,e){var n,u={__proto__:null},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,h=e.parameterLimit===1/0?void 0:e.parameterLimit,p=c.split(e.delimiter,h),f=-1,d=e.charset;if(e.charsetSentinel)for(n=0;n<p.length;++n)0===p[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[n]?d="utf-8":"utf8=%26%2310003%3B"===p[n]&&(d="iso-8859-1"),f=n,n=p.length);for(n=0;n<p.length;++n)if(n!==f){var m,g,y=p[n],v=y.indexOf("]="),_=-1===v?y.indexOf("="):v+1;-1===_?(m=e.decoder(y,s.decoder,d,"key"),g=e.strictNullHandling?null:""):(m=e.decoder(y.slice(0,_),s.decoder,d,"key"),g=r.maybeMap(l(y.slice(_+1),e),(function(t){return e.decoder(t,s.decoder,d,"value")}))),g&&e.interpretNumericEntities&&"iso-8859-1"===d&&(g=a(g)),y.indexOf("[]=")>-1&&(g=o(g)?[g]:g);var b=i.call(u,m);b&&"combine"===e.duplicates?u[m]=r.combine(u[m],g):b&&"last"!==e.duplicates||(u[m]=g)}return u}(t,n):t,h=n.plainObjects?Object.create(null):{},p=Object.keys(c),f=0;f<p.length;++f){var d=p[f],m=u(d,c[d],n,"string"===typeof t);h=r.merge(h,m,n)}return!0===n.allowSparse?h:r.compact(h)}},9034:(t,e,n)=>{"use strict";var r=n(581),i=n(5838),o=n(2951),s=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},l=Array.isArray,u=Array.prototype.push,c=function(t,e){u.apply(t,l(e)?e:[e])},h=Date.prototype.toISOString,p=o.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:i.encode,encodeValuesOnly:!1,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(t){return h.call(t)},skipNulls:!1,strictNullHandling:!1},d={},m=function t(e,n,o,s,a,u,h,p,m,g,y,v,_,b,x,E,S,w){for(var T,M=e,R=w,A=0,P=!1;void 0!==(R=R.get(d))&&!P;){var I=R.get(e);if(A+=1,"undefined"!==typeof I){if(I===A)throw new RangeError("Cyclic object value");P=!0}"undefined"===typeof R.get(d)&&(A=0)}if("function"===typeof g?M=g(n,M):M instanceof Date?M=_(M):"comma"===o&&l(M)&&(M=i.maybeMap(M,(function(t){return t instanceof Date?_(t):t}))),null===M){if(u)return m&&!E?m(n,f.encoder,S,"key",b):n;M=""}if("string"===typeof(T=M)||"number"===typeof T||"boolean"===typeof T||"symbol"===typeof T||"bigint"===typeof T||i.isBuffer(M))return m?[x(E?n:m(n,f.encoder,S,"key",b))+"="+x(m(M,f.encoder,S,"value",b))]:[x(n)+"="+x(String(M))];var C,O=[];if("undefined"===typeof M)return O;if("comma"===o&&l(M))E&&m&&(M=i.maybeMap(M,m)),C=[{value:M.length>0?M.join(",")||null:void 0}];else if(l(g))C=g;else{var N=Object.keys(M);C=y?N.sort(y):N}var L=p?n.replace(/\./g,"%2E"):n,D=s&&l(M)&&1===M.length?L+"[]":L;if(a&&l(M)&&0===M.length)return D+"[]";for(var U=0;U<C.length;++U){var F=C[U],k="object"===typeof F&&"undefined"!==typeof F.value?F.value:M[F];if(!h||null!==k){var B=v&&p?F.replace(/\./g,"%2E"):F,G=l(M)?"function"===typeof o?o(D,B):D:D+(v?"."+B:"["+B+"]");w.set(e,A);var j=r();j.set(d,w),c(O,t(k,G,o,s,a,u,h,p,"comma"===o&&E&&l(M)?null:m,g,y,v,_,b,x,E,S,j))}}return O};t.exports=function(t,e){var n,i=t,u=function(t){if(!t)return f;if("undefined"!==typeof t.allowEmptyArrays&&"boolean"!==typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof t.encodeDotInKeys&&"boolean"!==typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&"undefined"!==typeof t.encoder&&"function"!==typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if("undefined"!==typeof t.format){if(!s.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r,i=o.formatters[n],u=f.filter;if(("function"===typeof t.filter||l(t.filter))&&(u=t.filter),r=t.arrayFormat in a?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":f.arrayFormat,"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c="undefined"===typeof t.allowDots?!0===t.encodeDotInKeys||f.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"===typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:c,allowEmptyArrays:"boolean"===typeof t.allowEmptyArrays?!!t.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:"undefined"===typeof t.delimiter?f.delimiter:t.delimiter,encode:"boolean"===typeof t.encode?t.encode:f.encode,encodeDotInKeys:"boolean"===typeof t.encodeDotInKeys?t.encodeDotInKeys:f.encodeDotInKeys,encoder:"function"===typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:u,format:n,formatter:i,serializeDate:"function"===typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"===typeof t.sort?t.sort:null,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}}(e);"function"===typeof u.filter?i=(0,u.filter)("",i):l(u.filter)&&(n=u.filter);var h=[];if("object"!==typeof i||null===i)return"";var p=a[u.arrayFormat],d="comma"===p&&u.commaRoundTrip;n||(n=Object.keys(i)),u.sort&&n.sort(u.sort);for(var g=r(),y=0;y<n.length;++y){var v=n[y];u.skipNulls&&null===i[v]||c(h,m(i[v],v,p,d,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var _=h.join(u.delimiter),b=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),_.length>0?b+_:""}},5838:(t,e,n)=>{"use strict";var r=n(2951),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!==typeof t[r]&&(n[r]=t[r]);return n},l=1024;t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],s=i.obj[i.prop],a=Object.keys(s),l=0;l<a.length;++l){var u=a[l],c=s[u];"object"===typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:s,prop:u}),n.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(t,e,n,i,o){if(0===t.length)return t;var a=t;if("symbol"===typeof t?a=Symbol.prototype.toString.call(t):"string"!==typeof t&&(a=String(t)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var u="",c=0;c<a.length;c+=l){for(var h=a.length>=l?a.slice(c,c+l):a,p=[],f=0;f<h.length;++f){var d=h.charCodeAt(f);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||o===r.RFC1738&&(40===d||41===d)?p[p.length]=h.charAt(f):d<128?p[p.length]=s[d]:d<2048?p[p.length]=s[192|d>>6]+s[128|63&d]:d<55296||d>=57344?p[p.length]=s[224|d>>12]+s[128|d>>6&63]+s[128|63&d]:(f+=1,d=65536+((1023&d)<<10|1023&h.charCodeAt(f)),p[p.length]=s[240|d>>18]+s[128|d>>12&63]+s[128|d>>6&63]+s[128|63&d])}u+=p.join("")}return u},isBuffer:function(t){return!(!t||"object"!==typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(o(t)){for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)},merge:function t(e,n,r){if(!n)return e;if("object"!==typeof n){if(o(e))e.push(n);else{if(!e||"object"!==typeof e)return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!==typeof e)return[e].concat(n);var s=e;return o(e)&&!o(n)&&(s=a(e,r)),o(e)&&o(n)?(n.forEach((function(n,o){if(i.call(e,o)){var s=e[o];s&&"object"===typeof s&&n&&"object"===typeof n?e[o]=t(s,n,r):e.push(n)}else e[o]=n})),e):Object.keys(n).reduce((function(e,o){var s=n[o];return i.call(e,o)?e[o]=t(e[o],s,r):e[o]=s,e}),s)}}},2114:(t,e,n)=>{"use strict";var r=n(6369);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(7915);function v(t,e,n){if(t&&"object"===typeof t&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}i.prototype.parse=function(t,e,n){if("string"!==typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=-1!==i&&i<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var v=t=l.join(s);if(v=v.trim(),!n&&1===t.split("#").length){var _=a.exec(v);if(_)return this.path=v,this.href=v,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=o.exec(v);if(b){var x=(b=b[0]).toLowerCase();this.protocol=x,v=v.substr(b.length)}if(n||b||v.match(/^\/\/[^@/]+@[^@/]+/)){var E="//"===v.substr(0,2);!E||b&&m[b]||(v=v.substr(2),this.slashes=!0)}if(!m[b]&&(E||b&&!g[b])){for(var S,w,T=-1,M=0;M<h.length;M++){-1!==(R=v.indexOf(h[M]))&&(-1===T||R<T)&&(T=R)}-1!==(w=-1===T?v.lastIndexOf("@"):v.lastIndexOf("@",T))&&(S=v.slice(0,w),v=v.slice(w+1),this.auth=decodeURIComponent(S)),T=-1;for(M=0;M<c.length;M++){var R;-1!==(R=v.indexOf(c[M]))&&(-1===T||R<T)&&(T=R)}-1===T&&(T=v.length),this.host=v.slice(0,T),v=v.slice(T),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),I=(M=0,P.length);M<I;M++){var C=P[M];if(C&&!C.match(p)){for(var O="",N=0,L=C.length;N<L;N++)C.charCodeAt(N)>127?O+="x":O+=C[N];if(!O.match(p)){var D=P.slice(0,M),U=P.slice(M+1),F=C.match(f);F&&(D.push(F[1]),U.unshift(F[2])),U.length&&(v="/"+U.join(".")+v),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var k=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+k,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!d[x])for(M=0,I=u.length;M<I;M++){var G=u[M];if(-1!==v.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),v=v.split(G).join(j)}}var z=v.indexOf("#");-1!==z&&(this.hash=v.substr(z),v=v.slice(0,z));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),e&&(this.query=y.parse(this.query)),v=v.slice(0,H)):e&&(this.search="",this.query={}),v&&(this.pathname=v),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var V=this.search||"";this.path=k+V}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"===typeof this.query&&Object.keys(this.query).length&&(o=y.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if("string"===typeof t){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var u=a[l];"protocol"!==u&&(n[u]=t[u])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),h=0;h<c.length;h++){var p=c[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var d=n.pathname||"",y=n.search||"";n.path=d+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=_||v||n.host&&t.pathname,x=b,E=n.pathname&&n.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===E[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),n.search=t.search,n.query=t.query;else if(null!=t.search){if(S)n.host=E.shift(),n.hostname=n.host,(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.hostname=A.shift(),n.host=n.hostname);return n.search=t.search,n.query=t.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=E.slice(-1)[0],T=(n.host||t.host||E.length>1)&&("."===w||".."===w)||""===w,M=0,R=E.length;R>=0;R--)"."===(w=E[R])?E.splice(R,1):".."===w?(E.splice(R,1),M++):M&&(E.splice(R,1),M--);if(!b&&!x)for(;M--;M)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),T&&"/"!==E.join("/").substr(-1)&&E.push("");var A,P=""===E[0]||E[0]&&"/"===E[0].charAt(0);S&&(n.hostname=P?"":E.length?E.shift():"",n.host=n.hostname,(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.hostname=A.shift(),n.host=n.hostname));return(b=b||n.host&&E.length)&&!P&&E.unshift(""),E.length>0?n.pathname=E.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.Qc=v,e.DB=function(t,e){return v(t,!1,!0).resolve(e)},e.WU=function(t){return"string"===typeof t&&(t=v(t)),t instanceof i?t.format():i.prototype.format.call(t)}},4654:()=>{}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&i&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>r[t]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="/",(()=>{"use strict";var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>Me,hasStandardBrowserEnv:()=>Re,hasStandardBrowserWebWorkerEnv:()=>Pe});var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>I_,AddEquation:()=>$v,AddOperation:()=>T_,AdditiveAnimationBlendMode:()=>fx,AdditiveBlending:()=>Xv,AgXToneMapping:()=>O_,AlphaFormat:()=>fb,AlwaysCompare:()=>Qx,AlwaysDepth:()=>g_,AlwaysStencilFunc:()=>Xx,AmbientLight:()=>kO,AnimationAction:()=>RN,AnimationClip:()=>lO,AnimationLoader:()=>yO,AnimationMixer:()=>PN,AnimationObjectGroup:()=>MN,AnimationUtils:()=>$C,ArcCurve:()=>fI,ArrayCamera:()=>mA,ArrowHelper:()=>xL,AttachedBindMode:()=>L_,Audio:()=>hN,AudioAnalyser:()=>yN,AudioContext:()=>JO,AudioListener:()=>cN,AudioLoader:()=>QO,AxesHelper:()=>EL,BackSide:()=>jv,BasicDepthPacking:()=>yx,BasicShadowMap:()=>Uv,BatchedMesh:()=>FP,Bone:()=>aP,BooleanKeyframeTrack:()=>eO,Box2:()=>zN,Box3:()=>sS,Box3Helper:()=>gL,BoxGeometry:()=>yT,BoxHelper:()=>mL,BufferAttribute:()=>Lw,BufferGeometry:()=>Zw,BufferGeometryLoader:()=>XO,ByteType:()=>nb,Cache:()=>cO,Camera:()=>ST,CameraHelper:()=>pL,CanvasTexture:()=>cI,CapsuleGeometry:()=>LI,CatmullRomCurve3:()=>_I,CineonToneMapping:()=>P_,CircleGeometry:()=>DI,ClampToEdgeWrapping:()=>H_,Clock:()=>iN,Color:()=>Ew,ColorKeyframeTrack:()=>nO,ColorManagement:()=>BE,CompressedArrayTexture:()=>lI,CompressedCubeTexture:()=>uI,CompressedTexture:()=>aI,CompressedTextureLoader:()=>vO,ConeGeometry:()=>FI,ConstantAlphaFactor:()=>f_,ConstantColorFactor:()=>h_,CubeCamera:()=>PT,CubeReflectionMapping:()=>F_,CubeRefractionMapping:()=>k_,CubeTexture:()=>IT,CubeTextureLoader:()=>bO,CubeUVReflectionMapping:()=>j_,CubicBezierCurve:()=>SI,CubicBezierCurve3:()=>wI,CubicInterpolant:()=>ZC,CullFaceBack:()=>Nv,CullFaceFront:()=>Lv,CullFaceFrontBack:()=>Dv,CullFaceNone:()=>Ov,Curve:()=>hI,CurvePath:()=>CI,CustomBlending:()=>qv,CustomToneMapping:()=>C_,CylinderGeometry:()=>UI,Cylindrical:()=>GN,Data3DTexture:()=>tS,DataArrayTexture:()=>JE,DataTexture:()=>lP,DataTextureLoader:()=>xO,DataUtils:()=>Cw,DecrementStencilOp:()=>Lx,DecrementWrapStencilOp:()=>Ux,DefaultLoadingManager:()=>pO,DepthFormat:()=>vb,DepthStencilFormat:()=>_b,DepthTexture:()=>wM,DetachedBindMode:()=>D_,DirectionalLight:()=>FO,DirectionalLightHelper:()=>uL,DiscreteInterpolant:()=>QC,DisplayP3ColorSpace:()=>wx,DodecahedronGeometry:()=>BI,DoubleSide:()=>zv,DstAlphaFactor:()=>s_,DstColorFactor:()=>l_,DynamicCopyUsage:()=>aE,DynamicDrawUsage:()=>eE,DynamicReadUsage:()=>iE,EdgesGeometry:()=>VI,EllipseCurve:()=>pI,EqualCompare:()=>qx,EqualDepth:()=>__,EqualStencilFunc:()=>Gx,EquirectangularReflectionMapping:()=>B_,EquirectangularRefractionMapping:()=>G_,Euler:()=>HS,EventDispatcher:()=>fE,ExtrudeGeometry:()=>bC,FileLoader:()=>gO,Float16BufferAttribute:()=>zw,Float32BufferAttribute:()=>Hw,FloatType:()=>ab,Fog:()=>RA,FogExp2:()=>MA,FramebufferTexture:()=>sI,FrontSide:()=>Gv,Frustum:()=>kT,GLBufferAttribute:()=>LN,GLSL1:()=>uE,GLSL3:()=>cE,GreaterCompare:()=>Kx,GreaterDepth:()=>x_,GreaterEqualCompare:()=>Jx,GreaterEqualDepth:()=>b_,GreaterEqualStencilFunc:()=>Vx,GreaterStencilFunc:()=>zx,GridHelper:()=>iL,Group:()=>gA,HalfFloatType:()=>lb,HemisphereLight:()=>wO,HemisphereLightHelper:()=>rL,IcosahedronGeometry:()=>EC,ImageBitmapLoader:()=>KO,ImageLoader:()=>_O,ImageUtils:()=>HE,IncrementStencilOp:()=>Nx,IncrementWrapStencilOp:()=>Dx,InstancedBufferAttribute:()=>pP,InstancedBufferGeometry:()=>VO,InstancedInterleavedBuffer:()=>NN,InstancedMesh:()=>bP,Int16BufferAttribute:()=>kw,Int32BufferAttribute:()=>Gw,Int8BufferAttribute:()=>Dw,IntType:()=>ob,InterleavedBuffer:()=>PA,InterleavedBufferAttribute:()=>CA,Interpolant:()=>KC,InterpolateDiscrete:()=>sx,InterpolateLinear:()=>ax,InterpolateSmooth:()=>lx,InvertStencilOp:()=>Fx,KeepStencilOp:()=>Cx,KeyframeTrack:()=>tO,LOD:()=>KA,LatheGeometry:()=>NI,Layers:()=>VS,LessCompare:()=>Yx,LessDepth:()=>y_,LessEqualCompare:()=>$x,LessEqualDepth:()=>v_,LessEqualStencilFunc:()=>jx,LessStencilFunc:()=>Bx,Light:()=>SO,LightProbe:()=>jO,Line:()=>WP,Line3:()=>XN,LineBasicMaterial:()=>kP,LineCurve:()=>TI,LineCurve3:()=>MI,LineDashedMaterial:()=>HC,LineLoop:()=>ZP,LineSegments:()=>KP,LinearDisplayP3ColorSpace:()=>Tx,LinearFilter:()=>K_,LinearInterpolant:()=>JC,LinearMipMapLinearFilter:()=>tb,LinearMipMapNearestFilter:()=>J_,LinearMipmapLinearFilter:()=>Q_,LinearMipmapNearestFilter:()=>Z_,LinearSRGBColorSpace:()=>Sx,LinearToneMapping:()=>R_,LinearTransfer:()=>Mx,Loader:()=>fO,LoaderUtils:()=>HO,LoadingManager:()=>hO,LoopOnce:()=>rx,LoopPingPong:()=>ox,LoopRepeat:()=>ix,LuminanceAlphaFormat:()=>yb,LuminanceFormat:()=>gb,MOUSE:()=>Iv,Material:()=>Tw,MaterialLoader:()=>zO,MathUtils:()=>wE,Matrix3:()=>ME,Matrix4:()=>NS,MaxEquation:()=>Qv,Mesh:()=>mT,MeshBasicMaterial:()=>Mw,MeshDepthMaterial:()=>uA,MeshDistanceMaterial:()=>cA,MeshLambertMaterial:()=>jC,MeshMatcapMaterial:()=>zC,MeshNormalMaterial:()=>GC,MeshPhongMaterial:()=>kC,MeshPhysicalMaterial:()=>FC,MeshStandardMaterial:()=>UC,MeshToonMaterial:()=>BC,MinEquation:()=>Jv,MirroredRepeatWrapping:()=>V_,MixOperation:()=>w_,MultiplyBlending:()=>Yv,MultiplyOperation:()=>S_,NearestFilter:()=>X_,NearestMipMapLinearFilter:()=>$_,NearestMipMapNearestFilter:()=>Y_,NearestMipmapLinearFilter:()=>q_,NearestMipmapNearestFilter:()=>W_,NeutralToneMapping:()=>N_,NeverCompare:()=>Wx,NeverDepth:()=>m_,NeverStencilFunc:()=>kx,NoBlending:()=>Hv,NoColorSpace:()=>xx,NoToneMapping:()=>M_,NormalAnimationBlendMode:()=>px,NormalBlending:()=>Vv,NotEqualCompare:()=>Zx,NotEqualDepth:()=>E_,NotEqualStencilFunc:()=>Hx,NumberKeyframeTrack:()=>rO,Object3D:()=>sw,ObjectLoader:()=>WO,ObjectSpaceNormalMap:()=>bx,OctahedronGeometry:()=>SC,OneFactor:()=>e_,OneMinusConstantAlphaFactor:()=>d_,OneMinusConstantColorFactor:()=>p_,OneMinusDstAlphaFactor:()=>a_,OneMinusDstColorFactor:()=>u_,OneMinusSrcAlphaFactor:()=>o_,OneMinusSrcColorFactor:()=>r_,OrthographicCamera:()=>tM,P3Primaries:()=>Px,PCFShadowMap:()=>Fv,PCFSoftShadowMap:()=>kv,PMREMGenerator:()=>pM,Path:()=>OI,PerspectiveCamera:()=>RT,Plane:()=>DT,PlaneGeometry:()=>jT,PlaneHelper:()=>yL,PointLight:()=>DO,PointLightHelper:()=>QN,Points:()=>rI,PointsMaterial:()=>JP,PolarGridHelper:()=>oL,PolyhedronGeometry:()=>kI,PositionalAudio:()=>gN,PropertyBinding:()=>TN,PropertyMixer:()=>vN,QuadraticBezierCurve:()=>RI,QuadraticBezierCurve3:()=>AI,Quaternion:()=>nS,QuaternionKeyframeTrack:()=>oO,QuaternionLinearInterpolant:()=>iO,RED_GREEN_RGTC2_Format:()=>ex,RED_RGTC1_Format:()=>Qb,REVISION:()=>Pv,RGBADepthPacking:()=>vx,RGBAFormat:()=>mb,RGBAIntegerFormat:()=>wb,RGBA_ASTC_10x10_Format:()=>Yb,RGBA_ASTC_10x5_Format:()=>Vb,RGBA_ASTC_10x6_Format:()=>Xb,RGBA_ASTC_10x8_Format:()=>Wb,RGBA_ASTC_12x10_Format:()=>qb,RGBA_ASTC_12x12_Format:()=>$b,RGBA_ASTC_4x4_Format:()=>Ub,RGBA_ASTC_5x4_Format:()=>Fb,RGBA_ASTC_5x5_Format:()=>kb,RGBA_ASTC_6x5_Format:()=>Bb,RGBA_ASTC_6x6_Format:()=>Gb,RGBA_ASTC_8x5_Format:()=>jb,RGBA_ASTC_8x6_Format:()=>zb,RGBA_ASTC_8x8_Format:()=>Hb,RGBA_BPTC_Format:()=>Kb,RGBA_ETC2_EAC_Format:()=>Db,RGBA_PVRTC_2BPPV1_Format:()=>Ob,RGBA_PVRTC_4BPPV1_Format:()=>Cb,RGBA_S3TC_DXT1_Format:()=>Mb,RGBA_S3TC_DXT3_Format:()=>Rb,RGBA_S3TC_DXT5_Format:()=>Ab,RGBFormat:()=>db,RGB_BPTC_SIGNED_Format:()=>Zb,RGB_BPTC_UNSIGNED_Format:()=>Jb,RGB_ETC1_Format:()=>Nb,RGB_ETC2_Format:()=>Lb,RGB_PVRTC_2BPPV1_Format:()=>Ib,RGB_PVRTC_4BPPV1_Format:()=>Pb,RGB_S3TC_DXT1_Format:()=>Tb,RGFormat:()=>Eb,RGIntegerFormat:()=>Sb,RawShaderMaterial:()=>DC,Ray:()=>OS,Raycaster:()=>UN,Rec709Primaries:()=>Ax,RectAreaLight:()=>BO,RedFormat:()=>bb,RedIntegerFormat:()=>xb,ReinhardToneMapping:()=>A_,RenderTarget:()=>KE,RepeatWrapping:()=>z_,ReplaceStencilOp:()=>Ox,ReverseSubtractEquation:()=>Zv,RingGeometry:()=>wC,SIGNED_RED_GREEN_RGTC2_Format:()=>nx,SIGNED_RED_RGTC1_Format:()=>tx,SRGBColorSpace:()=>Ex,SRGBTransfer:()=>Rx,Scene:()=>AA,ShaderChunk:()=>zT,ShaderLib:()=>VT,ShaderMaterial:()=>ET,ShadowMaterial:()=>LC,Shape:()=>XI,ShapeGeometry:()=>TC,ShapePath:()=>SL,ShapeUtils:()=>yC,ShortType:()=>rb,Skeleton:()=>hP,SkeletonHelper:()=>ZN,SkinnedMesh:()=>sP,Source:()=>XE,Sphere:()=>wS,SphereGeometry:()=>MC,Spherical:()=>BN,SphericalHarmonics3:()=>GO,SplineCurve:()=>PI,SpotLight:()=>IO,SpotLightHelper:()=>YN,Sprite:()=>WA,SpriteMaterial:()=>OA,SrcAlphaFactor:()=>i_,SrcAlphaSaturateFactor:()=>c_,SrcColorFactor:()=>n_,StaticCopyUsage:()=>sE,StaticDrawUsage:()=>tE,StaticReadUsage:()=>rE,StereoCamera:()=>rN,StreamCopyUsage:()=>lE,StreamDrawUsage:()=>nE,StreamReadUsage:()=>oE,StringKeyframeTrack:()=>sO,SubtractEquation:()=>Kv,SubtractiveBlending:()=>Wv,TOUCH:()=>Cv,TangentSpaceNormalMap:()=>_x,TetrahedronGeometry:()=>RC,Texture:()=>qE,TextureLoader:()=>EO,TorusGeometry:()=>AC,TorusKnotGeometry:()=>PC,Triangle:()=>yw,TriangleFanDrawMode:()=>gx,TriangleStripDrawMode:()=>mx,TrianglesDrawMode:()=>dx,TubeGeometry:()=>IC,UVMapping:()=>U_,Uint16BufferAttribute:()=>Bw,Uint32BufferAttribute:()=>jw,Uint8BufferAttribute:()=>Uw,Uint8ClampedBufferAttribute:()=>Fw,Uniform:()=>IN,UniformsGroup:()=>ON,UniformsLib:()=>HT,UniformsUtils:()=>xT,UnsignedByteType:()=>eb,UnsignedInt248Type:()=>hb,UnsignedInt5999Type:()=>pb,UnsignedIntType:()=>sb,UnsignedShort4444Type:()=>ub,UnsignedShort5551Type:()=>cb,UnsignedShortType:()=>ib,VSMShadowMap:()=>Bv,Vector2:()=>TE,Vector3:()=>rS,Vector4:()=>$E,VectorKeyframeTrack:()=>aO,VideoTexture:()=>oI,WebGL3DRenderTarget:()=>eS,WebGLArrayRenderTarget:()=>QE,WebGLCoordinateSystem:()=>hE,WebGLCubeRenderTarget:()=>CT,WebGLMultipleRenderTargets:()=>wL,WebGLRenderTarget:()=>ZE,WebGLRenderer:()=>TA,WebGLUtils:()=>dA,WebGPUCoordinateSystem:()=>pE,WireframeGeometry:()=>CC,WrapAroundEnding:()=>hx,ZeroCurvatureEnding:()=>ux,ZeroFactor:()=>t_,ZeroSlopeEnding:()=>cx,ZeroStencilOp:()=>Ix,createCanvasElement:()=>OE});var r,i=n(2791),o=n.t(i,2),s=n(1250),a=n(4164),l=n.t(a,2);function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(r||(r={}));const c="popstate";function h(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function p(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(Dn){}}}function f(t,e){return{usr:t.state,key:t.key,idx:e}}function d(t,e,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?g(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function m(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function g(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function y(t,e,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,l=r.Pop,p=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){l=r.Pop;let t=y(),e=null==t?null:t-g;g=t,p&&p({action:l,location:b.location,delta:e})}function _(t){let e="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof t?t:m(t);return h(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,a.replaceState(u({},a.state,{idx:g}),""));let b={get action(){return l},get location(){return t(o,a)},listen(t){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(c,v),p=t,()=>{o.removeEventListener(c,v),p=null}},createHref:t=>e(o,t),createURL:_,encodeLocation(t){let e=_(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){l=r.Push;let i=d(b.location,t,e);n&&n(i,t),g=y()+1;let u=f(i,g),c=b.createHref(i);try{a.pushState(u,"",c)}catch(oU){if(oU instanceof DOMException&&"DataCloneError"===oU.name)throw oU;o.location.assign(c)}s&&p&&p({action:l,location:b.location,delta:1})},replace:function(t,e){l=r.Replace;let i=d(b.location,t,e);n&&n(i,t),g=y();let o=f(i,g),u=b.createHref(i);a.replaceState(o,"",u),s&&p&&p({action:l,location:b.location,delta:0})},go:t=>a.go(t)};return b}var v;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function _(t,e,n){void 0===n&&(n="/");let r=N(("string"===typeof e?g(e):e).pathname||"/",n);if(null==r)return null;let i=b(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s)o=I(i[s],O(r));return o}function b(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let s={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};s.relativePath.startsWith("/")&&(h(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),l=n.concat(s);t.children&&t.children.length>0&&(h(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:P(a,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let r of x(t.path))i(t,e,r);else i(t,e)})),e}function x(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=x(r.join("/")),a=[];return a.push(...s.map((t=>""===t?o:[o,t].join("/")))),i&&a.push(...s),a.map((e=>t.startsWith("/")&&""===e?"/":e))}const E=/^:\w+$/,S=3,w=2,T=1,M=10,R=-2,A=t=>"*"===t;function P(t,e){let n=t.split("/"),r=n.length;return n.some(A)&&(r+=R),e&&(r+=w),n.filter((t=>!A(t))).reduce(((t,e)=>t+(E.test(e)?S:""===e?T:M)),r)}function I(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let t=n[s],a=s===n.length-1,l="/"===i?e:e.slice(i.length)||"/",u=C({path:t.relativePath,caseSensitive:t.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=t.route;o.push({params:r,pathname:F([i,u.pathname]),pathnameBase:k(F([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=F([i,u.pathnameBase]))}return o}function C(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);p("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((t,e,n)=>(r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(r.push({paramName:"*"}),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,e?void 0:"i");return[o,r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((t,e,n)=>{let{paramName:r,isOptional:i}=e;if("*"===r){let t=a[n]||"";s=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[n];return t[r]=i&&!l?void 0:function(t,e){try{return decodeURIComponent(t)}catch(oU){return p(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+oU+")."),t}}(l||"",r),t}),{});return{params:l,pathname:o,pathnameBase:s,pattern:t}}function O(t){try{return decodeURI(t)}catch(oU){return p(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+oU+")."),t}}function N(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function L(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function U(t,e,n,r){let i;void 0===r&&(r=!1),"string"===typeof t?i=g(t):(i=u({},t),h(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let o,s=""===t||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else if(r){let t=e[e.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t.pop();i.pathname=e.join("/")}o="/"+t.join("/")}else{let t=e.length-1;if(a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}o=t>=0?e[t]:"/"}let l=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof t?g(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:B(r),hash:G(i)}}(i,o),c=a&&"/"!==a&&a.endsWith("/"),p=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!p||(l.pathname+="/"),l}const F=t=>t.join("/").replace(/\/\/+/g,"/"),k=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),B=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",G=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function j(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const z=["post","put","patch","delete"],H=(new Set(z),["get",...z]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V.apply(this,arguments)}const X=i.createContext(null);const W=i.createContext(null);const Y=i.createContext(null);const q=i.createContext(null);const $=i.createContext({outlet:null,matches:[],isDataRoute:!1});const K=i.createContext(null);function Z(){return null!=i.useContext(q)}function J(){return Z()||h(!1),i.useContext(q).location}function Q(t){i.useContext(Y).static||i.useLayoutEffect(t)}function tt(){let{isDataRoute:t}=i.useContext($);return t?function(){let{router:t}=ct(lt.UseNavigateStable),e=pt(ut.UseNavigateStable),n=i.useRef(!1);return Q((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?t.navigate(r):t.navigate(r,V({fromRouteId:e},i)))}),[t,e])}():function(){Z()||h(!1);let t=i.useContext(X),{basename:e,navigator:n}=i.useContext(Y),{matches:r}=i.useContext($),{pathname:o}=J(),s=JSON.stringify(D(r).map((t=>t.pathnameBase))),a=i.useRef(!1);Q((()=>{a.current=!0}));let l=i.useCallback((function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let l=U(r,JSON.parse(s),o,"path"===i.relative);null==t&&"/"!==e&&(l.pathname="/"===l.pathname?e:F([e,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[e,n,s,o,t]);return l}()}function et(t,e){let{relative:n}=void 0===e?{}:e,{matches:r}=i.useContext($),{pathname:o}=J(),s=JSON.stringify(D(r).map((t=>t.pathnameBase)));return i.useMemo((()=>U(t,JSON.parse(s),o,"path"===n)),[t,s,o,n])}function nt(t,e,n){Z()||h(!1);let{navigator:o}=i.useContext(Y),{matches:s}=i.useContext($),a=s[s.length-1],l=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let c,p=J();if(e){var f;let t="string"===typeof e?g(e):e;"/"===u||(null==(f=t.pathname)?void 0:f.startsWith(u))||h(!1),c=t}else c=p;let d=c.pathname||"/",m=_(t,{pathname:"/"===u?d:d.slice(u.length)||"/"});let y=at(m&&m.map((t=>Object.assign({},t,{params:Object.assign({},l,t.params),pathname:F([u,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?u:F([u,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),s,n);return e&&y?i.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:r.Pop}},y):y}function rt(){let t=function(){var t;let e=i.useContext(K),n=ht(ut.UseRouteError),r=pt(ut.UseRouteError);if(e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=j(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},e),n?i.createElement("pre",{style:o},n):null,null)}const it=i.createElement(rt,null);class ot extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error?i.createElement($.Provider,{value:this.props.routeContext},i.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function st(t){let{routeContext:e,match:n,children:r}=t,o=i.useContext(X);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement($.Provider,{value:e},r)}function at(t,e,n){var r;if(void 0===e&&(e=[]),void 0===n&&(n=null),null==t){var o;if(null==(o=n)||!o.errors)return null;t=n.matches}let s=t,a=null==(r=n)?void 0:r.errors;if(null!=a){let t=s.findIndex((t=>t.route.id&&(null==a?void 0:a[t.route.id])));t>=0||h(!1),s=s.slice(0,Math.min(s.length,t+1))}return s.reduceRight(((t,r,o)=>{let l=r.route.id?null==a?void 0:a[r.route.id]:null,u=null;n&&(u=r.route.errorElement||it);let c=e.concat(s.slice(0,o+1)),h=()=>{let e;return e=l?u:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:t,i.createElement(st,{match:r,routeContext:{outlet:t,matches:c,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(ot,{location:n.location,revalidation:n.revalidation,component:u,error:l,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}var lt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lt||{}),ut=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ut||{});function ct(t){let e=i.useContext(X);return e||h(!1),e}function ht(t){let e=i.useContext(W);return e||h(!1),e}function pt(t){let e=function(t){let e=i.useContext($);return e||h(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||h(!1),n.route.id}o.startTransition;function ft(t){h(!1)}function dt(t){let{basename:e="/",children:n=null,location:o,navigationType:s=r.Pop,navigator:a,static:l=!1}=t;Z()&&h(!1);let u=e.replace(/^\/*/,"/"),c=i.useMemo((()=>({basename:u,navigator:a,static:l})),[u,a,l]);"string"===typeof o&&(o=g(o));let{pathname:p="/",search:f="",hash:d="",state:m=null,key:y="default"}=o,v=i.useMemo((()=>{let t=N(p,u);return null==t?null:{location:{pathname:t,search:f,hash:d,state:m,key:y},navigationType:s}}),[u,p,f,d,m,y,s]);return null==v?null:i.createElement(Y.Provider,{value:c},i.createElement(q.Provider,{children:n,value:v}))}function mt(t){let{children:e,location:n}=t;return nt(gt(e),n)}new Promise((()=>{}));i.Component;function gt(t,e){void 0===e&&(e=[]);let n=[];return i.Children.forEach(t,((t,r)=>{if(!i.isValidElement(t))return;let o=[...e,r];if(t.type===i.Fragment)return void n.push.apply(n,gt(t.props.children,o));t.type!==ft&&h(!1),t.props.index&&t.props.children&&h(!1);let s={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=gt(t.props.children,o)),n.push(s)})),n}function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)}function vt(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _t=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const bt=o.startTransition;l.flushSync;function xt(t){let{basename:e,children:n,future:r,window:o}=t,s=i.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),y((function(t,e){let{pathname:n,search:r,hash:i}=t.location;return d("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:m(e)}),null,a)));let l=s.current,[u,c]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},p=i.useCallback((t=>{h&&bt?bt((()=>c(t))):c(t)}),[c,h]);return i.useLayoutEffect((()=>l.listen(p)),[l,p]),i.createElement(dt,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:l})}const Et="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,St=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wt=i.forwardRef((function(t,e){let n,{onClick:r,relative:o,reloadDocument:s,replace:a,state:l,target:u,to:c,preventScrollReset:p,unstable_viewTransition:f}=t,d=vt(t,_t),{basename:g}=i.useContext(Y),y=!1;if("string"===typeof c&&St.test(c)&&(n=c,Et))try{let t=new URL(window.location.href),e=c.startsWith("//")?new URL(t.protocol+c):new URL(c),n=N(e.pathname,g);e.origin===t.origin&&null!=n?c=n+e.search+e.hash:y=!0}catch(Dn){}let v=function(t,e){let{relative:n}=void 0===e?{}:e;Z()||h(!1);let{basename:r,navigator:o}=i.useContext(Y),{hash:s,pathname:a,search:l}=et(t,{relative:n}),u=a;return"/"!==r&&(u="/"===a?r:F([r,a])),o.createHref({pathname:u,search:l,hash:s})}(c,{relative:o}),_=function(t,e){let{target:n,replace:r,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===e?{}:e,u=tt(),c=J(),h=et(t,{relative:a});return i.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==r?r:m(c)===m(h);u(t,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[c,u,h,r,o,n,t,s,a,l])}(c,{replace:a,state:l,target:u,preventScrollReset:p,relative:o,unstable_viewTransition:f});return i.createElement("a",yt({},d,{href:n||v,onClick:y||s?r:function(t){r&&r(t),t.defaultPrevented||_(t)},ref:e,target:u}))}));var Tt,Mt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tt||(Tt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(Mt||(Mt={}));function Rt(t,e){return function(){return t.apply(e,arguments)}}const{toString:At}=Object.prototype,{getPrototypeOf:Pt}=Object,It=(Ct=Object.create(null),t=>{const e=At.call(t);return Ct[e]||(Ct[e]=e.slice(8,-1).toLowerCase())});var Ct;const Ot=t=>(t=t.toLowerCase(),e=>It(e)===t),Nt=t=>e=>typeof e===t,{isArray:Lt}=Array,Dt=Nt("undefined");const Ut=Ot("ArrayBuffer");const Ft=Nt("string"),kt=Nt("function"),Bt=Nt("number"),Gt=t=>null!==t&&"object"===typeof t,jt=t=>{if("object"!==It(t))return!1;const e=Pt(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},zt=Ot("Date"),Ht=Ot("File"),Vt=Ot("Blob"),Xt=Ot("FileList"),Wt=Ot("URLSearchParams");function Yt(t,e){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),Lt(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{const r=i?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let s;for(n=0;n<o;n++)s=r[n],e.call(null,t[s],s,t)}}function qt(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const $t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Kt=t=>!Dt(t)&&t!==$t;const Zt=(Jt="undefined"!==typeof Uint8Array&&Pt(Uint8Array),t=>Jt&&t instanceof Jt);var Jt;const Qt=Ot("HTMLFormElement"),te=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),ee=Ot("RegExp"),ne=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Yt(n,((n,i)=>{let o;!1!==(o=e(n,i,t))&&(r[i]=o||n)})),Object.defineProperties(t,r)},re="abcdefghijklmnopqrstuvwxyz",ie="0123456789",oe={DIGIT:ie,ALPHA:re,ALPHA_DIGIT:re+re.toUpperCase()+ie};const se=Ot("AsyncFunction"),ae={isArray:Lt,isArrayBuffer:Ut,isBuffer:function(t){return null!==t&&!Dt(t)&&null!==t.constructor&&!Dt(t.constructor)&&kt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||kt(t.append)&&("formdata"===(e=It(t))||"object"===e&&kt(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Ut(t.buffer),e},isString:Ft,isNumber:Bt,isBoolean:t=>!0===t||!1===t,isObject:Gt,isPlainObject:jt,isUndefined:Dt,isDate:zt,isFile:Ht,isBlob:Vt,isRegExp:ee,isFunction:kt,isStream:t=>Gt(t)&&kt(t.pipe),isURLSearchParams:Wt,isTypedArray:Zt,isFileList:Xt,forEach:Yt,merge:function t(){const{caseless:e}=Kt(this)&&this||{},n={},r=(r,i)=>{const o=e&&qt(n,i)||i;jt(n[o])&&jt(r)?n[o]=t(n[o],r):jt(r)?n[o]=t({},r):Lt(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Yt(arguments[i],r);return n},extend:function(t,e,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Yt(e,((e,r)=>{n&&kt(e)?t[r]=Rt(e,n):t[r]=e}),{allOwnKeys:r}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,o,s;const a={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],r&&!r(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&Pt(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:It,kindOfTest:Ot,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(Lt(t))return t;let e=t.length;if(!Bt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:Qt,hasOwnProperty:te,hasOwnProp:te,reduceDescriptors:ne,freezeMethods:t=>{ne(t,((e,n)=>{if(kt(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];kt(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return Lt(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:qt,global:$t,isContextDefined:Kt,ALPHABET:oe,generateString:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.ALPHA_DIGIT,n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&kt(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(Gt(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=Lt(t)?[]:{};return Yt(t,((t,e)=>{const o=n(t,r+1);!Dt(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:se,isThenable:t=>t&&(Gt(t)||kt(t))&&kt(t.then)&&kt(t.catch)};function le(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ae.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ue=le.prototype,ce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{ce[t]={value:t}})),Object.defineProperties(le,ce),Object.defineProperty(ue,"isAxiosError",{value:!0}),le.from=(t,e,n,r,i,o)=>{const s=Object.create(ue);return ae.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),le.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const he=le;function pe(t){return ae.isPlainObject(t)||ae.isArray(t)}function fe(t){return ae.endsWith(t,"[]")?t.slice(0,-2):t}function de(t,e,n){return t?t.concat(e).map((function(t,e){return t=fe(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const me=ae.toFlatObject(ae,{},null,(function(t){return/^is[A-Z]/.test(t)}));const ge=function(t,e,n){if(!ae.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=ae.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!ae.isUndefined(e[t])}))).metaTokens,i=n.visitor||u,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&ae.isSpecCompliantForm(e);if(!ae.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(ae.isDate(t))return t.toISOString();if(!a&&ae.isBlob(t))throw new he("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(t)||ae.isTypedArray(t)?a&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,i){let a=t;if(t&&!i&&"object"===typeof t)if(ae.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(ae.isArray(t)&&function(t){return ae.isArray(t)&&!t.some(pe)}(t)||(ae.isFileList(t)||ae.endsWith(n,"[]"))&&(a=ae.toArray(t)))return n=fe(n),a.forEach((function(t,r){!ae.isUndefined(t)&&null!==t&&e.append(!0===s?de([n],r,o):null===s?n:n+"[]",l(t))})),!1;return!!pe(t)||(e.append(de(i,n,o),l(t)),!1)}const c=[],h=Object.assign(me,{defaultVisitor:u,convertValue:l,isVisitable:pe});if(!ae.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!ae.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),ae.forEach(n,(function(n,o){!0===(!(ae.isUndefined(n)||null===n)&&i.call(e,n,ae.isString(o)?o.trim():o,r,h))&&t(n,r?r.concat(o):[o])})),c.pop()}}(t),e};function ye(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function ve(t,e){this._pairs=[],t&&ge(t,this,e)}const _e=ve.prototype;_e.append=function(t,e){this._pairs.push([t,e])},_e.toString=function(t){const e=t?function(e){return t.call(this,e,ye)}:ye;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const be=ve;function xe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ee(t,e,n){if(!e)return t;const r=n&&n.encode||xe,i=n&&n.serialize;let o;if(o=i?i(e,n):ae.isURLSearchParams(e)?e.toString():new be(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}const Se=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ae.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},we={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Te={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:be,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Me="undefined"!==typeof window&&"undefined"!==typeof document,Re=(Ae="undefined"!==typeof navigator&&navigator.product,Me&&["ReactNative","NativeScript","NS"].indexOf(Ae)<0);var Ae;const Pe="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ie={...t,...Te};const Ce=function(t){function e(t,n,r,i){let o=t[i++];const s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&ae.isArray(r)?r.length:o,a)return ae.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&ae.isObject(r[o])||(r[o]=[]);return e(t,n,r[o],i)&&ae.isArray(r[o])&&(r[o]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}(r[o])),!s}if(ae.isFormData(t)&&ae.isFunction(t.entries)){const n={};return ae.forEachEntry(t,((t,r)=>{e(function(t){return ae.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null};const Oe={transitional:we,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=ae.isObject(t);i&&ae.isHTMLForm(t)&&(t=new FormData(t));if(ae.isFormData(t))return r&&r?JSON.stringify(Ce(t)):t;if(ae.isArrayBuffer(t)||ae.isBuffer(t)||ae.isStream(t)||ae.isFile(t)||ae.isBlob(t))return t;if(ae.isArrayBufferView(t))return t.buffer;if(ae.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return ge(t,new Ie.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return Ie.isNode&&ae.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=ae.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return ge(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(ae.isString(t))try{return(e||JSON.parse)(t),ae.trim(t)}catch(Dn){if("SyntaxError"!==Dn.name)throw Dn}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Oe.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&ae.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(Dn){if(n){if("SyntaxError"===Dn.name)throw he.from(Dn,he.ERR_BAD_RESPONSE,this,null,this.response);throw Dn}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ie.classes.FormData,Blob:Ie.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],(t=>{Oe.headers[t]={}}));const Ne=Oe,Le=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),De=Symbol("internals");function Ue(t){return t&&String(t).trim().toLowerCase()}function Fe(t){return!1===t||null==t?t:ae.isArray(t)?t.map(Fe):String(t)}function ke(t,e,n,r,i){return ae.isFunction(r)?r.call(this,e,n):(i&&(e=n),ae.isString(e)?ae.isString(r)?-1!==e.indexOf(r):ae.isRegExp(r)?r.test(e):void 0:void 0)}class Be{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=Ue(e);if(!i)throw new Error("header name must be a non-empty string");const o=ae.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=Fe(t))}const o=(t,e)=>ae.forEach(t,((t,n)=>i(t,n,e)));return ae.isPlainObject(t)||t instanceof this.constructor?o(t,e):ae.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?o((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&Le[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=Ue(t)){const n=ae.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(ae.isFunction(e))return e.call(this,t,n);if(ae.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ue(t)){const n=ae.findKey(this,t);return!(!n||void 0===this[n]||e&&!ke(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=Ue(t)){const i=ae.findKey(n,t);!i||e&&!ke(0,n[i],i,e)||(delete n[i],r=!0)}}return ae.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!ke(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return ae.forEach(this,((r,i)=>{const o=ae.findKey(n,i);if(o)return e[o]=Fe(r),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete e[i],e[s]=Fe(r),n[s]=!0})),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return ae.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&ae.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((t=>{let[e,n]=t;return e+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((t=>e.set(t))),e}static accessor(t){const e=(this[De]=this[De]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=Ue(t);e[r]||(!function(t,e){const n=ae.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return ae.isArray(t)?t.forEach(r):r(t),this}}Be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ae.reduceDescriptors(Be.prototype,((t,e)=>{let{value:n}=t,r=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[r]=t}}})),ae.freezeMethods(Be);const Ge=Be;function je(t,e){const n=this||Ne,r=e||n,i=Ge.from(r.headers);let o=r.data;return ae.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function ze(t){return!(!t||!t.__CANCEL__)}function He(t,e,n){he.call(this,null==t?"canceled":t,he.ERR_CANCELED,e,n),this.name="CanceledError"}ae.inherits(He,he,{__CANCEL__:!0});const Ve=He;const Xe=Ie.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const s=[t+"="+encodeURIComponent(e)];ae.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),ae.isString(r)&&s.push("path="+r),ae.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function We(t,e){return t&&!function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Ye=Ie.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=ae.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};const qe=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),u=r[s];i||(i=l),n[o]=a,r[o]=l;let c=s,h=0;for(;c!==o;)h+=n[c++],c%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),l-i<e)return;const p=u&&l-u;return p?Math.round(1e3*h/p):void 0}};function $e(t,e){let n=0;const r=qe(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,l=r(a);n=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const Ke="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const i=Ge.from(t.headers).normalize();let o,s,{responseType:a,withXSRFToken:l}=t;function u(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}if(ae.isFormData(r))if(Ie.hasStandardBrowserEnv||Ie.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[t,...e]=s?s.split(";").map((t=>t.trim())).filter(Boolean):[];i.setContentType([t||"multipart/form-data",...e].join("; "))}let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const h=We(t.baseURL,t.url);function p(){if(!c)return;const r=Ge.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),u()}),(function(t){n(t),u()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:t,request:c}),c=null}if(c.open(t.method.toUpperCase(),Ee(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=p:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(p)},c.onabort=function(){c&&(n(new he("Request aborted",he.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new he("Network Error",he.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||we;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new he(e,r.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,c)),c=null},Ie.hasStandardBrowserEnv&&(l&&ae.isFunction(l)&&(l=l(t)),l||!1!==l&&Ye(h))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&Xe.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===r&&i.setContentType(null),"setRequestHeader"in c&&ae.forEach(i.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),ae.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),a&&"json"!==a&&(c.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&c.addEventListener("progress",$e(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",$e(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=e=>{c&&(n(!e||e.type?new Ve(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const f=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(h);f&&-1===Ie.protocols.indexOf(f)?n(new he("Unsupported protocol "+f+":",he.ERR_BAD_REQUEST,t)):c.send(r||null)}))},Ze={http:null,xhr:Ke};ae.forEach(Ze,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(Dn){}Object.defineProperty(t,"adapterName",{value:e})}}));const Je=t=>"- ".concat(t),Qe=t=>ae.isFunction(t)||null===t||!1===t,tn=t=>{t=ae.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){let e;if(n=t[o],r=n,!Qe(n)&&(r=Ze[(e=String(n)).toLowerCase()],void 0===r))throw new he("Unknown adapter '".concat(e,"'"));if(r)break;i[e||"#"+o]=r}if(!r){const t=Object.entries(i).map((t=>{let[e,n]=t;return"adapter ".concat(e," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=e?t.length>1?"since :\n"+t.map(Je).join("\n"):" "+Je(t[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function en(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ve(null,t)}function nn(t){en(t),t.headers=Ge.from(t.headers),t.data=je.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return tn(t.adapter||Ne.adapter)(t).then((function(e){return en(t),e.data=je.call(t,t.transformResponse,e),e.headers=Ge.from(e.headers),e}),(function(e){return ze(e)||(en(t),e&&e.response&&(e.response.data=je.call(t,t.transformResponse,e.response),e.response.headers=Ge.from(e.response.headers))),Promise.reject(e)}))}const rn=t=>t instanceof Ge?t.toJSON():t;function on(t,e){e=e||{};const n={};function r(t,e,n){return ae.isPlainObject(t)&&ae.isPlainObject(e)?ae.merge.call({caseless:n},t,e):ae.isPlainObject(e)?ae.merge({},e):ae.isArray(e)?e.slice():e}function i(t,e,n){return ae.isUndefined(e)?ae.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function o(t,e){if(!ae.isUndefined(e))return r(void 0,e)}function s(t,e){return ae.isUndefined(e)?ae.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>i(rn(t),rn(e),!0)};return ae.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=l[r]||i,s=o(t[r],e[r],r);ae.isUndefined(s)&&o!==a||(n[r]=s)})),n}const sn="1.6.2",an={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{an[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const ln={};an.transitional=function(t,e,n){function r(t,e){return"[Axios v1.6.2] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new he(r(i," has been removed"+(e?" in "+e:"")),he.ERR_DEPRECATED);return e&&!ln[i]&&(ln[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};const un={assertOptions:function(t,e,n){if("object"!==typeof t)throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],s=e[o];if(s){const e=t[o],n=void 0===e||s(e,o,t);if(!0!==n)throw new he("option "+o+" must be "+n,he.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new he("Unknown option "+o,he.ERR_BAD_OPTION)}},validators:an},cn=un.validators;class hn{constructor(t){this.defaults=t,this.interceptors={request:new Se,response:new Se}}request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=on(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&un.assertOptions(n,{silentJSONParsing:cn.transitional(cn.boolean),forcedJSONParsing:cn.transitional(cn.boolean),clarifyTimeoutError:cn.transitional(cn.boolean)},!1),null!=r&&(ae.isFunction(r)?e.paramsSerializer={serialize:r}:un.assertOptions(r,{encode:cn.function,serialize:cn.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=i&&ae.merge(i.common,i[e.method]);i&&ae.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=Ge.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let c,h=0;if(!a){const t=[nn.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,l),c=t.length,u=Promise.resolve(e);h<c;)u=u.then(t[h++],t[h++]);return u}c=s.length;let p=e;for(h=0;h<c;){const t=s[h++],e=s[h++];try{p=t(p)}catch(oU){e.call(this,oU);break}}try{u=nn.call(this,p)}catch(oU){return Promise.reject(oU)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(t){return Ee(We((t=on(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}ae.forEach(["delete","get","head","options"],(function(t){hn.prototype[t]=function(e,n){return this.request(on(n||{},{method:t,url:e,data:(n||{}).data}))}})),ae.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(on(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}hn.prototype[t]=e(),hn.prototype[t+"Form"]=e(!0)}));const pn=hn;class fn{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new Ve(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new fn((function(e){t=e})),cancel:t}}}const dn=fn;const mn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mn).forEach((t=>{let[e,n]=t;mn[n]=e}));const gn=mn;const yn=function t(e){const n=new pn(e),r=Rt(pn.prototype.request,n);return ae.extend(r,pn.prototype,n,{allOwnKeys:!0}),ae.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(on(e,n))},r}(Ne);yn.Axios=pn,yn.CanceledError=Ve,yn.CancelToken=dn,yn.isCancel=ze,yn.VERSION=sn,yn.toFormData=ge,yn.AxiosError=he,yn.Cancel=yn.CanceledError,yn.all=function(t){return Promise.all(t)},yn.spread=function(t){return function(e){return t.apply(null,e)}},yn.isAxiosError=function(t){return ae.isObject(t)&&!0===t.isAxiosError},yn.mergeConfig=on,yn.AxiosHeaders=Ge,yn.formToJSON=t=>Ce(ae.isHTMLForm(t)?new FormData(t):t),yn.getAdapter=tn,yn.HttpStatusCode=gn,yn.default=yn;const vn=yn;n(4819);var _n=n(184);function bn(){const[t,e]=(0,i.useState)({first_name:"",last_name:"",username:"",email:"",password:""}),[n,r]=(0,i.useState)(""),[o,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1);let u=tt(),c=()=>{u("/login")},h=n=>{let r={...t};r[n.target.name]=n.target.value,e(r)};return(0,_n.jsx)("div",{className:"h-screen d-flex justify-content-center  align-items-center",children:(0,_n.jsxs)("div",{className:"text-center h-screen form_cont",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703109277/qq2rauho2rngbr3mw0e9.jpg",alt:""}),(0,_n.jsx)("div",{children:(0,_n.jsxs)("form",{className:" ",onSubmit:async e=>{e.preventDefault(),l(!0);let{data:n}=await vn.post("https://grackle-notable-hardly.ngrok-free.app/api/register/",t);console.log(n),n?(c(),l(!1)):(r(n.message),l(!1))},children:[(0,_n.jsx)("h4",{className:" text-muted  text-center ",children:"Register Form"}),o.map(((t,e)=>(0,_n.jsx)("div",{className:"alert alert-danger w-100  m-auto text-center p-2 my-2",children:t.message},e))),n?(0,_n.jsx)("div",{className:"alert alert-danger m-auto  text-center p-2",children:n}):"",(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"first_name",children:"First Name"}),(0,_n.jsx)("input",{onChange:h,type:"text",className:"form-control my-2",name:"first_name"})]}),(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"last_name",children:"Last Name"}),(0,_n.jsx)("input",{onChange:h,type:"text",className:"form-control my-2",name:"last_name"})]}),(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"username",children:"Username"}),(0,_n.jsx)("input",{onChange:h,type:"text",className:"form-control my-2",name:"username"})]}),(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"email",children:"Email"}),(0,_n.jsx)("input",{onChange:h,type:"email",className:"form-control my-2",name:"email"})]}),(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"password",children:"Password"}),(0,_n.jsx)("input",{onChange:h,type:"password",className:"form-control my-2",name:"password"})]}),(0,_n.jsx)("div",{className:" d-flex justify-content-between py-4 ",children:(0,_n.jsxs)("div",{children:["You have an account?"," ",(0,_n.jsx)(wt,{to:"/Login",onClick:c,children:"Sign in"})]})})]})})]})})}function xn(t){let{saveUSerData:e}=t;const[n,r]=(0,i.useState)({username:"",password:""}),[o,s]=(0,i.useState)(""),[a,l]=(0,i.useState)([]),[u,c]=(0,i.useState)(!1);let h=tt(),p=t=>{let e={...n};e[t.target.name]=t.target.value,r(e)};return(0,_n.jsx)("div",{className:"h-screen d-flex justify-content-center  align-items-center",children:(0,_n.jsxs)("div",{className:"text-center h-screen form_cont",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703109277/qq2rauho2rngbr3mw0e9.jpg",alt:"",className:""}),(0,_n.jsx)("div",{children:(0,_n.jsxs)("form",{className:" ",onSubmit:async t=>{t.preventDefault();let{data:e}=await vn.post("https://grackle-notable-hardly.ngrok-free.app/api/login/",n);console.log(e),e?(console.log("done to home"),localStorage.setItem("token",e.access),h("/"),c(!1)):s(e.message)},children:[(0,_n.jsx)("h4",{className:" text-muted  text-center ",children:"Login Form"}),a.map(((t,e)=>(0,_n.jsx)("div",{className:"alert alert-danger w-100  m-auto text-center p-2 my-2",children:t.message},e))),o?(0,_n.jsx)("div",{className:"alert alert-danger m-auto  text-center p-2",children:o}):"",(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"username",children:"Username"}),(0,_n.jsx)("input",{onChange:p,className:"form-control my-2",name:"username"})]}),(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"password",children:"Password"}),(0,_n.jsx)("input",{onChange:p,type:"password",className:"form-control my-2",name:"password"})]}),(0,_n.jsxs)("div",{className:" d-flex justify-content-between py-4 ",children:[(0,_n.jsxs)("div",{children:["don't have an account ?"," ",(0,_n.jsx)(wt,{to:"/register",onClick:()=>{h("/register")},children:"Sign Up"})]}),(0,_n.jsx)("div",{children:(0,_n.jsx)(wt,{to:"/forgetPassword",onClick:()=>{h("/forgetPassword")},children:"Forget Password ?"})}),(0,_n.jsx)("button",{className:"btn btn-info float-end p-3 px-4 rounded-xl font-bold",children:u?(0,_n.jsx)("i",{className:"fas fa-spinner fa-spin"}):"Login"})]})]})})]})})}var En=Object.defineProperty,Sn=(t,e,n)=>(((t,e,n)=>{e in t?En(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);let wn=new class{constructor(){Sn(this,"current",this.detect()),Sn(this,"handoffState","pending"),Sn(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},Tn=(t,e)=>{wn.isServer?(0,i.useEffect)(t,e):(0,i.useLayoutEffect)(t,e)};let Mn=function(t){let e=function(t){let e=(0,i.useRef)(t);return Tn((()=>{e.current=t}),[t]),e}(t);return i.useCallback((function(){return e.current(...arguments)}),[e])};function Rn(){let t=function(){let t="undefined"==typeof document;return(t=>t.useSyncExternalStore)(o)((()=>()=>{}),(()=>!1),(()=>!t))}(),[e,n]=i.useState(wn.isHandoffComplete);return e&&!1===wn.isHandoffComplete&&n(!1),i.useEffect((()=>{!0!==e&&n(!0)}),[e]),i.useEffect((()=>wn.handoff()),[]),!t&&e}var An;let Pn=null!=(An=i.useId)?An:function(){let t=Rn(),[e,n]=i.useState(t?()=>wn.nextId():null);return Tn((()=>{null===e&&n(wn.nextId())}),[e]),null!=e?""+e:void 0};function In(t){var e;if(t.type)return t.type;let n=null!=(e=t.as)?e:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function Cn(t,e){let[n,r]=(0,i.useState)((()=>In(t)));return Tn((()=>{r(In(t))}),[t.type,t.as]),Tn((()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&r("button")}),[n,e]),n}let On=Symbol();function Nn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=(0,i.useRef)(e);(0,i.useEffect)((()=>{r.current=e}),[e]);let o=Mn((t=>{for(let e of r.current)null!=e&&("function"==typeof e?e(t):e.current=t)}));return e.every((t=>null==t||(null==t?void 0:t[On])))?void 0:o}let Ln=(0,i.createContext)(null);Ln.displayName="OpenClosedContext";var Dn,Un=((Dn=Un||{})[Dn.Open=1]="Open",Dn[Dn.Closed=2]="Closed",Dn[Dn.Closing=4]="Closing",Dn[Dn.Opening=8]="Opening",Dn);function Fn(){return(0,i.useContext)(Ln)}function kn(t){let{value:e,children:n}=t;return i.createElement(Ln.Provider,{value:e},n)}function Bn(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=""===(null==e?void 0:e.getAttribute("disabled"));return(!r||!function(t){if(!t)return!1;let e=t.previousElementSibling;for(;null!==e;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}(n))&&r}function Gn(t,e){if(t in e){let o=e[t];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof o?o(...r):o}let o=new Error('Tried to handle "'.concat(t,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(e).map((t=>'"'.concat(t,'"'))).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(o,Gn),o}function jn(t){return wn.isServer?null:t instanceof Node?t.ownerDocument:null!=t&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function zn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.from(new Set(e.flatMap((t=>"string"==typeof t?t.split(" "):[])))).filter(Boolean).join(" ")}var Hn,Vn=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Vn||{}),Xn=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Xn||{});function Wn(t){let{ourProps:e,theirProps:n,slot:r,defaultTag:i,features:o,visible:s=!0,name:a,mergeRefs:l}=t;l=null!=l?l:$n;let u=Kn(n,e);if(s)return Yn(u,r,i,a,l);let c=null!=o?o:0;if(2&c){let{static:t=!1,...e}=u;if(t)return Yn(e,r,i,a,l)}if(1&c){let{unmount:t=!0,...e}=u;return Gn(t?0:1,{0:()=>null,1:()=>Yn({...e,hidden:!0,style:{display:"none"}},r,i,a,l)})}return Yn(u,r,i,a,l)}function Yn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,{as:s=n,children:a,refName:l="ref",...u}=Qn(t,["unmount","static"]),c=void 0!==t.ref?{[l]:t.ref}:{},h="function"==typeof a?a(e):a;"className"in u&&u.className&&"function"==typeof u.className&&(u.className=u.className(e));let p={};if(e){let t=!1,n=[];for(let[r,i]of Object.entries(e))"boolean"==typeof i&&(t=!0),!0===i&&n.push(r);t&&(p["data-headlessui-state"]=n.join(" "))}if(s===i.Fragment&&Object.keys(Jn(u)).length>0){if(!(0,i.isValidElement)(h)||Array.isArray(h)&&h.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(r,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(u).map((t=>"  - ".concat(t))).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((t=>"  - ".concat(t))).join("\n")].join("\n"));let t=h.props,e="function"==typeof(null==t?void 0:t.className)?function(){return zn(null==t?void 0:t.className(...arguments),u.className)}:zn(null==t?void 0:t.className,u.className),n=e?{className:e}:{};return(0,i.cloneElement)(h,Object.assign({},Kn(h.props,Jn(Qn(u,["ref"]))),p,c,{ref:o(h.ref,c.ref)},n))}return(0,i.createElement)(s,Object.assign({},Qn(u,["ref"]),s!==i.Fragment&&c,s!==i.Fragment&&p),h)}function qn(){let t=(0,i.useRef)([]),e=(0,i.useCallback)((e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)}),[]);return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.every((t=>null==t)))return t.current=r,e}}function $n(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((t=>null==t))?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function Kn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return{};if(1===e.length)return e[0];let r={},i={};for(let o of e)for(let t in o)t.startsWith("on")&&"function"==typeof o[t]?(null!=i[t]||(i[t]=[]),i[t].push(o[t])):r[t]=o[t];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map((t=>[t,void 0]))));for(let o in i)Object.assign(r,{[o](t){let e=i[o];for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];for(let i of e){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;i(t,...r)}}});return r}function Zn(t){var e;return Object.assign((0,i.forwardRef)(t),{displayName:null!=(e=t.displayName)?e:t.name})}function Jn(t){let e=Object.assign({},t);for(let n in e)void 0===e[n]&&delete e[n];return e}function Qn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let tr=null!=(Hn=i.startTransition)?Hn:function(t){t()};var er=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(er||{}),nr=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(nr||{}),rr=(t=>(t[t.ToggleDisclosure=0]="ToggleDisclosure",t[t.CloseDisclosure=1]="CloseDisclosure",t[t.SetButtonId=2]="SetButtonId",t[t.SetPanelId=3]="SetPanelId",t[t.LinkPanel=4]="LinkPanel",t[t.UnlinkPanel=5]="UnlinkPanel",t))(rr||{});let ir={0:t=>({...t,disclosureState:Gn(t.disclosureState,{0:1,1:0})}),1:t=>1===t.disclosureState?t:{...t,disclosureState:1},4:t=>!0===t.linkedPanel?t:{...t,linkedPanel:!0},5:t=>!1===t.linkedPanel?t:{...t,linkedPanel:!1},2:(t,e)=>t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId},3:(t,e)=>t.panelId===e.panelId?t:{...t,panelId:e.panelId}},or=(0,i.createContext)(null);function sr(t){let e=(0,i.useContext)(or);if(null===e){let e=new Error("<".concat(t," /> is missing a parent <Disclosure /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,sr),e}return e}or.displayName="DisclosureContext";let ar=(0,i.createContext)(null);function lr(t){let e=(0,i.useContext)(ar);if(null===e){let e=new Error("<".concat(t," /> is missing a parent <Disclosure /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,lr),e}return e}ar.displayName="DisclosureAPIContext";let ur=(0,i.createContext)(null);function cr(t,e){return Gn(e.type,ir,t,e)}ur.displayName="DisclosurePanelContext";let hr=i.Fragment;let pr=Vn.RenderStrategy|Vn.Static;let fr=Zn((function(t,e){let{defaultOpen:n=!1,...r}=t,o=(0,i.useRef)(null),s=Nn(e,function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(t,{[On]:e})}((t=>{o.current=t}),void 0===t.as||t.as===i.Fragment)),a=(0,i.useRef)(null),l=(0,i.useRef)(null),u=(0,i.useReducer)(cr,{disclosureState:n?0:1,linkedPanel:!1,buttonRef:l,panelRef:a,buttonId:null,panelId:null}),[{disclosureState:c,buttonId:h},p]=u,f=Mn((t=>{p({type:1});let e=jn(o);if(!e||!h)return;let n=t?t instanceof HTMLElement?t:t.current instanceof HTMLElement?t.current:e.getElementById(h):e.getElementById(h);null==n||n.focus()})),d=(0,i.useMemo)((()=>({close:f})),[f]),m=(0,i.useMemo)((()=>({open:0===c,close:f})),[c,f]),g={ref:s};return i.createElement(or.Provider,{value:u},i.createElement(ar.Provider,{value:d},i.createElement(kn,{value:Gn(c,{0:Un.Open,1:Un.Closed})},Wn({ourProps:g,theirProps:r,slot:m,defaultTag:hr,name:"Disclosure"}))))})),dr=Zn((function(t,e){let n=Pn(),{id:r="headlessui-disclosure-button-".concat(n),...o}=t,[s,a]=sr("Disclosure.Button"),l=(0,i.useContext)(ur),u=null!==l&&l===s.panelId,c=(0,i.useRef)(null),h=Nn(c,e,u?null:s.buttonRef),p=qn();(0,i.useEffect)((()=>{if(!u)return a({type:2,buttonId:r}),()=>{a({type:2,buttonId:null})}}),[r,a,u]);let f=Mn((t=>{var e;if(u){if(1===s.disclosureState)return;switch(t.key){case er.Space:case er.Enter:t.preventDefault(),t.stopPropagation(),a({type:0}),null==(e=s.buttonRef.current)||e.focus()}}else switch(t.key){case er.Space:case er.Enter:t.preventDefault(),t.stopPropagation(),a({type:0})}})),d=Mn((t=>{if(t.key===er.Space)t.preventDefault()})),m=Mn((e=>{var n;Bn(e.currentTarget)||t.disabled||(u?(a({type:0}),null==(n=s.buttonRef.current)||n.focus()):a({type:0}))})),g=(0,i.useMemo)((()=>({open:0===s.disclosureState})),[s]),y=Cn(t,c);return Wn({mergeRefs:p,ourProps:u?{ref:h,type:y,onKeyDown:f,onClick:m}:{ref:h,id:r,type:y,"aria-expanded":0===s.disclosureState,"aria-controls":s.linkedPanel?s.panelId:void 0,onKeyDown:f,onKeyUp:d,onClick:m},theirProps:o,slot:g,defaultTag:"button",name:"Disclosure.Button"})})),mr=Zn((function(t,e){let n=Pn(),{id:r="headlessui-disclosure-panel-".concat(n),...o}=t,[s,a]=sr("Disclosure.Panel"),{close:l}=lr("Disclosure.Panel"),u=qn(),c=Nn(e,s.panelRef,(t=>{tr((()=>a({type:t?4:5})))}));(0,i.useEffect)((()=>(a({type:3,panelId:r}),()=>{a({type:3,panelId:null})})),[r,a]);let h=Fn(),p=null!==h?(h&Un.Open)===Un.Open:0===s.disclosureState,f=(0,i.useMemo)((()=>({open:0===s.disclosureState,close:l})),[s,l]),d={ref:c,id:r};return i.createElement(ur.Provider,{value:s.panelId},Wn({mergeRefs:u,ourProps:d,theirProps:o,slot:f,defaultTag:"div",features:pr,visible:p,name:"Disclosure.Panel"}))})),gr=Object.assign(fr,{Button:dr,Panel:mr});const yr=[{name:"Home",href:"/",current:!1},{name:"Team",href:"team",current:!1},{name:"About Us",href:"./about-project",current:!1},{name:"Contact Us",href:"./contact-us",current:!1},{name:"Plan's",href:"",current:!1},{name:"Draw Now",href:"./studio",current:!1}];function vr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}function _r(){return(0,_n.jsx)(gr,{as:"nav",className:"bg-gray-800 p-3",children:t=>{let{open:e}=t;return(0,_n.jsx)(_n.Fragment,{children:(0,_n.jsx)("div",{className:"mx-auto max-w-screen-lg px-2 sm:px-6 lg:px-8",children:(0,_n.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,_n.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,_n.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,_n.jsx)(wt,{to:"/",children:(0,_n.jsxs)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl px-2",children:["Ai",(0,_n.jsx)("span",{className:"font-bold text-[#c29525]",children:"-Architect"})]})})}),(0,_n.jsx)("div",{className:"hidden sm:ml-6 sm:block ",children:(0,_n.jsx)("div",{className:"flex space-x-14 ",children:yr.map((t=>(0,_n.jsx)("a",{href:t.href,className:vr(t.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","rounded-md px-3 py-2 text-2xl font-semibold decoration-transparent"),"aria-current":t.current?"page":void 0,children:t.name},t.name)))})})]}),(0,_n.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:(0,_n.jsx)(wt,{to:"/login",children:(0,_n.jsx)("button",{class:"text-white font-bold text-xl py-2.5 px-4  rounded mt-[-2px]",children:"Login"})})})]})})})}})}const br=()=>(0,_n.jsx)("div",{className:"w-full bg-white",id:"about-us",children:(0,_n.jsxs)("section",{class:"about-us",id:"about-us",children:[(0,_n.jsxs)("div",{class:"section-header",children:[(0,_n.jsx)("h1",{class:"section-heading",children:"Our Features"}),(0,_n.jsx)("div",{class:"underline"})]}),(0,_n.jsxs)("div",{class:"services",children:[(0,_n.jsxs)("div",{class:"service",children:[(0,_n.jsxs)("div",{class:"service-header",children:[(0,_n.jsx)("i",{class:"fas fa-pen-nib"}),(0,_n.jsx)("h3",{children:"Interior Walls"})]}),(0,_n.jsx)("p",{class:"service-text",children:"Partitions within a building that divide the interior space into rooms, corridors, and other functional areas. These walls serve several purposes in residential buildings"})]}),(0,_n.jsxs)("div",{class:"service",children:[(0,_n.jsxs)("div",{class:"service-header",children:[(0,_n.jsx)("i",{class:"fas fa-paint-roller"}),(0,_n.jsx)("h3",{children:"Exterior Walls "})]}),(0,_n.jsx)("p",{class:"service-text",children:"The boundary walls that rounds the outside of the plan , make the perfect shape of the plan with doors and windows for real world plan"})]}),(0,_n.jsxs)("div",{class:"service",children:[(0,_n.jsxs)("div",{class:"service-header",children:[(0,_n.jsx)("i",{class:"fas fa-pencil-alt"}),(0,_n.jsx)("h3",{children:"Design"})]}),(0,_n.jsx)("p",{class:"service-text",children:"Design inspirations, featuring a diverse range of architectural styles, interior designs, and landscaping ideas. for better designs and templates"})]}),(0,_n.jsxs)("div",{class:"service",children:[(0,_n.jsxs)("div",{class:"service-header",children:[(0,_n.jsx)("i",{class:"fas fa-paint-brush"}),(0,_n.jsx)("h3",{children:"Decoration"})]}),(0,_n.jsx)("p",{class:"service-text",children:"Decoration of their floor plans by providing a wide range of options for furniture, lighting fixtures, decor items, and finishes."})]}),(0,_n.jsxs)("div",{class:"service",children:[(0,_n.jsxs)("div",{class:"service-header",children:[(0,_n.jsx)("i",{class:"fas fa-ruler-combined"}),(0,_n.jsx)("h3",{children:"Measurement"})]}),(0,_n.jsx)("p",{class:"service-text",children:"Accurately measure distances, areas, and angles within the floor plan,for ensuring that the design meets building codes and regulations."})]}),(0,_n.jsxs)("div",{class:"service",children:[(0,_n.jsxs)("div",{class:"service-header",children:[(0,_n.jsx)("i",{class:"far fa-building"}),(0,_n.jsx)("h3",{children:"3D Visualization"})]}),(0,_n.jsx)("p",{class:"service-text",children:"visualize their floor plans in 3D, providing a more immersive and realistic representation of the final design.helps clients better understand the spatial layout"})]}),(0,_n.jsx)("div",{class:"about-us-img-wrapper",children:(0,_n.jsx)("img",{alt:"logo",src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1706480246/kbisczlfdbvdutp3dwqn.jpg"})})]})]})});var xr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Er=i.createContext&&i.createContext(xr),Sr=function(){return Sr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Sr.apply(this,arguments)},wr=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Tr(t){return t&&t.map((function(t,e){return i.createElement(t.tag,Sr({key:e},t.attr),Tr(t.child))}))}function Mr(t){return function(e){return i.createElement(Rr,Sr({attr:Sr({},t.attr)},e),Tr(t.child))}}function Rr(t){var e=function(e){var n,r=t.attr,o=t.size,s=t.title,a=wr(t,["attr","size","title"]),l=o||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),i.createElement("svg",Sr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,a,{className:n,style:Sr(Sr({color:t.color||e.color},e.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&i.createElement("title",null,s),t.children)};return void 0!==Er?i.createElement(Er.Consumer,null,(function(t){return e(t)})):e(xr)}function Ar(t){return Mr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M90.2 228.2c8.9-42.4 37.4-77.7 75.7-95.7 3.6 4.9 28 38.8 50.7 79-64 17-120.3 16.8-126.4 16.7zM314.6 154c-33.6-29.8-79.3-41.1-122.6-30.6 3.8 5.1 28.6 38.9 51 80 48.6-18.3 69.1-45.9 71.6-49.4zM140.1 364c40.5 31.6 93.3 36.7 137.3 18-2-12-10-53.8-29.2-103.6-55.1 18.8-93.8 56.4-108.1 85.6zm98.8-108.2c-3.4-7.8-7.2-15.5-11.1-23.2C159.6 253 93.4 252.2 87.4 252c0 1.4-.1 2.8-.1 4.2 0 35.1 13.3 67.1 35.1 91.4 22.2-37.9 67.1-77.9 116.5-91.8zm34.9 16.3c17.9 49.1 25.1 89.1 26.5 97.4 30.7-20.7 52.5-53.6 58.6-91.6-4.6-1.5-42.3-12.7-85.1-5.8zm-20.3-48.4c4.8 9.8 8.3 17.8 12 26.8 45.5-5.7 90.7 3.4 95.2 4.4-.3-32.3-11.8-61.9-30.9-85.1-2.9 3.9-25.8 33.2-76.3 53.9zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-64 176c0-88.2-71.8-160-160-160S64 167.8 64 256s71.8 160 160 160 160-71.8 160-160z"}}]})(t)}function Pr(t){return Mr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"}}]})(t)}function Ir(t){return Mr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"}}]})(t)}function Cr(t){return Mr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"}}]})(t)}function Or(t){return Mr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"}}]})(t)}const Nr=()=>(0,_n.jsx)("div",{className:"max-w-[1520px] m-auto px-4 py-2 bg-[#24262b]",children:(0,_n.jsxs)("div",{className:"py-16 px-4 grid lg:grid-cols-3 gap-8 text-gray-300",children:[(0,_n.jsxs)("div",{children:[(0,_n.jsx)("h1",{className:"w-full text-3xl font-bold text-[#c29525]",children:"Ai-Architect"}),(0,_n.jsx)("p",{children:"AI Architecture: 24 Floor Plans for Modern Houses"}),(0,_n.jsxs)("div",{className:"flex justify-between md:w-[75%] my-6",children:[(0,_n.jsx)("a",{href:"https://github.com/KhaledElshrief",rel:"_blank",children:(0,_n.jsx)(Ir,{className:"cursor-pointer",size:30})}),(0,_n.jsx)(Pr,{className:"cursor-pointer",size:30}),(0,_n.jsx)(Cr,{className:"cursor-pointer",size:30}),(0,_n.jsx)(Or,{className:"cursor-pointer",size:30}),(0,_n.jsx)(Ar,{className:"cursor-pointer",size:30})]})]}),(0,_n.jsxs)("div",{className:"lg:col-span-2 flex justify-between mt-6",children:[(0,_n.jsxs)("div",{children:[(0,_n.jsx)("h6",{className:" font-bold text-xl text-[#fff]",children:"Product"}),(0,_n.jsxs)("ul",{children:[(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Pricing"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"About"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Privacy"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Terms of services"})]})]}),(0,_n.jsxs)("div",{children:[(0,_n.jsx)("h6",{className:"font-bold text-xl text-[#fff]",children:"Developers"}),(0,_n.jsxs)("ul",{children:[(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Developers Site"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Beta Version"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Contribute"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Work with us"})]})]}),(0,_n.jsxs)("div",{children:[(0,_n.jsx)("h6",{className:"font-bold text-xl text-[#fff]",children:"Support"}),(0,_n.jsxs)("ul",{children:[(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Contact Us"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Hosting Guide"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Security"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Forums"})]})]}),(0,_n.jsxs)("div",{children:[(0,_n.jsx)("h6",{className:"font-lg text-[#9b9b9b]",children:"Location"}),(0,_n.jsxs)("ul",{children:[(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"New York"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"USA"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Egypt"}),(0,_n.jsx)("li",{className:"py-2 text-lg text-[#9b9b9b]",children:"Canada"})]})]}),(0,_n.jsx)("a",{href:"#",class:"scroll-btn",children:(0,_n.jsx)("i",{class:"fas fa-arrow-up"})})]})]})});var Lr=n(6710);const Dr=t=>{let{...e}=t;return(0,_n.jsx)("div",{className:"video-background",children:(0,_n.jsx)(Lr.Z,{url:"https://res.cloudinary.com/daesz5k6b/video/upload/v1699797976/pwgvvms4yjtqvo1t7anj.mp4",playing:!0,loop:!0,muted:!0,width:"100%",height:"100%",...e,config:{file:{attributes:{controlsList:"nodownload"}}}})})},Ur=()=>{const t=tt();return(0,_n.jsx)("div",{className:"container ",children:(0,_n.jsxs)("header",{className:"header ",id:"home",children:[(0,_n.jsx)("div",{className:"img-wrapper z-10 ",children:(0,_n.jsx)(Dr,{className:" w-full h-full",alt:"background"})}),(0,_n.jsxs)("div",{className:"banner",children:[(0,_n.jsx)("h1",{children:"Ai-Architect "}),(0,_n.jsx)("p",{children:"AI Architecture: 24 Hours Floor Plans for Modern Houses"}),(0,_n.jsx)("button",{onClick:()=>t("/studio"),children:"Draw Now"})]})]})})},Fr=()=>(0,_n.jsx)("div",{children:(0,_n.jsxs)("div",{className:"articles",id:"articles",children:[(0,_n.jsxs)("div",{className:"section-heading",children:[(0,_n.jsx)("h2",{className:"main-title",children:"Articles"}),(0,_n.jsx)("div",{className:"underline"})]}),(0,_n.jsxs)("div",{className:"container",children:[(0,_n.jsxs)("div",{className:"box",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1702468486/ssg9iozbotoya72tdxch.png",alt:""}),(0,_n.jsxs)("div",{className:"content",children:[(0,_n.jsx)("h3",{children:"3D Printing"}),(0,_n.jsx)("p",{children:"How 3D printing technology can be used to tackle the global housing ?"})]}),(0,_n.jsxs)("div",{className:"info",children:[(0,_n.jsx)(wt,{children:"Read More"}),(0,_n.jsx)("i",{className:"fas fa-long-arrow-alt-right"})]})]}),(0,_n.jsxs)("div",{className:"box",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1702469747/djqoktokvzbzsrhnf6xz.png",alt:""}),(0,_n.jsxs)("div",{className:"content",children:[(0,_n.jsx)("h3",{children:"Artificial Intelligence"}),(0,_n.jsx)("p",{children:"How can artificial intelligence revolutionize bioarchitecture?"})]}),(0,_n.jsxs)("div",{className:"info",children:[(0,_n.jsx)(wt,{children:"Read More"}),(0,_n.jsx)("i",{className:"fas fa-long-arrow-alt-right"})]})]}),(0,_n.jsxs)("div",{className:"box",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1702469746/y0g8jhekxztb5asdxtxo.png",alt:""}),(0,_n.jsxs)("div",{className:"content",children:[(0,_n.jsx)("h3",{children:"tools"}),(0,_n.jsx)("p",{children:"10 textile and material libraries for 3D architectural modeling"})]}),(0,_n.jsxs)("div",{className:"info",children:[(0,_n.jsx)(wt,{children:"Read More"}),(0,_n.jsx)("i",{className:"fas fa-long-arrow-alt-right"})]})]}),(0,_n.jsxs)("div",{className:"box",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1702469744/btu3fv9lo008eld9cq9x.png",alt:""}),(0,_n.jsxs)("div",{className:"content",children:[(0,_n.jsx)("h3",{children:"Technology"}),(0,_n.jsx)("p",{children:"2024 Review: Innovations in Generative AI, AR/VR, Robotics, and Beyond"})]}),(0,_n.jsxs)("div",{className:"info",children:[(0,_n.jsx)(wt,{children:"Read More"}),(0,_n.jsx)("i",{className:"fas fa-long-arrow-alt-right"})]})]})]})]})}),kr=()=>(0,_n.jsxs)("div",{children:[(0,_n.jsx)(_r,{}),(0,_n.jsx)(Ur,{}),(0,_n.jsx)(br,{}),(0,_n.jsx)(Fr,{}),(0,_n.jsx)(Nr,{})]});function Br(){const[t,e]=(0,i.useState)({email:""}),[n,r]=(0,i.useState)(""),[o,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1);let u=tt();return(0,_n.jsx)("div",{className:"h-screen d-flex justify-content-center  align-items-center",children:(0,_n.jsxs)("div",{className:"text-center h-screen form_cont",children:[(0,_n.jsx)("img",{src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703109277/qq2rauho2rngbr3mw0e9.jpg",alt:"",className:""}),(0,_n.jsx)("div",{children:(0,_n.jsxs)("form",{className:" ",onSubmit:async e=>{e.preventDefault();let{data:n}=await vn.post("https://grackle-notable-hardly.ngrok-free.app/api/login/",t);console.log(n),n?(console.log("done to home"),u("/login"),l(!1)):r(n.message)},children:[(0,_n.jsx)("h4",{className:" text-muted  text-center ",children:"Forget Password Form"}),o.map(((t,e)=>(0,_n.jsx)("div",{className:"alert alert-danger w-100  m-auto text-center p-2 my-2",children:t.message},e))),n?(0,_n.jsx)("div",{className:"alert alert-danger m-auto  text-center p-2",children:n}):"",(0,_n.jsxs)("div",{className:"form_input",children:[(0,_n.jsx)("label",{htmlFor:"email",children:"Email"}),(0,_n.jsx)("input",{onChange:n=>{let r={...t};r[n.target.name]=n.target.value,e(r)},className:"form-control my-2",name:"email"})]}),(0,_n.jsx)("div",{className:" d-flex justify-content-center py-4 ",children:(0,_n.jsx)("button",{className:"btn btn-info float-end py-3 px-5 ",children:a?(0,_n.jsx)("i",{className:"fas fa-spinner fa-spin"}):"Send"})})]})})]})})}const Gr=[{id:5,name:"Khaled Elshrief",text:"Frontend Developer",image:"https://res.cloudinary.com/daesz5k6b/image/upload/v1701629220/jytijdzz0agaqt9hbq2f.jpg",link:"https://www.linkedin.com/in/khaled-elsayed-elshrief-67b81022b/",description:"website designer and developer (ReactJS)  "},{id:6,name:"Moaaz Kasem",text:"Frontend Developer",image:"https://res.cloudinary.com/daesz5k6b/image/upload/v1701629560/nao3jfseezfp1cwwwgtc.jpg",description:"3D Graphics and website developer (React Three Fiber , ReactJS) "},{id:7,name:"Mahmoud Elfar",text:"Backend Developer",image:"https://res.cloudinary.com/daesz5k6b/image/upload/v1701629560/rfyzfr73qhs2mdewdwn6.jpg",description:"website backend developer (Django , Restful api )"},{id:10,name:"Mohamed kandel",text:"AI-Developer",image:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703095864/lhybm6gxnjpgywkigcba.jpg",description:"Ai developer (Pytorch )"},{id:8,name:"Mostafa Elsisi",text:"AI-Developer",image:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703095863/de6astyejqykgg0w1ujq.jpg",description:"Ai developer (Pytorch )"},{id:9,name:"Mahmoud Gamal",text:"AI-Developer",image:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703095864/kwxz9o4vtwxgwoq1zvei.jpg",description:"Ai developer (Pytorch )"}];const jr=function(){return console.log(Gr),(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)(_r,{}),(0,_n.jsx)("section",{className:"team",id:"team",children:Gr.map((t=>(0,_n.jsx)("div",{className:"cards-wrapper",children:(0,_n.jsxs)("div",{className:"card","data-tilt":!0,children:[(0,_n.jsx)("div",{className:"card-img-wrapper",children:(0,_n.jsx)("img",{src:t.image,alt:"Frontend developer"})}),(0,_n.jsxs)("div",{className:"card-info",children:[(0,_n.jsx)("h2",{children:t.name}),(0,_n.jsx)("h3",{children:t.text}),(0,_n.jsx)("p",{children:t.description}),(0,_n.jsx)(wt,{to:t.link,children:(0,_n.jsx)("button",{children:"Read More"})})]})]},t.id)},t.id)))}),(0,_n.jsx)(Nr,{})]})},zr=()=>{const[t,e]=(0,i.useState)({message:""});let n=localStorage.getItem("token");return(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)(_r,{}),(0,_n.jsx)("div",{className:" flex items-center justify-center bg-gray-100 text-center p-32 rounded",children:(0,_n.jsxs)("div",{className:"bg-white shadow-md rounded p-10",children:[(0,_n.jsx)("h2",{className:"text-3xl font-semibold mb-6 text-center text-[#c29525]",children:"Contact Us"}),(0,_n.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{(await fetch("https://grackle-notable-hardly.ngrok-free.app/api/contact_message/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)})).ok?(console.log("Message sent successfully"),e({message:""})):console.error("Failed to send message")}catch(oU){console.error("Error sending message:",oU)}},className:"flex flex-col justify-center ",children:[(0,_n.jsxs)("div",{className:"mb-4 flex flex-col items-start p-2",children:[(0,_n.jsx)("label",{className:"block text-gray-800 text-xl font-bold mb-2",htmlFor:"message",children:"Message"}),(0,_n.jsx)("textarea",{name:"message",value:t.message,onChange:n=>{e({...t,[n.target.name]:n.target.value})},className:"input h-32 w-[330px] rounded",required:!0})]}),(0,_n.jsx)("button",{type:"submit",className:"btn-primary  rounded",children:"Submit"})]})]})}),(0,_n.jsx)(Nr,{})]})},Hr=()=>(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)(_r,{}),(0,_n.jsxs)("div",{className:"w-full bg-white py-16 px-4",children:[(0,_n.jsx)("h1",{className:"text-[#e2b646] font-bold text-5xl text-center mb-5",children:"Hi, We are Floor Planner!"}),(0,_n.jsxs)("div",{className:"max-w-[1240px] mx-auto grid md:grid-cols-2",children:[(0,_n.jsx)("img",{className:"w-[550px] mx-auto my-4",alt:"",src:"https://res.cloudinary.com/daesz5k6b/image/upload/v1703099539/e44wrhnpjcthq8efq5h1.png"}),(0,_n.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,_n.jsx)("h2",{className:"md:text-4xl sm:text-3xl text-3xl font-bold py-2 ",children:"Brief About Us"}),(0,_n.jsx)("p",{className:"text-2xl text-gray-600 mt-2 mb-5 mr-4",children:"We have made it our job to bring the power of architectural visualizations to everyone who doesn't know how or doesn't want to work with advanced 3D CAD software. We have built a platform based around a lightweight floor plan editor that runs in every browser without the need for additional downloads or plug-ins. This editor, combined with powerful cloud-based rendering, gives our users the ability to make great-looking architectural visualizations within minutes - from any device - for a fraction of the cost or learning curve of traditional CAD software."}),(0,_n.jsx)("button",{className:"bg-black text-[#00df9a] w-[200px] rounded-md my-6 text-lg font-medium mx-auto md:mx-0 py-3",children:"Get Started"})]})]})]}),(0,_n.jsx)(Nr,{})]});n.p;function Vr(t){const e=tt(),n=J();let r=n.state.data,i=n.state.img;return console.log(r),(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)(_r,{}),(0,_n.jsxs)("div",{className:"view-plan-container flex flex-column justify-content-center items-center ",children:[(0,_n.jsx)("h1",{children:" THis is the 2D image for your floor plan"}),(0,_n.jsx)("img",{style:{width:"630px",height:"630px "},alt:"image for",src:i}),(0,_n.jsx)("button",{className:"btn btn-success w-64 h-20 fs-2 text-2xl mb-8 mt-0 ",onClick:()=>e("/scene",{state:r}),children:"View 3D"})]}),(0,_n.jsx)(Nr,{})]})}const Xr=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};const Wr=function(t){return new this((function(e,n){if(!t||"undefined"===typeof t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"===typeof n||"function"===typeof n)){var s=n.then;if("function"===typeof s)return void s.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0===--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0===--i&&e(r)}for(var s=0;s<r.length;s++)o(s,r[s])}))};function Yr(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}Yr.prototype=Error.prototype;const qr=function(t){var e=this;return new e((function(n,r){if(!t||"undefined"===typeof t.length)return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return r();for(var o=[],s=0;s<i.length;s++)try{e.resolve(i[s]).then(n).catch((function(t){o.push(t),o.length===i.length&&r(new Yr(o,"All promises were rejected"))}))}catch(a){r(a)}}))};var $r=setTimeout;function Kr(t){return Boolean(t&&"undefined"!==typeof t.length)}function Zr(){}function Jr(t){if(!(this instanceof Jr))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ii(t,this)}function Qr(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Jr._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(Dn){return void ei(e.promise,Dn)}ti(e.promise,r)}else(1===t._state?ti:ei)(e.promise,t._value)}))):t._deferreds.push(e)}function ti(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof Jr)return t._state=3,t._value=e,void ni(t);if("function"===typeof n)return void ii((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,ni(t)}catch(Dn){ei(t,Dn)}var r,i}function ei(t,e){t._state=2,t._value=e,ni(t)}function ni(t){2===t._state&&0===t._deferreds.length&&Jr._immediateFn((function(){t._handled||Jr._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)Qr(t,t._deferreds[e]);t._deferreds=null}function ri(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function ii(t,e){var n=!1;try{t((function(t){n||(n=!0,ti(e,t))}),(function(t){n||(n=!0,ei(e,t))}))}catch(r){if(n)return;n=!0,ei(e,r)}}Jr.prototype.catch=function(t){return this.then(null,t)},Jr.prototype.then=function(t,e){var n=new this.constructor(Zr);return Qr(this,new ri(t,e,n)),n},Jr.prototype.finally=Xr,Jr.all=function(t){return new Jr((function(e,n){if(!Kr(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,s){try{if(s&&("object"===typeof s||"function"===typeof s)){var a=s.then;if("function"===typeof a)return void a.call(s,(function(e){o(t,e)}),n)}r[t]=s,0===--i&&e(r)}catch(l){n(l)}}for(var s=0;s<r.length;s++)o(s,r[s])}))},Jr.any=qr,Jr.allSettled=Wr,Jr.resolve=function(t){return t&&"object"===typeof t&&t.constructor===Jr?t:new Jr((function(e){e(t)}))},Jr.reject=function(t){return new Jr((function(e,n){n(t)}))},Jr.race=function(t){return new Jr((function(e,n){if(!Kr(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)Jr.resolve(t[r]).then(e,n)}))},Jr._immediateFn="function"===typeof setImmediate&&function(t){setImmediate(t)}||function(t){$r(t,0)},Jr._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const oi=Jr;var si=n(1725);"undefined"===typeof globalThis&&("undefined"!==typeof self?self.globalThis=self:"undefined"!==typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=oi),Object.assign||(Object.assign=si);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var ai=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-ai}}for(var li,ui,ci,hi,pi,fi,di,mi,gi,yi,vi,_i,bi,xi,Ei,Si,wi,Ti,Mi,Ri,Ai=Date.now(),Pi=["ms","moz","webkit","o"],Ii=0;Ii<Pi.length&&!globalThis.requestAnimationFrame;++Ii){var Ci=Pi[Ii];globalThis.requestAnimationFrame=globalThis[Ci+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Ci+"CancelAnimationFrame"]||globalThis[Ci+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!==typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+Ai-e;return n<0&&(n=0),Ai=e,globalThis.self.setTimeout((function(){Ai=Date.now(),t(performance.now())}),n)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(li||(li={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(ui||(ui={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(ci||(ci={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(hi||(hi={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(pi||(pi={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(fi||(fi={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(di||(di={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(mi||(mi={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(gi||(gi={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(yi||(yi={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(vi||(vi={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(_i||(_i={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(bi||(bi={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(xi||(xi={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Ei||(Ei={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Si||(Si={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(wi||(wi={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(Ti||(Ti={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Mi||(Mi={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Ri||(Ri={}));var Oi={createCanvas:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Ni=/iPhone/i,Li=/iPod/i,Di=/iPad/i,Ui=/\biOS-universal(?:.+)Mac\b/i,Fi=/\bAndroid(?:.+)Mobile\b/i,ki=/Android/i,Bi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Gi=/Silk/i,ji=/Windows Phone/i,zi=/\bWindows(?:.+)ARM\b/i,Hi=/BlackBerry/i,Vi=/BB10/i,Xi=/Opera Mini/i,Wi=/\b(CriOS|Chrome)(?:.+)Mobile/i,Yi=/Mobile(?:.+)Firefox\b/i,qi=function(t){return"undefined"!==typeof t&&"MacIntel"===t.platform&&"number"===typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"===typeof MSStream};var $i=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"===typeof navigator?"string"===typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");"undefined"!==typeof r[1]&&(n=r[0]),"undefined"!==typeof(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(t){return function(e){return e.test(t)}}(n),o={apple:{phone:i(Ni)&&!i(ji),ipod:i(Li),tablet:!i(Ni)&&(i(Di)||qi(e))&&!i(ji),universal:i(Ui),device:(i(Ni)||i(Li)||i(Di)||i(Ui)||qi(e))&&!i(ji)},amazon:{phone:i(Bi),tablet:!i(Bi)&&i(Gi),device:i(Bi)||i(Gi)},android:{phone:!i(ji)&&i(Bi)||!i(ji)&&i(Fi),tablet:!i(ji)&&!i(Bi)&&!i(Fi)&&(i(Gi)||i(ki)),device:!i(ji)&&(i(Bi)||i(Gi)||i(Fi)||i(ki))||i(/\bokhttp\b/i)},windows:{phone:i(ji),tablet:i(zi),device:i(ji)||i(zi)},other:{blackberry:i(Hi),blackberry10:i(Vi),opera:i(Xi),firefox:i(Yi),chrome:i(Wi),device:i(Hi)||i(Vi)||i(Xi)||i(Yi)||i(Wi)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);var Ki,Zi,Ji,Qi,to,eo,no,ro,io,oo,so,ao,lo,uo,co,ho,po,fo,mo,go,yo={ADAPTER:Oi,MIPMAP_TEXTURES:_i.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Mi.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if($i.tablet||$i.phone){var n;if($i.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if($i.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Ei.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:vi.CLAMP,SCALE_MODE:yi.LINEAR,PRECISION_VERTEX:Si.HIGH,PRECISION_FRAGMENT:$i.apple.device?Si.HIGH:Si.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!$i.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},vo=n(5810),_o=n(7089),bo=n(2114);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ki||(Ki={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Zi||(Zi={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Ji||(Ji={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Qi||(Qi={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(to||(to={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(eo||(eo={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(no||(no={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(ro||(ro={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(io||(io={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(oo||(oo={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(so||(so={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(ao||(ao={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(lo||(lo={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(uo||(uo={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(co||(co={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ho||(ho={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(po||(po={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(fo||(fo={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(mo||(mo={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(go||(go={}));var xo={parse:bo.Qc,format:bo.WU,resolve:bo.DB};yo.RETINA_PREFIX=/@([0-9\.]+)x/,yo.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Eo,So=!1;var wo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function To(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function Mo(t){var e=t.toString(16);return"#"+(e="000000".substring(0,6-e.length)+e)}function Ro(t){return"string"===typeof t&&"#"===(t=wo[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}var Ao=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[Qi.NORMAL_NPM]=Qi.NORMAL,t[Qi.ADD_NPM]=Qi.ADD,t[Qi.SCREEN_NPM]=Qi.SCREEN,e[Qi.NORMAL]=Qi.NORMAL_NPM,e[Qi.ADD]=Qi.ADD_NPM,e[Qi.SCREEN]=Qi.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function Po(t,e){return Ao[e?1:0][t]}function Io(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i=i*e+.5|0)}function Co(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function Oo(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Float32Array,Uint32Array,Int32Array,Uint8Array;function No(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Lo(t){return!(t&t-1)&&!!t}function Do(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function Uo(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}function Fo(t){return 0===t?0:t<0?-1:1}var ko=0;function Bo(){return++ko}var Go={};function jo(t,e,n){if(void 0===n&&(n=3),!Go[e]){var r=(new Error).stack;"undefined"===typeof r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),Go[e]=!0}}var zo={},Ho=Object.create(null),Vo=Object.create(null);var Xo=function(){function t(t,e,n){this.canvas=yo.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||yo.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();var Wo;function Yo(t,e){var n=yo.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}var qo,$o=2*Math.PI,Ko=180/Math.PI,Zo=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(qo||(qo={}));var Jo=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),Qo=[new Jo,new Jo,new Jo,new Jo],ts=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=qo.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.intersects=function(t,e){if(!e){var n=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=n)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var i=this.left,o=this.right,s=this.top,a=this.bottom;if(o<=i||a<=s)return!1;var l=Qo[0].set(t.left,t.top),u=Qo[1].set(t.left,t.bottom),c=Qo[2].set(t.right,t.top),h=Qo[3].set(t.right,t.bottom);if(c.x<=l.x||u.y<=l.y)return!1;var p=Math.sign(e.a*e.d-e.b*e.c);if(0===p)return!1;if(e.apply(l,l),e.apply(u,u),e.apply(c,c),e.apply(h,h),Math.max(l.x,u.x,c.x,h.x)<=i||Math.min(l.x,u.x,c.x,h.x)>=o||Math.max(l.y,u.y,c.y,h.y)<=s||Math.min(l.y,u.y,c.y,h.y)>=a)return!1;var f=p*(u.y-l.y),d=p*(l.x-u.x),m=f*i+d*s,g=f*o+d*s,y=f*i+d*a,v=f*o+d*a;if(Math.max(m,g,y,v)<=f*l.x+d*l.y||Math.min(m,g,y,v)>=f*h.x+d*h.y)return!1;var _=p*(l.y-c.y),b=p*(c.x-l.x),x=_*i+b*s,E=_*o+b*s,S=_*i+b*a,w=_*o+b*a;return!(Math.max(x,E,S,w)<=_*l.x+b*l.y||Math.min(x,E,S,w)>=_*h.x+b*h.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),es=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=qo.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return(r*=r)+(i*=i)<=n},t.prototype.getBounds=function(){return new ts(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),ns=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r,this.type=qo.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new ts(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),rs=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=Array.isArray(e[0])?e[0]:e;if("number"!==typeof r[0]){for(var i=[],o=0,s=r.length;o<s;o++)i.push(r[o].x,r[o].y);r=i}this.points=r,this.type=qo.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];a>e!==u>e&&t<(e-a)/(u-a)*(l-s)+s&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),is=function(){function t(t,e,n,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=20),this.x=t,this.y=e,this.width=n,this.height=r,this.radius=i,this.type=qo.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+n&&e<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var r=t-(this.x+n),i=e-(this.y+n),o=n*n;if(r*r+i*i<=o)return!0;if((r=t-(this.x+this.width-n))*r+i*i<=o)return!0;if(r*r+(i=e-(this.y+this.height-n))*i<=o)return!0;if((r=t-(this.x+n))*r+i*i<=o)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),os=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),ss=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new Jo;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Jo;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,s,a,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=t.pivot,s=-Math.atan2(-r,i),a=Math.atan2(n,e),l=Math.abs(s+a);return l<1e-5||Math.abs($o-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*n+o.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),as=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ls=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],us=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],cs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],hs=[],ps=[],fs=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];hs.push(e);for(var n=0;n<16;n++)for(var r=fs(as[t]*as[n]+us[t]*ls[n]),i=fs(ls[t]*as[n]+cs[t]*ls[n]),o=fs(as[t]*us[n]+us[t]*cs[n]),s=fs(ls[t]*us[n]+cs[t]*cs[n]),a=0;a<16;a++)if(as[a]===r&&ls[a]===i&&us[a]===o&&cs[a]===s){e.push(a);break}}for(t=0;t<16;t++){var l=new ss;l.set(as[t],ls[t],us[t],cs[t],0,0),ps.push(l)}}();var ds={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return as[t]},uY:function(t){return ls[t]},vX:function(t){return us[t]},vY:function(t){return cs[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return hs[t][e]},sub:function(t,e){return hs[t][ds.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?ds.S:ds.N:2*Math.abs(e)<=Math.abs(t)?t>0?ds.E:ds.W:e>0?t>0?ds.SE:ds.SW:t>0?ds.NE:ds.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=ps[ds.inv(e)];i.tx=n,i.ty=r,t.append(i)}},ms=function(){function t(){this.worldTransform=new ss,this.localTransform=new ss,this.position=new os(this.onChange,this,0,0),this.scale=new os(this.onChange,this,1,1),this.pivot=new os(this.onChange,this,0,0),this.skew=new os(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();yo.SORTABLE_CHILDREN=!1;var gs=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ts.EMPTY:((t=t||new ts(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,r=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,l=n*e.x+i*e.y+s,u=r*e.x+o*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,e=(o=t[2])<e?o:e,n=(s=t[3])<n?s:n,r=o>r?o:r,i=s>i?s:i,e=(o=t[4])<e?o:e,n=(s=t[5])<n?s:n,r=o>r?o:r,i=s>i?s:i,e=(o=t[6])<e?o:e,n=(s=t[7])<n?s:n,r=o>r?o:r,i=s>i?s:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,s=t.b,a=t.c,l=t.d,u=t.tx,c=t.ty,h=this.minX,p=this.minY,f=this.maxX,d=this.maxY,m=o*e+a*n+u,g=s*e+l*n+c;h=m<h?m:h,p=g<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*r+a*n+u)<h?m:h,p=(g=s*r+l*n+c)<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*e+a*i+u)<h?m:h,p=(g=s*e+l*i+c)<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*r+a*i+u)<h?m:h,p=(g=s*r+l*i+c)<p?g:p,f=m>f?m:f,d=g>d?g:d,this.minX=h,this.minY=p,this.maxX=f,this.maxY=d},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,s=this.maxY,a=e;a<n;a+=2){var l=t[a],u=t[a+1];r=l<r?l:r,i=u<i?u:i,o=l>o?l:o,s=u>s?u:s}this.minX=r,this.minY=i,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var s=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,h=t.ty,p=this.minX,f=this.minY,d=this.maxX,m=this.maxY,g=n;g<r;g+=2){var y=e[g],v=e[g+1],_=s*y+l*v+c,b=u*v+a*y+h;p=Math.min(p,_-i),d=Math.max(d,_+i),f=Math.min(f,b-o),m=Math.max(m,b+o)}this.minX=p,this.minY=f,this.maxX=d,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){t-=i,e-=o,n+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),ys=function(t,e){return ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ys(t,e)};function vs(t,e){function n(){this.constructor=t}ys(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _s,bs,xs,Es,Ss,ws,Ts,Ms,Rs,As,Ps,Is,Cs,Os,Ns,Ls,Ds,Us,Fs,ks,Bs=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new ms,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new gs,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return vs(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ts),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new ts),t=this._localBoundsRect),this._localBounds||(this._localBounds=new gs);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,s,a,l){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Gs),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Ko},set:function(t){this.transform.rotation=t*Zo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var e;if(this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1));if(this._mask=t,this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}},enumerable:!1,configurable:!0}),e}(vo),Gs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return vs(e,t),e}(Bs);function js(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Bs.prototype.displayObjectUpdateTransform=Bs.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(_s||(_s={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(bs||(bs={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(xs||(xs={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Es||(Es={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ss||(Ss={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(ws||(ws={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ts||(Ts={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Ms||(Ms={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Rs||(Rs={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(As||(As={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ps||(Ps={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Is||(Is={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Cs||(Cs={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Os||(Os={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Ns||(Ns={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Ls||(Ls={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(Ds||(Ds={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(Us||(Us={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Fs||(Fs={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(ks||(ks={}));var zs=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=yo.SORTABLE_CHILDREN,e.sortDirty=!1,e}return vs(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Uo(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Uo(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Uo(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,i=e-r;if(i>0&&i<=e){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(js),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.isMaskData?e._mask.maskObject:e._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var s=this.children[i];s.visible&&s.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(t);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var i=e&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Ds.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"===typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(Bs);zs.prototype.containerUpdateTransform=zs.prototype.updateTransform;var Hs,Vs=function(){return Vs=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vs.apply(this,arguments)};!function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"}(Hs||(Hs={}));var Xs,Ws=function(t){if("function"===typeof t||"object"===typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e="object"!==typeof t.extension?{type:t.extension}:t.extension;t=Vs(Vs({},e),{ref:t})}if("object"!==typeof t)throw new Error("Invalid extension type");return"string"===typeof(t=Vs({},t)).type&&(t.type=[t.type]),t},Ys={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,n=[],r=0;r<arguments.length;r++)n[r]=t[r];return n.map(Ws).forEach((function(t){t.type.forEach((function(n){var r,i;return null===(i=(r=e._removeHandlers)[n])||void 0===i?void 0:i.call(r,t)}))})),this},add:function(){for(var t=arguments,e=this,n=[],r=0;r<arguments.length;r++)n[r]=t[r];return n.map(Ws).forEach((function(t){t.type.forEach((function(n){var r=e._addHandlers,i=e._queue;r[n]?r[n](t):(i[n]=i[n]||[],i[n].push(t))}))})),this},handle:function(t,e,n){var r=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(r[t]||i[t])throw new Error("Extension type "+t+" already has a handler");r[t]=e,i[t]=n;var o=this._queue;return o[t]&&(o[t].forEach((function(t){return e(t)})),delete o[t]),this},handleByMap:function(t,e){return this.handle(t,(function(t){e[t.name]=t.ref}),(function(t){delete e[t.name]}))},handleByList:function(t,e){return this.handle(t,(function(n){var r,i;e.push(n.ref),t===Hs.Loader&&(null===(i=(r=n.ref).add)||void 0===i||i.call(r))}),(function(t){var n=e.indexOf(t.ref);-1!==n&&e.splice(n,1)}))}},qs=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,u=this.items;this._aliasCount++;for(var c=0,h=u.length;c<h;c++)u[c][l](t,e,n,r,i,o,s,a);return u===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(qs.prototype,{dispatch:{value:qs.prototype.emit},run:{value:qs.prototype.emit}}),yo.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(Xs||(Xs={}));var $s=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),Ks=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new $s(null,null,1/0),this.deltaMS=1/yo.TARGET_FPMS,this.elapsedMS=1/yo.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=Xs.NORMAL),this._addListener(new $s(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=Xs.NORMAL),this._addListener(new $s(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*yo.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,yo.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),Zs=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Xs.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Ks.shared:new Ks,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t.extension=Hs.Application,t}();yo.PREFER_ENV=$i.any?Ki.WEBGL:Ki.WEBGL2,yo.STRICT_TEXTURE_CACHE=!1;var Js=[];function Qs(t,e){if(!t)return null;var n="";if("string"===typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=Js.length-1;i>=0;--i){var o=Js[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var ta=function(t,e){return ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ta(t,e)};function ea(t,e){function n(){this.constructor=t}ta(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var na=function(){return na=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},na.apply(this,arguments)};var ra=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new qs("setRealSize"),this.onUpdate=new qs("update"),this.onError=new qs("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),ia=function(t){function e(e,n){var r=this,i=n||{},o=i.width,s=i.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,s)||this).data=e,r}return ea(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===lo.UNPACK);var i=e.realWidth,o=e.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(e.target,0,0,0,i,o,e.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(e.target,0,n.internalFormat,i,o,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ra),oa={scaleMode:oo.NEAREST,format:eo.RGBA,alphaMode:lo.NPM},sa=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=t.call(this)||this,i=(n=n||{}).alphaMode,o=n.mipmap,s=n.anisotropicLevel,a=n.scaleMode,l=n.width,u=n.height,c=n.wrapMode,h=n.format,p=n.type,f=n.target,d=n.resolution,m=n.resourceOptions;return!e||e instanceof ra||((e=Qs(e,m)).internal=!0),r.resolution=d||yo.RESOLUTION,r.width=Math.round((l||0)*r.resolution)/r.resolution,r.height=Math.round((u||0)*r.resolution)/r.resolution,r._mipmap=void 0!==o?o:yo.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:yo.ANISOTROPIC_LEVEL,r._wrapMode=c||yo.WRAP_MODE,r._scaleMode=void 0!==a?a:yo.SCALE_MODE,r.format=h||eo.RGBA,r.type=p||ro.UNSIGNED_BYTE,r.target=f||no.TEXTURE_2D,r.alphaMode=void 0!==i?i:lo.UNPACK,r.uid=Bo(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=l>0&&u>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(e),r}return ea(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Lo(this.realWidth)&&Lo(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Vo[this.cacheId],delete Ho[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,r){void 0===r&&(r=yo.STRICT_TEXTURE_CACHE);var i="string"===typeof t,o=null;if(i)o=t;else{if(!t._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+Bo()}o=t._pixiId}var a=Vo[o];if(i&&r&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||((a=new e(t,n)).cacheId=o,e.addToCache(a,o)),a},e.fromBuffer=function(t,n,r,i){t=t||new Float32Array(n*r*4);var o=new ia(t,{width:n,height:r}),s=t instanceof Float32Array?ro.FLOAT:ro.UNSIGNED_BYTE;return new e(o,Object.assign({},oa,i||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Vo[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Vo[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=Vo[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Vo[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete Vo[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(vo),aa=function(t){function e(e,n){var r=this,i=n||{},o=i.width,s=i.height;(r=t.call(this,o,s)||this).items=[],r.itemDirtyIds=[];for(var a=0;a<e;a++){var l=new sa;r.items.push(l),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return ea(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof ra?this.addResourceAt(t[n],n):this.addResourceAt(Qs(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(ra),la=function(t){function e(e,n){var r,i,o=this,s=n||{},a=s.width,l=s.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:a,height:l})||this,r&&o.initFromArray(r,n),o}return ea(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=no.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this,i=r.length,o=r.itemDirtyIds,s=r.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,e.format,n.type,null);for(var l=0;l<i;l++){var u=s[l];o[l]<u.dirtyId&&(o[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(aa),ua=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return ea(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,Wo||(Wo=document.createElement("a")),Wo.href=t;var n=xo.parse(Wo.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}(e):!1!==n&&(t.crossOrigin="string"===typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var i=t.gl,o=e.realWidth,s=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===lo.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||n.width!==o||n.height!==s?(n.width=o,n.height=s,i.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ra),ca=function(t){function e(e){return t.call(this,e)||this}return ea(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(ua),ha=function(t){function e(n,r){var i=this,o=r||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=t.call(this,6,{width:s,height:a})||this;for(var c=0;c<e.SIDES;c++)i.items[c].target=no.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=!1!==u,n&&i.initFromArray(n,r),!1!==l&&i.load(),i}return ea(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=no.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=no.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];(i[o]<s.dirtyId||r.dirtyId<n.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[o]=s.dirtyId):i[o]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(aa),pa=function(t){function e(e,n){var r=this;if(n=n||{},!(e instanceof HTMLImageElement)){var i=new Image;ua.crossOrigin(i,e,n.crossorigin),i.src=e,e=i}return r=t.call(this,e)||this,!e.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=e.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:yo.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"===typeof n.alphaMode?n.alphaMode:null,r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return ea(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:null===t.alphaMode||t.alphaMode===lo.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"===typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var s in o){var a=o[s];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"===typeof t||t instanceof HTMLImageElement},e}(ua),fa=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,yo.ADAPTER.createCanvas())||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return ea(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;ua.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,o=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var s=t.source;s.width=i,s.height=o,s._pixiId="canvas_"+Bo(),s.getContext("2d").drawImage(e,0,0,n,r,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"===typeof t&&t.startsWith("data:image/svg+xml")||"string"===typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(ua),da=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"===typeof n&&(n=[n]);var s=n[0].src||n[0];ua.crossOrigin(o,s,r.crossorigin);for(var a=0;a<n.length;++a){var l=document.createElement("source"),u=n[a],c=u.src,h=u.mime,p=(c=c||n[a]).split("?").shift().toLowerCase(),f=p.slice(p.lastIndexOf(".")+1);h=h||e.MIME_TYPES[f]||"video/"+f,l.src=c,l.type=h,o.appendChild(l)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return ea(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=Ks.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){return this.source.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ks.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ks.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Ks.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ks.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ks.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(ua),ma=function(t){function e(e){return t.call(this,e)||this}return ea(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap},e}(ua);Js.push(pa,ma,ca,da,fa,ia,ha,la);var ga={__proto__:null,Resource:ra,BaseImageResource:ua,INSTALLED:Js,autoDetectResource:Qs,AbstractMultiResource:aa,ArrayResource:la,BufferResource:ia,CanvasResource:ca,CubeResource:ha,ImageResource:pa,SVGResource:fa,VideoResource:da,ImageBitmapResource:ma},ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ea(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===lo.UNPACK);var i=e.realWidth,o=e.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(e.target,0,0,0,i,o,e.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(e.target,0,n.internalFormat,i,o,0,e.format,n.type,this.data)),!0},e}(ia),va=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new qs("disposeFramebuffer"),this.multisample=mo.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new sa(null,{scaleMode:oo.NEAREST,resolution:1,mipmap:ao.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new sa(new ya(null,{width:this.width,height:this.height}),{scaleMode:oo.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ao.OFF,format:eo.DEPTH_COMPONENT,type:ro.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),_a=function(t){function e(e){void 0===e&&(e={});var n=this;"number"===typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:mo.NONE,(n=t.call(this,null,e)||this).mipmap=ao.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new va(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return ea(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(sa),ba=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,s=t.height/2/i,a=t.x/r+o,l=t.y/i+s;n=ds.add(n,ds.NW),this.x0=a+o*ds.uX(n),this.y0=l+s*ds.uY(n),n=ds.add(n,2),this.x1=a+o*ds.uX(n),this.y1=l+s*ds.uY(n),n=ds.add(n,2),this.x2=a+o*ds.uX(n),this.y2=l+s*ds.uY(n),n=ds.add(n,2),this.x3=a+o*ds.uX(n),this.y3=l+s*ds.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),xa=new ba;function Ea(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Sa=function(t){function e(n,r,i,o,s,a){var l=t.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new ts(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=xa,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Jo(a.x,a.y):new Jo(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return ea(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&Ho[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===xa&&(this._uvs=new ba),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=yo.STRICT_TEXTURE_CACHE);var i="string"===typeof t,o=null;if(i)o=t;else if(t instanceof sa){if(!t.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";t.cacheId=s+"-"+Bo(),sa.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){s=n&&n.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+Bo()}o=t._pixiId}var a=Ho[o];if(i&&r&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||t instanceof sa?!a&&t instanceof sa&&(a=new e(t),e.addToCache(a,o)):(n.resolution||(n.resolution=Yo(t)),(a=new e(new sa(t,n))).baseTexture.cacheId=o,sa.addToCache(a.baseTexture,o),e.addToCache(a,o)),a},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null===n||void 0===n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(sa.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,r,i){var o=new sa(t,Object.assign({scaleMode:yo.SCALE_MODE,resolution:Yo(n)},i)),s=o.resource;s instanceof pa&&(s.url=n);var a=new e(o);return r||(r=n),sa.addToCache(a.baseTexture,r),e.addToCache(a,r),r!==n&&(sa.addToCache(a.baseTexture,n),e.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise((function(t){a.baseTexture.once("loaded",(function(){return t(a)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Ho[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Ho[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=Ho[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Ho[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)Ho[t.textureCacheIds[r]]===t&&delete Ho[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,u="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+u)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new sa),Ea(e._EMPTY),Ea(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=yo.ADAPTER.createCanvas(16,16),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(sa.from(t)),Ea(e._WHITE),Ea(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(vo),wa=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return ea(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"===typeof t&&(jo("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new _a(t))},e}(Sa),Ta=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=mo.NONE);var r=new _a(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new wa(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var i;void 0===n&&(n=1),void 0===r&&(r=mo.NONE),t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?i=r>1?-r:-1:(i=((65535&(t=No(t)))<<16|65535&(e=No(e)))>>>0,r>1&&(i+=4294967296*r)),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(t,e,r)),o.filterPoolKey=i,o.setResolution(n),o},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||mo.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),Ma=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=ro.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=i,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),Ra=0,Aa=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=Ra++,this.disposeRunner=new qs("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===go.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?go.ELEMENT_ARRAY_BUFFER:go.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),Pa={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Ia={5126:4,5123:2,5121:1},Ca=0,Oa={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Na=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ca++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new qs("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,s,a){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Aa||(e instanceof Array&&(e=new Float32Array(e)),e=new Aa(e));var l=t.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],e,n,r,i);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Ma(c,n,r,i,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Aa||(t instanceof Array&&(t=new Uint16Array(t)),t=new Aa(t)),t.type=go.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new Aa;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),n.push(i.size*Ia[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var s=new ArrayBuffer(4*n),a=null,l=0;for(o=0;o<t.length;o++){var u=e[o],c=t[o],h=Oo(c);i[h]||(i[h]=new Pa[h](s)),a=i[h];for(var p=0;p<c.length;p++)a[(p/u|0)*r+l+p%u]=c[p];l+=u}return new Float32Array(s)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new Aa(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new Ma(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=go.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,i=[],o=[],s=[],a=0;a<e.length;a++){n=e[a];for(var l=0;l<n.buffers.length;l++)o[l]=o[l]||0,o[l]+=n.buffers[l].data.length,s[l]=0}for(a=0;a<n.buffers.length;a++)i[a]=new(Oa[Oo(n.buffers[a].data)])(o[a]),r.buffers[a]=new Aa(i[a]);for(a=0;a<e.length;a++){n=e[a];for(l=0;l<n.buffers.length;l++)i[l].set(n.buffers[l].data,s[l]),s[l]+=n.buffers[l].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=go.ELEMENT_ARRAY_BUFFER;var u=0,c=0,h=0,p=0;for(a=0;a<n.buffers.length;a++)if(n.buffers[a]!==n.indexBuffer){p=a;break}for(var a in n.attributes){var f=n.attributes[a];(0|f.buffer)===p&&(c+=f.size*Ia[f.type]/4)}for(a=0;a<e.length;a++){var d=e[a].indexBuffer.data;for(l=0;l<d.length;l++)r.indexBuffer.data[l+h]+=u;u+=e[a].buffers[p].data.length/c,h+=d.length}}return r},t}(),La=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return ea(e,t),e}(Na),Da=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Aa(e.vertices),e.uvBuffer=new Aa(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return ea(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Na),Ua=0,Fa=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ua++,this.static=!!e,this.ubo=!!n,t instanceof Aa?(this.buffer=t,this.buffer.type=go.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Aa(new Float32Array(1)),this.buffer.type=go.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null===n||void 0===n||n,!0)},t}(),ka=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=mo.NONE,this.sourceFrame=new ts,this.destinationFrame=new ts,this.bindingSourceFrame=new ts,this.bindingDestinationFrame=new ts,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Ba=[new Jo,new Jo,new Jo,new Jo],Ga=new ss,ja=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ta,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new La,this.quadUv=new Da,this.tempRect=new ts,this.activeState={},this.globalUniforms=new Fa({outputFrame:new ts,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n,r,i=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new ka,a=this.renderer.renderTexture,l=e[0].resolution,u=e[0].multisample,c=e[0].padding,h=e[0].autoFit,p=null===(n=e[0].legacy)||void 0===n||n,f=1;f<e.length;f++){var d=e[f];l=Math.min(l,d.resolution),u=Math.min(u,d.multisample),c=this.useMaxPadding?Math.max(c,d.padding):c+d.padding,h=h&&d.autoFit,p=p||null===(r=d.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=l,s.multisample=u,s.legacy=p,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(c);var m=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(Ga.copyFrom(i.projection.transform).invert(),m),h?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,u),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,g),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var i=r.inputSize,o=r.inputPixel,s=r.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*e.resolution),o[1]=Math.round(i[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*i[2]-.5*o[2],s[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){var a=r.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,l.renderTexture,uo.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,e.resolution);c.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){1===h&&e.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,e.resolution)).filterFrame=u.filterFrame),n[h].apply(this,u,c,uo.CLEAR,e);var p=u;u=c,c=p}n[h].apply(this,u,l.renderTexture,uo.BLEND,e),h>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=uo.CLEAR);var n=this.renderer,r=n.renderTexture,i=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&i.stateId||this.forceClear;(e===uo.CLEAR||e===uo.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var i=this.renderer;i.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(to.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(to.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,s=t.set(i.width,0,0,i.height,r.x,r.y),a=e.worldTransform.copyTo(ss.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=mo.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"===typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||mo.NONE);return i.filterFrame=t.filterFrame,i},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=Ba[0],r=Ba[1],i=Ba[2],o=Ba[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var s=Math.min(n.x,r.x,i.x,o.x),a=Math.min(n.y,r.y,i.y,o.y),l=Math.max(n.x,r.x,i.x,o.x),u=Math.max(n.y,r.y,i.y,o.y);e.x=s,e.y=a,e.width=l-s,e.height=u-a},t.prototype.roundFrame=function(t,e,n,r,i){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(i){var o=i.a,s=i.b,a=i.c,l=i.d;if((Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}(i=i?Ga.copyFrom(i):Ga.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},t}(),za=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),Ha=function(){function t(t){this.renderer=t,this.emptyRenderer=new za(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,s=t.count,a=0,l=0;l<s;l++){var u=i[l],c=u._batchLocation;if(c>=0&&c<r&&e[c]===u)o[l]=c;else for(;a<r;){var h=e[a];if(!h||h._batchEnabled!==n||h._batchLocation!==a){o[l]=a,u._batchLocation=a,e[a]=u;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),Va=0,Xa=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Va++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Va++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(yo.PREFER_ENV>=Ki.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),Wa=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=mo.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},Ya=new ts,qa=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new va(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ts,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;yo.PREFER_ENV===Ki.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var s=t.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>n,l=e.height>>n,u=a/e.width;this.setViewport(e.x*u,e.y*u,a,l)}else{a=t.width>>n,l=t.height>>n;this.setViewport(0,0,a,l)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,i){void 0===i&&(i=Ji.COLOR|Ji.DEPTH);var o=this.gl;o.clearColor(t,e,n,r),o.clear(i)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new Wa(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var s=r[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var s=[],a=0;a<o;a++){var l=i[a],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),0===a&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+a,l.target,u._glTextures[this.CONTEXT_UID].texture,e),s.push(n.COLOR_ATTACHMENT0+a))}if((s.length>1&&n.drawBuffers(s),t.depthTexture)&&this.writeDepthTexture){var c=t.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=mo.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=mo.NONE),n},t.prototype.blit=function(t,e,n){var r=this,i=r.current,o=r.renderer,s=r.gl,a=r.CONTEXT_UID;if(2===o.context.webGLVersion&&i){var l=i.glFramebuffers[a];if(l){if(!t){if(!l.msaaBuffer)return;var u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new va(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),(t=l.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===i.width&&t.height===i.height||(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}e||((e=Ya).width=i.width,e.height=i.height),n||(n=e);var c=e.width===n.width&&e.height===n.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,c?s.NEAREST:s.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ts},t.prototype.destroy=function(){this.renderer=null},t}(),$a={5126:4,5123:2,5121:1},Ka=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;yo.PREFER_ENV===Ki.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=function(t,e){return r.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,i,o){return r.drawElementsInstancedANGLE(t,e,n,i,o)},t.drawArraysInstanced=function(t,e,n,i){return r.drawArraysInstancedANGLE(t,e,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=e.program;s.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var a=this.getSignature(t,s),l=t.glVertexArrayObjects[this.CONTEXT_UID],u=l[a];if(u)return l[s.id]=u,u;var c=t.buffers,h=t.attributes,p={},f={};for(var d in c)p[d]=0,f[d]=0;for(var d in h)!h[d].size&&s.attributeData[d]?h[d].size=s.attributeData[d].size:h[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),p[h[d].buffer]+=h[d].size*$a[h[d].type];for(var d in h){var m=h[d],g=m.size;void 0===m.stride&&(p[m.buffer]===g*$a[m.type]?m.stride=0:m.stride=p[m.buffer]),void 0===m.start&&(m.start=f[m.buffer],f[m.buffer]+=g*$a[m.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(var y=0;y<c.length;y++){var v=c[y];o.bind(v),n&&v._glBuffers[i].refCount++}return this.activateVao(t,s),this._activeVao=u,l[s.id]=u,l[a]=u,u},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,s=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(s)for(var a=0;a<o.length;a++){var l=o[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0!==l.refCount||e||s.dispose(o[a],e))}if(!e)for(var u in r)if("g"===u[0]){var c=r[u];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,s=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var a=null;for(var l in s){var u=s[l],c=o[u.buffer],h=c._glBuffers[r];if(e.attributeData[l]){a!==h&&(i.bind(c),a=h);var p=e.attributeData[l].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(p,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(n||0)*s,r||1):i.drawElements(t,e||o.indexBuffer.data.length,a,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),Za=function(){function t(t){void 0===t&&(t=null),this.type=po.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=yo.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=po.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function Ja(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function Qa(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},s=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),a=[""];s.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var l=n.join("\n");a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function tl(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function el(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return tl(2*e);case"bvec3":return tl(3*e);case"bvec4":return tl(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var nl,rl={},il=rl;function ol(){if(!nl){nl=ho.MEDIUM;var t=function(){if(il===rl||il&&il.isContextLost()){var t=yo.ADAPTER.createCanvas(),e=void 0;yo.PREFER_ENV>=Ki.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),il=e}return il}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);nl=e.precision?ho.HIGH:ho.MEDIUM}}return nl}function sl(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===ho.HIGH&&n!==ho.HIGH&&(r=ho.MEDIUM),"precision "+r+" float;\n"+t}return n!==ho.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var al={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ll(t){return al[t]}var ul=null,cl={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function hl(t,e){if(!ul){var n=Object.keys(cl);ul={};for(var r=0;r<n.length;++r){var i=n[r];ul[t[i]]=cl[i]}}return ul[e]}var pl=[{test:function(t){return"float"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t,e){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray&&(null==e||void 0!==e.castToBaseTexture)},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],fl={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},dl={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var ml,gl=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function yl(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var vl=0,_l={},bl=function(){function t(e,n,r){void 0===r&&(r="pixi-shader"),this.id=vl++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),_l[r]?(_l[r]++,r+="-"+_l[r]):_l[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=sl(this.vertexSrc,yo.PRECISION_VERTEX,ho.HIGH),this.fragmentSrc=sl(this.fragmentSrc,yo.PRECISION_FRAGMENT,ol())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,o=zo[i];return o||(zo[i]=o=new t(e,n,r)),o},t}(),xl=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof Fa?e:new Fa(e):new Fa({}),this.disposeRunner=new qs("disposeShader")}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(bl.from(e,n),r)},t}(),El=function(){function t(){this.data=0,this.blendMode=Qi.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Qi.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Sl=function(t){function e(n,r,i){var o=this,s=bl.from(n||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=t.call(this,s,i)||this).padding=0,o.resolution=yo.FILTER_RESOLUTION,o.multisample=yo.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new El,o}return ea(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(xl),wl=new ss,Tl=function(){function t(t,e){this._texture=t,this.mapCoord=new ss,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(wl.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(wl));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(e._frame.x+a+l)/o.width,s[1]=(e._frame.y+a+l)/o.height,s[2]=(e._frame.x+e._frame.width-a+l)/o.width,s[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Ml=function(t){function e(e,n,r){var i=this,o=null;return"string"!==typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new ss,i}return ea(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Tl(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(Sl),Rl=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new Za;r.pooled=!0,r.maskObject=e,n=r}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==po.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case po.SCISSOR:this.renderer.scissor.push(n);break;case po.STENCIL:this.renderer.stencil.push(n);break;case po.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case po.COLOR:this.pushColorMask(n)}n.type===po.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case po.SCISSOR:this.renderer.scissor.pop(e);break;case po.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case po.SPRITE:this.popSpriteMask(e);break;case po.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===po.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=po.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=po.SCISSOR:t.type=po.STENCIL:t.type=po.COLOR},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Ml]);var s,a,l=this.renderer,u=l.renderTexture;if(u.current){var c=u.current;s=t.resolution||c.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:c.multisample}else s=t.resolution||l.resolution,a=null!==(n=t.multisample)&&void 0!==n?n:l.multisample;o[0].resolution=s,o[0].multisample=a,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),l.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(t){var e=t._colorMask,n=t._colorMask=e&t.colorMask;n!==e&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))},t.prototype.popColorMask=function(t){var e=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==e&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))},t.prototype.destroy=function(){this.renderer=null},t}(),Al=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Pl=new ss,Il=[],Cl=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=yo.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return ea(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var e;if(!t._scissorRectLocal){var n=t._scissorRect,r=t.maskObject,i=this.renderer,o=i.renderTexture,s=r.getBounds(!0,null!==(e=Il.pop())&&void 0!==e?e:new ts);this.roundFrameToPixels(s,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n&&s.fit(n),t._scissorRectLocal=s}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(e.isMatrixRotated(n.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?Pl.copyFrom(o):Pl.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;t&&Il.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Al),Ol=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=yo.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return ea(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;var i=t._colorMask;0!==i&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(t._colorMask=i,n.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{var n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=n?n._colorMask:15;0!==r&&(n._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==r&&(n._colorMask=r,e.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Al),Nl=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ss,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Ll=new ts,Dl=new ts,Ul=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ts,this.destinationFrame=new ts,this.viewportFrame=new ts}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,s=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(Ll.width=t.frame.width,Ll.height=t.frame.height,e=Ll),n||(Dl.x=t.frame.x,Dl.y=t.frame.y,Dl.width=e.width,Dl.height=e.height,n=Dl),i=r.framebuffer):(o=s.resolution,e||(Ll.width=s.screen.width,Ll.height=s.screen.height,e=Ll),n||((n=Ll).width=e.width,n.height=e.height));var a=this.viewportFrame;a.x=n.x*o,a.y=n.y*o,a.width=n.width*o,a.height=n.height*o,t||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(i,a),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,s=o.x,a=o.y,l=o.width,u=o.height;s=Math.round(s),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,a,l,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Fl(t,e,n,r,i){n.buffer.update(i)}var kl={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Bl={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Gl(t,e){if(!t.autoManage)return{size:0,syncFunc:Fl};for(var n=function(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}(t.uniforms,e),r=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var s=e[o];if(n=Bl[s.data.type],s.data.size>1&&(n=Math.max(n,16)*s.data.size),s.dataLen=n,r%n!==0&&r<16){var a=r%n%16;r+=a,i+=a}r+n>16?(i=16*Math.ceil(i/16),s.offset=i,i+=n,r=n):(s.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(n),i=r.uboElements,o=r.size,s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<i.length;a++){for(var l=i[a],u=t.uniforms[l.data.name],c=l.data.name,h=!1,p=0;p<pl.length;p++){var f=pl[p];if(f.codeUbo&&f.test(l.data,u)){s.push("offset = "+l.offset/4+";",pl[p].codeUbo(l.data.name,u)),h=!0;break}}if(!h)if(l.data.size>1){var d=ll(l.data.type),m=Math.max(Bl[l.data.type]/16,1),g=d/m,y=(4-g%4)%4;s.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+l.data.size*m+"; i++)\n                {\n                    for(var j = 0; j < "+g+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+y+";\n                }\n\n                ")}else{var v=kl[l.data.type];s.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n                "+v+";\n                ")}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}var jl=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function zl(t,e){var n=Ja(t,t.VERTEX_SHADER,e.vertexSrc),r=Ja(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||Qa(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||Qa(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,n,r),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var s=hl(e,o.type),a={type:s,name:o.name,size:ll(s),location:e.getAttribLocation(t,o.name)};n[o.name]=a}}return n}(i,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=hl(e,o.type);n[s]={name:s,index:i,type:l,size:o.size,isArray:a,value:el(l,o.size)}}return n}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,t.bindAttribLocation(i,s,o[s]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);var a={};for(var s in e.uniformData){var l=e.uniformData[s];a[s]={location:t.getUniformLocation(i,s),value:el(l.type,l.size)}}return new jl(i,a)}var Hl=0,Vl={textureCount:0,uboCount:0},Xl=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Hl++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"===typeof ml)return ml;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");ml=!0===t({a:"b"},"a","b")}catch(Dn){ml=!1}return ml}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(Vl.textureCount=0,Vl.uboCount=0,this.syncUniformGroup(t.uniformGroup,Vl)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var s=t.uniforms[i],a=!1,l=0;l<pl.length;l++)if(pl[l].test(o,s)){r.push(pl[l].code(i,s)),a=!0;break}if(!a){var u=(1!==o.size||o.isArray?dl:fl)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+u+";")}}else(null===(n=t.uniforms[i])||void 0===n?void 0:n.group)&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,Vl,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=Gl(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(s.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=zl(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var Wl=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Qi.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new El,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[Qi.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.ADD]=[t.ONE,t.ONE],e[Qi.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.NONE]=[0,0],e[Qi.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Qi.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Qi.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Qi.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Qi.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Qi.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Qi.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Qi.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Qi.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Qi.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Qi.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),Yl=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=yo.GC_MAX_IDLE,this.checkCountMax=yo.GC_MAX_CHECK_COUNT,this.mode=yo.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==co.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}();var ql=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ro.UNSIGNED_BYTE,this.internalFormat=eo.RGBA,this.samplerType=0},$l=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new sa,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,n,r,i,o,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,x,E,S;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[ro.UNSIGNED_BYTE]=((n={})[eo.RGBA]=t.RGBA8,n[eo.RGB]=t.RGB8,n[eo.RG]=t.RG8,n[eo.RED]=t.R8,n[eo.RGBA_INTEGER]=t.RGBA8UI,n[eo.RGB_INTEGER]=t.RGB8UI,n[eo.RG_INTEGER]=t.RG8UI,n[eo.RED_INTEGER]=t.R8UI,n[eo.ALPHA]=t.ALPHA,n[eo.LUMINANCE]=t.LUMINANCE,n[eo.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[ro.BYTE]=((r={})[eo.RGBA]=t.RGBA8_SNORM,r[eo.RGB]=t.RGB8_SNORM,r[eo.RG]=t.RG8_SNORM,r[eo.RED]=t.R8_SNORM,r[eo.RGBA_INTEGER]=t.RGBA8I,r[eo.RGB_INTEGER]=t.RGB8I,r[eo.RG_INTEGER]=t.RG8I,r[eo.RED_INTEGER]=t.R8I,r),e[ro.UNSIGNED_SHORT]=((i={})[eo.RGBA_INTEGER]=t.RGBA16UI,i[eo.RGB_INTEGER]=t.RGB16UI,i[eo.RG_INTEGER]=t.RG16UI,i[eo.RED_INTEGER]=t.R16UI,i[eo.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,i),e[ro.SHORT]=((o={})[eo.RGBA_INTEGER]=t.RGBA16I,o[eo.RGB_INTEGER]=t.RGB16I,o[eo.RG_INTEGER]=t.RG16I,o[eo.RED_INTEGER]=t.R16I,o),e[ro.UNSIGNED_INT]=((s={})[eo.RGBA_INTEGER]=t.RGBA32UI,s[eo.RGB_INTEGER]=t.RGB32UI,s[eo.RG_INTEGER]=t.RG32UI,s[eo.RED_INTEGER]=t.R32UI,s[eo.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[ro.INT]=((a={})[eo.RGBA_INTEGER]=t.RGBA32I,a[eo.RGB_INTEGER]=t.RGB32I,a[eo.RG_INTEGER]=t.RG32I,a[eo.RED_INTEGER]=t.R32I,a),e[ro.FLOAT]=((l={})[eo.RGBA]=t.RGBA32F,l[eo.RGB]=t.RGB32F,l[eo.RG]=t.RG32F,l[eo.RED]=t.R32F,l[eo.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[ro.HALF_FLOAT]=((u={})[eo.RGBA]=t.RGBA16F,u[eo.RGB]=t.RGB16F,u[eo.RG]=t.RG16F,u[eo.RED]=t.R16F,u),e[ro.UNSIGNED_SHORT_5_6_5]=((c={})[eo.RGB]=t.RGB565,c),e[ro.UNSIGNED_SHORT_4_4_4_4]=((h={})[eo.RGBA]=t.RGBA4,h),e[ro.UNSIGNED_SHORT_5_5_5_1]=((p={})[eo.RGBA]=t.RGB5_A1,p),e[ro.UNSIGNED_INT_2_10_10_10_REV]=((f={})[eo.RGBA]=t.RGB10_A2,f[eo.RGBA_INTEGER]=t.RGB10_A2UI,f),e[ro.UNSIGNED_INT_10F_11F_11F_REV]=((d={})[eo.RGB]=t.R11F_G11F_B10F,d),e[ro.UNSIGNED_INT_5_9_9_9_REV]=((m={})[eo.RGB]=t.RGB9_E5,m),e[ro.UNSIGNED_INT_24_8]=((g={})[eo.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,g),e[ro.FLOAT_32_UNSIGNED_INT_24_8_REV]=((y={})[eo.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,y),S=e):((v={})[ro.UNSIGNED_BYTE]=((_={})[eo.RGBA]=t.RGBA,_[eo.RGB]=t.RGB,_[eo.ALPHA]=t.ALPHA,_[eo.LUMINANCE]=t.LUMINANCE,_[eo.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,_),v[ro.UNSIGNED_SHORT_5_6_5]=((b={})[eo.RGB]=t.RGB,b),v[ro.UNSIGNED_SHORT_4_4_4_4]=((x={})[eo.RGBA]=t.RGBA,x),v[ro.UNSIGNED_SHORT_5_5_5_1]=((E={})[eo.RGBA]=t.RGBA,E),S=v),S}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new ql(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ql(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null===t||void 0===t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this,n=e.boundTextures,r=e.hasIntegerTextures,i=e.CONTEXT_UID;if(r)for(var o=t-1;o>=0;--o){var s=n[o];if(s)s._glTextures[i].samplerType!==io.FLOAT&&this.renderer.texture.unbind(s)}},t.prototype.initTexture=function(t){var e=new ql(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===ro.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==io.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,i=t.realHeight,o=n.gl;(e.width!==r||e.height!==i||e.dirtyId<0)&&(e.width=r,e.height=i,o.texImage2D(t.target,0,e.internalFormat,r,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Uo(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==ao.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=so.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==ao.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===oo.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===oo.LINEAR){var i=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===oo.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===oo.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),Kl={__proto__:null,FilterSystem:ja,BatchSystem:Ha,ContextSystem:Xa,FramebufferSystem:qa,GeometrySystem:Ka,MaskSystem:Rl,ScissorSystem:Cl,StencilSystem:Ol,ProjectionSystem:Nl,RenderTextureSystem:Ul,ShaderSystem:Xl,StateSystem:Wl,TextureGCSystem:Yl,TextureSystem:$l},Zl=new ss,Jl=function(t){function e(e,n){void 0===e&&(e=Zi.UNKNOWN);var r=t.call(this)||this;return n=Object.assign({},yo.RENDER_OPTIONS,n),r.options=n,r.type=e,r.screen=new ts(0,0,n.width,n.height),r.view=n.view||yo.ADAPTER.createCanvas(),r.resolution=n.resolution||yo.RESOLUTION,r.useContextAlpha=n.useContextAlpha,r.autoDensity=!!n.autoDensity,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(jo("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=n.transparent,r.backgroundAlpha=n.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}return ea(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"===typeof e&&(jo("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var s=wa.create(na({width:r.width,height:r.height},o));return Zl.tx=-r.x,Zl.ty=-r.y,this.render(t,{renderTexture:s,clear:!1,transform:Zl,skipUpdateTransform:!!t.parent}),s},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Zi.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Mo(t),To(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(vo),Ql=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},tu=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new Ql(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),eu=function(t){function e(n){var r=t.call(this,Zi.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new qs("destroy"),contextChange:new qs("contextChange"),reset:new qs("reset"),update:new qs("update"),postrender:new qs("postrender"),prerender:new qs("prerender"),resize:new qs("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Fa({projectionMatrix:new ss},!0),r.addSystem(Rl,"mask").addSystem(Xa,"context").addSystem(Wl,"state").addSystem(Xl,"shader").addSystem($l,"texture").addSystem(tu,"buffer").addSystem(Ka,"geometry").addSystem(qa,"framebuffer").addSystem(Cl,"scissor").addSystem(Ol,"stencil").addSystem(Nl,"projection").addSystem(Yl,"textureGC").addSystem(ja,"filter").addSystem(Ul,"renderTexture").addSystem(Ha,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;if(!So){if(yo.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.5.7 - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.5.7 - "+t+" - http://www.pixijs.com/");So=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return ea(e,t),e.create=function(t){if("undefined"===typeof Eo&&(Eo=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:yo.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!yo.ADAPTER.getWebGLRenderingContext())return!1;var e=yo.ADAPTER.createCanvas(),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(Dn){return!1}}()),Eo)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=mo.HIGH?this.multisample=mo.HIGH:t>=mo.MEDIUM?this.multisample=mo.MEDIUM:t>=mo.LOW?this.multisample=mo.LOW:this.multisample=mo.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,o;if(e&&(e instanceof wa?(jo("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],o=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!o){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return jo("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,e){jo("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Ys.add({name:t,type:Hs.RendererPlugin,ref:e})},e.__plugins={},e}(Jl);function nu(t){return eu.create(t)}Ys.handleByMap(Hs.RendererPlugin,eu.__plugins);var ru="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",iu=(function(){function t(t){jo("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}t.prototype.destroy=function(){this.renderer=null}}(),function(){this.texArray=null,this.blend=0,this.type=to.TRIANGLES,this.start=0,this.size=0,this.data=null}),ou=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),su=function(){function t(t){"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),au=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=El.for2d(),n.size=4*yo.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return ea(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;yo.PREFER_ENV===Ki.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),yo.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=gl.replace(/%forloop%/gi,yl(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new iu);for(;n.length<i;)n.push(new ou);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++sa._globalBatch,l=0,u=r[0],c=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var p=t[h];t[h]=null,p._batchEnabled!==a&&(u.count>=n&&(i.boundArray(u,o,a,n),this.buildDrawCalls(u,c,h),c=h,u=r[++l],++a),p._batchEnabled=a,p.touched=s,u.elements[u.count++]=p)}u.count>0&&(i.boundArray(u,o,a,n),this.buildDrawCalls(u,c,this._bufferSize),++l,++a);for(h=0;h<o.length;h++)o[h]=null;sa._globalBatch=a},e.prototype.buildDrawCalls=function(t,n,r){var i=this,o=i._bufferedElements,s=i._attributeBuffer,a=i._indexBuffer,l=i.vertexSize,u=e._drawCallPool,c=this._dcIndex,h=this._aIndex,p=this._iIndex,f=u[c];f.start=this._iIndex,f.texArray=t;for(var d=n;d<r;++d){var m=o[d],g=m._texture.baseTexture,y=Ao[g.alphaMode?1:0][m.blendMode];o[d]=null,n<d&&f.blend!==y&&(f.size=p-f.start,n=d,(f=u[++c]).texArray=t,f.start=p),this.packInterleavedGeometry(m,s,a,h,p),h+=m.vertexData.length/2*l,p+=m.indices.length,f.blend=y}n<r&&(f.size=p-f.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,n=t._attributeBuffer,r=t._indexBuffer;yo.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var l=o[a],u=l.texArray,c=l.type,h=l.size,p=l.start,f=l.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=f,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*p)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),yo.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=No(Math.ceil(t/8)),n=Do(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new su(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=No(Math.ceil(t/12)),n=Do(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var o=e.uint32View,s=e.float32View,a=r/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,h=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?Io(t._tintRGB,p):t._tintRGB+(255*p<<24),d=0;d<c.length;d+=2)s[r++]=c[d],s[r++]=c[d+1],s[r++]=l[d],s[r++]=l[d+1],o[r++]=f,s[r++]=h;for(d=0;d<u.length;d++)n[i++]=a+u[d]},e._drawCallPool=[],e._textureArrayPool=[],e}(za),lu=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=Fa.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new bl(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ss,default:this.defaultGroupCache[t]};return new xl(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),uu=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new Aa(null,e,!1),n._indexBuffer=new Aa(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,ro.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,ro.FLOAT).addAttribute("aColor",n._buffer,4,!0,ro.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,ro.FLOAT).addIndex(n._indexBuffer),n}return ea(e,t),e}(Na),cu="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",hu="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",pu=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:cu,fragment:hu,geometryClass:uu,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new lu(n,r),s.geometryClass=o,s.vertexSize=i,s}return ea(e,t),e}(au)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return cu},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return hu},enumerable:!1,configurable:!0}),t}(),fu=pu.create();Object.assign(fu,{extension:{name:"batch",type:Hs.RendererPlugin}});var du={},mu=function(t){Object.defineProperty(du,t,{get:function(){return jo("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),ga[t]}})};for(var gu in ga)mu(gu);var yu={},vu=function(t){Object.defineProperty(yu,t,{get:function(){return jo("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Kl[t]}})};for(var gu in Kl)vu(gu);Bs.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var _u=100,bu=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,($i.tablet||$i.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=_u+"px",e.style.height=_u+"px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!($i.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height,s=this.renderer,a=s.width,l=s.height,u=s.resolution,c=i/a*u,h=o/l*u,p=this.div;p.style.left=n+"px",p.style.top=r+"px",p.style.width=a+"px",p.style.height=l+"px";for(var f=0;f<this.children.length;f++){var d=this.children[f];if(d.renderId!==this.renderId)d._accessibleActive=!1,Uo(this.children,f,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,f--;else{p=d._accessibleDiv;var m=d.hitArea,g=d.worldTransform;d.hitArea?(p.style.left=(g.tx+m.x*g.a)*c+"px",p.style.top=(g.ty+m.y*g.d)*h+"px",p.style.width=m.width*g.a*c+"px",p.style.height=m.height*g.d*h+"px"):(m=d.getBounds(),this.capHitArea(m),p.style.left=m.x*c+"px",p.style.top=m.y*h+"px",p.style.width=m.width*c+"px",p.style.height=m.height*h+"px",p.title!==d.accessibleTitle&&null!==d.accessibleTitle&&(p.title=d.accessibleTitle),p.getAttribute("aria-label")!==d.accessibleHint&&null!==d.accessibleHint&&p.setAttribute("aria-label",d.accessibleHint)),d.accessibleTitle===p.title&&d.tabIndex===p.tabIndex||(p.title=d.accessibleTitle,p.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,n=e.width,r=e.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=_u+"px",e.style.height=_u+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"click",r),e.dispatchEvent(n,"pointertap",r),e.dispatchEvent(n,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[Hs.RendererPlugin,Hs.CanvasRendererPlugin]},t}(),xu=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Jo,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Eu=function(t,e){return Eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Eu(t,e)};var Su=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),wu=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!==(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!==(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!==(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Tu=function(){function t(){this._tempPoint=new Jo}return t.prototype.recursiveFindHit=function(t,e,n,r,i){var o;if(!e||!e.visible)return!1;var s=t.data.global,a=!1,l=i=e.interactive||i,u=!0;if(e.hitArea)r&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,u=!1)),l=!1;else if(e._mask&&r){var c=e._mask.isMaskData?e._mask.maskObject:e._mask;c&&!(null===(o=c.containsPoint)||void 0===o?void 0:o.call(c,s))&&(r=!1)}if(u&&e.interactiveChildren&&e.children)for(var h=e.children,p=h.length-1;p>=0;p--){var f=h[p],d=this.recursiveFindHit(t,f,n,r,l);if(d){if(!f.parent)continue;l=!1,d&&(t.target&&(r=!1),a=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),n&&n(t,e,!!a))),a},t.prototype.findHit=function(t,e,n,r){this.recursiveFindHit(t,e,n,r,!1)},t}(),Mu={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Bs.mixin(Mu);var Ru={target:null,data:{global:null}},Au=function(t){function e(e,n){var r=t.call(this)||this;return n=n||{},r.renderer=e,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new xu,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new Su,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new Tu,r._tempDisplayObject=new Gs,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function n(){this.constructor=t}Eu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Ru.target=null,Ru.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Ru,e,null,!0),Ru.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(Ks.system.add(this.tickerUpdate,this,Xs.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Ks.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,n)}else e&&"string"===typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},e.prototype.processInteractive=function(t,e,n,r){var i=this.search.findHit(t,e,n,r),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var l=o[a],u=l.displayObject,c=l.eventString,h=l.eventData;h.stopsPropagatingAt===u&&(h.stopPropagationHint=!0),this.dispatchEvent(u,c,h)}return i},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new wu(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){var r=this.normalizeToPointerData(t),i=r.length,o=t.target;t.composedPath&&t.composedPath().length>0&&(o=t.composedPath()[0]);for(var s=o!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var l=r[a],u=this.getInteractionDataForPointerId(l),c=this.configureInteractionEventForDOMEvent(this.eventData,l,u);if(c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,n,e||!s),this.emit(e?"pointercancel":"pointerup"+s,c),"mouse"===l.pointerType||"pen"===l.pointerType){var h=2===l.button;this.emit(h?"rightup"+s:"mouseup"+s,c)}else"touch"===l.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,c),this.releaseInteractionDataForPointerId(l.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(a){var u=2===r.button,c=wu.FLAGS,h=u?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==o&&o.flags&h;n?(this.dispatchEvent(e,u?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,u?"rightclick":"click",t),l=!0)):p&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[i];n&&!s&&(s=e.trackedPointers[i]=new wu(i)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)}},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new xu).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];"undefined"===typeof i.button&&(i.button=t.touches.length?1:0),"undefined"===typeof i.buttons&&(i.buttons=t.touches.length?1:0),"undefined"===typeof i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof i.width&&(i.width=i.radiusX||1),"undefined"===typeof i.height&&(i.height=i.radiusY||1),"undefined"===typeof i.tiltX&&(i.tiltX=0),"undefined"===typeof i.tiltY&&(i.tiltY=0),"undefined"===typeof i.pointerType&&(i.pointerType="touch"),"undefined"===typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"===typeof i.pressure&&(i.pressure=i.force||.5),"undefined"===typeof i.twist&&(i.twist=0),"undefined"===typeof i.tangentialPressure&&(i.tangentialPressure=0),"undefined"===typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"===typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{var o=t;"undefined"===typeof o.isPrimary&&(o.isPrimary=!0),"undefined"===typeof o.width&&(o.width=1),"undefined"===typeof o.height&&(o.height=1),"undefined"===typeof o.tiltX&&(o.tiltX=0),"undefined"===typeof o.tiltY&&(o.tiltY=0),"undefined"===typeof o.pointerType&&(o.pointerType="mouse"),"undefined"===typeof o.pointerId&&(o.pointerId=1),"undefined"===typeof o.pressure&&(o.pressure=.5),"undefined"===typeof o.twist&&(o.twist=0),"undefined"===typeof o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[Hs.RendererPlugin,Hs.CanvasRendererPlugin]},e}(vo),Pu=new ts,Iu=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e,n){var r,i,o=this.renderer,s=!1,a=!1;e&&(e instanceof wa?i=e:(i=this.renderer.generateTexture(e),a=!0)),i?(r=i.baseTexture.resolution,n=null!==n&&void 0!==n?n:i.frame,s=!1,o.renderTexture.bind(i)):(r=o.resolution,n||((n=Pu).width=o.width,n.height=o.height),s=!0,o.renderTexture.bind(null));var l=Math.round(n.width*r),u=Math.round(n.height*r),c=new Xo(l,u,1),h=new Uint8Array(4*l*u),p=o.gl;p.readPixels(Math.round(n.x*r),Math.round(n.y*r),l,u,p.RGBA,p.UNSIGNED_BYTE,h);var f=c.context.getImageData(0,0,l,u);if(t.arrayPostDivide(h,f.data),c.context.putImageData(f,0,0),s){var d=new Xo(c.width,c.height,1);d.context.scale(1,-1),d.context.drawImage(c.canvas,0,-u),c.destroy(),c=d}return a&&i.destroy(!0),c.canvas},t.prototype.pixels=function(e,n){var r,i,o=this.renderer,s=!1;e&&(e instanceof wa?i=e:(i=this.renderer.generateTexture(e),s=!0)),i?(r=i.baseTexture.resolution,n=null!==n&&void 0!==n?n:i.frame,o.renderTexture.bind(i)):(r=o.resolution,n||((n=Pu).width=o.width,n.height=o.height),o.renderTexture.bind(null));var a=Math.round(n.width*r),l=Math.round(n.height*r),u=new Uint8Array(4*a*l),c=o.gl;return c.readPixels(Math.round(n.x*r),Math.round(n.y*r),a,l,c.RGBA,c.UNSIGNED_BYTE,u),s&&i.destroy(!0),t.arrayPostDivide(u,u),u},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t.extension={name:"extract",type:Hs.RendererPlugin},t}(),Cu=function(){function t(t,e,n){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function Ou(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Nu,Lu=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n},t.prototype.has=function(t){if(!(t instanceof Cu))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!==typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return Ou(this,new Cu(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!==typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return Ou(this,new Cu(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof Cu))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function Du(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(t,e,r){e&&(i[n.q.name][e]=r)})),i}var Uu=null;function Fu(){}function ku(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function Bu(t){return t.toString().replace("object ","")}var Gu=function(){function t(e,n,r){if(this._dequeue=Fu,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!==typeof e||"string"!==typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Fu,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Lu,this.onProgress=new Lu,this.onComplete=new Lu,this.onAfterMiddleware=new Lu}return t.setExtensionLoadType=function(e,n){ku(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){ku(t._xhrTypeMap,e,n)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(n)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"===typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:"undefined"===typeof Nu&&(Nu=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),Nu&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!==(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!==typeof globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!==typeof globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Bu(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Bu(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Bu(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r="undefined"===typeof e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&"undefined"!==typeof e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(Dn){return void this.abort("Error trying to parse loaded json: "+Dn)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(s){return void this.abort("Error trying to parse loaded xml: "+s)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Uu||(Uu=document.createElement("a")),Uu.href=t;var n=Du(Uu.href,{strictMode:!0}),r=!n.port&&""===e.port||n.port===e.port,i=n.protocol?n.protocol+":":"";return n.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function ju(){}function zu(t){return function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];if(null===t)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,n)}}!function(t){var e,n,r,i;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(n=t.TYPE||(t.TYPE={}))[n.UNKNOWN=0]="UNKNOWN",n[n.JSON=1]="JSON",n[n.XML=2]="XML",n[n.IMAGE=3]="IMAGE",n[n.AUDIO=4]="AUDIO",n[n.VIDEO=5]="VIDEO",n[n.TEXT=6]="TEXT",(r=t.LOAD_TYPE||(t.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(i=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,avif:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,avif:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(Gu||(Gu={}));var Hu=function(t,e){this.data=t,this.callback=e},Vu=function(){function t(t,e){var n=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=ju,this.unsaturated=ju,this.empty=ju,this.drain=ju,this.error=ju,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!==typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i=new Hu(t,"function"===typeof r?r:ju);e?n._tasks.unshift(i):n._tasks.push(i),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(t.data,zu(n._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=ju,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,n,r){var i=0,o=t.length;!function s(a){a||i===o?n&&n(a):r?setTimeout((function(){e(t[i++],s)}),1):e(t[i++],s)}()},t.queue=function(e,n){return new t(e,n)},t}(),Xu=/(#[\w-]+)?$/,Wu=function(){function t(e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=Vu.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new Lu,this.onError=new Lu,this.onLoad=new Lu,this.onStart=new Lu,this.onComplete=new Lu;for(var i=0;i<t._plugins.length;++i){var o=t._plugins[i],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return t.prototype._add=function(t,e,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Gu(t,e,n),"function"===typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,o=[],s=0;s<i.children.length;++s)i.children[s].isComplete||o.push(i.children[s]);var a=i.progressChunk*(o.length+1)/(o.length+2);i.children.push(this.resources[t]),i.progressChunk=a;for(s=0;s<o.length;++s)o[s].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if(jo("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"===typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,n=Du(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=Xu.exec(e)[0];-1!==(e=e.slice(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,Vu.eachSeries(this._beforeMiddleware,(function(e,r){e.call(n,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Vu.eachSeries(this._afterMiddleware,(function(n,r){n.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return jo("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Ys.add({type:Hs.Loader,ref:e}),t},t._plugins=[],t}();Ys.handleByList(Hs.Loader,Wu._plugins),Wu.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===typeof t&&(n=t,r=e||n.callback||n.onComplete,e=n.url,t=n.name||n.key||n.url),"string"!==typeof e&&(r=n,n=e,e=t),"string"!==typeof e)throw new Error("No url passed to add resource to loader.");return"function"===typeof n&&(r=n,n=null),this._add(t,e,n,r)};var Yu=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Wu.shared:new Wu},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=Hs.Application,t}(),qu=function(){function t(){}return t.add=function(){Gu.setExtensionLoadType("svg",Gu.LOAD_TYPE.XHR),Gu.setExtensionXhrType("svg",Gu.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==Gu.TYPE.IMAGE&&"svg"!==t.extension)e();else{var n=t.data,r=t.url,i=t.name,o=t.metadata;Sa.fromLoader(n,r,i,o).then((function(n){t.texture=n,e()})).catch(e)}},t.extension=Hs.Loader,t}(),$u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ku(t,e){if(t.data){if(t.xhr&&t.xhrType===Gu.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!==typeof t.data){if(0===t.data.type.indexOf("image")){var n=globalThis.URL||globalThis.webkitURL,r=n.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=Gu.TYPE.IMAGE,void(t.data.onload=function(){n.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<t.length?r[o]=255&t.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+=$u.charAt(i[o])}return e}(t.xhr.responseText),t.type=Gu.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}var Zu,Ju,Qu=function(){function t(){}return t.extension=Hs.Loader,t.use=Ku,t}();Ys.add(qu,Qu),function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(Ju||(Ju={}));var tc=((Zu={})[Ju.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Zu[Ju.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Zu[Ju.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Zu[Ju.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Zu[Ju.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Zu[Ju.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Zu[Ju.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Zu[Ju.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Zu[Ju.COMPRESSED_R11_EAC]=.5,Zu[Ju.COMPRESSED_SIGNED_R11_EAC]=.5,Zu[Ju.COMPRESSED_RG11_EAC]=1,Zu[Ju.COMPRESSED_SIGNED_RG11_EAC]=1,Zu[Ju.COMPRESSED_RGB8_ETC2]=.5,Zu[Ju.COMPRESSED_RGBA8_ETC2_EAC]=1,Zu[Ju.COMPRESSED_SRGB8_ETC2]=.5,Zu[Ju.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Zu[Ju.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Zu[Ju.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Zu[Ju.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Zu[Ju.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Zu[Ju.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Zu[Ju.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Zu[Ju.COMPRESSED_RGB_ETC1_WEBGL]=.5,Zu[Ju.COMPRESSED_RGB_ATC_WEBGL]=.5,Zu[Ju.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Zu[Ju.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Zu[Ju.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Zu),ec=function(t,e){return ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ec(t,e)};function nc(t,e){function n(){this.constructor=t}ec(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function rc(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(Dn){o(Dn)}}function a(t){try{l(r.throw(t))}catch(Dn){o(Dn)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}function ic(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(Dn){o=[6,Dn],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var oc,sc,ac=function(t){function e(e,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var r,i,o=this;return"string"===typeof e?(r=e,i=new Uint8Array):(r=null,i=e),(o=t.call(this,i,n)||this).origin=r,o.buffer=i?new su(i):null,o.origin&&!1!==n.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return nc(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return rc(this,void 0,Promise,(function(){var t;return ic(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new su(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))}))},e}(ia),lc=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(n instanceof Uint8Array?n:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return nc(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var s=this._levelBuffers[i],a=s.levelID,l=s.levelWidth,u=s.levelHeight,c=s.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,a,this.format,l,u,0,c)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,n,r,i,o,s){for(var a=new Array(n),l=t.byteOffset,u=o,c=s,h=u+r-1&~(r-1),p=c+i-1&~(i-1),f=h*p*tc[e],d=0;d<n;d++)a[d]={levelID:d,levelWidth:n>1?u:h,levelHeight:n>1?c:p,levelBuffer:new Uint8Array(t.buffer,l,f)},l+=f,f=(h=(u=u>>1||1)+r-1&~(r-1))*(p=(c=c>>1||1)+i-1&~(i-1))*tc[e];return a},e}(ac),uc=function(){function t(){}return t.use=function(e,n){var r=e.data;if(e.type===Gu.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var i=r.textures,o=void 0,s=void 0,a=0,l=i.length;a<l;a++){var u=i[a],c=u.src,h=u.format;if(h||(s=c),t.textureFormats[h]){o=c;break}}if(!(o=o||s))return void n(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},f=xo.resolve(e.url.replace(this.baseUrl,""),o),d=r.cacheID;this.add(d,f,p,(function(t){if(t.error)n(t.error);else{var r=t.texture,i=void 0===r?null:r,o=t.textures,s=void 0===o?{}:o;Object.assign(e,{texture:i,textures:s}),n()}}))}else n()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=yo.ADAPTER.createCanvas().getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=n}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var n in t._textureFormats={},e){var r=e[n];r&&Object.assign(t._textureFormats,Object.getPrototypeOf(r))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=Hs.Loader,t}();function cc(t,e,n){var r={textures:{},texture:null};return e?(e.map((function(t){return new Sa(new sa(t,Object.assign({mipmap:ao.OFF,alphaMode:lo.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(e,n){var i=e.baseTexture,o=t+"-"+(n+1);sa.addToCache(i,o),Sa.addToCache(e,o),0===n&&(sa.addToCache(i,t),Sa.addToCache(e,t),r.texture=e),r.textures[o]=e})),r):r}var hc,pc,fc=124,dc=3,mc=4,gc=7,yc=19,vc=2,_c=0,bc=1,xc=2,Ec=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(hc||(hc={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(pc||(pc={}));var Sc,wc,Tc,Mc=((oc={})[827611204]=Ju.COMPRESSED_RGBA_S3TC_DXT1_EXT,oc[861165636]=Ju.COMPRESSED_RGBA_S3TC_DXT3_EXT,oc[894720068]=Ju.COMPRESSED_RGBA_S3TC_DXT5_EXT,oc),Rc=((sc={})[hc.DXGI_FORMAT_BC1_TYPELESS]=Ju.COMPRESSED_RGBA_S3TC_DXT1_EXT,sc[hc.DXGI_FORMAT_BC1_UNORM]=Ju.COMPRESSED_RGBA_S3TC_DXT1_EXT,sc[hc.DXGI_FORMAT_BC2_TYPELESS]=Ju.COMPRESSED_RGBA_S3TC_DXT3_EXT,sc[hc.DXGI_FORMAT_BC2_UNORM]=Ju.COMPRESSED_RGBA_S3TC_DXT3_EXT,sc[hc.DXGI_FORMAT_BC3_TYPELESS]=Ju.COMPRESSED_RGBA_S3TC_DXT5_EXT,sc[hc.DXGI_FORMAT_BC3_UNORM]=Ju.COMPRESSED_RGBA_S3TC_DXT5_EXT,sc[hc.DXGI_FORMAT_BC1_UNORM_SRGB]=Ju.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,sc[hc.DXGI_FORMAT_BC2_UNORM_SRGB]=Ju.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,sc[hc.DXGI_FORMAT_BC3_UNORM_SRGB]=Ju.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,sc);var Ac=[171,75,84,88,32,49,49,187,13,10,26,10],Pc=12,Ic=16,Cc=24,Oc=28,Nc=36,Lc=40,Dc=44,Uc=48,Fc=52,kc=56,Bc=60,Gc=64,jc=((Sc={})[ro.UNSIGNED_BYTE]=1,Sc[ro.UNSIGNED_SHORT]=2,Sc[ro.INT]=4,Sc[ro.UNSIGNED_INT]=4,Sc[ro.FLOAT]=4,Sc[ro.HALF_FLOAT]=8,Sc),zc=((wc={})[eo.RGBA]=4,wc[eo.RGB]=3,wc[eo.RG]=2,wc[eo.RED]=1,wc[eo.LUMINANCE]=1,wc[eo.LUMINANCE_ALPHA]=2,wc[eo.ALPHA]=1,wc),Hc=((Tc={})[ro.UNSIGNED_SHORT_4_4_4_4]=2,Tc[ro.UNSIGNED_SHORT_5_5_5_1]=2,Tc[ro.UNSIGNED_SHORT_5_6_5]=2,Tc);function Vc(t,e,n){void 0===n&&(n=!1);var r=new DataView(e);if(!function(t,e){for(var n=0;n<Ac.length;n++)if(e.getUint8(n)!==Ac[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}(t,r))return null;var i=67305985===r.getUint32(Pc,!0),o=r.getUint32(Ic,i),s=r.getUint32(Cc,i),a=r.getUint32(Oc,i),l=r.getUint32(Nc,i),u=r.getUint32(Lc,i)||1,c=r.getUint32(Dc,i)||1,h=r.getUint32(Uc,i)||1,p=r.getUint32(Fc,i),f=r.getUint32(kc,i),d=r.getUint32(Bc,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==p)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var m,g=l+3&-4,y=u+3&-4,v=new Array(h),_=l*u;if(0===o&&(_=g*y),void 0===(m=0!==o?jc[o]?jc[o]*zc[s]:Hc[o]:tc[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=n?function(t,e,n){var r=new Map,i=0;for(;i<e;){var o=t.getUint32(Gc+i,n),s=Gc+i+4,a=3-(o+3)%4;if(0===o||o>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&0!==t.getUint8(s+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=(new TextDecoder).decode(new Uint8Array(t.buffer,s,l)),c=new DataView(t.buffer,s+l+1,o-l-1);r.set(u,c),i+=4+o+a}return r}(r,d,i):null,x=_*m,E=l,S=u,w=g,T=y,M=Gc+d,R=0;R<f;R++){for(var A=r.getUint32(M,i),P=M+4,I=0;I<h;I++){var C=v[I];C||(C=v[I]=new Array(f)),C[R]={levelID:R,levelWidth:f>1||0!==o?E:w,levelHeight:f>1||0!==o?S:T,levelBuffer:new Uint8Array(e,P,x)},P+=x}M=(M+=A+4)%4!==0?M+4-M%4:M,x=(w=(E=E>>1||1)+4-1&-4)*(T=(S=S>>1||1)+4-1&-4)*m}return 0!==o?{uncompressed:v.map((function(t){var e=t[0].levelBuffer,n=!1;return o===ro.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):o===ro.UNSIGNED_INT?(n=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):o===ro.INT&&(n=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new ia(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:o,format:n?Xc(s):s}})),kvData:b}:{compressed:v.map((function(t){return new lc(null,{format:a,width:l,height:u,levels:f,levelBuffers:t})})),kvData:b}}function Xc(t){switch(t){case eo.RGBA:return eo.RGBA_INTEGER;case eo.RGB:return eo.RGB_INTEGER;case eo.RG:return eo.RG_INTEGER;case eo.RED:return eo.RED_INTEGER;default:return t}}Gu.setExtensionXhrType("dds",Gu.XHR_RESPONSE_TYPE.BUFFER);var Wc=function(){function t(){}return t.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,cc(t.name||t.url,function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,fc/Uint32Array.BYTES_PER_ELEMENT),r=n[dc],i=n[mc],o=n[gc],s=new Uint32Array(t,yc*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=s[1];if(4&a){var l=s[vc];if(808540228!==l){var u=Mc[l],c=new Uint8Array(t,128);return[new lc(c,{format:u,width:i,height:r,levels:o})]}var h=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),p=h[_c],f=h[bc],d=h[xc],m=h[Ec],g=Rc[p];if(void 0===g)throw new Error("DDSParser cannot parse texture data with DXGI format "+p);if(4===d)throw new Error("DDSParser does not support cubemap textures");if(f===pc.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var y=new Array;if(1===m)y.push(new Uint8Array(t,148));else{for(var v=tc[g],_=0,b=i,x=r,E=0;E<o;E++)_+=Math.max(1,b+3&-4)*Math.max(1,x+3&-4)*v,b>>>=1,x>>>=1;var S=148;for(E=0;E<m;E++)y.push(new Uint8Array(t,S,_)),S+=_}return y.map((function(t){return new lc(t,{format:g,width:i,height:r,levels:o})}))}if(64&a)throw new Error("DDSParser does not support uncompressed texture data.");if(512&a)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}(t.data),t.metadata))}catch(n){return void e(n)}e()},t.extension=Hs.Loader,t}();Gu.setExtensionXhrType("ktx",Gu.XHR_RESPONSE_TYPE.BUFFER);var Yc=function(){function t(){}return t.use=function(t,e){if("ktx"===t.extension&&t.data)try{var n=t.name||t.url,r=Vc(n,t.data,this.loadKeyValueData),i=r.compressed,o=r.uncompressed,s=r.kvData;if(i){var a=cc(n,i,t.metadata);if(s&&a.textures)for(var l in a.textures)a.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(t,a)}else if(o){var u={};o.forEach((function(t,e){var r=new Sa(new sa(t.resource,{mipmap:ao.OFF,alphaMode:lo.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),i=n+"-"+(e+1);s&&(r.baseTexture.ktxKeyValueData=s),sa.addToCache(r.baseTexture,i),Sa.addToCache(r,i),0===e&&(u[n]=r,sa.addToCache(r.baseTexture,n),Sa.addToCache(r,n)),u[i]=r})),Object.assign(t,{textures:u})}}catch(c){return void e(c)}e()},t.extension=Hs.Loader,t.loadKeyValueData=!1,t}(),qc=function(t,e){return qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},qc(t,e)};function $c(t,e){function n(){this.constructor=t}qc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}!function(t){function e(e,n,r,i){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=Qi.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}$c(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,To(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(zs);var Kc,Zc,Jc=function(){function t(t,e,n){this.geometry=new Na,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var i=t[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||ro.FLOAT,offset:i.offset},e[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Aa(function(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(s=this.dynamicProperties[n]).offset=e,e+=s.size,this.dynamicStride+=s.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Aa(this.dynamicData,!1,!1);var i=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(s=this.staticProperties[n]).offset=i,i+=s.size,this.staticStride+=s.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Aa(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var s=this.dynamicProperties[n];t.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===ro.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset)}for(n=0;n<this.staticProperties.length;++n){s=this.staticProperties[n];t.addAttribute(s.attributeName,this.staticBuffer,0,s.type===ro.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.type===ro.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.type===ro.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Qc=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new ss,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ro.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=xl.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=El.for2d(),n}return $c(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>n&&!t.autoResize&&(o=n);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture,l=a.alphaMode>0;this.state.blendMode=Po(t.blendMode,l),i.state.set(this.state);var u,c,h,p,f=i.gl,d=t.worldTransform.copyTo(this.tempMatrix);d.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=(u=t.tintRgb,c=t.worldAlpha,h=this.shader.uniforms.uColor,p=l,h=h||new Float32Array(4),p||void 0===p?(h[0]=u[0]*c,h[1]=u[1]*c,h[2]=u[2]*c):(h[0]=u[0],h[1]=u[1],h[2]=u[2]),h[3]=c,h),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var m=!1,g=0,y=0;g<o;g+=r,y+=1){var v=o-g;v>r&&(v=r),y>=s.length&&s.push(this._generateOneMoreBuffer(t));var _=s[y];_.uploadDynamic(e,g,v);var b=t._bufferUpdateIDs[y]||0;(m=m||_._updateID<b)&&(_._updateID=t._updateID,_.uploadStatic(e,g,v)),i.geometry.bind(_.geometry),f.drawElements(f.TRIANGLES,6*v,f.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,r=t._batchSize,i=t._properties,o=0;o<n;o+=r)e.push(new Jc(this.properties,i,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new Jc(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var s=0,a=0,l=0,u=0,c=0;c<n;++c){var h=t[e+c],p=h._texture,f=h.scale.x,d=h.scale.y,m=p.trim,g=p.orig;m?(s=(a=m.x-h.anchor.x*g.width)+m.width,l=(u=m.y-h.anchor.y*g.height)+m.height):(s=g.width*(1-h.anchor.x),a=g.width*-h.anchor.x,l=g.height*(1-h.anchor.y),u=g.height*-h.anchor.y),r[o]=a*f,r[o+1]=u*d,r[o+i]=s*f,r[o+i+1]=u*d,r[o+2*i]=s*f,r[o+2*i+1]=l*d,r[o+3*i]=a*f,r[o+3*i+1]=l*d,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s],l=a._texture.baseTexture.alphaMode>0,u=a.alpha,c=u<1&&l?Io(a._tintRGB,u):a._tintRGB+(255*u<<24);r[o]=c,r[o+i]=c,r[o+2*i]=c,r[o+3*i]=c,o+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:Hs.RendererPlugin},e}(za);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(Kc||(Kc={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Zc||(Zc={}));var th={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},eh=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Sa.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Sa.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),nh=function(t,e){return nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},nh(t,e)};function rh(t,e){function n(){this.constructor=t}nh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function ih(t,e){var n,r;void 0===e&&(e=!1);var i=t.length;if(!(i<6)){for(var o=0,s=0,a=t[i-2],l=t[i-1];s<i;s+=2){var u=t[s],c=t[s+1];o+=(u-a)*(c+l),a=u,l=c}if(!e&&o>0||e&&o<=0){var h=i/2;for(s=h+h%2;s<i;s+=2){var p=i-s-2,f=i-s-1,d=s,m=s+1;n=[t[d],t[p]],t[p]=n[0],t[d]=n[1],r=[t[m],t[f]],t[f]=r[0],t[m]=r[1]}}}}var oh={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,r=t.holes,i=e.points,o=e.indices;if(n.length>=6){ih(n,!1);for(var s=[],a=0;a<r.length;a++){var l=r[a];ih(l.points,!0),s.push(n.length/2),n=n.concat(l.points)}var u=_o(n,s,2);if(!u)return;var c=i.length/2;for(a=0;a<u.length;a+=3)o.push(u[a]+c),o.push(u[a+1]+c),o.push(u[a+2]+c);for(a=0;a<n.length;a++)i.push(n[a])}}},sh={build:function(t){var e,n,r,i,o,s,a=t.points;if(t.type===qo.CIRC){var l=t.shape;e=l.x,n=l.y,o=s=l.radius,r=i=0}else if(t.type===qo.ELIP){var u=t.shape;e=u.x,n=u.y,o=u.width,s=u.height,r=i=0}else{var c=t.shape,h=c.width/2,p=c.height/2;e=c.x+h,n=c.y+p,r=h-(o=s=Math.max(0,Math.min(c.radius,Math.min(h,p)))),i=p-s}if(o>=0&&s>=0&&r>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(o+s)),d=8*f+(r?4:0)+(i?4:0);if(a.length=d,0!==d){if(0===f)return a.length=8,a[0]=a[6]=e+r,a[1]=a[3]=n+i,a[2]=a[4]=e-r,void(a[5]=a[7]=n-i);var m=0,g=4*f+(r?2:0)+2,y=g,v=d,_=e+(T=r+o),b=e-T,x=n+(M=i);if(a[m++]=_,a[m++]=x,a[--g]=x,a[--g]=b,i){var E=n-M;a[y++]=b,a[y++]=E,a[--v]=E,a[--v]=_}for(var S=1;S<f;S++){var w=Math.PI/2*(S/f);_=e+(T=r+Math.cos(w)*o),b=e-T,x=n+(M=i+Math.sin(w)*s),E=n-M;a[m++]=_,a[m++]=x,a[--g]=x,a[--g]=b,a[y++]=b,a[y++]=E,a[--v]=E,a[--v]=_}var T,M;_=e+(T=r),b=e-T,x=n+(M=i+s),E=n-M;a[m++]=_,a[m++]=x,a[--v]=E,a[--v]=_,r&&(a[m++]=b,a[m++]=x,a[--v]=E,a[--v]=b)}}else a.length=0},triangulate:function(t,e){var n=t.points,r=e.points,i=e.indices;if(0!==n.length){var o,s,a=r.length/2,l=a;if(t.type!==qo.RREC){var u=t.shape;o=u.x,s=u.y}else{var c=t.shape;o=c.x+c.width/2,s=c.y+c.height/2}var h=t.matrix;r.push(t.matrix?h.a*o+h.c*s+h.tx:o,t.matrix?h.b*o+h.d*s+h.ty:s),a++,r.push(n[0],n[1]);for(var p=2;p<n.length;p+=2)r.push(n[p],n[p+1]),i.push(a++,l,a);i.push(l+1,l,a)}}},ah={build:function(t){var e=t.shape,n=e.x,r=e.y,i=e.width,o=e.height,s=t.points;s.length=0,s.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(t,e){var n=t.points,r=e.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function lh(t,e,n){return t+(e-t)*n}function uh(t,e,n,r,i,o,s){void 0===s&&(s=[]);for(var a=s,l=0,u=0,c=0,h=0,p=0,f=0,d=0,m=0;d<=20;++d)l=lh(t,n,m=d/20),u=lh(e,r,m),c=lh(n,i,m),h=lh(r,o,m),p=lh(l,c,m),f=lh(u,h,m),0===d&&a[a.length-2]===p&&a[a.length-1]===f||a.push(p,f);return a}var ch={build:function(t){if(Ah.nextRoundedRectBehavior)sh.build(t);else{var e=t.shape,n=t.points,r=e.x,i=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));n.length=0,a?(uh(r,i+a,r,i,r+a,i,n),uh(r+o-a,i,r+o,i,r+o,i+a,n),uh(r+o,i+s-a,r+o,i+s,r+o-a,i+s,n),uh(r+a,i+s,r,i+s,r,i+s-a,n)):n.push(r,i,r+o,i,r+o,i+s,r,i+s)}},triangulate:function(t,e){if(Ah.nextRoundedRectBehavior)sh.triangulate(t,e);else{for(var n=t.points,r=e.points,i=e.indices,o=r.length/2,s=_o(n,null,2),a=0,l=s.length;a<l;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(a=0,l=n.length;a<l;a++)r.push(n[a],n[++a])}}};function hh(t,e,n,r,i,o,s,a){var l,u;s?(l=r,u=-n):(l=-r,u=n);var c=t-n*i+l,h=e-r*i+u,p=t+n*o+l,f=e+r*o+u;return a.push(c,h),a.push(p,f),2}function ph(t,e,n,r,i,o,s,a){var l=n-t,u=r-e,c=Math.atan2(l,u),h=Math.atan2(i-t,o-e);a&&c<h?c+=2*Math.PI:!a&&c>h&&(h+=2*Math.PI);var p=c,f=h-c,d=Math.abs(f),m=Math.sqrt(l*l+u*u),g=1+(15*d*Math.sqrt(m)/Math.PI>>0),y=f/g;if(p+=y,a){s.push(t,e),s.push(n,r);for(var v=1,_=p;v<g;v++,_+=y)s.push(t,e),s.push(t+Math.sin(_)*m,e+Math.cos(_)*m);s.push(t,e),s.push(i,o)}else{s.push(n,r),s.push(t,e);for(v=1,_=p;v<g;v++,_+=y)s.push(t+Math.sin(_)*m,e+Math.cos(_)*m),s.push(t,e);s.push(i,o),s.push(t,e)}return 2*g}function fh(t,e){t.lineStyle.native?function(t,e){var n=0,r=t.shape,i=t.points||r.points,o=r.type!==qo.POLY||r.closeStroke;if(0!==i.length){var s=e.points,a=e.indices,l=i.length/2,u=s.length/2,c=u;for(s.push(i[0],i[1]),n=1;n<l;n++)s.push(i[2*n],i[2*n+1]),a.push(c,c+1),c++;o&&a.push(c,u)}}(t,e):function(t,e){var n=t.shape,r=t.points||n.points.slice(),i=e.closePointEps;if(0!==r.length){var o=t.lineStyle,s=new Jo(r[0],r[1]),a=new Jo(r[r.length-2],r[r.length-1]),l=n.type!==qo.POLY||n.closeStroke,u=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var c=.5*(s.x+a.x),h=.5*(a.y+s.y);r.unshift(c,h),r.push(c,h)}var p=e.points,f=r.length/2,d=r.length,m=p.length/2,g=o.width/2,y=g*g,v=o.miterLimit*o.miterLimit,_=r[0],b=r[1],x=r[2],E=r[3],S=0,w=0,T=-(b-E),M=_-x,R=0,A=0,P=Math.sqrt(T*T+M*M);T/=P,M/=P,T*=g,M*=g;var I=o.alignment,C=2*(1-I),O=2*I;l||(o.cap===Zc.ROUND?d+=ph(_-T*(C-O)*.5,b-M*(C-O)*.5,_-T*C,b-M*C,_+T*O,b+M*O,p,!0)+2:o.cap===Zc.SQUARE&&(d+=hh(_,b,T,M,C,O,!0,p))),p.push(_-T*C,b-M*C),p.push(_+T*O,b+M*O);for(var N=1;N<f-1;++N){_=r[2*(N-1)],b=r[2*(N-1)+1],x=r[2*N],E=r[2*N+1],S=r[2*(N+1)],w=r[2*(N+1)+1],T=-(b-E),M=_-x,T/=P=Math.sqrt(T*T+M*M),M/=P,T*=g,M*=g,R=-(E-w),A=x-S,R/=P=Math.sqrt(R*R+A*A),A/=P,R*=g,A*=g;var L=x-_,D=b-E,U=x-S,F=w-E,k=D*U-F*L,B=k<0;if(Math.abs(k)<.1)p.push(x-T*C,E-M*C),p.push(x+T*O,E+M*O);else{var G=(-T+_)*(-M+E)-(-T+x)*(-M+b),j=(-R+S)*(-A+E)-(-R+x)*(-A+w),z=(L*j-U*G)/k,H=(F*G-D*j)/k,V=(z-x)*(z-x)+(H-E)*(H-E),X=x+(z-x)*C,W=E+(H-E)*C,Y=x-(z-x)*O,q=E-(H-E)*O,$=B?C:O;V<=Math.min(L*L+D*D,U*U+F*F)+$*$*y?o.join===Kc.BEVEL||V/y>v?(B?(p.push(X,W),p.push(x+T*O,E+M*O),p.push(X,W),p.push(x+R*O,E+A*O)):(p.push(x-T*C,E-M*C),p.push(Y,q),p.push(x-R*C,E-A*C),p.push(Y,q)),d+=2):o.join===Kc.ROUND?B?(p.push(X,W),p.push(x+T*O,E+M*O),d+=ph(x,E,x+T*O,E+M*O,x+R*O,E+A*O,p,!0)+4,p.push(X,W),p.push(x+R*O,E+A*O)):(p.push(x-T*C,E-M*C),p.push(Y,q),d+=ph(x,E,x-T*C,E-M*C,x-R*C,E-A*C,p,!1)+4,p.push(x-R*C,E-A*C),p.push(Y,q)):(p.push(X,W),p.push(Y,q)):(p.push(x-T*C,E-M*C),p.push(x+T*O,E+M*O),o.join===Kc.ROUND?d+=B?ph(x,E,x+T*O,E+M*O,x+R*O,E+A*O,p,!0)+2:ph(x,E,x-T*C,E-M*C,x-R*C,E-A*C,p,!1)+2:o.join===Kc.MITER&&V/y<=v&&(B?(p.push(Y,q),p.push(Y,q)):(p.push(X,W),p.push(X,W)),d+=2),p.push(x-R*C,E-A*C),p.push(x+R*O,E+A*O),d+=2)}}_=r[2*(f-2)],b=r[2*(f-2)+1],x=r[2*(f-1)],T=-(b-(E=r[2*(f-1)+1])),M=_-x,T/=P=Math.sqrt(T*T+M*M),M/=P,T*=g,M*=g,p.push(x-T*C,E-M*C),p.push(x+T*O,E+M*O),l||(o.cap===Zc.ROUND?d+=ph(x-T*(C-O)*.5,E-M*(C-O)*.5,x-T*C,E-M*C,x+T*O,E+M*O,p,!1)+2:o.cap===Zc.SQUARE&&(d+=hh(x,E,T,M,C,O,!1,p)));var K=e.indices,Z=th.epsilon*th.epsilon;for(N=m;N<d+m-2;++N)_=p[2*N],b=p[2*N+1],x=p[2*(N+1)],E=p[2*(N+1)+1],S=p[2*(N+2)],w=p[2*(N+2)+1],Math.abs(_*(E-w)+x*(w-b)+S*(b-E))<Z||K.push(N,N+1,N+2)}}(t,e)}var dh,mh=function(){function t(){}return t.curveTo=function(t,e,n,r,i,o){var s=o[o.length-2],a=o[o.length-1]-e,l=s-t,u=r-e,c=n-t,h=Math.abs(a*c-l*u);if(h<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var p=a*a+l*l,f=u*u+c*c,d=a*u+l*c,m=i*Math.sqrt(p)/h,g=i*Math.sqrt(f)/h,y=m*d/p,v=g*d/f,_=m*c+g*l,b=m*u+g*a,x=l*(g+y),E=a*(g+y),S=c*(m+v),w=u*(m+v);return{cx:_+t,cy:b+e,radius:i,startAngle:Math.atan2(E-b,x-_),endAngle:Math.atan2(w-b,S-_),anticlockwise:l*u>c*a}},t.arc=function(t,e,n,r,i,o,s,a,l){for(var u=s-o,c=th._segmentsCount(Math.abs(u)*i,40*Math.ceil(Math.abs(u)/$o)),h=u/(2*c),p=2*h,f=Math.cos(h),d=Math.sin(h),m=c-1,g=m%1/m,y=0;y<=m;++y){var v=h+o+p*(y+g*y),_=Math.cos(v),b=-Math.sin(v);l.push((f*_+d*b)*i+n,(f*-b+d*_)*i+r)}},t}(),gh=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o,s,a){for(var l=0,u=0,c=0,h=0,p=0,f=0,d=0,m=0,g=0,y=0,v=0,_=t,b=e,x=1;x<=10;++x)y=_-(m=(d=(f=(p=1-(u=x/10))*p)*p)*t+3*f*u*n+3*p*(c=u*u)*i+(h=c*u)*s),v=b-(g=d*e+3*f*u*r+3*p*c*o+h*a),_=m,b=g,l+=Math.sqrt(y*y+v*v);return l},t.curveTo=function(e,n,r,i,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var c=th._segmentsCount(t.curveLength(l,u,e,n,r,i,o,s)),h=0,p=0,f=0,d=0,m=0;a.push(l,u);for(var g=1,y=0;g<=c;++g)f=(p=(h=1-(y=g/c))*h)*h,m=(d=y*y)*y,a.push(f*l+3*p*y*e+3*h*d*r+m*o,f*u+3*p*y*n+3*h*d*i+m*s)},t}(),yh=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o){var s=t-2*n+i,a=e-2*r+o,l=2*n-2*t,u=2*r-2*e,c=4*(s*s+a*a),h=4*(s*l+a*u),p=l*l+u*u,f=2*Math.sqrt(c+h+p),d=Math.sqrt(c),m=2*c*d,g=2*Math.sqrt(p),y=h/d;return(m*f+d*h*(f-g)+(4*p*c-h*h)*Math.log((2*d+y+f)/(y+g)))/(4*m)},t.curveTo=function(e,n,r,i,o){for(var s=o[o.length-2],a=o[o.length-1],l=th._segmentsCount(t.curveLength(s,a,e,n,r,i)),u=0,c=0,h=1;h<=l;++h){var p=h/l;u=s+(e-s)*p,c=a+(n-a)*p,o.push(u+(e+(r-e)*p-u)*p,c+(n+(i-n)*p-c)*p)}},t}(),vh=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),_h=((dh={})[qo.POLY]=oh,dh[qo.CIRC]=sh,dh[qo.ELIP]=sh,dh[qo.RECT]=ah,dh[qo.RREC]=ch,dh),bh=[],xh=[],Eh=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Sh=new Jo,wh=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new gs,e.boundsDirty=-1,e}return rh(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),xh.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),bh.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new Eh(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new Eh(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,Sh):Sh.copyFrom(t),r.shape.contains(Sh.x,Sh.y)))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains(Sh.x,Sh.y)){i=!0;break}}if(!i)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,n=null,r=null;this.batches.length>0&&(r=(n=this.batches[this.batches.length-1]).style);for(var i=this.shapeIndex;i<e.length;i++){this.shapeIndex++;var o=e[i],s=o.fillStyle,a=o.lineStyle;_h[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(s.visible||a.visible)&&this.processHoles(o.holes);for(var l=0;l<2;l++){var u=0===l?s:a;if(u.visible){var c=u.texture.baseTexture,h=this.indices.length,p=this.points.length/2;c.wrapMode=so.REPEAT,0===l?this.processFill(o):this.processLine(o);var f=this.points.length/2-p;0!==f&&(n&&!this._compareStyles(r,u)&&(n.end(h,p),n=null),n||((n=bh.pop()||new vh).begin(u,h,p),this.batches.push(n),r=u),this.addUvs(this.points,t,u.texture,p,f,u.matrix))}}}var d=this.indices.length,m=this.points.length/2;if(n&&n.end(d,m),0!==this.batches.length){var g=m>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&g===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native===!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var r=t[e],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++sa._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),xh.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=xh.pop();i||((i=new iu).texArray=new ou),i.texArray.count=0,i.start=0,i.size=0,i.type=to.TRIANGLES;var o=0,s=null,a=0,l=!1,u=to.TRIANGLES,c=0;this.drawCalls.push(i);for(e=0;e<this.batches.length;e++){var h=this.batches[e],p=h.style,f=p.texture.baseTexture;l!==!!p.native&&(u=(l=!!p.native)?to.LINES:to.TRIANGLES,s=null,o=8,t++),s!==f&&(s=f,f._batchEnabled!==t&&(8===o&&(t++,o=0,i.size>0&&((i=xh.pop())||((i=new iu).texArray=new ou),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),f.touched=1,f._batchEnabled=t,f._batchLocation=o,f.wrapMode=so.REPEAT,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=h.size,c+=h.size,a=f._batchLocation,this.addColors(n,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,a,h.attribSize,h.attribStart)}sa._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),s=new Uint32Array(i),a=0,l=0;l<t.length/2;l++)o[a++]=t[2*l],o[a++]=t[2*l+1],o[a++]=e[2*l],o[a++]=e[2*l+1],s[a++]=n[l],o[a++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?oh.triangulate(t,this):_h[t.type].triangulate(t,this)},e.prototype.processLine=function(t){fh(t,this);for(var e=0;e<t.holes.length;e++)fh(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];_h[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var r=t[2*n],i=t[2*n+1];t[2*n]=e.a*r+e.c*i+e.tx,t[2*n+1]=e.b*r+e.d*i+e.ty}},e.prototype.addColors=function(t,e,n,r,i){void 0===i&&(i=0);var o=Io((e>>16)+(65280&e)+((255&e)<<16),n);t.length=Math.max(t.length,i+r);for(var s=0;s<r;s++)t[i+s]=o},e.prototype.addTextureIds=function(t,e,n,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+n);for(var i=0;i<n;i++)t[r+i]=e},e.prototype.addUvs=function(t,e,n,r,i,o){void 0===o&&(o=null);for(var s=0,a=e.length,l=n.frame;s<i;){var u=t[2*(r+s)],c=t[2*(r+s)+1];if(o){var h=o.a*u+o.c*c+o.tx;c=o.b*u+o.d*c+o.ty,u=h}s++,e.push(u/l.width,c/l.height)}var p=n.baseTexture;(l.width<p.width||l.height<p.height)&&this.adjustUvs(e,n,a,i)},e.prototype.adjustUvs=function(t,e,n,r){for(var i=e.baseTexture,o=1e-6,s=n+2*r,a=e.frame,l=a.width/i.width,u=a.height/i.height,c=a.x/a.width,h=a.y/a.height,p=Math.floor(t[n]+o),f=Math.floor(t[n+1]+o),d=n+2;d<s;d+=2)p=Math.min(p,Math.floor(t[d]+o)),f=Math.min(f,Math.floor(t[d+1]+o));c-=p,h-=f;for(d=n;d<s;d+=2)t[d]=(t[d]+c)*l,t[d+1]=(t[d+1]+h)*u},e.BATCHABLE_SIZE=100,e}(uu),Th=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Zc.BUTT,e.join=Kc.MITER,e.miterLimit=10,e}return rh(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(eh),Mh=new Float32Array(3),Rh={},Ah=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new eh,n._lineStyle=new Th,n._matrix=null,n._holeMode=!1,n.state=El.for2d(),n._geometry=e||new wh,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=Qi.NORMAL,n}return rh(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,n,r,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=!1),"number"===typeof t&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Sa.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Zc.BUTT,join:Kc.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new rs,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new rs,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===t&&i===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),yh.curveTo(t,e,n,r,i),this},e.prototype.bezierCurveTo=function(t,e,n,r,i,o){return this._initCurve(),gh.curveTo(t,e,n,r,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,r,i){this._initCurve(t,e);var o=this.currentPath.points,s=mh.curveTo(t,e,n,r,i,o);if(s){var a=s.cx,l=s.cy,u=s.radius,c=s.startAngle,h=s.endAngle,p=s.anticlockwise;this.arc(a,l,u,c,h,p)}return this},e.prototype.arc=function(t,e,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=$o:o&&r<=i&&(r+=$o),0===i-r)return this;var s=t+Math.cos(r)*n,a=e+Math.sin(r)*n,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-s),h=Math.abs(u[u.length-1]-a);c<l&&h<l||u.push(s,a)}else this.moveTo(s,a),u=this.currentPath.points;return mh.arc(s,a,t,e,n,r,i,o,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Sa.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:Sa.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new ts(t,e,n,r))},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new is(t,e,n,r,i))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new es(t,e,n))},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new ns(t,e,n,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];var i=!0,o=n[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(n[0])?n[0]:n;var s=new rs(t);return s.closeStroke=i,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===qo.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var r=0;r<n;r++){var i=t.batches[r],o=i.style.color,s=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:a,_batchRGB:To(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,r=this.tint,i=this.worldAlpha,o=e.uniforms,s=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var a=0,l=s.length;a<l;a++)this._renderDrawCallDirect(t,n.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,r=e.type,i=e.size,o=e.start,s=n.count,a=0;a<s;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(r,i,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!Rh[n]){for(var r=t.plugins[n].MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ss,default:Fa.from({uSamplers:i},!0)},a=t.plugins[n]._shader.program;Rh[n]=new xl(a,s)}e=Rh[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=To(this.tint,Mh),e=0;e<this.batches.length;e++){var n=this.batches[e],r=n._batchRGB,i=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData,c=0,h=0;h<l.length;h+=2){var p=l[h],f=l[h+1];u[c++]=n*p+i*f+s,u[c++]=o*f+r*p+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new Jo,e}(zs),Ph=function(t,e){return Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Ph(t,e)};var Ih,Ch=new Jo,Oh=new Uint16Array([0,1,2,0,2,3]),Nh=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new os(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Qi.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||Sa.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Oh,n.pluginName="batch",n.isSprite=!0,n._roundPixels=yo.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}Ph(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Fo(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Fo(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,u=t.trim,c=t.orig,h=this._anchor,p=0,f=0,d=0,m=0;if(u?(p=(f=u.x-h._x*c.width)+u.width,d=(m=u.y-h._y*c.height)+u.height):(p=(f=-h._x*c.width)+c.width,d=(m=-h._y*c.height)+c.height),l[0]=n*f+i*m+s,l[1]=o*m+r*f+a,l[2]=n*p+i*m+s,l[3]=o*m+r*p+a,l[4]=n*p+i*d+s,l[5]=o*d+r*p+a,l[6]=n*f+i*d+s,l[7]=o*d+r*f+a,this._roundPixels)for(var g=yo.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=-r._x*n.width,p=h+n.width,f=-r._y*n.height,d=f+n.height;e[0]=o*h+a*f+u,e[1]=l*f+s*h+c,e[2]=o*p+a*f+u,e[3]=l*f+s*p+c,e[4]=o*p+a*d+u,e[5]=l*d+s*p+c,e[6]=o*h+a*d+u,e[7]=l*d+s*h+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new gs),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ts),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ch);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return Ch.x>=r&&Ch.x<r+e&&(i=-n*this.anchor.y,Ch.y>=i&&Ch.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"===typeof e?e:e&&e.texture){var n="boolean"===typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof Sa?t:Sa.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Fo(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Fo(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Sa.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(zs),Lh=function(t,e){return Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Lh(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Ih||(Ih={}));var Dh={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ih.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Uh=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Fh=function(){function t(t){this.styleID=0,this.reset(),Gh(this,t,t)}return t.prototype.clone=function(){var e={};return Gh(e,this,Dh),new t(e)},t.prototype.reset=function(){Gh(this,Dh,Dh)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Bh(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Bh(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Bh(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Uh.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function kh(t){return"number"===typeof t?Mo(t):("string"===typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Bh(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=kh(t[e]);return t}return kh(t)}function Gh(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var jh={willReadFrequently:!0},zh=function(){function t(t,e,n,r,i,o,s,a,l){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=l}return t.measureText=function(e,n,r,i){void 0===i&&(i=t._canvas),r=void 0===r||null===r?n.wordWrap:r;var o=n.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=n.fontSize,s.ascent=n.fontSize);var a=i.getContext("2d",jh);a.font=o;for(var l=(r?t.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,h=0;h<l.length;h++){var p=a.measureText(l[h]).width+(l[h].length-1)*n.letterSpacing;u[h]=p,c=Math.max(c,p)}var f=c+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var d=n.lineHeight||s.fontSize+n.strokeThickness,m=Math.max(d,s.fontSize+n.strokeThickness)+(l.length-1)*(d+n.leading);return n.dropShadow&&(m+=n.dropShadowDistance),new t(e,n,f,m,l,u,d+n.leading,c,s)},t.wordWrap=function(e,n,r){void 0===r&&(r=t._canvas);for(var i=r.getContext("2d",jh),o=0,s="",a="",l=Object.create(null),u=n.letterSpacing,c=n.whiteSpace,h=t.collapseSpaces(c),p=t.collapseNewlines(c),f=!h,d=n.wordWrapWidth+u,m=t.tokenize(e),g=0;g<m.length;g++){var y=m[g];if(t.isNewline(y)){if(!p){a+=t.addLine(s),f=!h,s="",o=0;continue}y=" "}if(h){var v=t.isBreakingSpace(y),_=t.isBreakingSpace(s[s.length-1]);if(v&&_)continue}var b=t.getFromCache(y,u,l,i);if(b>d)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(y,n.breakWords))for(var x=t.wordWrapSplit(y),E=0;E<x.length;E++){for(var S=x[E],w=1;x[E+w];){var T=x[E+w],M=S[S.length-1];if(t.canBreakChars(M,T,y,E,n.breakWords))break;S+=T,w++}E+=S.length-1;var R=t.getFromCache(S,u,l,i);R+o>d&&(a+=t.addLine(s),f=!1,s="",o=0),s+=S,o+=R}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var A=g===m.length-1;a+=t.addLine(y,!A),f=!1,s="",o=0}else b+o>d&&(f=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(y)||f)&&(s+=y,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),e=n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if("number"!==typeof i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!==typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"===typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,n){return"string"===typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!==typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i],s=e[i+1];t.isBreakingSpace(o,s)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),l=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,l).data,c=u.length,h=4*s,p=0,f=0,d=!1;for(p=0;p<a;++p){for(var m=0;m<h;m+=4)if(255!==u[f+m]){d=!0;break}if(d)break;f+=h}for(n.ascent=a-p,f=c-h,d=!1,p=l;p>a;--p){for(m=0;m<h;m+=4)if(255!==u[f+m]){d=!0;break}if(d)break;f-=h}return n.descent=p-a,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d",jh);if(r&&r.measureText)return t.__canvas=n,n;e=yo.ADAPTER.createCanvas()}catch(i){e=yo.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d",jh)),t.__context},enumerable:!1,configurable:!0}),t}();zh._fonts={},zh.METRICS_STRING="|\xc9q\xc5",zh.BASELINE_SYMBOL="M",zh.BASELINE_MULTIPLIER=1.4,zh.HEIGHT_MULTIPLIER=2,zh._newlines=[10,13],zh._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Hh={texture:!0,children:!1,baseTexture:!0},Vh=function(t){function e(e,n,r){var i=this,o=!1;r||(r=yo.ADAPTER.createCanvas(),o=!0),r.width=3,r.height=3;var s=Sa.from(r);return s.orig=new ts,s.trim=new ts,(i=t.call(this,s)||this)._ownCanvas=o,i.canvas=r,i.context=r.getContext("2d",{willReadFrequently:!0}),i._resolution=yo.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=n,i.localStyleID=-1,i}return function(t,e){function n(){this.constructor=t}Lh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,o=this.context,s=zh.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,l=s.height,u=s.lines,c=s.lineHeight,h=s.lineWidths,p=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+2*n.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=n.strokeThickness,o.textBaseline=n.textBaseline,o.lineJoin=n.lineJoin,o.miterLimit=n.miterLimit;for(var d=n.dropShadow?2:1,m=0;m<d;++m){var g=n.dropShadow&&0===m,y=g?Math.ceil(Math.max(1,l)+2*n.padding):0,v=y*this._resolution;if(g){o.fillStyle="black",o.strokeStyle="black";var _=n.dropShadowColor,b=To("number"===typeof _?_:Ro(_)),x=n.dropShadowBlur*this._resolution,E=n.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+n.dropShadowAlpha+")",o.shadowBlur=x,o.shadowOffsetX=Math.cos(n.dropShadowAngle)*E,o.shadowOffsetY=Math.sin(n.dropShadowAngle)*E+v}else o.fillStyle=this._generateFillStyle(n,u,s),o.strokeStyle=n.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var S=(c-f.fontSize)/2;(!e.nextLineHeightBehavior||c-f.fontSize<0)&&(S=0);for(var w=0;w<u.length;w++)r=n.strokeThickness/2,i=n.strokeThickness/2+w*c+f.ascent+S,"right"===n.align?r+=p-h[w]:"center"===n.align&&(r+=(p-h[w])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(u[w],r+n.padding,i+n.padding-y,!0),n.fill&&this.drawLetterSpacing(u[w],r+n.padding,i+n.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,n,r,i){void 0===i&&(i=!1);var o=this._style.letterSpacing,s=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||s)return s&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(i?this.context.strokeText(t,n,r):this.context.fillText(t,n,r));for(var a=n,l=Array.from?Array.from(t):t.split(""),u=this.context.measureText(t).width,c=0,h=0;h<l.length;++h){var p=l[h];i?this.context.strokeText(p,a,r):this.context.fillText(p,a,r);for(var f="",d=h+1;d<l.length;++d)f+=l[d];a+=u-(c=this.context.measureText(f).width)+o,u=c}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=function(t){var e,n,r,i=t.width,o=t.height,s=t.getContext("2d",{willReadFrequently:!0}),a=s.getImageData(0,0,i,o).data,l=a.length,u={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<l;e+=4)0!==a[e+3]&&(n=e/4%i,r=~~(e/4/i),null===u.top&&(u.top=r),(null===u.left||n<u.left)&&(u.left=n),(null===u.right||u.right<n)&&(u.right=n+1),(null===u.bottom||u.bottom<r)&&(u.bottom=r));return null!==u.top&&(i=u.right-u.left,o=u.bottom-u.top+1,c=s.getImageData(u.left,u.top,i,o)),{height:o,width:i,data:c}}(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(e,n){return this.updateText(!0),-1===this._textureID&&(e=!1),t.prototype.getBounds.call(this,e,n)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var r,i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=this.canvas.width/this._resolution-o-2*s,l=this.canvas.height/this._resolution-o-2*s,u=i.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var h=u.length+1,p=1;p<h;++p)c.push(p/h);if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),t.fillGradientType===Ih.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,s,a/2,l+s);var f=n.fontProperties.fontSize+t.strokeThickness;for(p=0;p<e.length;p++){var d=n.lineHeight*(p-1)+f,m=n.lineHeight*p,g=m;p>0&&d>m&&(g=(m+d)/2);var y=m+f,v=n.lineHeight*(p+1),_=y;p+1<e.length&&v<y&&(_=(y+v)/2);for(var b=(_-g)/l,x=0;x<u.length;x++){var E=0;E="number"===typeof c[x]?c[x]:x/u.length;var S=Math.min(1,Math.max(0,g/l+E*b));S=Number(S.toFixed(5)),r.addColorStop(S,u[x])}}}else{r=this.context.createLinearGradient(s,l/2,a+s,l/2);var w=u.length+1,T=1;for(p=0;p<u.length;p++){var M=void 0;M="number"===typeof c[p]?c[p]:T/w,r.addColorStop(M,u[p]),T++}}return r},e.prototype.destroy=function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},Hh,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Fo(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Fo(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Fh?t:new Fh(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Nh);yo.UPLOADS_PER_FRAME=4;var Xh=function(t,e){return Xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Xh(t,e)};var Wh=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Yh(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof Sa){var i=t._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),n=!0)}return n}function qh(t,e){if(t.baseTexture instanceof sa){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function $h(t,e){if(t._texture&&t._texture instanceof Sa){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Kh(t,e){return e instanceof Vh&&(e.updateText(!0),!0)}function Zh(t,e){if(e instanceof Fh){var n=e.toFontString();return zh.measureFont(n),!0}return!1}function Jh(t,e){if(t instanceof Vh){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Qh(t,e){return t instanceof Fh&&(-1===e.indexOf(t)&&e.push(t),!0)}var tp=function(){function t(t){var e=this;this.limiter=new Wh(yo.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Jh),this.registerFindHook(Qh),this.registerFindHook(Yh),this.registerFindHook(qh),this.registerFindHook($h),this.registerUploadHook(Kh),this.registerUploadHook(Zh)}return t.prototype.upload=function(t,e){var n=this;return"function"===typeof t&&(e=t,t=null),e&&jo("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise((function(r){t&&n.add(t);var i=function(){null===e||void 0===e||e(),r()};n.queue.length?(n.completes.push(i),n.ticking||(n.ticking=!0,Ks.system.addOnce(n.tick,n,Xs.UTILITY))):i()}))},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Ks.system.addOnce(this.tick,this,Xs.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(n=0,r=i.length;n<r;n++)i[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof zs)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&Ks.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function ep(t,e){return e instanceof sa&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function np(t,e){if(!(e instanceof Ah))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&ep(t,o.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function rp(t,e){return t instanceof Ah&&(e.push(t),!0)}var ip=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(rp),n.registerUploadHook(ep),n.registerUploadHook(np),n}return function(t,e){function n(){this.constructor=t}Xh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.extension={name:"prepare",type:Hs.RendererPlugin},e}(tp),op=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,n){void 0===n&&(n=null),this.linkedSheets=[],this._texture=t instanceof Sa?t:null,this.baseTexture=t instanceof sa?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Yo(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){var n=this;return e&&jo("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise((function(r){n._callback=function(t){null===e||void 0===e||e(t),r(t)},n._batchIndex=0,n._frameKeys.length<=t.BATCH_SIZE?(n._processFrames(0),n._processAnimations(),n._parseComplete()):n._nextBatch()}))},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE;n-e<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],s=o.frame;if(s){var a=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new ts(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=o.rotated?new ts(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new ts(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new ts(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new Sa(this.baseTexture,a,c,l,o.rotated?2:0,o.anchor),Sa.addToCache(this.textures[i],i)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var r=t[e][n];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}()),sp=function(){function t(){}return t.use=function(e,n){var r,i,o=this,s=e.name+"_image";if(e.data&&e.type===Gu.TYPE.JSON&&e.data.frames&&!o.resources[s]){var a=null===(i=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(a))for(var l=function(t){if("string"!==typeof t)return"continue";var n=t.replace(".json",""),r=xo.resolve(e.url.replace(o.baseUrl,""),t);if(o.resources[n]||Object.values(o.resources).some((function(t){return xo.format(xo.parse(t.url))===r})))return"continue";var i={crossOrigin:e.crossOrigin,loadType:Gu.LOAD_TYPE.XHR,xhrType:Gu.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(n,r,i)},u=0,c=a;u<c.length;u++){l(c[u])}var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=t.getResourcePath(e,o.baseUrl);o.add(s,p,h,(function(t){if(t.error)n(t.error);else{var r=new op(t.texture,e.data,e.url);r.parse().then((function(){e.spritesheet=r,e.textures=r.textures,n()}))}}))}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:xo.resolve(t.url.replace(e,""),t.data.meta.image)},t.extension=Hs.Loader,t}(),ap=function(t,e){return ap=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ap(t,e)};function lp(t,e){function n(){this.constructor=t}ap(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var up=new Jo,cp=(function(t){function e(e,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=t.call(this,e)||this;return i.tileTransform=new ms,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new Tl(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}lp(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ts),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,up);var e=this._width,n=this._height,r=-e*this.anchor._x;if(up.x>=r&&up.x<r+e){var i=-n*this.anchor._y;if(up.y>=i&&up.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return new e(t instanceof Sa?t:Sa.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(Nh),"#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),hp=new ss,pp=function(t){function e(e){var n=t.call(this,e)||this;return e.runners.contextChange.add(n),n.quad=new Da,n.state=El.for2d(),n}return lp(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=xl.from(cp,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?xl.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):xl.from(cp,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var i=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();var s=t._texture,a=s.baseTexture,l=a.alphaMode>0,u=t.tileTransform.localTransform,c=t.uvMatrix,h=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;h&&(a._glTextures[e.CONTEXT_UID]?h=a.wrapMode!==so.CLAMP:a.wrapMode===so.CLAMP&&(a.wrapMode=so.REPEAT));var p=h?this.simpleShader:this.shader,f=s.width,d=s.height,m=t._width,g=t._height;hp.set(u.a*f/m,u.b*f/g,u.c*d/m,u.d*d/g,u.tx/m,u.ty/g),hp.invert(),h?hp.prepend(c.mapCoord):(p.uniforms.uMapCoord=c.mapCoord.toArray(!0),p.uniforms.uClampFrame=c.uClampFrame,p.uniforms.uClampOffset=c.uClampOffset),p.uniforms.uTransform=hp.toArray(!0),p.uniforms.uColor=Co(t.tint,t.worldAlpha,p.uniforms.uColor,l),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=s,e.shader.bind(p),e.geometry.bind(n),this.state.blendMode=Po(t.blendMode,l),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:Hs.RendererPlugin},e}(za),fp=function(t,e){return fp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},fp(t,e)};function dp(t,e){function n(){this.constructor=t}fp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mp=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),gp=new Jo,yp=new rs,vp=function(t){function e(e,n,r,i){void 0===i&&(i=to.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,o.shader=n,o.state=r||El.for2d(),o.drawMode=i,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=yo.ROUND_PIXELS,o.batchUvs=null,o}return dp(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===to.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,n=t._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,c=this.vertexData,h=0;h<c.length/2;h++){var p=e[2*h],f=e[2*h+1];c[2*h]=i*p+s*f+l,c[2*h+1]=o*p+a*f+u}if(this._roundPixels){var d=yo.RESOLUTION;for(h=0;h<c.length;++h)c[h]=Math.round((c[h]*d|0)/d)}this.vertexDirty=n}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new mp(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,gp);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=yp.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,s=0;s+2<i;s+=o){var a=2*r[s],l=2*r[s+1],u=2*r[s+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[u],n[5]=e[u+1],yp.contains(gp.x,gp.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(zs),_p=function(t){function e(e,n){var r=this,i={uSampler:e,alpha:1,uTextureMatrix:ss.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),(r=t.call(this,n.program||bl.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new Tl(e),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return dp(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!==!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Co(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(xl),bp=function(t){function e(e,n,r){var i=t.call(this)||this,o=new Aa(e),s=new Aa(n,!0),a=new Aa(r,!0,!0);return i.addAttribute("aVertexPosition",o,2,!1,ro.FLOAT).addAttribute("aTextureCoord",s,2,!1,ro.FLOAT).addIndex(a),i._updateId=-1,i}return dp(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Na),xp=function(t,e){return xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},xp(t,e)};var Ep=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},Sp=function(){function t(){}return t.test=function(t){return"string"===typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var i=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var l=o[a].split("="),u=l[0],c=l[1].replace(/"/gm,""),h=parseFloat(c),p=isNaN(h)?c:h;s[u]=p}n[i].push(s)}var f=new Ep;return n.info.forEach((function(t){return f.info.push({face:t.face,size:parseInt(t.size,10)})})),n.common.forEach((function(t){return f.common.push({lineHeight:parseInt(t.lineHeight,10)})})),n.page.forEach((function(t){return f.page.push({id:parseInt(t.id,10),file:t.file})})),n.char.forEach((function(t){return f.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),n.kerning.forEach((function(t){return f.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),n.distanceField.forEach((function(t){return f.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),f},t}(),wp=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Ep,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField"),l=0;l<n.length;l++)e.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(l=0;l<r.length;l++)e.common.push({lineHeight:parseInt(r[l].getAttribute("lineHeight"),10)});for(l=0;l<i.length;l++)e.page.push({id:parseInt(i[l].getAttribute("id"),10)||0,file:i[l].getAttribute("file")});for(l=0;l<o.length;l++){var u=o[l];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(l=0;l<s.length;l++)e.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(l=0;l<a.length;l++)e.distanceField.push({fieldType:a[l].getAttribute("fieldType"),distanceRange:parseInt(a[l].getAttribute("distanceRange"),10)});return e},t}(),Tp=function(){function t(){}return t.test=function(t){if("string"===typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return wp.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return wp.parse(e)},t}(),Mp=[Sp,wp,Tp];function Rp(t){for(var e=0;e<Mp.length;e++)if(Mp[e].test(t))return Mp[e];return null}function Ap(t,e,n,r,i,o,s){var a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(o,o);var u=s.strokeThickness/2,c=-s.strokeThickness/2;if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=function(t,e,n,r,i,o){var s,a=n.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var l=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=t.width/r-l-2*u,h=t.height/r-l-2*u,p=a.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var d=p.length+1,m=1;m<d;++m)f.push(m/d);if(p.unshift(a[0]),f.unshift(0),p.push(a[a.length-1]),f.push(1),n.fillGradientType===Ih.LINEAR_VERTICAL){s=e.createLinearGradient(c/2,u,c/2,h+u);var g=0,y=(o.fontProperties.fontSize+n.strokeThickness)/h;for(m=0;m<i.length;m++)for(var v=o.lineHeight*m,_=0;_<p.length;_++){var b=v/h+("number"===typeof f[_]?f[_]:_/p.length)*y,x=Math.max(g,b);x=Math.min(x,1),s.addColorStop(x,p[_]),g=x}}else{s=e.createLinearGradient(u,h/2,c+u,h/2);var E=p.length+1,S=1;for(m=0;m<p.length;m++){var w=void 0;w="number"===typeof f[m]?f[m]:S/E,s.addColorStop(w,p[m]),S++}}return s}(t,e,s,o,[a],n),e.strokeStyle=s.stroke,s.dropShadow){var h=s.dropShadowColor,p=To("number"===typeof h?h:Ro(h)),f=s.dropShadowBlur*o,d=s.dropShadowDistance*o;e.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+s.dropShadowAlpha+")",e.shadowBlur=f,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*d,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*d}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(a,u,c+n.lineHeight-l.descent),s.fill&&e.fillText(a,u,c+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Pp(t){return Array.from?Array.from(t):t.split("")}function Ip(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Cp=function(){function t(t,e,n){var r,i,o=t.info[0],s=t.common[0],a=t.page[0],l=t.distanceField[0],u=Yo(a.file),c={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=c;for(var h=0;h<t.page.length;h++){var p=t.page[h],f=p.id,d=p.file;c[f]=e instanceof Array?e[h]:e[d],(null===l||void 0===l?void 0:l.fieldType)&&"none"!==l.fieldType&&(c[f].baseTexture.alphaMode=lo.NO_PREMULTIPLIED_ALPHA,c[f].baseTexture.mipmap=ao.OFF)}for(h=0;h<t.char.length;h++){var m=t.char[h],g=(f=m.id,m.page),y=t.char[h],v=y.x,_=y.y,b=y.width,x=y.height,E=y.xoffset,S=y.yoffset,w=y.xadvance;_/=u,b/=u,x/=u,E/=u,S/=u,w/=u;var T=new ts((v/=u)+c[g].frame.x/u,_+c[g].frame.y/u,b,x);this.chars[f]={xOffset:E,yOffset:S,xAdvance:w,kerning:{},texture:new Sa(c[g].baseTexture,T),page:g}}for(h=0;h<t.kerning.length;h++){var M=t.kerning[h],R=M.first,A=M.second,P=M.amount;R/=u,A/=u,P/=u,this.chars[A]&&(this.chars[A].kerning[R]=P)}this.distanceFieldRange=null===l||void 0===l?void 0:l.distanceRange,this.distanceFieldType=null!==(i=null===(r=null===l||void 0===l?void 0:l.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n,r){var i;if(e instanceof Ep)i=e;else{var o=Rp(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof Sa&&(n=[n]);var s=new t(i,n,r);return t.available[s.font]=s,s},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,r),o=i.chars,s=i.padding,a=i.resolution,l=i.textureWidth,u=i.textureHeight,c=function(t){"string"===typeof t&&(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,Pp(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),h=n instanceof Fh?n:new Fh(n),p=l,f=new Ep;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};for(var d,m,g,y=0,v=0,_=0,b=[],x=0;x<c.length;x++){d||((d=yo.ADAPTER.createCanvas()).width=l,d.height=u,m=d.getContext("2d"),g=new sa(d,{resolution:a}),b.push(new Sa(g)),f.page.push({id:b.length-1,file:""}));var E=c[x],S=zh.measureText(E,h,!1,d),w=S.width,T=Math.ceil(S.height),M=Math.ceil(("italic"===h.fontStyle?2:1)*w);if(v>=u-T*a){if(0===v)throw new Error("[BitmapFont] textureHeight "+u+"px is too small (fontFamily: '"+h.fontFamily+"', fontSize: "+h.fontSize+"px, char: '"+E+"')");--x,d=null,m=null,g=null,v=0,y=0,_=0}else if(_=Math.max(T+S.fontProperties.descent,_),M*a+y>=p){if(0===y)throw new Error("[BitmapFont] textureWidth "+l+"px is too small (fontFamily: '"+h.fontFamily+"', fontSize: "+h.fontSize+"px, char: '"+E+"')");--x,v+=_*a,v=Math.ceil(v),y=0,_=0}else{Ap(d,m,S,y,v,a,h);var R=Ip(S.text);f.char.push({id:R,page:b.length-1,x:y/a,y:v/a,width:M,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),y+=(M+2*s)*a,y=Math.ceil(y)}}x=0;for(var A=c.length;x<A;x++)for(var P=c[x],I=0;I<A;I++){var C=c[I],O=m.measureText(P).width,N=m.measureText(C).width,L=m.measureText(P+C).width-(O+N);L&&f.kerning.push({first:Ip(P),second:Ip(C),amount:L})}var D=new t(f,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=D,D},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Op=[],Np=[],Lp=[],Dp=(function(t){function e(n,r){void 0===r&&(r={});var i=t.call(this)||this;i._tint=16777215;var o=Object.assign({},e.styleDefaults,r),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,h=o.fontSize;if(!Cp.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._fontName=c,i._fontSize=h||Cp.available[c].size,i.text=n,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new os((function(){i.dirty=!0}),i,0,0),i._roundPixels=yo.ROUND_PIXELS,i.dirty=!0,i._resolution=yo.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}(function(t,e){function n(){this.constructor=t}xp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.updateText=function(){for(var t,e=Cp.available[this._fontName],n=this._fontSize/e.size,r=new Jo,i=[],o=[],s=[],a=Pp(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/this._fontSize,u="none"===e.distanceFieldType?Op:Np,c=null,h=0,p=0,f=0,d=-1,m=0,g=0,y=0,v=0,_=0;_<a.length;_++){var b=Ip(G=a[_]);if(/(?:\s)/.test(G)&&(d=_,m=h,v++),"\r"!==G&&"\n"!==G){var x=e.chars[b];if(x){c&&x.kerning[c]&&(r.x+=x.kerning[c]);var E=Lp.pop()||{texture:Sa.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Jo};E.texture=x.texture,E.line=f,E.charCode=b,E.position.x=r.x+x.xOffset+this._letterSpacing/2,E.position.y=r.y+x.yOffset,E.prevSpaces=v,i.push(E),h=E.position.x+Math.max(x.xAdvance-x.xOffset,x.texture.orig.width),r.x+=x.xAdvance+this._letterSpacing,y=Math.max(y,x.yOffset+x.texture.height),c=b,-1!==d&&l>0&&r.x>l&&(Uo(i,1+d-++g,1+_-d),_=d,d=-1,o.push(m),s.push(i.length>0?i[i.length-1].prevSpaces:0),p=Math.max(p,m),f++,r.x=0,r.y+=e.lineHeight,c=null,v=0)}}else o.push(h),s.push(-1),p=Math.max(p,h),++f,++g,r.x=0,r.y+=e.lineHeight,c=null,v=0}var S=a[a.length-1];"\r"!==S&&"\n"!==S&&(/(?:\s)/.test(S)&&(h=m),o.push(h),p=Math.max(p,h),s.push(-1));var w=[];for(_=0;_<=f;_++){var T=0;"right"===this._align?T=p-o[_]:"center"===this._align?T=(p-o[_])/2:"justify"===this._align&&(T=s[_]<0?0:(p-o[_])/s[_]),w.push(T)}var M=i.length,R={},A=[],P=this._activePagesMeshData;u.push.apply(u,P);for(_=0;_<M;_++){var I=(z=i[_].texture).baseTexture.uid;if(!R[I]){if(!($=u.pop())){var C=new bp,O=void 0,N=void 0;"none"===e.distanceFieldType?(O=new _p(Sa.EMPTY),N=Qi.NORMAL):(O=new _p(Sa.EMPTY,{program:bl.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),N=Qi.NORMAL_NPM);var L=new vp(C,O);L.blendMode=N,$={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:L,vertices:null,uvs:null,indices:null}}$.index=0,$.indexCount=0,$.vertexCount=0,$.uvsCount=0,$.total=0;var D=this._textureCache;D[I]=D[I]||new Sa(z.baseTexture),$.mesh.texture=D[I],$.mesh.tint=this._tint,A.push($),R[I]=$}R[I].total++}for(_=0;_<P.length;_++)-1===A.indexOf(P[_])&&this.removeChild(P[_].mesh);for(_=0;_<A.length;_++)A[_].mesh.parent!==this&&this.addChild(A[_].mesh);for(var _ in this._activePagesMeshData=A,R){var U=($=R[_]).total;if(!((null===(t=$.indices)||void 0===t?void 0:t.length)>6*U)||$.vertices.length<2*vp.BATCHABLE_SIZE)$.vertices=new Float32Array(8*U),$.uvs=new Float32Array(8*U),$.indices=new Uint16Array(6*U);else for(var F=$.total,k=$.vertices,B=4*F*2;B<k.length;B++)k[B]=0;$.mesh.size=6*U}for(_=0;_<M;_++){var G,j=(G=i[_]).position.x+w[G.line]*("justify"===this._align?G.prevSpaces:1);this._roundPixels&&(j=Math.round(j));var z,H=j*n,V=G.position.y*n,X=R[(z=G.texture).baseTexture.uid],W=z.frame,Y=z._uvs,q=X.index++;X.indices[6*q+0]=0+4*q,X.indices[6*q+1]=1+4*q,X.indices[6*q+2]=2+4*q,X.indices[6*q+3]=0+4*q,X.indices[6*q+4]=2+4*q,X.indices[6*q+5]=3+4*q,X.vertices[8*q+0]=H,X.vertices[8*q+1]=V,X.vertices[8*q+2]=H+W.width*n,X.vertices[8*q+3]=V,X.vertices[8*q+4]=H+W.width*n,X.vertices[8*q+5]=V+W.height*n,X.vertices[8*q+6]=H,X.vertices[8*q+7]=V+W.height*n,X.uvs[8*q+0]=Y.x0,X.uvs[8*q+1]=Y.y0,X.uvs[8*q+2]=Y.x1,X.uvs[8*q+3]=Y.y1,X.uvs[8*q+4]=Y.x2,X.uvs[8*q+5]=Y.y2,X.uvs[8*q+6]=Y.x3,X.uvs[8*q+7]=Y.y3}for(var _ in this._textWidth=p*n,this._textHeight=(r.y+e.lineHeight)*n,R){var $=R[_];if(0!==this.anchor.x||0!==this.anchor.y)for(var K=0,Z=this._textWidth*this.anchor.x,J=this._textHeight*this.anchor.y,Q=0;Q<$.total;Q++)$.vertices[K++]-=Z,$.vertices[K++]-=J,$.vertices[K++]-=Z,$.vertices[K++]-=J,$.vertices[K++]-=Z,$.vertices[K++]-=J,$.vertices[K++]-=Z,$.vertices[K++]-=J;this._maxLineHeight=y*n;var tt=$.mesh.geometry.getBuffer("aVertexPosition"),et=$.mesh.geometry.getBuffer("aTextureCoord"),nt=$.mesh.geometry.getIndex();tt.data=$.vertices,et.data=$.uvs,nt.data=$.indices,tt.update(),et.update(),nt.update()}for(_=0;_<i.length;_++)Lp.push(i[_])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var n=Cp.available[this._fontName],r=n.distanceFieldRange,i=n.distanceFieldType,o=n.size;if("none"!==i)for(var s=this.worldTransform,a=s.a,l=s.b,u=s.c,c=s.d,h=Math.sqrt(a*a+l*l),p=Math.sqrt(u*u+c*c),f=(Math.abs(h)+Math.abs(p))/2,d=this._fontSize/o,m=0,g=this._activePagesMeshData;m<g.length;m++){g[m].mesh.shader.uniforms.uFWidth=f*r*d*this._resolution}t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Cp.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var n=this._textureCache,r="none"===Cp.available[this._fontName].distanceFieldType?Op:Np;r.push.apply(r,this._activePagesMeshData);for(var i=0,o=this._activePagesMeshData;i<o.length;i++){var s=o[i];this.removeChild(s.mesh)}for(var a in this._activePagesMeshData=[],r.filter((function(t){return n[t.mesh.texture.baseTexture.uid]})).forEach((function(t){t.mesh.texture=Sa.EMPTY})),n){n[a].destroy(),delete n[a]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(zs),function(){function t(){}return t.add=function(){Gu.setExtensionXhrType("fnt",Gu.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var r=Rp(e.data);if(r)for(var i=t.getBaseUrl(this,e),o=r.parse(e.data),s={},a=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=Cp.install(o,s,!0),n())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,h=!1;for(var p in this.resources){var f=this.resources[p];if(f.url===c){f.metadata.pageFile=u,f.texture?a(f):f.onAfterMiddleware.add(a),h=!0;break}}if(!h){var d={crossOrigin:e.crossOrigin,loadType:Gu.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(c,d,a)}}else n()},t.getBaseUrl=function(e,n){var r=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t.extension=Hs.Loader,t}()),Up=function(t,e){return Up=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Up(t,e)};!function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}(function(t,e){function n(){this.constructor=t}Up(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(Sl);var Fp=function(t,e){return Fp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Fp(t,e)};function kp(t,e){function n(){this.constructor=t}Fp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Bp,Gp,jp,zp,Hp,Vp,Xp,Wp,Yp,qp,$p,Kp,Zp,Jp,Qp,tf,ef,nf,rf,of,sf={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},af=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Bp||(Bp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Gp||(Gp={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(jp||(jp={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(zp||(zp={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Hp||(Hp={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Vp||(Vp={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Xp||(Xp={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Wp||(Wp={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Yp||(Yp={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(qp||(qp={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}($p||($p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Kp||(Kp={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Zp||(Zp={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Jp||(Jp={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Qp||(Qp={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(tf||(tf={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(ef||(ef={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(nf||(nf={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(rf||(rf={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(of||(of={}));var lf=function(t){function e(e,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=yo.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var n,r=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=n.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),l=function(t){for(var e,n=sf[t],r=n.length,i=af,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=r&&(e=t-s-1),o+=a=a.replace("%value%",n[e].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=t.call(this,a,l)||this).horizontal=e,s.resolution=i,s._quality=0,s.quality=r,s.blur=n,s}return kp(e,t),e.prototype.apply=function(t,e,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{var i=t.getFilterTexture(),o=t.renderer,s=e,a=i;this.state.blend=!1,t.applyFilter(this,s,a,Jp.CLEAR);for(var l=1;l<this.passes-1;l++){t.bindAndClear(s,Jp.BLIT),this.uniforms.uSampler=a;var u=a;a=s,s=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,n,r),t.returnFilterTexture(i)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Sl),uf=(function(t){function e(e,n,r,i){void 0===e&&(e=8),void 0===n&&(n=4),void 0===r&&(r=yo.FILTER_RESOLUTION),void 0===i&&(i=5);var o=t.call(this)||this;return o.blurXFilter=new lf(!0,e,n,r,i),o.blurYFilter=new lf(!1,e,n,r,i),o.resolution=r,o.quality=n,o.blur=e,o.repeatEdgePixels=!1,o}kp(e,t),e.prototype.apply=function(t,e,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,Jp.CLEAR),this.blurYFilter.apply(t,s,n,r),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,n,r):this.blurXFilter.apply(t,e,n,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(Sl),function(t,e){return uf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},uf(t,e)});var cf=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,ru,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}uf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.tint=function(t,e){var n=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),s=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,i){var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,l=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,u,c,e=e||.15,0,o-l,s-u,a-c,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Sl);cf.prototype.grayscale=cf.prototype.greyscale;var hf=function(t,e){return hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},hf(t,e)};!function(t){function e(e,n){var r=this,i=new ss;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=i,null!==n&&void 0!==n||(n=20),r.scale=new Jo(n,n),r}(function(t,e){function n(){this.constructor=t}hf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.apply=function(t,e,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),s=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/s,this.uniforms.rotation[3]=i.d/s),t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(Sl);var pf=function(t,e){return pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},pf(t,e)};!function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}(function(t,e){function n(){this.constructor=t}pf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t)}(Sl);var ff=function(t,e){return ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ff(t,e)};var df,mf,gf,yf,vf,_f,bf,xf,Ef,Sf,wf,Tf,Mf,Rf,Af,Pf,If,Cf,Of,Nf;!function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var r=t.call(this,ru,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=n,r}(function(t,e){function n(){this.constructor=t}ff(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(Sl);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(df||(df={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(mf||(mf={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(gf||(gf={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(yf||(yf={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(vf||(vf={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(_f||(_f={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(bf||(bf={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(xf||(xf={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Ef||(Ef={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Sf||(Sf={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(wf||(wf={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Tf||(Tf={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Mf||(Mf={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Rf||(Rf={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Af||(Af={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Pf||(Pf={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(If||(If={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(Cf||(Cf={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Of||(Of={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Nf||(Nf={}));var Lf=new ss;Bs.prototype._cacheAsBitmap=!1,Bs.prototype._cacheData=null,Bs.prototype._cacheAsBitmapResolution=null,Bs.prototype._cacheAsBitmapMultisample=Of.NONE;var Df=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Bs.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Df),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Bs.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Bs.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;r.pad(i)}r.ceil(yo.RESOLUTION);var o=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,u=wa.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),c="cacheAsBitmap_"+Bo();this._cacheData.textureCacheId=c,sa.addToCache(u.baseTexture,c),Sa.addToCache(u,c);var h=this.transform.localTransform.copyTo(Lf).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(o,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var p=new Nh(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=n,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}},Bs.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Bs.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=t.context,i=t._projTransform;e.ceil(yo.RESOLUTION);var o=wa.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+Bo();this._cacheData.textureCacheId=s,sa.addToCache(o.baseTexture,s),Sa.addToCache(o,s);var a=Lf;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new Nh(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},Bs.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Bs.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Bs.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,sa.removeFromCache(this._cacheData.textureCacheId),Sa.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Bs.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},Bs.prototype.name=null,zs.prototype.getChildByName=function(t,e){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,r=this.children.length;n<r;n++){var i=this.children[n];if(i.getChildByName){var o=i.getChildByName(t,!0);if(o)return o}}return null},Bs.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Jo),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Uf,Ff,kf,Bf,Gf,jf,zf,Hf,Vf,Xf,Wf,Yf,qf,$f,Kf,Zf,Jf,Qf,td,ed,nd=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,n=r.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=Hs.Application,t}();!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Uf||(Uf={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Ff||(Ff={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(kf||(kf={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Bf||(Bf={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Gf||(Gf={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(jf||(jf={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(zf||(zf={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Hf||(Hf={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Vf||(Vf={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Xf||(Xf={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Wf||(Wf={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Yf||(Yf={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(qf||(qf={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}($f||($f={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Kf||(Kf={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Zf||(Zf={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(Jf||(Jf={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(Qf||(Qf={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(td||(td={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(ed||(ed={}));var rd={createCanvas:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},id=/iPhone/i,od=/iPod/i,sd=/iPad/i,ad=/\biOS-universal(?:.+)Mac\b/i,ld=/\bAndroid(?:.+)Mobile\b/i,ud=/Android/i,cd=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,hd=/Silk/i,pd=/Windows Phone/i,fd=/\bWindows(?:.+)ARM\b/i,dd=/BlackBerry/i,md=/BB10/i,gd=/Opera Mini/i,yd=/\b(CriOS|Chrome)(?:.+)Mobile/i,vd=/Mobile(?:.+)Firefox\b/i,_d=function(t){return"undefined"!==typeof t&&"MacIntel"===t.platform&&"number"===typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"===typeof MSStream};var bd=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"===typeof navigator?"string"===typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");"undefined"!==typeof r[1]&&(n=r[0]),"undefined"!==typeof(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(t){return function(e){return e.test(t)}}(n),o={apple:{phone:i(id)&&!i(pd),ipod:i(od),tablet:!i(id)&&(i(sd)||_d(e))&&!i(pd),universal:i(ad),device:(i(id)||i(od)||i(sd)||i(ad)||_d(e))&&!i(pd)},amazon:{phone:i(cd),tablet:!i(cd)&&i(hd),device:i(cd)||i(hd)},android:{phone:!i(pd)&&i(cd)||!i(pd)&&i(ld),tablet:!i(pd)&&!i(cd)&&!i(ld)&&(i(hd)||i(ud)),device:!i(pd)&&(i(cd)||i(hd)||i(ld)||i(ud))||i(/\bokhttp\b/i)},windows:{phone:i(pd),tablet:i(fd),device:i(pd)||i(fd)},other:{blackberry:i(dd),blackberry10:i(md),opera:i(gd),firefox:i(vd),chrome:i(yd),device:i(dd)||i(md)||i(gd)||i(vd)||i(yd)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);var xd={ADAPTER:rd,MIPMAP_TEXTURES:Yf.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:td.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(bd.tablet||bd.phone){var n;if(bd.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if(bd.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Kf.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Wf.CLAMP,SCALE_MODE:Xf.LINEAR,PRECISION_VERTEX:Zf.HIGH,PRECISION_FRAGMENT:bd.apple.device?Zf.HIGH:Zf.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!bd.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ed="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function Sd(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===e||null===e)&&n.path)}},n.exports),n.exports}function wd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Sd((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=arguments,l=n?n+t:t;if(!this._events[l])return!1;var u,c,h=this._events[l],p=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,o),!0;case 6:return h.fn.call(h.context,e,r,i,o,s),!0}for(c=1,u=new Array(p-1);c<p;c++)u[c-1]=a[c];h.fn.apply(h.context,u)}else{var f,d=h.length;for(c=0;c<d;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),p){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,i);break;default:if(!u)for(f=1,u=new Array(p-1);f<p;f++)u[f-1]=a[f];h[c].fn.apply(h[c].context,u)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==e||i&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})),Sd((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==typeof Ed&&Ed;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var s,a,l=2147483647,u=36,c=1,h=26,p=38,f=700,d=72,m=128,g="-",y=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=u-c,E=Math.floor,S=String.fromCharCode;function w(t){throw RangeError(b[t])}function T(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function M(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+T((t=t.replace(_,".")).split("."),e).join(".")}function R(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function A(t){return T(t,(function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=S(t)})).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,n){var r=0;for(t=n?E(t/f):t>>1,t+=E(t/e);t>x*h>>1;r+=u)t=E(t/x);return E(r+(x+1)*t/(t+p))}function C(t){var e,n,r,i,o,s,a,p,f,y,v,_=[],b=t.length,x=0,S=m,T=d;for((n=t.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&w("not-basic"),_.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=x,s=1,a=u;i>=b&&w("invalid-input"),((p=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:u)>=u||p>E((l-x)/s))&&w("overflow"),x+=p*s,!(p<(f=a<=T?c:a>=T+h?h:a-T));a+=u)s>E(l/(y=u-f))&&w("overflow"),s*=y;T=I(x-o,e=_.length+1,0==o),E(x/e)>l-S&&w("overflow"),S+=E(x/e),x%=e,_.splice(x++,0,S)}return A(_)}function O(t){var e,n,r,i,o,s,a,p,f,y,v,_,b,x,T,M=[];for(_=(t=R(t)).length,e=m,n=0,o=d,s=0;s<_;++s)(v=t[s])<128&&M.push(S(v));for(r=i=M.length,i&&M.push(g);r<_;){for(a=l,s=0;s<_;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>E((l-n)/(b=r+1))&&w("overflow"),n+=(a-e)*b,e=a,s=0;s<_;++s)if((v=t[s])<e&&++n>l&&w("overflow"),v==e){for(p=n,f=u;!(p<(y=f<=o?c:f>=o+h?h:f-o));f+=u)T=p-y,x=u-y,M.push(S(P(y+T%x,0))),p=E(T/x);M.push(S(P(p,0))),o=I(n,b,r==i),n=0,++r}++n,++e}return M.join("")}if(s={version:"1.3.2",ucs2:{decode:R,encode:A},decode:C,encode:O,toASCII:function(t){return M(t,(function(t){return v.test(t)?"xn--"+O(t):t}))},toUnicode:function(t){return M(t,(function(t){return y.test(t)?C(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=s;else for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);else n.punycode=s}(Ed)}));var Td,Md,Rd,Ad,Pd,Id,Cd,Od,Nd,Ld,Dd,Ud,Fd,kd,Bd,Gd,jd,zd,Hd,Vd,Xd=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!==typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"===typeof r.maxKeys&&(s=r.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var u,c,h,p,f=t[l].replace(o,"%20"),d=f.indexOf(n);d>=0?(u=f.substr(0,d),c=f.substr(d+1)):(u=f,c=""),h=decodeURIComponent(u),p=decodeURIComponent(c),wd(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i},Wd=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Yd=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===typeof t?Object.keys(t).map((function(r){var i=encodeURIComponent(Wd(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(Wd(t))})).join(e):i+encodeURIComponent(Wd(t[r]))})).join(e):r?encodeURIComponent(Wd(r))+n+encodeURIComponent(Wd(t)):""};Sd((function(t,e){e.decode=e.parse=Xd,e.encode=e.stringify=Yd})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Td||(Td={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Md||(Md={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Rd||(Rd={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Ad||(Ad={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Pd||(Pd={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Id||(Id={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Cd||(Cd={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Od||(Od={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Nd||(Nd={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Ld||(Ld={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Dd||(Dd={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Ud||(Ud={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Fd||(Fd={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(kd||(kd={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Bd||(Bd={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Gd||(Gd={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(jd||(jd={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(zd||(zd={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Hd||(Hd={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Vd||(Vd={})),xd.RETINA_PREFIX=/@([0-9\.]+)x/,xd.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[Ad.NORMAL_NPM]=Ad.NORMAL,t[Ad.ADD_NPM]=Ad.ADD,t[Ad.SCREEN_NPM]=Ad.SCREEN,e[Ad.NORMAL]=Ad.NORMAL_NPM,e[Ad.ADD]=Ad.ADD_NPM,e[Ad.SCREEN]=Ad.SCREEN_NPM;var r=[];r.push(e),r.push(t)}();var qd={};!function(){function t(t,e,n){this.canvas=xd.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||xd.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0})}();var $d=function(){function t(e){var n=this;this.stage=new zs,e=Object.assign({forceCanvas:!1},e),this.renderer=nu(e),t._plugins.forEach((function(t){t.init.call(n,e)}))}return t.registerPlugin=function(t){!function(t,e,n){if(void 0===n&&(n=3),!qd[e]){var r=(new Error).stack;"undefined"===typeof r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),qd[e]=!0}}("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Ys.add({type:Hs.Application,ref:t})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var r=this,i=t._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();Ys.handleByList(Hs.Application,$d._plugins),Ys.add(nd);var Kd=function(t,e){return Kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Kd(t,e)};function Zd(t,e){function n(){this.constructor=t}Kd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Jd=function(t){function e(e,n,r,i){void 0===e&&(e=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=e,o.height=n,o.build(),o}return Zd(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,s=this.width/i,a=this.height/o,l=0;l<t;l++){var u=l%this.segWidth,c=l/this.segWidth|0;e.push(u*s,c*a),n.push(u/i,c/o)}var h=i*o;for(l=0;l<h;l++){var p=l%i,f=l/i|0,d=f*this.segWidth+p,m=f*this.segWidth+p+1,g=(f+1)*this.segWidth+p,y=(f+1)*this.segWidth+p+1;r.push(d,m,g,m,y,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(bp),Qd=function(t){function e(e,n,r){void 0===e&&(e=200),void 0===r&&(r=0);var i=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=e,i.textureScale=r,i.build(),i}return Zd(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var s=0,a=t[0],l=this._width*this.textureScale,u=t.length,c=0;c<u;c++){var h=4*c;if(this.textureScale>0){var p=a.x-t[c].x,f=a.y-t[c].y,d=Math.sqrt(p*p+f*f);a=t[c],s+=d/l}else s=c/(u-1);i[h]=s,i[h+1]=0,i[h+2]=s,i[h+3]=1}var m=0;for(c=0;c<u-1;c++){h=2*c;o[m++]=h,o[m++]=h+1,o[m++]=h+2,o[m++]=h+2,o[m++]=h+1,o[m++]=h+3}n.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],r=0,i=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var l=t[a],u=4*a;i=-((e=a<t.length-1?t[a+1]:l).x-n.x),r=e.y-n.y;var c=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=c,i/=c,r*=h,i*=h,o[u]=l.x+r,o[u+1]=l.y+i,o[u+2]=l.x-r,o[u+3]=l.y-i,n=l}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(bp),tm=(function(t){function e(e,n,r){void 0===r&&(r=0);var i=this,o=new Qd(e.height,n,r),s=new _p(e);return r>0&&(e.baseTexture.wrapMode=so.REPEAT),(i=t.call(this,o,s)||this).autoUpdate=!0,i}Zd(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)}}(vp),function(t){function e(e,n,r){var i=this,o=new Jd(e.width,e.height,n,r),s=new _p(Sa.WHITE);return(i=t.call(this,o,s)||this).texture=e,i.autoResize=!0,i}return Zd(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,n=e.width,r=e.height;!this.autoResize||t.width===n&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(vp)),em=(function(t){function e(e,n,r,i,o){void 0===e&&(e=Sa.EMPTY);var s=this,a=new bp(n,r,i);a.getBuffer("aVertexPosition").static=!1;var l=new _p(e);return(s=t.call(this,a,l,null,o)||this).autoUpdate=!0,s}Zd(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)}}(vp),function(t){function e(e,n,r,i,o){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===o&&(o=10);var s=t.call(this,Sa.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=i,s._topHeight=r,s._bottomHeight=o,s.texture=e,s}Zd(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(tm),function(t,e){return em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},em(t,e)});!function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e[0]instanceof Sa?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}(function(t,e){function n(){this.constructor=t}em(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ks.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ks.shared.add(this.update,this,Xs.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(Sa.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(Sa.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Sa)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ks.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ks.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(Nh);Ys.add(bu,Iu,Au,Qc,ip,fu,pp,Dp,uc,Wc,Yc,sp,Zs,Yu);var nm=n(1437);function rm(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=new Ah;s.lineStyle(1,14540253,1),s.beginFill(0,.1);let a=i,l=o,u=t,c=e,h=n,p=n,f=r,d=r;for(let m=0;m<u/h;m++)s.moveTo(a+m*h,l),s.lineTo(a+m*h,l+c);for(let m=0;m<c/p;m++)s.moveTo(a,l+m*p),s.lineTo(a+u,l+m*p);s.lineStyle(1,6710886,1);for(let m=0;m<u/f;m++)s.moveTo(a+m*f,l),s.lineTo(a+m*f,l+c);for(let m=0;m<c/d;m++)s.moveTo(a,l+m*d),s.lineTo(a+u,l+m*d);return s.endFill(),s}function im(t){let e=new Vh(t,{fontFamily:"Verdana, Geneva, sans-serif",fontSize:30,fill:0});e.position.set(0,0);let n=new Nh;n.width=e.width/60,n.height=e.height/60,e.width/=1.7,n.x=-1e4,n.anchor.set(.5,.5),e.anchor.set(.5);let r=new Ah;r.alpha=1,r.beginFill(15662882),r.lineStyle(1,0,4);let i=1.3*e.width,o=1.3*e.width;return r.drawRoundedRect(-i/2,-o/2,i,o,111),r.endFill(),n.addChild(r),n.addChild(e),n}function om(t,e,n){t.x=n.x,t.y=n.y,t.getChildAt(1).text=e}function sm(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function am(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pm(t[0])||!pm(t[1]))throw new Error("coordinates must contain numbers");return sm({type:"Point",coordinates:t},e,n)}function lm(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return sm({type:"Polygon",coordinates:t},e,n)}function um(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return sm({type:"LineString",coordinates:t},e,n)}function cm(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function hm(t,e,n){return void 0===n&&(n={}),sm({type:"MultiPoint",coordinates:t},e,n)}function pm(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function fm(t,e,n){if(null!==t)for(var r,i,o,s,a,l,u,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,m="Feature"===f,g=d?t.features.length:1,y=0;y<g;y++){a=(c=!!(u=d?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<a;v++){var _=0,b=0;if(null!==(s=c?u.geometries[v]:u)){l=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,y,_,b))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,_,b))return!1;p++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,_,b))return!1;p++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,_,b))return!1;p++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===fm(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function dm(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function mm(t,e){var n,r,i,o,s,a,l,u,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,m=f?t.features.length:1;for(n=0;n<m;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,u=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=l?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function gm(t,e){mm(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(sm(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(sm({type:s,coordinates:u},r),n,l))return!1}}))}function ym(t){var e=[1/0,1/0,-1/0,-1/0];return fm(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ym.default=ym;const vm=ym;function _m(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bm(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}var xm=n(4161);function Em(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r,i=_m(t),o="Feature"===(r=e).type?r.geometry:r,s=o.type,a=e.bbox,l=o.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,a))return!1;"Polygon"===s&&(l=[l]);for(var u=!1,c=0;c<l.length&&!u;c++)if(Sm(i,l[c][0],n.ignoreBoundary)){for(var h=!1,p=1;p<l[c].length&&!h;)Sm(i,l[c][p],!n.ignoreBoundary)&&(h=!0),p++;h||(u=!0)}return u}function Sm(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)===0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!n;a>t[1]!==u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(r=!r)}return r}Object.prototype.hasOwnProperty;var wm=new ArrayBuffer(16);new Float64Array(wm),new Uint32Array(wm);n(1977);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();const Tm=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return lm([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}(vm(t))};const Mm=function(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return fm(t,(function(t){n+=t[0],r+=t[1],i++}),!0),am([n/i,r/i],e.properties)};const Rm=function t(e,n){switch(void 0===n&&(n={}),function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}(e)){case"Point":return am(_m(e),n.properties);case"Polygon":var r=[];fm(e,(function(t){r.push(t)}));var i,o,s,a,l,u,c,h,p=Mm(e,{properties:n.properties}),f=p.geometry.coordinates,d=0,m=0,g=0,y=r.map((function(t){return[t[0]-f[0],t[1]-f[1]]}));for(i=0;i<r.length-1;i++)a=(o=y[i])[0],u=o[1],l=(s=y[i+1])[0],g+=h=a*(c=s[1])-l*u,d+=(a+l)*h,m+=(u+c)*h;if(0===g)return p;var v=1/(6*(.5*g));return am([f[0]+v*d,f[1]+v*m],n.properties);default:var _=function(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(fm(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=xm(n,e.concavity);return r.length>3?lm([r]):null}(e);return _?t(_,{properties:n.properties}):Mm(e,{properties:n.properties})}};const Am=function(t){if(!t)throw new Error("geojson is required");var e=[];return gm(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=bm(r);break;case"LineString":n=[bm(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var i=um([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=n<i?n:i,a=r<o?r:o,l=n>i?n:i,u=r>o?r:o;return[s,a,l,u]}(t,r),n.push(i),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),cm(e)};var Pm=n(9234);function Im(t,e){var n=bm(t),r=bm(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],l=r[0][0],u=r[0][1],c=r[1][0],h=r[1][1],p=(h-u)*(s-i)-(c-l)*(a-o),f=(c-l)*(o-u)-(h-u)*(i-l),d=(s-i)*(o-u)-(a-o)*(i-l);if(0===p)return null;var m=f/p,g=d/p;return m>=0&&m<=1&&g>=0&&g<=1?am([i+m*(s-i),o+m*(a-o)]):null}const Cm=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=sm(t)),"LineString"===e.type&&(e=sm(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Im(t,e);return i&&r.push(i),cm(r)}var o=Pm();return o.load(Am(e)),dm(Am(t),(function(t){dm(o.search(t),(function(e){var i=Im(t,e);if(i){var o=bm(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),cm(r)};var Om=Math.PI/180,Nm=180/Math.PI,Lm=function(t,e){this.lon=t,this.lat=e,this.x=Om*t,this.y=Om*e};Lm.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Lm.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Lm(e,t)};var Dm=function(){this.coords=[],this.length=0};Dm.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Um=function(t){this.properties=t||{},this.geometries=[]};Um.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Um.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Fm=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Lm(t.x,t.y),this.end=new Lm(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};Fm.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Nm*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Nm*Math.atan2(i,r),s]},Fm.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,p=360-u,f=1;f<n.length;++f){var d=n[f-1][0],m=n[f][0],g=Math.abs(m-d);g>p&&(m>c&&d<h||d>c&&m<h)?a=!0:g>l&&(l=g)}var y=[];if(a&&l<u){var v=[];y.push(v);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>p){var x=parseFloat(n[_-1][0]),E=parseFloat(n[_-1][1]),S=parseFloat(n[_][0]),w=parseFloat(n[_][1]);if(x>-180&&x<h&&180===S&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){v.push([-180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(x>c&&x<180&&-180===S&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){v.push([180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(x<h&&S>c){var T=x;x=S,S=T;var M=E;E=w,w=M}if(x>c&&S<h&&(S+=360),x<=180&&S>=180&&x<S){var R=(180-x)/(S-x),A=R*w+(1-R)*E;v.push([n[_-1][0]>c?180:-180,A]),(v=[]).push([n[_-1][0]>c?-180:180,A]),y.push(v)}else v=[],y.push(v);v.push([b,n[_][1]])}else v.push([n[_][0],n[_][1]])}}else{var P=[];y.push(P);for(var I=0;I<n.length;++I)P.push([n[I][0],n[I][1]])}for(var C=new Um(this.properties),O=0;O<y.length;++O){var N=new Dm;C.geometries.push(N);for(var L=y[O],D=0;D<L.length;++D)N.move_to(L[D])}return C};n(3663);var km=[],Bm=[],Gm=[],jm=[],zm=[],Hm=[],Vm=[],Xm=[],Wm=[],Ym=[],qm=[],$m=[],Km=[],Zm=[],Jm=[],Qm=[],tg=[],eg=[],ng=[],rg=[],ig=[],og=[],sg=[],ag=[];Vm[85]=Ym[85]=-1,Xm[85]=qm[85]=0,Wm[85]=$m[85]=1,ng[85]=og[85]=1,rg[85]=sg[85]=0,ig[85]=ag[85]=1,km[85]=jm[85]=0,Bm[85]=zm[85]=-1,Gm[85]=Jm[85]=0,Qm[85]=Km[85]=0,tg[85]=Zm[85]=1,Hm[85]=eg[85]=1,og[1]=og[169]=0,sg[1]=sg[169]=-1,ag[1]=ag[169]=0,Km[1]=Km[169]=-1,Zm[1]=Zm[169]=0,Jm[1]=Jm[169]=0,Ym[4]=Ym[166]=0,qm[4]=qm[166]=-1,$m[4]=$m[166]=1,Qm[4]=Qm[166]=1,tg[4]=tg[166]=0,eg[4]=eg[166]=0,Vm[16]=Vm[154]=0,Xm[16]=Xm[154]=1,Wm[16]=Wm[154]=1,jm[16]=jm[154]=1,zm[16]=zm[154]=0,Hm[16]=Hm[154]=1,ng[64]=ng[106]=0,rg[64]=rg[106]=1,ig[64]=ig[106]=0,km[64]=km[106]=-1,Bm[64]=Bm[106]=0,Gm[64]=Gm[106]=1,ng[2]=ng[168]=0,rg[2]=rg[168]=-1,ig[2]=ig[168]=1,og[2]=og[168]=0,sg[2]=sg[168]=-1,ag[2]=ag[168]=0,Km[2]=Km[168]=-1,Zm[2]=Zm[168]=0,Jm[2]=Jm[168]=0,Qm[2]=Qm[168]=-1,tg[2]=tg[168]=0,eg[2]=eg[168]=1,Vm[8]=Vm[162]=0,Xm[8]=Xm[162]=-1,Wm[8]=Wm[162]=0,Ym[8]=Ym[162]=0,qm[8]=qm[162]=-1,$m[8]=$m[162]=1,Km[8]=Km[162]=1,Zm[8]=Zm[162]=0,Jm[8]=Jm[162]=1,Qm[8]=Qm[162]=1,tg[8]=tg[162]=0,eg[8]=eg[162]=0,Vm[32]=Vm[138]=0,Xm[32]=Xm[138]=1,Wm[32]=Wm[138]=1,Ym[32]=Ym[138]=0,qm[32]=qm[138]=1,$m[32]=$m[138]=0,km[32]=km[138]=1,Bm[32]=Bm[138]=0,Gm[32]=Gm[138]=0,jm[32]=jm[138]=1,zm[32]=zm[138]=0,Hm[32]=Hm[138]=1,og[128]=og[42]=0,sg[128]=sg[42]=1,ag[128]=ag[42]=1,ng[128]=ng[42]=0,rg[128]=rg[42]=1,ig[128]=ig[42]=0,km[128]=km[42]=-1,Bm[128]=Bm[42]=0,Gm[128]=Gm[42]=1,jm[128]=jm[42]=-1,zm[128]=zm[42]=0,Hm[128]=Hm[42]=0,Ym[5]=Ym[165]=-1,qm[5]=qm[165]=0,$m[5]=$m[165]=0,og[5]=og[165]=1,sg[5]=sg[165]=0,ag[5]=ag[165]=0,Qm[20]=Qm[150]=0,tg[20]=tg[150]=1,eg[20]=eg[150]=1,jm[20]=jm[150]=0,zm[20]=zm[150]=-1,Hm[20]=Hm[150]=1,Vm[80]=Vm[90]=-1,Xm[80]=Xm[90]=0,Wm[80]=Wm[90]=1,ng[80]=ng[90]=1,rg[80]=rg[90]=0,ig[80]=ig[90]=1,Km[65]=Km[105]=0,Zm[65]=Zm[105]=1,Jm[65]=Jm[105]=0,km[65]=km[105]=0,Bm[65]=Bm[105]=-1,Gm[65]=Gm[105]=0,Vm[160]=Vm[10]=-1,Xm[160]=Xm[10]=0,Wm[160]=Wm[10]=1,Ym[160]=Ym[10]=-1,qm[160]=qm[10]=0,$m[160]=$m[10]=0,og[160]=og[10]=1,sg[160]=sg[10]=0,ag[160]=ag[10]=0,ng[160]=ng[10]=1,rg[160]=rg[10]=0,ig[160]=ig[10]=1,Qm[130]=Qm[40]=0,tg[130]=tg[40]=1,eg[130]=eg[40]=1,Km[130]=Km[40]=0,Zm[130]=Zm[40]=1,Jm[130]=Jm[40]=0,km[130]=km[40]=0,Bm[130]=Bm[40]=-1,Gm[130]=Gm[40]=0,jm[130]=jm[40]=0,zm[130]=zm[40]=-1,Hm[130]=Hm[40]=1,Ym[37]=Ym[133]=0,qm[37]=qm[133]=1,$m[37]=$m[133]=1,og[37]=og[133]=0,sg[37]=sg[133]=1,ag[37]=ag[133]=0,km[37]=km[133]=-1,Bm[37]=Bm[133]=0,Gm[37]=Gm[133]=0,jm[37]=jm[133]=1,zm[37]=zm[133]=0,Hm[37]=Hm[133]=0,Qm[148]=Qm[22]=-1,tg[148]=tg[22]=0,eg[148]=eg[22]=0,og[148]=og[22]=0,sg[148]=sg[22]=-1,ag[148]=ag[22]=1,ng[148]=ng[22]=0,rg[148]=rg[22]=1,ig[148]=ig[22]=1,jm[148]=jm[22]=-1,zm[148]=zm[22]=0,Hm[148]=Hm[22]=1,Vm[82]=Vm[88]=0,Xm[82]=Xm[88]=-1,Wm[82]=Wm[88]=1,Qm[82]=Qm[88]=1,tg[82]=tg[88]=0,eg[82]=eg[88]=1,Km[82]=Km[88]=-1,Zm[82]=Zm[88]=0,Jm[82]=Jm[88]=1,ng[82]=ng[88]=0,rg[82]=rg[88]=-1,ig[82]=ig[88]=0,Vm[73]=Vm[97]=0,Xm[73]=Xm[97]=1,Wm[73]=Wm[97]=0,Ym[73]=Ym[97]=0,qm[73]=qm[97]=-1,$m[73]=$m[97]=0,Km[73]=Km[97]=1,Zm[73]=Zm[97]=0,Jm[73]=Jm[97]=0,km[73]=km[97]=1,Bm[73]=Bm[97]=0,Gm[73]=Gm[97]=1,Vm[145]=Vm[25]=0,Xm[145]=Xm[25]=-1,Wm[145]=Wm[25]=0,Km[145]=Km[25]=1,Zm[145]=Zm[25]=0,Jm[145]=Jm[25]=1,og[145]=og[25]=0,sg[145]=sg[25]=1,ag[145]=ag[25]=1,jm[145]=jm[25]=-1,zm[145]=zm[25]=0,Hm[145]=Hm[25]=0,Ym[70]=Ym[100]=0,qm[70]=qm[100]=1,$m[70]=$m[100]=0,Qm[70]=Qm[100]=-1,tg[70]=tg[100]=0,eg[70]=eg[100]=1,ng[70]=ng[100]=0,rg[70]=rg[100]=-1,ig[70]=ig[100]=1,km[70]=km[100]=1,Bm[70]=Bm[100]=0,Gm[70]=Gm[100]=0,Ym[101]=Ym[69]=0,qm[101]=qm[69]=1,$m[101]=$m[69]=0,km[101]=km[69]=1,Bm[101]=Bm[69]=0,Gm[101]=Gm[69]=0,og[149]=og[21]=0,sg[149]=sg[21]=1,ag[149]=ag[21]=1,jm[149]=jm[21]=-1,zm[149]=zm[21]=0,Hm[149]=Hm[21]=0,Qm[86]=Qm[84]=-1,tg[86]=tg[84]=0,eg[86]=eg[84]=1,ng[86]=ng[84]=0,rg[86]=rg[84]=-1,ig[86]=ig[84]=1,Vm[89]=Vm[81]=0,Xm[89]=Xm[81]=-1,Wm[89]=Wm[81]=0,Km[89]=Km[81]=1,Zm[89]=Zm[81]=0,Jm[89]=Jm[81]=1,Vm[96]=Vm[74]=0,Xm[96]=Xm[74]=1,Wm[96]=Wm[74]=0,Ym[96]=Ym[74]=-1,qm[96]=qm[74]=0,$m[96]=$m[74]=1,ng[96]=ng[74]=1,rg[96]=rg[74]=0,ig[96]=ig[74]=0,km[96]=km[74]=1,Bm[96]=Bm[74]=0,Gm[96]=Gm[74]=1,Vm[24]=Vm[146]=0,Xm[24]=Xm[146]=-1,Wm[24]=Wm[146]=1,Qm[24]=Qm[146]=1,tg[24]=tg[146]=0,eg[24]=eg[146]=1,Km[24]=Km[146]=0,Zm[24]=Zm[146]=1,Jm[24]=Jm[146]=1,jm[24]=jm[146]=0,zm[24]=zm[146]=-1,Hm[24]=Hm[146]=0,Ym[6]=Ym[164]=-1,qm[6]=qm[164]=0,$m[6]=$m[164]=1,Qm[6]=Qm[164]=-1,tg[6]=tg[164]=0,eg[6]=eg[164]=0,og[6]=og[164]=0,sg[6]=sg[164]=-1,ag[6]=ag[164]=1,ng[6]=ng[164]=1,rg[6]=rg[164]=0,ig[6]=ig[164]=0,Km[129]=Km[41]=0,Zm[129]=Zm[41]=1,Jm[129]=Jm[41]=1,og[129]=og[41]=0,sg[129]=sg[41]=1,ag[129]=ag[41]=0,km[129]=km[41]=-1,Bm[129]=Bm[41]=0,Gm[129]=Gm[41]=0,jm[129]=jm[41]=0,zm[129]=zm[41]=-1,Hm[129]=Hm[41]=0,Qm[66]=Qm[104]=0,tg[66]=tg[104]=1,eg[66]=eg[104]=0,Km[66]=Km[104]=-1,Zm[66]=Zm[104]=0,Jm[66]=Jm[104]=1,ng[66]=ng[104]=0,rg[66]=rg[104]=-1,ig[66]=ig[104]=0,km[66]=km[104]=0,Bm[66]=Bm[104]=-1,Gm[66]=Gm[104]=1,Vm[144]=Vm[26]=-1,Xm[144]=Xm[26]=0,Wm[144]=Wm[26]=0,og[144]=og[26]=1,sg[144]=sg[26]=0,ag[144]=ag[26]=1,ng[144]=ng[26]=0,rg[144]=rg[26]=1,ig[144]=ig[26]=1,jm[144]=jm[26]=-1,zm[144]=zm[26]=0,Hm[144]=Hm[26]=1,Ym[36]=Ym[134]=0,qm[36]=qm[134]=1,$m[36]=$m[134]=1,Qm[36]=Qm[134]=0,tg[36]=tg[134]=1,eg[36]=eg[134]=0,km[36]=km[134]=0,Bm[36]=Bm[134]=-1,Gm[36]=Gm[134]=1,jm[36]=jm[134]=1,zm[36]=zm[134]=0,Hm[36]=Hm[134]=0,Vm[9]=Vm[161]=-1,Xm[9]=Xm[161]=0,Wm[9]=Wm[161]=0,Ym[9]=Ym[161]=0,qm[9]=qm[161]=-1,$m[9]=$m[161]=0,Km[9]=Km[161]=1,Zm[9]=Zm[161]=0,Jm[9]=Jm[161]=0,og[9]=og[161]=1,sg[9]=sg[161]=0,ag[9]=ag[161]=1,Vm[136]=0,Xm[136]=1,Wm[136]=1,Ym[136]=0,qm[136]=1,$m[136]=0,Qm[136]=-1,tg[136]=0,eg[136]=1,Km[136]=-1,Zm[136]=0,Jm[136]=0,og[136]=0,sg[136]=-1,ag[136]=0,ng[136]=0,rg[136]=-1,ig[136]=1,km[136]=1,Bm[136]=0,Gm[136]=0,jm[136]=1,zm[136]=0,Hm[136]=1,Vm[34]=0,Xm[34]=-1,Wm[34]=0,Ym[34]=0,qm[34]=-1,$m[34]=1,Qm[34]=1,tg[34]=0,eg[34]=0,Km[34]=1,Zm[34]=0,Jm[34]=1,og[34]=0,sg[34]=1,ag[34]=1,ng[34]=0,rg[34]=1,ig[34]=0,km[34]=-1,Bm[34]=0,Gm[34]=1,jm[34]=-1,zm[34]=0,Hm[34]=0,Vm[35]=0,Xm[35]=1,Wm[35]=1,Ym[35]=0,qm[35]=-1,$m[35]=1,Qm[35]=1,tg[35]=0,eg[35]=0,Km[35]=-1,Zm[35]=0,Jm[35]=0,og[35]=0,sg[35]=-1,ag[35]=0,ng[35]=0,rg[35]=1,ig[35]=0,km[35]=-1,Bm[35]=0,Gm[35]=1,jm[35]=1,zm[35]=0,Hm[35]=1,Vm[153]=0,Xm[153]=1,Wm[153]=1,Km[153]=-1,Zm[153]=0,Jm[153]=0,og[153]=0,sg[153]=-1,ag[153]=0,jm[153]=1,zm[153]=0,Hm[153]=1,Ym[102]=0,qm[102]=-1,$m[102]=1,Qm[102]=1,tg[102]=0,eg[102]=0,ng[102]=0,rg[102]=1,ig[102]=0,km[102]=-1,Bm[102]=0,Gm[102]=1,Vm[155]=0,Xm[155]=-1,Wm[155]=0,Km[155]=1,Zm[155]=0,Jm[155]=1,og[155]=0,sg[155]=1,ag[155]=1,jm[155]=-1,zm[155]=0,Hm[155]=0,Ym[103]=0,qm[103]=1,$m[103]=0,Qm[103]=-1,tg[103]=0,eg[103]=1,ng[103]=0,rg[103]=-1,ig[103]=1,km[103]=1,Bm[103]=0,Gm[103]=0,Vm[152]=0,Xm[152]=1,Wm[152]=1,Qm[152]=-1,tg[152]=0,eg[152]=1,Km[152]=-1,Zm[152]=0,Jm[152]=0,og[152]=0,sg[152]=-1,ag[152]=0,ng[152]=0,rg[152]=-1,ig[152]=1,jm[152]=1,zm[152]=0,Hm[152]=1,Vm[156]=0,Xm[156]=-1,Wm[156]=1,Qm[156]=1,tg[156]=0,eg[156]=1,Km[156]=-1,Zm[156]=0,Jm[156]=0,og[156]=0,sg[156]=-1,ag[156]=0,ng[156]=0,rg[156]=1,ig[156]=1,jm[156]=-1,zm[156]=0,Hm[156]=1,Vm[137]=0,Xm[137]=1,Wm[137]=1,Ym[137]=0,qm[137]=1,$m[137]=0,Km[137]=-1,Zm[137]=0,Jm[137]=0,og[137]=0,sg[137]=-1,ag[137]=0,km[137]=1,Bm[137]=0,Gm[137]=0,jm[137]=1,zm[137]=0,Hm[137]=1,Vm[139]=0,Xm[139]=1,Wm[139]=1,Ym[139]=0,qm[139]=-1,$m[139]=0,Km[139]=1,Zm[139]=0,Jm[139]=0,og[139]=0,sg[139]=1,ag[139]=0,km[139]=-1,Bm[139]=0,Gm[139]=0,jm[139]=1,zm[139]=0,Hm[139]=1,Vm[98]=0,Xm[98]=-1,Wm[98]=0,Ym[98]=0,qm[98]=-1,$m[98]=1,Qm[98]=1,tg[98]=0,eg[98]=0,Km[98]=1,Zm[98]=0,Jm[98]=1,ng[98]=0,rg[98]=1,ig[98]=0,km[98]=-1,Bm[98]=0,Gm[98]=1,Vm[99]=0,Xm[99]=1,Wm[99]=0,Ym[99]=0,qm[99]=-1,$m[99]=1,Qm[99]=1,tg[99]=0,eg[99]=0,Km[99]=-1,Zm[99]=0,Jm[99]=1,ng[99]=0,rg[99]=-1,ig[99]=0,km[99]=1,Bm[99]=0,Gm[99]=1,Ym[38]=0,qm[38]=-1,$m[38]=1,Qm[38]=1,tg[38]=0,eg[38]=0,og[38]=0,sg[38]=1,ag[38]=1,ng[38]=0,rg[38]=1,ig[38]=0,km[38]=-1,Bm[38]=0,Gm[38]=1,jm[38]=-1,zm[38]=0,Hm[38]=0,Ym[39]=0,qm[39]=1,$m[39]=1,Qm[39]=-1,tg[39]=0,eg[39]=0,og[39]=0,sg[39]=-1,ag[39]=1,ng[39]=0,rg[39]=1,ig[39]=0,km[39]=-1,Bm[39]=0,Gm[39]=1,jm[39]=1,zm[39]=0,Hm[39]=0;var lg=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ug=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},cg=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},hg=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},pg=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},fg=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},dg=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},mg=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},gg=[],yg=[],vg=[],_g=[],bg=[],xg=[],Eg=[],Sg=[];_g[1]=bg[1]=18,_g[169]=bg[169]=18,vg[4]=yg[4]=12,vg[166]=yg[166]=12,gg[16]=Sg[16]=4,gg[154]=Sg[154]=4,xg[64]=Eg[64]=22,xg[106]=Eg[106]=22,vg[2]=xg[2]=17,_g[2]=bg[2]=18,vg[168]=xg[168]=17,_g[168]=bg[168]=18,gg[8]=_g[8]=9,yg[8]=vg[8]=12,gg[162]=_g[162]=9,yg[162]=vg[162]=12,gg[32]=Sg[32]=4,yg[32]=Eg[32]=1,gg[138]=Sg[138]=4,yg[138]=Eg[138]=1,bg[128]=Sg[128]=21,xg[128]=Eg[128]=22,bg[42]=Sg[42]=21,xg[42]=Eg[42]=22,yg[5]=bg[5]=14,yg[165]=bg[165]=14,vg[20]=Sg[20]=6,vg[150]=Sg[150]=6,gg[80]=xg[80]=11,gg[90]=xg[90]=11,_g[65]=Eg[65]=3,_g[105]=Eg[105]=3,gg[160]=xg[160]=11,yg[160]=bg[160]=14,gg[10]=xg[10]=11,yg[10]=bg[10]=14,vg[130]=Sg[130]=6,_g[130]=Eg[130]=3,vg[40]=Sg[40]=6,_g[40]=Eg[40]=3,yg[101]=Eg[101]=1,yg[69]=Eg[69]=1,bg[149]=Sg[149]=21,bg[21]=Sg[21]=21,vg[86]=xg[86]=17,vg[84]=xg[84]=17,gg[89]=_g[89]=9,gg[81]=_g[81]=9,gg[96]=Eg[96]=0,yg[96]=xg[96]=15,gg[74]=Eg[74]=0,yg[74]=xg[74]=15,gg[24]=vg[24]=8,_g[24]=Sg[24]=7,gg[146]=vg[146]=8,_g[146]=Sg[146]=7,yg[6]=xg[6]=15,vg[6]=bg[6]=16,yg[164]=xg[164]=15,vg[164]=bg[164]=16,_g[129]=Sg[129]=7,bg[129]=Eg[129]=20,_g[41]=Sg[41]=7,bg[41]=Eg[41]=20,vg[66]=Eg[66]=2,_g[66]=xg[66]=19,vg[104]=Eg[104]=2,_g[104]=xg[104]=19,gg[144]=bg[144]=10,xg[144]=Sg[144]=23,gg[26]=bg[26]=10,xg[26]=Sg[26]=23,yg[36]=Sg[36]=5,vg[36]=Eg[36]=2,yg[134]=Sg[134]=5,vg[134]=Eg[134]=2,gg[9]=bg[9]=10,yg[9]=_g[9]=13,gg[161]=bg[161]=10,yg[161]=_g[161]=13,yg[37]=Sg[37]=5,bg[37]=Eg[37]=20,yg[133]=Sg[133]=5,bg[133]=Eg[133]=20,vg[148]=bg[148]=16,xg[148]=Sg[148]=23,vg[22]=bg[22]=16,xg[22]=Sg[22]=23,gg[82]=vg[82]=8,_g[82]=xg[82]=19,gg[88]=vg[88]=8,_g[88]=xg[88]=19,gg[73]=Eg[73]=0,yg[73]=_g[73]=13,gg[97]=Eg[97]=0,yg[97]=_g[97]=13,gg[145]=_g[145]=9,bg[145]=Sg[145]=21,gg[25]=_g[25]=9,bg[25]=Sg[25]=21,yg[70]=Eg[70]=1,vg[70]=xg[70]=17,yg[100]=Eg[100]=1,vg[100]=xg[100]=17,gg[34]=_g[34]=9,yg[34]=vg[34]=12,bg[34]=Sg[34]=21,xg[34]=Eg[34]=22,gg[136]=Sg[136]=4,yg[136]=Eg[136]=1,vg[136]=xg[136]=17,_g[136]=bg[136]=18,gg[35]=Sg[35]=4,yg[35]=vg[35]=12,_g[35]=bg[35]=18,xg[35]=Eg[35]=22,gg[153]=Sg[153]=4,_g[153]=bg[153]=18,yg[102]=vg[102]=12,xg[102]=Eg[102]=22,gg[155]=_g[155]=9,bg[155]=Sg[155]=23,yg[103]=Eg[103]=1,vg[103]=xg[103]=17,gg[152]=Sg[152]=4,vg[152]=xg[152]=17,_g[152]=bg[152]=18,gg[156]=vg[156]=8,_g[156]=bg[156]=18,xg[156]=Sg[156]=23,gg[137]=Sg[137]=4,yg[137]=Eg[137]=1,_g[137]=bg[137]=18,gg[139]=Sg[139]=4,yg[139]=_g[139]=13,bg[139]=Eg[139]=20,gg[98]=_g[98]=9,yg[98]=vg[98]=12,xg[98]=Eg[98]=22,gg[99]=Eg[99]=0,yg[99]=vg[99]=12,_g[99]=xg[99]=19,yg[38]=vg[38]=12,bg[38]=Sg[38]=21,xg[38]=Eg[38]=22,yg[39]=Sg[39]=5,vg[39]=bg[39]=16,xg[39]=Eg[39]=22;var wg=[];wg[1]=wg[169]=lg,wg[4]=wg[166]=ug,wg[16]=wg[154]=cg,wg[64]=wg[106]=hg,wg[168]=wg[2]=pg,wg[162]=wg[8]=fg,wg[138]=wg[32]=dg,wg[42]=wg[128]=mg,wg[5]=wg[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},wg[20]=wg[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},wg[80]=wg[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},wg[65]=wg[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},wg[160]=wg[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},wg[130]=wg[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},wg[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},wg[101]=wg[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},wg[149]=wg[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},wg[86]=wg[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},wg[89]=wg[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},wg[96]=wg[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},wg[24]=wg[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},wg[6]=wg[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},wg[129]=wg[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},wg[66]=wg[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},wg[144]=wg[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},wg[36]=wg[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},wg[9]=wg[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},wg[37]=wg[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},wg[148]=wg[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},wg[82]=wg[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},wg[73]=wg[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},wg[145]=wg[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},wg[70]=wg[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},wg[34]=function(t){return[mg(t),fg(t)]},wg[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},wg[136]=function(t){return[dg(t),pg(t)]},wg[153]=function(t){return[cg(t),lg(t)]},wg[102]=function(t){return[ug(t),hg(t)]},wg[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},wg[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},wg[152]=function(t){return[cg(t),pg(t)]},wg[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},wg[137]=function(t){return[dg(t),lg(t)]},wg[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},wg[98]=function(t){return[fg(t),hg(t)]},wg[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},wg[38]=function(t){return[ug(t),mg(t)]},wg[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function Tg(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function Mg(t,e){return e.geometry.coordinates[0].every((function(e){return Em(am(e),t)}))}var Rg=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&i.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=Tg(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}();const Ag=Rg;const Pg=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return um([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Tg(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();var Ig=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=Tg(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return hm(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=lm([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Tm(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),r=t.geometry.coordinates[0].map((function(t){return t[1]})),i=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}(o,i)&&Mg(o,i)){for(var s=t.map((function(t){return t.from.coordinates})),a=void 0,l=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(a=t)},u=0,c=s;u<c.length;u++){l(c[u])}a&&e.inside(am(a))&&(r&&!Mg(n,o)||(r=e))}})),r},t.prototype.inside=function(t){return Em(t,this.toPolygon())},t}();const Cg=Ig;!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return gm(e,(function(t){!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),function(t,e,n,r){var i=n;fm(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r)}(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=Ag.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Ag(t)),n},t.prototype.addEdge=function(t,e){var n=new Pg(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;"undefined"===typeof t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,l=void 0,u=void 0;s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Cg;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();n(4042);n(5107);n(6530);function Og(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Ng={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Ng.heuristics.manhattan,o=r.closest||!1,s=new Ug((function(t){return t.f})),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var l=s.pop();if(l===n)return Og(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var p=u[c];if(!p.closed&&!p.isWall()){var f=l.g+p.getCost(l),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?Og(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Lg(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Dg(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Dg(t,e,n){this.x=t,this.y=e,this.weight=n}function Ug(t){this.content=[],this.scoreFunction=t}Lg.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ng.cleanNode(this.nodes[t])},Lg.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ng.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Lg.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Lg.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Lg.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Dg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Dg.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Dg.prototype.isWall=function(){return 0===this.weight},Ug.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var l=this.content[s];(i=this.scoreFunction(l))<r&&(a=s)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};function Fg(){this._=null}function kg(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Bg(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Gg(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function jg(t){for(;t.L;)t=t.L;return t}Fg.prototype={constructor:Fg,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=jg(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Bg(this,n),n=(t=n).U),n.C=!1,r.C=!0,Gg(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Gg(this,n),n=(t=n).U),n.C=!1,r.C=!0,Bg(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?jg(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Bg(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Gg(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Bg(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Gg(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Bg(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Gg(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};const zg=Fg;function Hg(t,e,n,r){var i=[null,null],o=fy.push(i)-1;return i.left=t,i.right=e,n&&Xg(i,t,e,n),r&&Xg(i,e,t,r),hy[t.index].halfedges.push(o),hy[e.index].halfedges.push(o),i}function Vg(t,e,n){var r=[e,n];return r.left=t,r}function Xg(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Wg(t,e,n,r,i){var o,s=t[0],a=t[1],l=s[0],u=s[1],c=0,h=1,p=a[0]-l,f=a[1]-u;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*p,u+c*f]),h<1&&(t[1]=[l+h*p,u+h*f]),!0)}}}}}function Yg(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,l=t[0],u=t.left,c=t.right,h=u[0],p=u[1],f=c[0],d=c[1],m=(h+f)/2,g=(p+d)/2;if(d===p){if(m<e||m>=r)return;if(h>f){if(l){if(l[1]>=i)return}else l=[m,n];o=[m,i]}else{if(l){if(l[1]<n)return}else l=[m,i];o=[m,n]}}else if(a=g-(s=(h-f)/(d-p))*m,s<-1||s>1)if(h>f){if(l){if(l[1]>=i)return}else l=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(l){if(l[1]<n)return}else l=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<d){if(l){if(l[0]>=r)return}else l=[e,s*e+a];o=[r,s*r+a]}else{if(l){if(l[0]<e)return}else l=[r,s*r+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function qg(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $g(t,e){return e[+(e.left!==t.site)]}function Kg(t,e){return e[+(e.left===t.site)]}var Zg,Jg=[];function Qg(){kg(this),this.x=this.y=this.arc=this.site=this.cy=null}function ty(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],l=r[0]-s,u=r[1]-a,c=o[0]-s,h=o[1]-a,p=2*(l*h-u*c);if(!(p>=-my)){var f=l*l+u*u,d=c*c+h*h,m=(h*f-u*d)/p,g=(l*d-c*f)/p,y=Jg.pop()||new Qg;y.arc=t,y.site=i,y.x=m+s,y.y=(y.cy=g+a)+Math.sqrt(m*m+g*g),t.circle=y;for(var v=null,_=py._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}py.insert(v,y),v||(Zg=y)}}}}function ey(t){var e=t.circle;e&&(e.P||(Zg=e.N),py.remove(e),Jg.push(e),kg(e),t.circle=null)}var ny=[];function ry(){kg(this),this.edge=this.site=this.circle=null}function iy(t){var e=ny.pop()||new ry;return e.site=t,e}function oy(t){ey(t),cy.remove(t),ny.push(t),kg(t)}function sy(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];oy(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<dy&&Math.abs(r-l.circle.cy)<dy;)o=l.P,a.unshift(l),oy(l),l=o;a.unshift(l),ey(l);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<dy&&Math.abs(r-u.circle.cy)<dy;)s=u.N,a.push(u),oy(u),u=s;a.push(u),ey(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],Xg(u.edge,l.site,u.site,i);l=a[0],(u=a[h-1]).edge=Hg(l.site,u.site,null,i),ty(l),ty(u)}function ay(t){for(var e,n,r,i,o=t[0],s=t[1],a=cy._;a;)if((r=ly(a,s)-o)>dy)a=a.L;else{if(!((i=o-uy(a,s))>dy)){r>-dy?(e=a.P,n=a):i>-dy?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){hy[t.index]={site:t,halfedges:[]}}(t);var l=iy(t);if(cy.insert(e,l),e||n){if(e===n)return ey(e),n=iy(e.site),cy.insert(l,n),l.edge=n.edge=Hg(e.site,l.site),ty(e),void ty(n);if(n){ey(e),ey(n);var u=e.site,c=u[0],h=u[1],p=t[0]-c,f=t[1]-h,d=n.site,m=d[0]-c,g=d[1]-h,y=2*(p*g-f*m),v=p*p+f*f,_=m*m+g*g,b=[(g*v-f*_)/y+c,(p*_-m*v)/y+h];Xg(n.edge,u,d,b),l.edge=Hg(u,t,null,b),n.edge=Hg(t,d,null,b),ty(e),ty(n)}else l.edge=Hg(e.site,l.site)}}function ly(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],u=l-e;if(!u)return a;var c=a-r,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+a)/2}function uy(t,e){var n=t.N;if(n)return ly(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var cy,hy,py,fy,dy=1e-6,my=1e-12;function gy(t,e){return e[1]-t[1]||e[0]-t[0]}function yy(t,e){var n,r,i,o=t.sort(gy).pop();for(fy=[],hy=new Array(t.length),cy=new zg,py=new zg;;)if(i=Zg,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ay(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;sy(i.arc)}if(function(){for(var t,e,n,r,i=0,o=hy.length;i<o;++i)if((t=hy[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=qg(t,fy[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=fy.length;o--;)Yg(i=fy[o],t,e,n,r)&&Wg(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>dy||Math.abs(i[0][1]-i[1][1])>dy)||delete fy[o]}(s,a,l,u),function(t,e,n,r){var i,o,s,a,l,u,c,h,p,f,d,m,g=hy.length,y=!0;for(i=0;i<g;++i)if(o=hy[i]){for(s=o.site,a=(l=o.halfedges).length;a--;)fy[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)d=(f=Kg(o,fy[l[a]]))[0],m=f[1],h=(c=$g(o,fy[l[++a%u]]))[0],p=c[1],(Math.abs(d-h)>dy||Math.abs(m-p)>dy)&&(l.splice(a,0,fy.push(Vg(s,f,Math.abs(d-t)<dy&&r-m>dy?[t,Math.abs(h-t)<dy?p:r]:Math.abs(m-r)<dy&&n-d>dy?[Math.abs(p-r)<dy?h:n,r]:Math.abs(d-n)<dy&&m-e>dy?[n,Math.abs(h-n)<dy?p:e]:Math.abs(m-e)<dy&&d-t>dy?[Math.abs(p-e)<dy?h:t,e]:null))-1),++u);u&&(y=!1)}if(y){var v,_,b,x=1/0;for(i=0,y=null;i<g;++i)(o=hy[i])&&(b=(v=(s=o.site)[0]-t)*v+(_=s[1]-e)*_)<x&&(x=b,y=o);if(y){var E=[t,e],S=[t,r],w=[n,r],T=[n,e];y.halfedges.push(fy.push(Vg(s=y.site,E,S))-1,fy.push(Vg(s,S,w))-1,fy.push(Vg(s,w,T))-1,fy.push(Vg(s,T,E))-1)}}for(i=0;i<g;++i)(o=hy[i])&&(o.halfedges.length||delete hy[i])}(s,a,l,u)}this.edges=fy,this.cells=hy,cy=py=fy=hy=null}yy.prototype={constructor:yy,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return $g(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,l,u,c=n.site,h=-1,p=e[i[o-1]],f=p.left===c?p.right:p.left;++h<o;)s=f,f=(p=e[i[h]]).left===c?p.right:p.left,s&&f&&r<s.index&&r<f.index&&(l=s,u=f,((a=c)[0]-u[0])*(l[1]-a[1])-(a[0]-l[0])*(u[1]-a[1])<0)&&t.push([c.data,s.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var l=t-a[0],u=e-a[1],h=l*l+u*u;h<c&&(c=h,s=a.index)}}))}while(null!==s);return o._found=r,null==n||c<=n*n?i.site:null}};n(9056);n(4035);function vy(){return new _y}function _y(){this.reset()}_y.prototype={constructor:_y,reset:function(){this.s=this.t=0},add:function(t){xy(by,t,this.t),xy(this,by.s,this.s),this.s?this.t+=by.t:this.s=by.t},valueOf:function(){return this.s}};var by=new _y;function xy(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Ey=1e-6,Sy=Math.PI,wy=Sy/2,Ty=Sy/4,My=2*Sy,Ry=Sy/180,Ay=Math.abs,Py=Math.atan,Iy=Math.atan2,Cy=Math.cos,Oy=(Math.ceil,Math.exp),Ny=(Math.floor,Math.log),Ly=(Math.pow,Math.sin),Dy=(Math.sign,Math.sqrt),Uy=Math.tan;function Fy(t){return t>1?wy:t<-1?-wy:Math.asin(t)}function ky(){}vy(),vy();function By(t){var e=t[0],n=t[1],r=Cy(n);return[r*Cy(e),r*Ly(e),Ly(n)]}function Gy(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jy(t){var e=Dy(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}vy();function zy(t,e){return[t>Sy?t-My:t<-Sy?t+My:t,e]}function Hy(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Vy(t,e,n,r,i){var o,s,a=[],l=[];if(t.forEach((function(t){if(!(t.length-1<=0)){var e,n,r=t[0],s=t[e];if(s,Ay(r[0]-c[0])<Ey&&Ay(u[1]-c[1])<Ey){for(i.lineStart(),0;o<e;++o)i.point(t[o][0],r[1]);i.lineEnd()}else{var u,c;a.push(new Hy(r,t,null,!0)),l.push(n.o=new Hy(r,null,n,!1)),a.push(new Hy(s,t,null,!1)),l.push(n.o=new Hy(s,null,n,!0))}}})),a.length){for(l.sort(e),Xy(a),Xy(l),0,l.length;o<s;++o)l[o].e=!n;for(var u,c,h=a[0];;){for(var p=h,f=!0;p.v;)if(p.n===h)return;p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(0,u.length;o<s;++o)i.point(u[o][0],c[1]);else r(p.x,p.n.x,1,i);p.n}else{if(f)for(p.p.z,u.length-1;o>=0;--o)i.point(u[o][0],c[1]);else r(p.x,p.p.x,-1,i);p.p}p.o.z,!f}while(!p.v);i.lineEnd()}}}function Xy(t){if(t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=t[r],n.p=i,n;i.n=t[0],n.p=i}}function Wy(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}zy.invert=zy;var Yy=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Wy(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Wy);Yy.right,Yy.left;var qy=Array.prototype;qy.slice,qy.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var $y=vy();function Ky(t,e){var n=e[0],r=e[1],i=[Ly(n),-Cy(n),0],o=0,s=0;$y.reset();for(var a=0,l=t.length;a<l;++a)if(t[a].length)for(var u,c,h=u[c-1],p=h[0],f=h[1]/2+Ty,d=Ly(f),m=Cy(f),g=0;g<c;v,b,x,y){var y=u[g],v=y[0],_=y[1]/2+Ty,b=Ly(_),x=Cy(_),E=v-p,S=E>=0?1:-1,w=S*E,T=w>Sy,M=d*b;if($y.add(Iy(M*S*Ly(w),m*x+M*Cy(w))),T?E+S*My:E,T^p>=n^v>=n){var R=Gy(By(h),By(y));jy(R);var A=Gy(i,R);jy(A);var P=(T^E>=0?-1:1)*Fy(A[2]);(r>P||r===P&&(R[0]||R[1]))&&(T^E>=0?1:-1)}}return(o<-Ey||o<Ey&&$y<-Ey)^1&s}vy();vy(),vy();vy();function Zy(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Jy(t){return t.length>1}function Qy(t,e){return(t.x[0]<0?t[1]-wy-Ey:wy-t[1])-(e.x[0]<0?e[1]-wy-Ey:wy-e[1])}Zy(4.5);function tv(t){return function(e){var n=new ev;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ev(){}ev.prototype={constructor:ev,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Cy(30*Ry);tv({point:function(t,e){this.stream.point(t*Ry,e*Ry)}});function nv(t){return function(e,n){var r=Cy(e),i=Cy(n),o=t(r*i);return[o*i*Ly(e),o*Ly(n)]}}function rv(t){return function(e,n){var r=Dy(e*e+n*n),i=t(r),o=Ly(i),s=Cy(i);return[Iy(e*o,r*s),Fy(r&&n*o/r)]}}var iv=nv((function(t){return Dy(2/(1+t))}));iv.invert=rv((function(t){return 2*Fy(t/2)}));var ov=nv((function(t){return(t=function(t){return t>1?0:t<-1?Sy:Math.acos(t)}(t))&&t/Ly(t)}));function sv(t,e){return[t,Ny(Uy((wy+e)/2))]}function av(t,e){return[t,e]}function lv(t,e){var n=Cy(e),r=Cy(t)*n;return[n*Ly(t)/r,Ly(e)/r]}function uv(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function cv(t,e){return[Cy(e)*Ly(t),Ly(e)]}function hv(t,e){var n=Cy(e),r=1+Cy(t)*n;return[n*Ly(t)/r,Ly(e)/r]}function pv(t,e){return[Ny(Uy((wy+e)/2)),-t]}ov.invert=rv((function(t){return t})),sv.invert=function(t,e){return[t,2*Py(Oy(e))-wy]},av.invert=av,lv.invert=rv(Py),uv.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Ay(n)>Ey&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},cv.invert=rv(Fy),hv.invert=rv((function(t){return 2*Py(t)})),pv.invert=function(t,e){return[-e,2*Py(Oy(t))-wy]};var fv=n(1694),dv=n.n(fv);const mv=["as","disabled"];function gv(t){let{tagName:e,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:l=0,type:u}=t;e||(e=null!=r||null!=i||null!=o?"a":"button");const c={tagName:e};if("button"===e)return[{type:u||"button",disabled:n},c];const h=t=>{(n||"a"===e&&function(t){return!t||"#"===t.trim()}(r))&&t.preventDefault(),n?t.stopPropagation():null==a||a(t)};return"a"===e&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===e?i:void 0,"aria-disabled":n||void 0,rel:"a"===e?o:void 0,onClick:h,onKeyDown:t=>{" "===t.key&&(t.preventDefault(),h(t))}},c]}const yv=i.forwardRef(((t,e)=>{let{as:n,disabled:r}=t,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,mv);const[o,{tagName:s}]=gv(Object.assign({tagName:n,disabled:r},i));return(0,_n.jsx)(s,Object.assign({},i,o,{ref:e}))}));yv.displayName="Button";const vv=["xxl","xl","lg","md","sm","xs"],_v="xs",bv=i.createContext({prefixes:{},breakpoints:vv,minBreakpoint:_v}),{Consumer:xv,Provider:Ev}=bv;function Sv(t,e){const{prefixes:n}=(0,i.useContext)(bv);return t||n[e]||e}const wv=i.forwardRef(((t,e)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:s=!1,disabled:a=!1,className:l,...u}=t;const c=Sv(r,"btn"),[h,{tagName:p}]=gv({tagName:n,disabled:a,...u}),f=p;return(0,_n.jsx)(f,{...h,...u,ref:e,disabled:a,className:dv()(l,c,s&&"active",i&&"".concat(c,"-").concat(i),o&&"".concat(c,"-").concat(o),u.href&&a&&"disabled")})}));wv.displayName="Button";const Tv=wv,Mv=t=>{const e=tt();let n=localStorage.getItem("token");return(0,_n.jsx)(_n.Fragment,{children:(0,_n.jsx)(Tv,{type:"button",className:"planify-button div-buttons",onClick:async()=>{const r=t.getPlanData(),i={Authorization:"Bearer ".concat(n)};console.log("reqData",r),await vn.post("https://grackle-notable-hardly.ngrok-free.app/api/process-data/",r,{headers:i}).then((t=>{console.log("response is ",t),e("/viewplanify",{state:t.data})})).catch((t=>{console.log(t)}))},children:"Generate Now"})})};class Rv extends i.Component{constructor(t){var e;super(t),e=this,this.state={data:[],doorMode:0},this.isCollide=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return t.distance(e)<=n},this.closePoint=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;for(var r=0;r<e.plan_points.length;r++)if(e.isCollide(e.plan_points[r],t,n))return e.plan_points[r];return null},this.closeLine=function(t){let n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.06,o=e.plan_points.slice(0);o.push(o[0]);for(var s=0;s<o.length-1;s++)if(n=o[s],r=o[s+1],n.distance(t)+r.distance(t)<=n.distance(r)+i)return[n,r];return null},this.addPoint=t=>{this.plan_points.push(t)},this.minMax=t=>{let e=t[0].clone(),n=t[0].clone();for(var r=0;r<t.length;r++)t[r].x<e.x&&(e.x=t[r].x),t[r].y<e.y&&(e.y=t[r].y),t[r].x<e.x&&(e.x=t[r].x),t[r].y>n.y&&(n.y=t[r].y);return[e,n]},this.drawText=(t,e,n)=>{this.lines.clear(),this.lines.lineStyle({width:14}),this.lines.beginFill("0xe74c3c")},this.drawShape=()=>{let t=1;if(this.done){this.area=this.polyArea(),this.updatePolygon();const[t,e]=Rm(this.polygon).geometry.coordinates;this.areaText.text="Area: "+this.area.toFixed(1).toString()+" m\xb2",this.areaText.x=t,this.areaText.y=e}this.done&&(t=0);for(let e=0;e<this.plan_points.length-t;e++){let t=this.plan_points[e],n=this.plan_points[(e+1)%this.plan_points.length],r=t.distance(n),i=n.sub(t).normalize(),o=n.sub(i.mul(r/2));om(this.textContainer.getChildAt(e),(r/this.scale).toFixed(1).toString(),o)}if(this.lines.clear(),this.doorLines.clear(),this.lines&&this.plan_points.length>0){this.lines.alpha=.3,this.lines.lineStyle(1,"0x00aa00",1);for(let r=0;r<this.x_aligns.length;r++)this.lines.moveTo(this.x_aligns[r],0),this.lines.lineTo(this.x_aligns[r],2e3);for(let r=0;r<this.y_aligns.length;r++)this.lines.moveTo(0,this.y_aligns[r]),this.lines.lineTo(1e4,this.y_aligns[r]);this.x_aligns=[],this.y_aligns=[],this.lines.alpha=1,this.done&&null!==this.selected_line&&(this.lines.lineStyle(6,"0xcf0000",1),this.lines.moveTo(this.selected_line[0].x,this.selected_line[0].y),this.lines.lineTo(this.selected_line[1].x,this.selected_line[1].y)),this.lines.lineStyle({width:2.5});let t="0xffd000",e=this.done&&(this.selected_polygon||this.selected_line||this.selected_point);if(this.lines.beginFill(t,this.isMouseDown&&e&&!this.drag_grid_start_pos?.7:1),this.lines.moveTo(this.plan_points[0].x,this.plan_points[0].y),this.done||this.lines.endFill(),this.plan_points.map((t=>this.lines.lineTo(t.x,t.y))),this.last_point&&(this.lines.lineTo(this.last_point.x,this.last_point.y),this.plan_points.length>=1)){let t=this.last_point.distance(this.plan_points[this.plan_points.length-1]),e=this.last_point.sub(this.plan_points[this.plan_points.length-1]).normalize(),n=this.last_point.sub(e.mul(t/2));om(this.current_text,(t/this.scale).toFixed(1).toString(),n)}this.done&&(this.lines.closePath(),this.lines.endFill()),this.done&&null!==this.selected_line&&(this.lines.lineStyle(3,this.isMouseDown?16711680:11141120,1),this.lines.moveTo(this.selected_line[0].x,this.selected_line[0].y),this.lines.lineTo(this.selected_line[1].x,this.selected_line[1].y));window.screen.width,window.screen.height;if(this.door_poly){let t=0,e=0,n="0x00ff04",r=this.door_poly;1===this.mode&&(n="0x888888"),this.door_horiz?(t=70*this.scale/90,e=15*this.scale/90,r=this.door_right?[r[0],r[1]+e/2]:[r[0],r[1]-e/2]):(t=15*this.scale/90,e=70*this.scale/90,r=this.door_right?[r[0]+t/2,r[1]]:[r[0]-t/2,r[1]]),this.doorLines.lineStyle({width:2}),this.doorLines.beginFill(n),this.doorLines.moveTo(r[0]-t/2,r[1]-e/2),this.doorLines.lineTo(r[0]+t/2,r[1]-e/2),this.doorLines.lineTo(r[0]+t/2,r[1]+e/2),this.doorLines.lineTo(r[0]-t/2,r[1]+e/2),this.doorLines.closePath(),this.doorLines.endFill()}this.lines.lineStyle(0),this.lines.beginFill("0x070a5e",1),this.plan_points.map((t=>this.lines.drawCircle(t.x,t.y,6))),this.lines.endFill();let n=!1;!this.last_point||this.last_point.x!==this.plan_points[0].x&&this.last_point.y!==this.plan_points[0].y||(n=!0),this.done?this.done&&null!==this.selected_point&&!n&&(this.isMouseDown?(this.lines.beginFill("0xff0600",(this.isMouseDown,1)),this.lines.drawCircle(this.selected_point.x,this.selected_point.y,8),this.lines.endFill()):(this.lines.beginFill("0xaa1111",(this.isMouseDown,1)),this.lines.drawCircle(this.selected_point.x,this.selected_point.y,7),this.lines.endFill())):(this.lines.beginFill("0xff5555",.5),this.lines.drawCircle(this.plan_points[0].x,this.plan_points[0].y,6),this.lines.endFill()),n&&(this.lines.beginFill("0xff0600",1),this.lines.drawCircle(this.plan_points[0].x,this.plan_points[0].y,7),this.lines.endFill())}},this.getMousePos=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.app.renderer.plugins.interaction.mouse.global.x/e.zoom,i=e.app.renderer.plugins.interaction.mouse.global.y/e.zoom;return n&&(r=Math.round(r/e.grid_pitch)*e.grid_pitch,i=Math.round(i/e.grid_pitch)*e.grid_pitch),t?new nm.Z(r,i):[r,i]},this.alignWith=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.align_grid;o=a&&o,s=a&&s;let l=[e.grid_pitch,e.grid_pitch_big];if(o||s)for(let u=0;u<l.length;u++)o&&(t.x%l[u]>l[u]-r||t.x%l[u]<r)&&(t.x=Math.round(t.x/l[u])*l[u],e.x_aligns.push(t.x)),s&&(t.y%l[u]>l[u]-r||t.y%l[u]<r)&&(t.y=Math.round(t.y/l[u])*l[u],e.y_aligns.push(t.y));for(let u=0;u<n.length;u++)if(!i.includes(n[u])){if(!o&&!s)break;o&&t!==n[u]&&t.x<=r+n[u].x&&t.x>=n[u].x-r&&(t.x=n[u].x,e.x_aligns.push(n[u].x),o=!1),s&&t!==n[u]&&t.y<=r+n[u].y&&t.y>=n[u].y-r&&(t.y=n[u].y,e.y_aligns.push(n[u].y),s=!1)}},this.alignPoints=function(t,e){},this.onRightClick=t=>{if(this.done&&1===this.mode)this.mode=0,this.setState({doorMode:0}),this.door_poly=[];else if(this.done&&0===this.mode);else if(!this.done){if(1==this.plan_points.length)return;this.plan_points.pop(),this.textContainer.removeChildAt(this.textContainer.children.length-2),this.onMoveDraw(t),this.drawShape()}this.drawShape()},this.onMoveDraw=t=>{let e=this.getMousePos(!0),n=this.plan_points[this.plan_points.length-1],r=this.plan_points[0];this.plan_points.length>0&&(this.horver&&(this.isHorizontal(n,e)?e.y=n.y:e.x=n.x),this.align&&(this.alignWith(e,[r],this.align_factor),this.alignWith(e,this.plan_points,this.align_factor)),this.last_point=e,this.drawShape())},this.onDragPoint=t=>{if(this.app){let t,e;if(null===this.selected_point)return;let n=this.getMousePos(!0);if(this.horver){let n=this.plan_points.indexOf(this.selected_point),r=n-1,i=n+1;r<0&&(r=this.plan_points.length-1),i>=this.plan_points.length&&(i=0),t=this.plan_points[r],e=this.plan_points[i]}if(this.align){let r=this.plan_points[0];this.alignWith(n,this.plan_points.concat([r]),this.align_factor,[this.selected_point,t,e])}this.horver&&(this.isHorizontal(this.selected_point,t)?t.y=n.y:t.x=n.x,this.isHorizontal(this.selected_point,e)?e.y=n.y:e.x=n.x),this.selected_point.x=n.x,this.selected_point.y=n.y,this.drawShape()}},this.isHorizontal=(t,e)=>Math.abs(t.x-e.x)>Math.abs(t.y-e.y),this.onDragLine=t=>{if(this.app){if(null===this.selected_line)return;var e=this.getMousePos(!0);let t=!0,n=!0;this.horver&&(this.isHorizontal(this.selected_line[0],this.selected_line[1])?(e.x=this.selected_line[0].x-this.selected_line_abs[0].x,t=!1):(e.y=this.selected_line[0].y-this.selected_line_abs[0].y,n=!1)),this.align&&this.alignWith(e,this.plan_points,this.align_factor,this.selected_line,t,n),this.selected_line[0].x=this.selected_line_abs[0].x+e.x,this.selected_line[0].y=this.selected_line_abs[0].y+e.y,this.selected_line[1].x=this.selected_line_abs[1].x+e.x,this.selected_line[1].y=this.selected_line_abs[1].y+e.y,this.drawShape()}},this.onDragPolygon=t=>{if(this.app){if(null===this.selected_polygon)return;let[t,n]=this.minMax(this.selected_polygon),r=this.getMousePos(!0,!0),i=t.add(r),o=n.add(r);if(o.x>800&&(r.x=800-o.x),o.y>600&&(r.y=600-o.y),i.x<0&&(r.x=t.x),i.y<0&&(r.y=t.y),r=this.getMousePos(!0,!0),r)for(var e=0;e<this.plan_points.length;e++)this.plan_points[e]=this.selected_polygon[e].add(r);if(this.drag_grid_start_pos){let t=(r.x-this.drag_grid_start_pos.x+this.gridXOffset*this.grid_pitch)%this.grid_pitch_big,e=(r.y-this.drag_grid_start_pos.y+this.gridYOffset*this.grid_pitch)%this.grid_pitch_big;t>0&&(t-=this.grid_pitch_big),e>0&&(e-=this.grid_pitch_big),this.app.stage.removeChild(this.grid),this.grid=rm(this.width,this.height,this.grid_pitch,this.grid_pitch_big,t,e),this.app.stage.addChildAt(this.grid,0)}this.selected_door_poly&&(this.door_poly[0]=this.selected_door_poly[0]+r.x,this.door_poly[1]=this.selected_door_poly[1]+r.y),this.drawShape()}},this.getClosestPoint=(t,e)=>t.reduce(((t,n)=>{const r=Math.sqrt((n.geometry.coordinates[0]-e.geometry.coordinates[0])**2+(n.geometry.coordinates[1]-e.geometry.coordinates[1])**2);return r<t.distance?{point:n,distance:r}:t}),{point:null,distance:1/0}).point,this.onSelect=t=>{if(this.done){var e=this.getMousePos(!0);if(1===this.mode){let t=um([[e.x,0],[e.x,4e3]]),n=um([[0,e.y],[4e3,e.y]]),r=Cm(t,this.polygon).features,i=Cm(n,this.polygon).features;const o=am([e.x,e.y]);let s=r.concat(i),a=Rm(this.polygon).geometry.coordinates;if(s.length){const t=this.getClosestPoint(s,o);this.door_poly=t.geometry.coordinates,r.includes(t)?(this.door_horiz=!0,t.geometry.coordinates[1]<e.y&&a[1]<e.y||t.geometry.coordinates[1]>e.y&&a[1]<e.y?this.door_right=!0:this.door_right=!1):(this.door_horiz=!1,t.geometry.coordinates[0]<e.x&&a[0]<e.x||t.geometry.coordinates[0]>e.x&&a[0]<e.x?this.door_right=!0:this.door_right=!1),this.drawShape()}return}if(1===this.mode)return;var n=this.closePoint(e),r=this.closeLine(e);return null!==n?(this.selected_point=n,this.selected_line=null,void this.drawShape()):null!==r?(this.selected_line=r,this.selected_point=null,this.selected_line_abs=[this.selected_line[0].sub(e),this.selected_line[1].sub(e)],void this.drawShape()):(this.selected_line=null,this.selected_point=null,void this.drawShape())}},this.polyArea=()=>{let t=this.plan_points,e=t.map((t=>(t.x/this.scale).toFixed(1))),n=t.map((t=>(t.y/this.scale).toFixed(1))),r=0;for(let i=0;i<e.length-1;i++)r+=e[i]*n[i+1]-e[i+1]*n[i];return r+=e[e.length-1]*n[0]-e[0]*n[e.length-1],.5*Math.abs(r)},this.polyCentroid=()=>{let t=this.plan_points,e=t.map((t=>t.x)),n=t.map((t=>t.y)),r=0,i=0;for(let o=0;o<e.length;o++)r+=e[o],i+=n[o];return r/=e.length,i/=e.length,[r,i]},this.updatePolygon=()=>{let t=this.plan_points.map((t=>[t.x,t.y]));t=[...t,t[0]],this.polygon=lm([t])},this.onMouseUp=t=>{if(this.isMouseDown=!1,this.app.stage.removeListener("mousemove",this.onDragPoint,!1),this.app.stage.removeListener("mousemove",this.onDragLine,!1),this.app.stage.removeListener("mousemove",this.onDragPolygon,!1),this.drag_grid_start_pos){var e=this.getMousePos(!0,!0);this.gridXOffset=(e.x-this.drag_grid_start_pos.x+this.gridXOffset*this.grid_pitch)/this.grid_pitch,this.gridYOffset=(e.y-this.drag_grid_start_pos.y+this.gridYOffset*this.grid_pitch)/this.grid_pitch,this.drag_grid_start_pos=null}this.done&&this.app.stage.on("mousemove",this.onSelect,!1),this.selected_line=null,this.selected_point=null,this.selected_polygon=null,this.drag_grid_start_pos=null,this.drawShape()},this.assignRef=t=>{this.container=t},this.onMouseDown=t=>{if(0===this.mode&&(this.isMouseDown=!0),3!==t.which){if(this.last_point)var e=this.last_point.clone();else e=this.getMousePos(!0,!0);if(this.app.stage.removeListener("mousemove",this.onMoveDraw,!1),this.app.stage.removeListener("mousemove",this.onSelect,!1),this.last_point=null,this.done){if(this.door_poly&&1===this.mode)return this.mode=0,this.setState({doorMode:0}),void this.drawShape();if(0===this.mode){var n=this.closePoint(e),r=this.closeLine(e);return null!==n?(this.selected_point=n,this.selected_line=null,this.app.stage.addListener("mousemove",this.onDragPoint,!1),this.door_poly=[],void this.drawShape()):null!==r?(this.selected_line=r,this.selected_line_abs=[this.selected_line[0].sub(e),this.selected_line[1].sub(e)],this.selected_point=null,this.door_poly=[],this.app.stage.addListener("mousemove",this.onDragLine,!1),void this.drawShape()):(this.isInsidePolygon(e)||(this.drag_grid_start_pos=e.clone()),this.selected_polygon=[],this.plan_points.map((t=>{this.selected_polygon.push(t.sub(e))})),this.door_poly&&(this.selected_door_poly=[this.door_poly[0]-e.x,this.door_poly[1]-e.y]),this.app.stage.addListener("mousemove",this.onDragPolygon,!1),void this.drawShape())}}else if(this.plan_points.length>0){let t=im("0.0");this.textContainer.addChildAt(t,this.textContainer.length-1)}if(this.plan_points.length>=3&&this.isCollide(this.plan_points[0],e))return e=this.plan_points[0],this.done=!0,this.areaText.visible=!0,this.textContainer.removeChildAt(0),void this.drawShape();this.plan_points.push(e),this.drawShape(),this.app.stage.addListener("mousemove",this.onMoveDraw,!1),this.app.stage.addListener("mouseup",this.onMouseUp,!1)}},this.setDoorMode=()=>{this.done&&(this.mode=1,this.door_poly=null,this.done=!0,this.setState({doorMode:1}))},this.getPlanData=()=>{let t={},e=this.plan_points;return t.mask=e.map((t=>t.toArray())),t.door_pos=this.door_poly,t.area=this.area,t},this.canvasRef=i.createRef(),this.spinner=i.createRef(),this.zoom=1}componentDidMount(){if(this.first)return;this.first=!0,this.done=!1,this.last_point=null,this.align=!0,this.align_grid=!0,this.horver=!0,this.x_aligns=[],this.y_aligns=[],this.area=0,this.scale=80,this.grid_pitch_big=70,this.grid_pitch=1,this.align_factor=5,this.mode=0,this.door_poly=null,this.selected_door_poly=null,this.point_counter=0,this.isMouseDown=!1,this.drag_grid_start_pos=null,this.gridXOffset=0,this.gridYOffset=0;const t=1920,e=1080;this.width=t,this.height=e,this.app=new $d({width:t,height:e,backgroundColor:16777215,antialias:!0}),this.renderer=nu(1e3),this.manager=new Au(this.app.stage,this.app.renderer.view),this.camera=this.app.stage,this.container=new zs,this.textContainer=new zs,this.doorContainer=new zs,this.areaText=new Vh("Area: 0",{}),this.areaText.visible=!1,this.areaText.anchor.set(.5),this.ch=Nh.from("https://cdn-icons-png.flaticon.com/512/165/165044.png"),this.ch.anchor.set(.5),this.ch.setTransform(this.app.renderer.width/2,this.app.renderer.height/2,.06,.06,90);const n=this.ch;this.app;this.app.renderer.plugins.interaction.defaultCursorStyle="inherit",this.app.stage.hitArea=this.app.screen,this.app.stage.interactive=!0,this.app.stage.on("mousemove",(function(r){let i=r.data.global.x,o=r.data.global.y;n.x=i+n.width/4,n.y=o+2*n.height/3,i<t&&o<e&&o>0&&i>0?(document.getElementById("root").style.cursor="none",n.visible||(n.visible=!0)):(document.getElementById("root").style.cursor="default",n.visible&&(n.visible=!1))})),this.app.start(),this.app.view.style.cursor="none",this.canvasRef.current.appendChild(this.app.view),this.plan_points=[],this.texts=[],this.current_text=im("0.0"),this.lines=new Ah,this.doorLines=new Ah,this.text=new Ah,this.grid=rm(t,e,this.grid_pitch,this.grid_pitch_big),this.app.stage.addChild(this.grid),this.app.stage.addChild(this.container),this.app.stage.addChild(this.textContainer),this.app.stage.addChild(this.doorContainer),this.container.addChild(this.lines),this.textContainer.addChild(this.current_text),this.app.stage.addChild(this.ch),this.container.addChild(this.areaText),this.doorContainer.addChild(this.doorLines),this.app.stage.addListener("mousedown",this.onMouseDown,!1),this.app.stage.addListener("rightdown",this.onRightClick,!1),window.addEventListener("contextmenu",(t=>t.preventDefault()));this.app.stage;this.app.view.addEventListener("wheel",(t=>{t.preventDefault();const e=t.deltaY<0?1:-1;let n=this.grid_pitch,r=n+1*e;r=Math.max(2,Math.min(r,10)),this.grid_pitch=r,this.grid_pitch_big=2*r,this.align_factor=Math.floor(r/2)+1,this.scale=this.grid_pitch_big;let i=this.getMousePos(!0),o=(i.x-this.gridXOffset*this.grid_pitch)/n,s=(i.y-this.gridYOffset*this.grid_pitch)/n,a=s*r;o=o*r-this.gridXOffset,s=a-this.gridYOffset,o=Math.floor(o/this.grid_pitch_big%1*10)/10*this.grid_pitch_big,s=Math.floor(s/this.grid_pitch_big%1*10)/10*this.grid_pitch_big,o-=this.grid_pitch_big,s-=this.grid_pitch_big,this.app.stage.removeChild(this.grid),this.grid=rm(this.width,this.height,this.grid_pitch,this.grid_pitch_big,0,0),this.app.stage.addChildAt(this.grid,0),this.plan_points.forEach((t=>{t.x=t.x/n*r,t.y=t.y/n*r})),this.door_poly&&(this.door_poly[0]=this.door_poly[0]/n*r,this.door_poly[1]=this.door_poly[1]/n*r);let l=this.last_point,u=this.plan_points[this.plan_points.length-1];!this.done&&this.plan_points.length>0&&this.horver&&(this.isHorizontal(u,l)?l.y=u.y:l.x=u.x,this.last_point=l),this.drawShape()}))}isInsidePolygon(t){for(var e=t.x,n=t.y,r=!1,i=0,o=this.plan_points.length-1;i<this.plan_points.length;o=i++){var s=this.plan_points[i].x,a=this.plan_points[i].y,l=this.plan_points[o].x,u=this.plan_points[o].y;a>n!==u>n&&e<(l-s)*(n-a)/(u-a)+s&&(r=!r)}return r}render(){return(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)(_r,{}),(0,_n.jsxs)("div",{className:"pixiDiv",children:[(0,_n.jsxs)("div",{className:"toolbar element",children:[(0,_n.jsx)("div",{className:"toolbar-up",children:(0,_n.jsxs)("div",{class:"round-button div-buttons",children:[this.state.doorMode?(0,_n.jsx)("div",{className:"green-overlay"}):"",(0,_n.jsx)("img",{onClick:this.setDoorMode,id:"door-image",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/Circle-icons-door.svg/1024px-Circle-icons-door.svg.png",alt:"Round "})]})}),(0,_n.jsx)("div",{className:"toolbar-down",children:(0,_n.jsx)(Mv,{getPlanData:this.getPlanData})})]}),(0,_n.jsx)("div",{ref:this.canvasRef,className:"canvas-container"})]})]})}}const Av=Rv,Pv="164",Iv={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Cv={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ov=0,Nv=1,Lv=2,Dv=3,Uv=0,Fv=1,kv=2,Bv=3,Gv=0,jv=1,zv=2,Hv=0,Vv=1,Xv=2,Wv=3,Yv=4,qv=5,$v=100,Kv=101,Zv=102,Jv=103,Qv=104,t_=200,e_=201,n_=202,r_=203,i_=204,o_=205,s_=206,a_=207,l_=208,u_=209,c_=210,h_=211,p_=212,f_=213,d_=214,m_=0,g_=1,y_=2,v_=3,__=4,b_=5,x_=6,E_=7,S_=0,w_=1,T_=2,M_=0,R_=1,A_=2,P_=3,I_=4,C_=5,O_=6,N_=7,L_="attached",D_="detached",U_=300,F_=301,k_=302,B_=303,G_=304,j_=306,z_=1e3,H_=1001,V_=1002,X_=1003,W_=1004,Y_=1004,q_=1005,$_=1005,K_=1006,Z_=1007,J_=1007,Q_=1008,tb=1008,eb=1009,nb=1010,rb=1011,ib=1012,ob=1013,sb=1014,ab=1015,lb=1016,ub=1017,cb=1018,hb=1020,pb=35902,fb=1021,db=1022,mb=1023,gb=1024,yb=1025,vb=1026,_b=1027,bb=1028,xb=1029,Eb=1030,Sb=1031,wb=1033,Tb=33776,Mb=33777,Rb=33778,Ab=33779,Pb=35840,Ib=35841,Cb=35842,Ob=35843,Nb=36196,Lb=37492,Db=37496,Ub=37808,Fb=37809,kb=37810,Bb=37811,Gb=37812,jb=37813,zb=37814,Hb=37815,Vb=37816,Xb=37817,Wb=37818,Yb=37819,qb=37820,$b=37821,Kb=36492,Zb=36494,Jb=36495,Qb=36283,tx=36284,ex=36285,nx=36286,rx=2200,ix=2201,ox=2202,sx=2300,ax=2301,lx=2302,ux=2400,cx=2401,hx=2402,px=2500,fx=2501,dx=0,mx=1,gx=2,yx=3200,vx=3201,_x=0,bx=1,xx="",Ex="srgb",Sx="srgb-linear",wx="display-p3",Tx="display-p3-linear",Mx="linear",Rx="srgb",Ax="rec709",Px="p3",Ix=0,Cx=7680,Ox=7681,Nx=7682,Lx=7683,Dx=34055,Ux=34056,Fx=5386,kx=512,Bx=513,Gx=514,jx=515,zx=516,Hx=517,Vx=518,Xx=519,Wx=512,Yx=513,qx=514,$x=515,Kx=516,Zx=517,Jx=518,Qx=519,tE=35044,eE=35048,nE=35040,rE=35045,iE=35049,oE=35041,sE=35046,aE=35050,lE=35042,uE="100",cE="300 es",hE=2e3,pE=2001;class fE{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const dE=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mE=1234567;const gE=Math.PI/180,yE=180/Math.PI;function vE(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(dE[255&t]+dE[t>>8&255]+dE[t>>16&255]+dE[t>>24&255]+"-"+dE[255&e]+dE[e>>8&255]+"-"+dE[e>>16&15|64]+dE[e>>24&255]+"-"+dE[63&n|128]+dE[n>>8&255]+"-"+dE[n>>16&255]+dE[n>>24&255]+dE[255&r]+dE[r>>8&255]+dE[r>>16&255]+dE[r>>24&255]).toLowerCase()}function _E(t,e,n){return Math.max(e,Math.min(n,t))}function bE(t,e){return(t%e+e)%e}function xE(t,e,n){return(1-n)*t+n*e}function EE(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function SE(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const wE={DEG2RAD:gE,RAD2DEG:yE,generateUUID:vE,clamp:_E,euclideanModulo:bE,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:xE,damp:function(t,e,n,r){return xE(t,e,1-Math.exp(-n*r))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(bE(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(mE=t);let e=mE+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*gE},radToDeg:function(t){return t*yE},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),u=o((e+r)/2),c=s((e+r)/2),h=o((e-r)/2),p=s((e-r)/2),f=o((r-e)/2),d=s((r-e)/2);switch(i){case"XYX":t.set(a*c,l*h,l*p,a*u);break;case"YZY":t.set(l*p,a*c,l*h,a*u);break;case"ZXZ":t.set(l*h,l*p,a*c,a*u);break;case"XZX":t.set(a*c,l*d,l*f,a*u);break;case"YXY":t.set(l*f,a*c,l*d,a*u);break;case"ZYZ":t.set(l*d,l*f,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:SE,denormalize:EE};class TE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;TE.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(_E(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ME{constructor(t,e,n,r,i,o,s,a,l){ME.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,l)}set(t,e,n,r,i,o,s,a,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=s,u[3]=e,u[4]=i,u[5]=a,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],u=n[4],c=n[7],h=n[2],p=n[5],f=n[8],d=r[0],m=r[3],g=r[6],y=r[1],v=r[4],_=r[7],b=r[2],x=r[5],E=r[8];return i[0]=o*d+s*y+a*b,i[3]=o*m+s*v+a*x,i[6]=o*g+s*_+a*E,i[1]=l*d+u*y+c*b,i[4]=l*m+u*v+c*x,i[7]=l*g+u*_+c*E,i[2]=h*d+p*y+f*b,i[5]=h*m+p*v+f*x,i[8]=h*g+p*_+f*E,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8];return e*o*u-e*s*l-n*i*u+n*s*a+r*i*l-r*o*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=u*o-s*l,h=s*a-u*i,p=l*i-o*a,f=e*c+n*h+r*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const d=1/f;return t[0]=c*d,t[1]=(r*l-u*n)*d,t[2]=(s*n-r*o)*d,t[3]=h*d,t[4]=(u*e-r*a)*d,t[5]=(r*i-s*e)*d,t[6]=p*d,t[7]=(n*a-l*e)*d,t[8]=(o*e-n*i)*d,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+t,-r*l,r*a,-r*(-l*o+a*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(RE.makeScale(t,e)),this}rotate(t){return this.premultiply(RE.makeRotation(-t)),this}translate(t,e){return this.premultiply(RE.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const RE=new ME;function AE(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const PE={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function IE(t,e){return new PE[t](e)}function CE(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function OE(){const t=CE("canvas");return t.style.display="block",t}const NE={};function LE(t){t in NE||(NE[t]=!0,console.warn(t))}const DE=(new ME).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),UE=(new ME).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),FE={[Sx]:{transfer:Mx,primaries:Ax,toReference:t=>t,fromReference:t=>t},[Ex]:{transfer:Rx,primaries:Ax,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Tx]:{transfer:Mx,primaries:Px,toReference:t=>t.applyMatrix3(UE),fromReference:t=>t.applyMatrix3(DE)},[wx]:{transfer:Rx,primaries:Px,toReference:t=>t.convertSRGBToLinear().applyMatrix3(UE),fromReference:t=>t.applyMatrix3(DE).convertLinearToSRGB()}},kE=new Set([Sx,Tx]),BE={enabled:!0,_workingColorSpace:Sx,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!kE.has(t))throw new Error('Unsupported working color space, "'.concat(t,'".'));this._workingColorSpace=t},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=FE[e].toReference;return(0,FE[n].fromReference)(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return FE[t].primaries},getTransfer:function(t){return t===xx?Mx:FE[t].transfer}};function GE(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function jE(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let zE;class HE{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===zE&&(zE=CE("canvas")),zE.width=t.width,zE.height=t.height;const n=zE.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=zE}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=CE("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*GE(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*GE(e[t]/255)):e[t]=GE(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let VE=0;class XE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:VE++}),this.uuid=vE(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(WE(r[e].image)):t.push(WE(r[e]))}else t=WE(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function WE(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?HE.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let YE=0;class qE extends fE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qE.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qE.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H_,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H_,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K_,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Q_,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mb,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:eb,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:qE.DEFAULT_ANISOTROPY,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:xx;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:YE++}),this.uuid=vE(),this.name="",this.source=new XE(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new TE(0,0),this.repeat=new TE(1,1),this.center=new TE(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ME,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t){void 0===t&&(t=null),this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==U_)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case z_:t.x=t.x-Math.floor(t.x);break;case H_:t.x=t.x<0?0:1;break;case V_:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case z_:t.y=t.y-Math.floor(t.y);break;case H_:t.y=t.y<0?0:1;break;case V_:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}qE.DEFAULT_IMAGE=null,qE.DEFAULT_MAPPING=U_,qE.DEFAULT_ANISOTROPY=1;class $E{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;$E.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,s=.1,a=t.elements,l=a[0],u=a[4],c=a[8],h=a[1],p=a[5],f=a[9],d=a[2],m=a[6],g=a[10];if(Math.abs(u-h)<o&&Math.abs(c-d)<o&&Math.abs(f-m)<o){if(Math.abs(u+h)<s&&Math.abs(c+d)<s&&Math.abs(f+m)<s&&Math.abs(l+p+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(p+1)/2,y=(g+1)/2,v=(u+h)/4,_=(c+d)/4,b=(f+m)/4;return t>a&&t>y?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=v/n,i=_/n):a>y?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=v/r,i=b/r):y<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=_/i,r=b/i),this.set(n,r,i,e),this}let y=Math.sqrt((m-f)*(m-f)+(c-d)*(c-d)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(m-f)/y,this.y=(c-d)/y,this.z=(h-u)/y,this.w=Math.acos((l+p+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class KE extends fE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new $E(0,0,t,e),this.scissorTest=!1,this.viewport=new $E(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:K_,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new qE(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let s=0;s<o;s++)this.textures[s]=i.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new XE(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ZE extends KE{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class JE extends qE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=X_,this.minFilter=X_,this.wrapR=H_,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class QE extends ZE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new JE(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class tS extends qE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=X_,this.minFilter=X_,this.wrapR=H_,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eS extends ZE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new tS(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class nS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,s){let a=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[o+0],p=i[o+1],f=i[o+2],d=i[o+3];if(0===s)return t[e+0]=a,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===s)return t[e+0]=h,t[e+1]=p,t[e+2]=f,void(t[e+3]=d);if(c!==d||a!==h||l!==p||u!==f){let t=1-s;const e=a*h+l*p+u*f+c*d,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*t+h*i,l=l*t+p*i,u=u*t+f*i,c=c*t+d*i,t===1-s){const t=1/Math.sqrt(a*a+l*l+u*u+c*c);a*=t,l*=t,u*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],u=n[r+3],c=i[o],h=i[o+1],p=i[o+2],f=i[o+3];return t[e]=s*f+u*c+a*p-l*h,t[e+1]=a*f+u*h+l*c-s*p,t[e+2]=l*f+u*p+s*h-a*c,t[e+3]=u*f-s*c-a*h-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t._x,r=t._y,i=t._z,o=t._order,s=Math.cos,a=Math.sin,l=s(n/2),u=s(r/2),c=s(i/2),h=a(n/2),p=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=h*u*c+l*p*f,this._y=l*p*c-h*u*f,this._z=l*u*f+h*p*c,this._w=l*u*c-h*p*f;break;case"YXZ":this._x=h*u*c+l*p*f,this._y=l*p*c-h*u*f,this._z=l*u*f-h*p*c,this._w=l*u*c+h*p*f;break;case"ZXY":this._x=h*u*c-l*p*f,this._y=l*p*c+h*u*f,this._z=l*u*f+h*p*c,this._w=l*u*c-h*p*f;break;case"ZYX":this._x=h*u*c-l*p*f,this._y=l*p*c+h*u*f,this._z=l*u*f-h*p*c,this._w=l*u*c+h*p*f;break;case"YZX":this._x=h*u*c+l*p*f,this._y=l*p*c+h*u*f,this._z=l*u*f-h*p*c,this._w=l*u*c-h*p*f;break;case"XZY":this._x=h*u*c-l*p*f,this._y=l*p*c-h*u*f,this._z=l*u*f+h*p*c,this._w=l*u*c+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],s=e[5],a=e[9],l=e[2],u=e[6],c=e[10],h=n+s+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-a)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>s&&n>c){const t=2*Math.sqrt(1+n-s-c);this._w=(u-a)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(s>c){const t=2*Math.sqrt(1+s-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(a+u)/t}else{const t=2*Math.sqrt(1+c-n-s);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(a+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(_E(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,l=e._z,u=e._w;return this._x=n*u+o*s+r*l-i*a,this._y=r*u+o*a+i*s-n*l,this._z=i*u+o*l+n*a-r*s,this._w=o*u-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this}const l=Math.sqrt(a),u=Math.atan2(l,s),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),i*Math.sin(e),i*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class rS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;rS.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(oS.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(oS.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,l=2*(o*r-s*n),u=2*(s*e-i*r),c=2*(i*n-o*e);return this.x=e+a*l+o*c-s*u,this.y=n+a*u+s*l-i*c,this.z=r+a*c+i*u-o*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return iS.copy(this).projectOnVector(t),this.sub(iS)}reflect(t){return this.sub(iS.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(_E(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iS=new rS,oS=new nS;class sS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(lS.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(lS.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=lS.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,n=r.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,lS):lS.fromBufferAttribute(r,e),lS.applyMatrix4(t.matrixWorld),this.expandByPoint(lS);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),uS.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),uS.copy(n.boundingBox)),uS.applyMatrix4(t.matrixWorld),this.union(uS)}const r=t.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,lS),lS.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(gS),yS.subVectors(this.max,gS),cS.subVectors(t.a,gS),hS.subVectors(t.b,gS),pS.subVectors(t.c,gS),fS.subVectors(hS,cS),dS.subVectors(pS,hS),mS.subVectors(cS,pS);let e=[0,-fS.z,fS.y,0,-dS.z,dS.y,0,-mS.z,mS.y,fS.z,0,-fS.x,dS.z,0,-dS.x,mS.z,0,-mS.x,-fS.y,fS.x,0,-dS.y,dS.x,0,-mS.y,mS.x,0];return!!bS(e,cS,hS,pS,yS)&&(e=[1,0,0,0,1,0,0,0,1],!!bS(e,cS,hS,pS,yS)&&(vS.crossVectors(fS,dS),e=[vS.x,vS.y,vS.z],bS(e,cS,hS,pS,yS)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,lS).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(lS).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(aS[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),aS[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),aS[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),aS[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),aS[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),aS[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),aS[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),aS[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(aS)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const aS=[new rS,new rS,new rS,new rS,new rS,new rS,new rS,new rS],lS=new rS,uS=new sS,cS=new rS,hS=new rS,pS=new rS,fS=new rS,dS=new rS,mS=new rS,gS=new rS,yS=new rS,vS=new rS,_S=new rS;function bS(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){_S.fromArray(t,o);const s=i.x*Math.abs(_S.x)+i.y*Math.abs(_S.y)+i.z*Math.abs(_S.z),a=e.dot(_S),l=n.dot(_S),u=r.dot(_S);if(Math.max(-Math.max(a,l,u),Math.min(a,l,u))>s)return!1}return!0}const xS=new sS,ES=new rS,SS=new rS;class wS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):xS.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ES.subVectors(t,this.center);const e=ES.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(ES,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(SS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ES.copy(t.center).add(SS)),this.expandByPoint(ES.copy(t.center).sub(SS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const TS=new rS,MS=new rS,RS=new rS,AS=new rS,PS=new rS,IS=new rS,CS=new rS;class OS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,TS)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=TS.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(TS.copy(this.origin).addScaledVector(this.direction,e),TS.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){MS.copy(t).add(e).multiplyScalar(.5),RS.copy(e).sub(t).normalize(),AS.copy(this.origin).sub(MS);const i=.5*t.distanceTo(e),o=-this.direction.dot(RS),s=AS.dot(this.direction),a=-AS.dot(RS),l=AS.lengthSq(),u=Math.abs(1-o*o);let c,h,p,f;if(u>0)if(c=o*a-s,h=o*s-a,f=i*u,c>=0)if(h>=-f)if(h<=f){const t=1/u;c*=t,h*=t,p=c*(c+o*h+2*s)+h*(o*c+h+2*a)+l}else h=i,c=Math.max(0,-(o*h+s)),p=-c*c+h*(h+2*a)+l;else h=-i,c=Math.max(0,-(o*h+s)),p=-c*c+h*(h+2*a)+l;else h<=-f?(c=Math.max(0,-(-o*i+s)),h=c>0?-i:Math.min(Math.max(-i,-a),i),p=-c*c+h*(h+2*a)+l):h<=f?(c=0,h=Math.min(Math.max(-i,-a),i),p=h*(h+2*a)+l):(c=Math.max(0,-(o*i+s)),h=c>0?i:Math.min(Math.max(-i,-a),i),p=-c*c+h*(h+2*a)+l);else h=o>0?-i:i,c=Math.max(0,-(o*h+s)),p=-c*c+h*(h+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(MS).addScaledVector(RS,h),p}intersectSphere(t,e){TS.subVectors(t.center,this.origin);const n=TS.dot(this.direction),r=TS.dot(TS)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,s,a;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),c>=0?(s=(t.min.z-h.z)*c,a=(t.max.z-h.z)*c):(s=(t.max.z-h.z)*c,a=(t.min.z-h.z)*c),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,TS)}intersectTriangle(t,e,n,r,i){PS.subVectors(e,t),IS.subVectors(n,t),CS.crossVectors(PS,IS);let o,s=this.direction.dot(CS);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}AS.subVectors(this.origin,t);const a=o*this.direction.dot(IS.crossVectors(AS,IS));if(a<0)return null;const l=o*this.direction.dot(PS.cross(AS));if(l<0)return null;if(a+l>s)return null;const u=-o*AS.dot(CS);return u<0?null:this.at(u/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class NS{constructor(t,e,n,r,i,o,s,a,l,u,c,h,p,f,d,m){NS.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,l,u,c,h,p,f,d,m)}set(t,e,n,r,i,o,s,a,l,u,c,h,p,f,d,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=p,g[7]=f,g[11]=d,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new NS).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/LS.setFromMatrixColumn(t,0).length(),i=1/LS.setFromMatrixColumn(t,1).length(),o=1/LS.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=s*u,i=s*c;e[0]=a*u,e[4]=-a*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-s*a,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*a}else if("YXZ"===t.order){const t=a*u,n=a*c,r=l*u,i=l*c;e[0]=t+i*s,e[4]=r*s-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=o*a}else if("ZXY"===t.order){const t=a*u,n=a*c,r=l*u,i=l*c;e[0]=t-i*s,e[4]=-o*c,e[8]=r+n*s,e[1]=n+r*s,e[5]=o*u,e[9]=i-t*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){const t=o*u,n=o*c,r=s*u,i=s*c;e[0]=a*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=a*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-s*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=s*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(US,t,FS)}lookAt(t,e,n){const r=this.elements;return GS.subVectors(t,e),0===GS.lengthSq()&&(GS.z=1),GS.normalize(),kS.crossVectors(n,GS),0===kS.lengthSq()&&(1===Math.abs(n.z)?GS.x+=1e-4:GS.z+=1e-4,GS.normalize(),kS.crossVectors(n,GS)),kS.normalize(),BS.crossVectors(GS,kS),r[0]=kS.x,r[4]=BS.x,r[8]=GS.x,r[1]=kS.y,r[5]=BS.y,r[9]=GS.y,r[2]=kS.z,r[6]=BS.z,r[10]=GS.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],u=n[1],c=n[5],h=n[9],p=n[13],f=n[2],d=n[6],m=n[10],g=n[14],y=n[3],v=n[7],_=n[11],b=n[15],x=r[0],E=r[4],S=r[8],w=r[12],T=r[1],M=r[5],R=r[9],A=r[13],P=r[2],I=r[6],C=r[10],O=r[14],N=r[3],L=r[7],D=r[11],U=r[15];return i[0]=o*x+s*T+a*P+l*N,i[4]=o*E+s*M+a*I+l*L,i[8]=o*S+s*R+a*C+l*D,i[12]=o*w+s*A+a*O+l*U,i[1]=u*x+c*T+h*P+p*N,i[5]=u*E+c*M+h*I+p*L,i[9]=u*S+c*R+h*C+p*D,i[13]=u*w+c*A+h*O+p*U,i[2]=f*x+d*T+m*P+g*N,i[6]=f*E+d*M+m*I+g*L,i[10]=f*S+d*R+m*C+g*D,i[14]=f*w+d*A+m*O+g*U,i[3]=y*x+v*T+_*P+b*N,i[7]=y*E+v*M+_*I+b*L,i[11]=y*S+v*R+_*C+b*D,i[15]=y*w+v*A+_*O+b*U,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],l=t[13],u=t[2],c=t[6],h=t[10],p=t[14];return t[3]*(+i*a*c-r*l*c-i*s*h+n*l*h+r*s*p-n*a*p)+t[7]*(+e*a*p-e*l*h+i*o*h-r*o*p+r*l*u-i*a*u)+t[11]*(+e*l*c-e*s*p-i*o*c+n*o*p+i*s*u-n*l*u)+t[15]*(-r*s*u-e*a*c+e*s*h+r*o*c-n*o*h+n*a*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11],f=t[12],d=t[13],m=t[14],g=t[15],y=c*m*l-d*h*l+d*a*p-s*m*p-c*a*g+s*h*g,v=f*h*l-u*m*l-f*a*p+o*m*p+u*a*g-o*h*g,_=u*d*l-f*c*l+f*s*p-o*d*p-u*s*g+o*c*g,b=f*c*a-u*d*a-f*s*h+o*d*h+u*s*m-o*c*m,x=e*y+n*v+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/x;return t[0]=y*E,t[1]=(d*h*i-c*m*i-d*r*p+n*m*p+c*r*g-n*h*g)*E,t[2]=(s*m*i-d*a*i+d*r*l-n*m*l-s*r*g+n*a*g)*E,t[3]=(c*a*i-s*h*i-c*r*l+n*h*l+s*r*p-n*a*p)*E,t[4]=v*E,t[5]=(u*m*i-f*h*i+f*r*p-e*m*p-u*r*g+e*h*g)*E,t[6]=(f*a*i-o*m*i-f*r*l+e*m*l+o*r*g-e*a*g)*E,t[7]=(o*h*i-u*a*i+u*r*l-e*h*l-o*r*p+e*a*p)*E,t[8]=_*E,t[9]=(f*c*i-u*d*i-f*n*p+e*d*p+u*n*g-e*c*g)*E,t[10]=(o*d*i-f*s*i+f*n*l-e*d*l-o*n*g+e*s*g)*E,t[11]=(u*s*i-o*c*i-u*n*l+e*c*l+o*n*p-e*s*p)*E,t[12]=b*E,t[13]=(u*d*r-f*c*r+f*n*h-e*d*h-u*n*m+e*c*m)*E,t[14]=(f*s*r-o*d*r-f*n*a+e*d*a+o*n*m-e*s*m)*E,t[15]=(o*c*r-u*s*r+u*n*a-e*c*a-o*n*h+e*s*h)*E,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,l=i*o,u=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,u*s+n,u*a-r*o,0,l*a-r*s,u*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,l=i+i,u=o+o,c=s+s,h=i*l,p=i*u,f=i*c,d=o*u,m=o*c,g=s*c,y=a*l,v=a*u,_=a*c,b=n.x,x=n.y,E=n.z;return r[0]=(1-(d+g))*b,r[1]=(p+_)*b,r[2]=(f-v)*b,r[3]=0,r[4]=(p-_)*x,r[5]=(1-(h+g))*x,r[6]=(m+y)*x,r[7]=0,r[8]=(f+v)*E,r[9]=(m-y)*E,r[10]=(1-(h+d))*E,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=LS.set(r[0],r[1],r[2]).length();const o=LS.set(r[4],r[5],r[6]).length(),s=LS.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],DS.copy(this);const a=1/i,l=1/o,u=1/s;return DS.elements[0]*=a,DS.elements[1]*=a,DS.elements[2]*=a,DS.elements[4]*=l,DS.elements[5]*=l,DS.elements[6]*=l,DS.elements[8]*=u,DS.elements[9]*=u,DS.elements[10]*=u,e.setFromRotationMatrix(DS),n.x=i,n.y=o,n.z=s,this}makePerspective(t,e,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hE;const a=this.elements,l=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),h=(n+r)/(n-r);let p,f;if(s===hE)p=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(s!==pE)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);p=-o/(o-i),f=-o*i/(o-i)}return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hE;const a=this.elements,l=1/(e-t),u=1/(n-r),c=1/(o-i),h=(e+t)*l,p=(n+r)*u;let f,d;if(s===hE)f=(o+i)*c,d=-2*c;else{if(s!==pE)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=i*c,d=-1*c}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=d,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const LS=new rS,DS=new NS,US=new rS(0,0,0),FS=new rS(1,1,1),kS=new rS,BS=new rS,GS=new rS,jS=new NS,zS=new nS;class HS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:HS.DEFAULT_ORDER;this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=t.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],u=r[9],c=r[2],h=r[6],p=r[10];switch(e){case"XYZ":this._y=Math.asin(_E(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_E(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(_E(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-_E(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(_E(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-_E(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return jS.makeRotationFromQuaternion(t),this.setFromRotationMatrix(jS,e,n)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return zS.setFromEuler(this),this.setFromQuaternion(zS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}HS.DEFAULT_ORDER="XYZ";class VS{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let XS=0;const WS=new rS,YS=new nS,qS=new NS,$S=new rS,KS=new rS,ZS=new rS,JS=new nS,QS=new rS(1,0,0),tw=new rS(0,1,0),ew=new rS(0,0,1),nw={type:"added"},rw={type:"removed"},iw={type:"childadded",child:null},ow={type:"childremoved",child:null};class sw extends fE{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:XS++}),this.uuid=vE(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=sw.DEFAULT_UP.clone();const t=new rS,e=new HS,n=new nS,r=new rS(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new NS},normalMatrix:{value:new ME}}),this.matrix=new NS,this.matrixWorld=new NS,this.matrixAutoUpdate=sw.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=sw.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new VS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return YS.setFromAxisAngle(t,e),this.quaternion.multiply(YS),this}rotateOnWorldAxis(t,e){return YS.setFromAxisAngle(t,e),this.quaternion.premultiply(YS),this}rotateX(t){return this.rotateOnAxis(QS,t)}rotateY(t){return this.rotateOnAxis(tw,t)}rotateZ(t){return this.rotateOnAxis(ew,t)}translateOnAxis(t,e){return WS.copy(t).applyQuaternion(this.quaternion),this.position.add(WS.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(QS,t)}translateY(t){return this.translateOnAxis(tw,t)}translateZ(t){return this.translateOnAxis(ew,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(qS.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?$S.copy(t):$S.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),KS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qS.lookAt(KS,$S,this.up):qS.lookAt($S,KS,this.up),this.quaternion.setFromRotationMatrix(qS),r&&(qS.extractRotation(r.matrixWorld),YS.setFromRotationMatrix(qS),this.quaternion.premultiply(YS.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(nw),iw.child=t,this.dispatchEvent(iw),iw.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(rw),ow.child=t,this.dispatchEvent(ow),ow.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),qS.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),qS.multiply(t.parent.matrixWorld)),t.applyMatrix4(qS),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(nw),iw.child=t,this.dispatchEvent(iw),iw.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[t]===e&&n.push(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(KS,t,ZS),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(KS,JS,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),s=o(t.images),a=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}sw.DEFAULT_UP=new rS(0,1,0),sw.DEFAULT_MATRIX_AUTO_UPDATE=!0,sw.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const aw=new rS,lw=new rS,uw=new rS,cw=new rS,hw=new rS,pw=new rS,fw=new rS,dw=new rS,mw=new rS,gw=new rS;class yw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rS;this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),aw.subVectors(t,e),r.cross(aw);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){aw.subVectors(r,e),lw.subVectors(n,e),uw.subVectors(t,e);const o=aw.dot(aw),s=aw.dot(lw),a=aw.dot(uw),l=lw.dot(lw),u=lw.dot(uw),c=o*l-s*s;if(0===c)return i.set(0,0,0),null;const h=1/c,p=(l*a-s*u)*h,f=(o*u-s*a)*h;return i.set(1-p-f,f,p)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,cw)&&(cw.x>=0&&cw.y>=0&&cw.x+cw.y<=1)}static getInterpolation(t,e,n,r,i,o,s,a){return null===this.getBarycoord(t,e,n,r,cw)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(i,cw.x),a.addScaledVector(o,cw.y),a.addScaledVector(s,cw.z),a)}static isFrontFacing(t,e,n,r){return aw.subVectors(n,e),lw.subVectors(t,e),aw.cross(lw).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return aw.subVectors(this.c,this.b),lw.subVectors(this.a,this.b),.5*aw.cross(lw).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return yw.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return yw.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,i){return yw.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return yw.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return yw.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,s;hw.subVectors(r,n),pw.subVectors(i,n),dw.subVectors(t,n);const a=hw.dot(dw),l=pw.dot(dw);if(a<=0&&l<=0)return e.copy(n);mw.subVectors(t,r);const u=hw.dot(mw),c=pw.dot(mw);if(u>=0&&c<=u)return e.copy(r);const h=a*c-u*l;if(h<=0&&a>=0&&u<=0)return o=a/(a-u),e.copy(n).addScaledVector(hw,o);gw.subVectors(t,i);const p=hw.dot(gw),f=pw.dot(gw);if(f>=0&&p<=f)return e.copy(i);const d=p*l-a*f;if(d<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(n).addScaledVector(pw,s);const m=u*f-p*c;if(m<=0&&c-u>=0&&p-f>=0)return fw.subVectors(i,r),s=(c-u)/(c-u+(p-f)),e.copy(r).addScaledVector(fw,s);const g=1/(m+d+h);return o=d*g,s=h*g,e.copy(n).addScaledVector(hw,o).addScaledVector(pw,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const vw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_w={h:0,s:0,l:0},bw={h:0,s:0,l:0};function xw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Ew{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ex;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,BE.toWorkingColorSpace(this,e),this}setRGB(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:BE.workingColorSpace;return this.r=t,this.g=e,this.b=n,BE.toWorkingColorSpace(this,r),this}setHSL(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:BE.workingColorSpace;if(t=bE(t,1),e=_E(e,0,1),n=_E(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=xw(i,r,t+1/3),this.g=xw(i,r,t),this.b=xw(i,r,t-1/3)}return BE.toWorkingColorSpace(this,r),this}setStyle(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ex;function r(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(e=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=e[1],s=e[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=e[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ex;const n=vw[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=GE(t.r),this.g=GE(t.g),this.b=GE(t.b),this}copyLinearToSRGB(t){return this.r=jE(t.r),this.g=jE(t.g),this.b=jE(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ex;return BE.fromWorkingColorSpace(Sw.copy(this),t),65536*Math.round(_E(255*Sw.r,0,255))+256*Math.round(_E(255*Sw.g,0,255))+Math.round(_E(255*Sw.b,0,255))}getHexString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ex;return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BE.workingColorSpace;BE.fromWorkingColorSpace(Sw.copy(this),e);const n=Sw.r,r=Sw.g,i=Sw.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const u=(s+o)/2;if(s===o)a=0,l=0;else{const t=o-s;switch(l=u<=.5?t/(o+s):t/(2-o-s),o){case n:a=(r-i)/t+(r<i?6:0);break;case r:a=(i-n)/t+2;break;case i:a=(n-r)/t+4}a/=6}return t.h=a,t.s=l,t.l=u,t}getRGB(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BE.workingColorSpace;return BE.fromWorkingColorSpace(Sw.copy(this),e),t.r=Sw.r,t.g=Sw.g,t.b=Sw.b,t}getStyle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ex;BE.fromWorkingColorSpace(Sw.copy(this),t);const e=Sw.r,n=Sw.g,r=Sw.b;return t!==Ex?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(t,e,n){return this.getHSL(_w),this.setHSL(_w.h+t,_w.s+e,_w.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(_w),t.getHSL(bw);const n=xE(_w.h,bw.h,e),r=xE(_w.s,bw.s,e),i=xE(_w.l,bw.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Sw=new Ew;Ew.NAMES=vw;let ww=0;class Tw extends fE{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ww++}),this.uuid=vE(),this.name="",this.type="Material",this.blending=Vv,this.side=Gv,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=i_,this.blendDst=o_,this.blendEquation=$v,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ew(0,0,0),this.blendAlpha=0,this.depthFunc=v_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Xx,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cx,this.stencilZFail=Cx,this.stencilZPass=Cx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Vv&&(n.blending=this.blending),this.side!==Gv&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==i_&&(n.blendSrc=this.blendSrc),this.blendDst!==o_&&(n.blendDst=this.blendDst),this.blendEquation!==$v&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==v_&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Xx&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cx&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Cx&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Cx&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Mw extends Tw{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ew(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new HS,this.combine=S_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Rw=Aw();function Aw(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const t=l-127;t<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):t<-14?(r[l]=1024>>-t-14,r[256|l]=1024>>-t-14|32768,i[l]=-t-1,i[256|l]=-t-1):t<=15?(r[l]=t+15<<10,r[256|l]=t+15<<10|32768,i[l]=13,i[256|l]=13):t<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let t=l<<13,e=0;for(;0===(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,o[l]=t|e}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function Pw(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=_E(t,-65504,65504),Rw.floatView[0]=t;const e=Rw.uint32View[0],n=e>>23&511;return Rw.baseTable[n]+((8388607&e)>>Rw.shiftTable[n])}function Iw(t){const e=t>>10;return Rw.uint32View[0]=Rw.mantissaTable[Rw.offsetTable[e]+(1023&t)]+Rw.exponentTable[e],Rw.floatView[0]}const Cw={toHalfFloat:Pw,fromHalfFloat:Iw},Ow=new rS,Nw=new TE;class Lw{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=tE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ab,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return LE("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Nw.fromBufferAttribute(this,e),Nw.applyMatrix3(t),this.setXY(e,Nw.x,Nw.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Ow.fromBufferAttribute(this,e),Ow.applyMatrix3(t),this.setXYZ(e,Ow.x,Ow.y,Ow.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ow.fromBufferAttribute(this,e),Ow.applyMatrix4(t),this.setXYZ(e,Ow.x,Ow.y,Ow.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ow.fromBufferAttribute(this,e),Ow.applyNormalMatrix(t),this.setXYZ(e,Ow.x,Ow.y,Ow.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ow.fromBufferAttribute(this,e),Ow.transformDirection(t),this.setXYZ(e,Ow.x,Ow.y,Ow.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=EE(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=SE(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=EE(e,this.array)),e}setX(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=EE(e,this.array)),e}setY(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=EE(e,this.array)),e}setZ(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=EE(e,this.array)),e}setW(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array),r=SE(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array),r=SE(r,this.array),i=SE(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==tE&&(t.usage=this.usage),t}}class Dw extends Lw{constructor(t,e,n){super(new Int8Array(t),e,n)}}class Uw extends Lw{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class Fw extends Lw{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class kw extends Lw{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Bw extends Lw{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Gw extends Lw{constructor(t,e,n){super(new Int32Array(t),e,n)}}class jw extends Lw{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class zw extends Lw{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Iw(this.array[t*this.itemSize]);return this.normalized&&(e=EE(e,this.array)),e}setX(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize]=Pw(e),this}getY(t){let e=Iw(this.array[t*this.itemSize+1]);return this.normalized&&(e=EE(e,this.array)),e}setY(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize+1]=Pw(e),this}getZ(t){let e=Iw(this.array[t*this.itemSize+2]);return this.normalized&&(e=EE(e,this.array)),e}setZ(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize+2]=Pw(e),this}getW(t){let e=Iw(this.array[t*this.itemSize+3]);return this.normalized&&(e=EE(e,this.array)),e}setW(t,e){return this.normalized&&(e=SE(e,this.array)),this.array[t*this.itemSize+3]=Pw(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array)),this.array[t+0]=Pw(e),this.array[t+1]=Pw(n),this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array),r=SE(r,this.array)),this.array[t+0]=Pw(e),this.array[t+1]=Pw(n),this.array[t+2]=Pw(r),this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array),r=SE(r,this.array),i=SE(i,this.array)),this.array[t+0]=Pw(e),this.array[t+1]=Pw(n),this.array[t+2]=Pw(r),this.array[t+3]=Pw(i),this}}class Hw extends Lw{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Vw=0;const Xw=new NS,Ww=new sw,Yw=new rS,qw=new sS,$w=new sS,Kw=new rS;class Zw extends fE{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vw++}),this.uuid=vE(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(AE(t)?jw:Bw)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new ME).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Xw.makeRotationFromQuaternion(t),this.applyMatrix4(Xw),this}rotateX(t){return Xw.makeRotationX(t),this.applyMatrix4(Xw),this}rotateY(t){return Xw.makeRotationY(t),this.applyMatrix4(Xw),this}rotateZ(t){return Xw.makeRotationZ(t),this.applyMatrix4(Xw),this}translate(t,e,n){return Xw.makeTranslation(t,e,n),this.applyMatrix4(Xw),this}scale(t,e,n){return Xw.makeScale(t,e,n),this.applyMatrix4(Xw),this}lookAt(t){return Ww.lookAt(t),Ww.updateMatrix(),this.applyMatrix4(Ww.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yw).negate(),this.translate(Yw.x,Yw.y,Yw.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Hw(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new sS);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new rS(-1/0,-1/0,-1/0),new rS(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];qw.setFromBufferAttribute(t),this.morphTargetsRelative?(Kw.addVectors(this.boundingBox.min,qw.min),this.boundingBox.expandByPoint(Kw),Kw.addVectors(this.boundingBox.max,qw.max),this.boundingBox.expandByPoint(Kw)):(this.boundingBox.expandByPoint(qw.min),this.boundingBox.expandByPoint(qw.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wS);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new rS,1/0);if(t){const n=this.boundingSphere.center;if(qw.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];$w.setFromBufferAttribute(n),this.morphTargetsRelative?(Kw.addVectors(qw.min,$w.min),qw.expandByPoint(Kw),Kw.addVectors(qw.max,$w.max),qw.expandByPoint(Kw)):(qw.expandByPoint($w.min),qw.expandByPoint($w.max))}qw.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Kw.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Kw));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],s=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Kw.fromBufferAttribute(o,e),s&&(Yw.fromBufferAttribute(t,e),Kw.add(Yw)),r=Math.max(r,n.distanceToSquared(Kw))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,i=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Lw(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let S=0;S<n.count;S++)s[S]=new rS,a[S]=new rS;const l=new rS,u=new rS,c=new rS,h=new TE,p=new TE,f=new TE,d=new rS,m=new rS;function g(t,e,r){l.fromBufferAttribute(n,t),u.fromBufferAttribute(n,e),c.fromBufferAttribute(n,r),h.fromBufferAttribute(i,t),p.fromBufferAttribute(i,e),f.fromBufferAttribute(i,r),u.sub(l),c.sub(l),p.sub(h),f.sub(h);const o=1/(p.x*f.y-f.x*p.y);isFinite(o)&&(d.copy(u).multiplyScalar(f.y).addScaledVector(c,-p.y).multiplyScalar(o),m.copy(c).multiplyScalar(p.x).addScaledVector(u,-f.x).multiplyScalar(o),s[t].add(d),s[e].add(d),s[r].add(d),a[t].add(m),a[e].add(m),a[r].add(m))}let y=this.groups;0===y.length&&(y=[{start:0,count:t.count}]);for(let S=0,w=y.length;S<w;++S){const e=y[S],n=e.start;for(let r=n,i=n+e.count;r<i;r+=3)g(t.getX(r+0),t.getX(r+1),t.getX(r+2))}const v=new rS,_=new rS,b=new rS,x=new rS;function E(t){b.fromBufferAttribute(r,t),x.copy(b);const e=s[t];v.copy(e),v.sub(b.multiplyScalar(b.dot(e))).normalize(),_.crossVectors(x,e);const n=_.dot(a[t])<0?-1:1;o.setXYZW(t,v.x,v.y,v.z,n)}for(let S=0,w=y.length;S<w;++S){const e=y[S],n=e.start;for(let r=n,i=n+e.count;r<i;r+=3)E(t.getX(r+0)),E(t.getX(r+1)),E(t.getX(r+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Lw(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new rS,i=new rS,o=new rS,s=new rS,a=new rS,l=new rS,u=new rS,c=new rS;if(t)for(let h=0,p=t.count;h<p;h+=3){const p=t.getX(h+0),f=t.getX(h+1),d=t.getX(h+2);r.fromBufferAttribute(e,p),i.fromBufferAttribute(e,f),o.fromBufferAttribute(e,d),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),s.fromBufferAttribute(n,p),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,d),s.add(u),a.add(u),l.add(u),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Kw.fromBufferAttribute(t,e),Kw.normalize(),t.setXYZ(e,Kw.x,Kw.y,Kw.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let s=0,a=0;for(let l=0,u=e.length;l<u;l++){s=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)o[a++]=n[s++]}return new Lw(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Zw,n=this.index.array,r=this.attributes;for(const s in r){const i=t(r[s],n);e.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],n);r.push(i)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const t=o[s];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const r={};let i=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[a]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,u=o.length;l<u;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Jw=new NS,Qw=new OS,tT=new wS,eT=new rS,nT=new rS,rT=new rS,iT=new rS,oT=new rS,sT=new rS,aT=new TE,lT=new TE,uT=new TE,cT=new rS,hT=new rS,pT=new rS,fT=new rS,dT=new rS;class mT extends sw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zw,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mw;super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const s=this.morphTargetInfluences;if(i&&s){sT.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(oT.fromBufferAttribute(a,t),o?sT.addScaledVector(oT,r):sT.addScaledVector(oT.sub(e),r))}e.add(sT)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),tT.copy(n.boundingSphere),tT.applyMatrix4(i),Qw.copy(t.ray).recast(t.near),!1===tT.containsPoint(Qw.origin)){if(null===Qw.intersectSphere(tT,eT))return;if(Qw.origin.distanceToSquared(eT)>(t.far-t.near)**2)return}Jw.copy(i).invert(),Qw.copy(t.ray).applyMatrix4(Jw),null!==n.boundingBox&&!1===Qw.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Qw)}}_computeIntersections(t,e,n){let r;const i=this.geometry,o=this.material,s=i.index,a=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,h=i.groups,p=i.drawRange;if(null!==s)if(Array.isArray(o))for(let f=0,d=h.length;f<d;f++){const i=h[f],a=o[i.materialIndex];for(let o=Math.max(i.start,p.start),h=Math.min(s.count,Math.min(i.start+i.count,p.start+p.count));o<h;o+=3){r=gT(this,a,t,n,l,u,c,s.getX(o),s.getX(o+1),s.getX(o+2)),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{for(let i=Math.max(0,p.start),a=Math.min(s.count,p.start+p.count);i<a;i+=3){r=gT(this,o,t,n,l,u,c,s.getX(i),s.getX(i+1),s.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}else if(void 0!==a)if(Array.isArray(o))for(let f=0,d=h.length;f<d;f++){const i=h[f],s=o[i.materialIndex];for(let o=Math.max(i.start,p.start),h=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));o<h;o+=3){r=gT(this,s,t,n,l,u,c,o,o+1,o+2),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{for(let i=Math.max(0,p.start),s=Math.min(a.count,p.start+p.count);i<s;i+=3){r=gT(this,o,t,n,l,u,c,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}}}function gT(t,e,n,r,i,o,s,a,l,u){t.getVertexPosition(a,nT),t.getVertexPosition(l,rT),t.getVertexPosition(u,iT);const c=function(t,e,n,r,i,o,s,a){let l;if(l=e.side===jv?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,e.side===Gv,a),null===l)return null;dT.copy(a),dT.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(dT);return u<n.near||u>n.far?null:{distance:u,point:dT.clone(),object:t}}(t,e,n,r,nT,rT,iT,fT);if(c){i&&(aT.fromBufferAttribute(i,a),lT.fromBufferAttribute(i,l),uT.fromBufferAttribute(i,u),c.uv=yw.getInterpolation(fT,nT,rT,iT,aT,lT,uT,new TE)),o&&(aT.fromBufferAttribute(o,a),lT.fromBufferAttribute(o,l),uT.fromBufferAttribute(o,u),c.uv1=yw.getInterpolation(fT,nT,rT,iT,aT,lT,uT,new TE)),s&&(cT.fromBufferAttribute(s,a),hT.fromBufferAttribute(s,l),pT.fromBufferAttribute(s,u),c.normal=yw.getInterpolation(fT,nT,rT,iT,cT,hT,pT,new rS),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const t={a:a,b:l,c:u,normal:new rS,materialIndex:0};yw.getNormal(nT,rT,iT,t.normal),c.face=t}return c}class yT extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],u=[],c=[];let h=0,p=0;function f(t,e,n,r,i,o,f,d,m,g,y){const v=o/m,_=f/g,b=o/2,x=f/2,E=d/2,S=m+1,w=g+1;let T=0,M=0;const R=new rS;for(let s=0;s<w;s++){const o=s*_-x;for(let a=0;a<S;a++){const h=a*v-b;R[t]=h*r,R[e]=o*i,R[n]=E,l.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[n]=d>0?1:-1,u.push(R.x,R.y,R.z),c.push(a/m),c.push(1-s/g),T+=1}}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=h+t+S*s,n=h+t+S*(s+1),r=h+(t+1)+S*(s+1),i=h+(t+1)+S*s;a.push(e,n,i),a.push(n,r,i),M+=6}s.addGroup(p,M,y),p+=M,h+=T}f("z","y","x",-1,-1,n,e,t,o,i,0),f("z","y","x",1,-1,n,e,-t,o,i,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Hw(l,3)),this.setAttribute("normal",new Hw(u,3)),this.setAttribute("uv",new Hw(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new yT(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function vT(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function _T(t){const e={};for(let n=0;n<t.length;n++){const r=vT(t[n]);for(const t in r)e[t]=r[t]}return e}function bT(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:BE.workingColorSpace}const xT={clone:vT,merge:_T};class ET extends Tw{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=vT(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class ST extends sw{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new NS,this.projectionMatrix=new NS,this.projectionMatrixInverse=new NS,this.coordinateSystem=hE}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const wT=new rS,TT=new TE,MT=new TE;class RT extends ST{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*yE*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*gE*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*yE*Math.atan(Math.tan(.5*gE*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){wT.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(wT.x,wT.y).multiplyScalar(-t/wT.z),wT.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(wT.x,wT.y).multiplyScalar(-t/wT.z)}getViewSize(t,e){return this.getViewBounds(t,TT,MT),e.subVectors(MT,TT)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*gE*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/s,r*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const AT=-90;class PT extends sw{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new RT(AT,1,t,e);r.layers=this.layers,this.add(r);const i=new RT(AT,1,t,e);i.layers=this.layers,this.add(i);const o=new RT(AT,1,t,e);o.layers=this.layers,this.add(o);const s=new RT(AT,1,t,e);s.layers=this.layers,this.add(s);const a=new RT(AT,1,t,e);a.layers=this.layers,this.add(a);const l=new RT(AT,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,o,s,a]=e;for(const l of e)this.remove(l);if(t===hE)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==pE)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,o,s,a,l,u]=this.children,c=t.getRenderTarget(),h=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),f=t.xr.enabled;t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,i),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,s),t.setRenderTarget(n,3,r),t.render(e,a),t.setRenderTarget(n,4,r),t.render(e,l),n.texture.generateMipmaps=d,t.setRenderTarget(n,5,r),t.render(e,u),t.setRenderTarget(c,h,p),t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class IT extends qE{constructor(t,e,n,r,i,o,s,a,l,u){super(t=void 0!==t?t:[],e=void 0!==e?e:F_,n,r,i,o,s,a,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class CT extends ZE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new IT(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:K_}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new yT(5,5,5),s=new ET({name:"CubemapFromEquirect",uniforms:vT(n),vertexShader:r,fragmentShader:i,side:jv,blending:Hv});s.uniforms.tEquirect.value=e;const a=new mT(o,s),l=e.minFilter;e.minFilter===Q_&&(e.minFilter=K_);return new PT(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const OT=new rS,NT=new rS,LT=new ME;class DT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=OT.subVectors(n,e).cross(NT.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(OT),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||LT.getNormalMatrix(t),r=this.coplanarPoint(OT).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const UT=new wS,FT=new rS;class kT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new DT,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new DT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new DT,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DT,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new DT,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new DT;this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hE;const n=this.planes,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],u=r[5],c=r[6],h=r[7],p=r[8],f=r[9],d=r[10],m=r[11],g=r[12],y=r[13],v=r[14],_=r[15];if(n[0].setComponents(a-i,h-l,m-p,_-g).normalize(),n[1].setComponents(a+i,h+l,m+p,_+g).normalize(),n[2].setComponents(a+o,h+u,m+f,_+y).normalize(),n[3].setComponents(a-o,h-u,m-f,_-y).normalize(),n[4].setComponents(a-s,h-c,m-d,_-v).normalize(),e===hE)n[5].setComponents(a+s,h+c,m+d,_+v).normalize();else{if(e!==pE)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(s,c,d,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),UT.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),UT.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(UT)}intersectsSprite(t){return UT.center.set(0,0,0),UT.radius=.7071067811865476,UT.applyMatrix4(t.matrixWorld),this.intersectsSphere(UT)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(FT.x=r.normal.x>0?t.max.x:t.min.x,FT.y=r.normal.y>0?t.max.y:t.min.y,FT.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(FT)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function BT(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function GT(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){if(n.isGLBufferAttribute){const t=e.get(n);return void((!t||t.version<n.version)&&e.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}n.isInterleavedBufferAttribute&&(n=n.data);const i=e.get(n);if(void 0===i)e.set(n,function(e,n){const r=e.array,i=e.usage,o=r.byteLength,s=t.createBuffer();let a;if(t.bindBuffer(n,s),t.bufferData(n,r,i),e.onUploadCallback(),r instanceof Float32Array)a=t.FLOAT;else if(r instanceof Uint16Array)a=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(r instanceof Int16Array)a=t.SHORT;else if(r instanceof Uint32Array)a=t.UNSIGNED_INT;else if(r instanceof Int32Array)a=t.INT;else if(r instanceof Int8Array)a=t.BYTE;else if(r instanceof Uint8Array)a=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);a=t.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,size:o}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,n,r){const i=n.array,o=n._updateRange,s=n.updateRanges;if(t.bindBuffer(r,e),-1===o.count&&0===s.length&&t.bufferSubData(r,0,i),0!==s.length){for(let e=0,n=s.length;e<n;e++){const n=s[e];t.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}-1!==o.count&&(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count),o.count=-1),n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}class jT extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,s=Math.floor(n),a=Math.floor(r),l=s+1,u=a+1,c=t/s,h=e/a,p=[],f=[],d=[],m=[];for(let g=0;g<u;g++){const t=g*h-o;for(let e=0;e<l;e++){const n=e*c-i;f.push(n,-t,0),d.push(0,0,1),m.push(e/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<s;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;p.push(e,n,i),p.push(n,r,i)}this.setIndex(p),this.setAttribute("position",new Hw(f,3)),this.setAttribute("normal",new Hw(d,3)),this.setAttribute("uv",new Hw(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new jT(t.width,t.height,t.widthSegments,t.heightSegments)}}const zT={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},HT={common:{diffuse:{value:new Ew(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ME},alphaMap:{value:null},alphaMapTransform:{value:new ME},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ME}},envmap:{envMap:{value:null},envMapRotation:{value:new ME},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ME}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ME}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ME},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ME},normalScale:{value:new TE(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ME},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ME}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ME}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ME}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ew(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ew(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ME},alphaTest:{value:0},uvTransform:{value:new ME}},sprite:{diffuse:{value:new Ew(16777215)},opacity:{value:1},center:{value:new TE(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ME},alphaMap:{value:null},alphaMapTransform:{value:new ME},alphaTest:{value:0}}},VT={basic:{uniforms:_T([HT.common,HT.specularmap,HT.envmap,HT.aomap,HT.lightmap,HT.fog]),vertexShader:zT.meshbasic_vert,fragmentShader:zT.meshbasic_frag},lambert:{uniforms:_T([HT.common,HT.specularmap,HT.envmap,HT.aomap,HT.lightmap,HT.emissivemap,HT.bumpmap,HT.normalmap,HT.displacementmap,HT.fog,HT.lights,{emissive:{value:new Ew(0)}}]),vertexShader:zT.meshlambert_vert,fragmentShader:zT.meshlambert_frag},phong:{uniforms:_T([HT.common,HT.specularmap,HT.envmap,HT.aomap,HT.lightmap,HT.emissivemap,HT.bumpmap,HT.normalmap,HT.displacementmap,HT.fog,HT.lights,{emissive:{value:new Ew(0)},specular:{value:new Ew(1118481)},shininess:{value:30}}]),vertexShader:zT.meshphong_vert,fragmentShader:zT.meshphong_frag},standard:{uniforms:_T([HT.common,HT.envmap,HT.aomap,HT.lightmap,HT.emissivemap,HT.bumpmap,HT.normalmap,HT.displacementmap,HT.roughnessmap,HT.metalnessmap,HT.fog,HT.lights,{emissive:{value:new Ew(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zT.meshphysical_vert,fragmentShader:zT.meshphysical_frag},toon:{uniforms:_T([HT.common,HT.aomap,HT.lightmap,HT.emissivemap,HT.bumpmap,HT.normalmap,HT.displacementmap,HT.gradientmap,HT.fog,HT.lights,{emissive:{value:new Ew(0)}}]),vertexShader:zT.meshtoon_vert,fragmentShader:zT.meshtoon_frag},matcap:{uniforms:_T([HT.common,HT.bumpmap,HT.normalmap,HT.displacementmap,HT.fog,{matcap:{value:null}}]),vertexShader:zT.meshmatcap_vert,fragmentShader:zT.meshmatcap_frag},points:{uniforms:_T([HT.points,HT.fog]),vertexShader:zT.points_vert,fragmentShader:zT.points_frag},dashed:{uniforms:_T([HT.common,HT.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zT.linedashed_vert,fragmentShader:zT.linedashed_frag},depth:{uniforms:_T([HT.common,HT.displacementmap]),vertexShader:zT.depth_vert,fragmentShader:zT.depth_frag},normal:{uniforms:_T([HT.common,HT.bumpmap,HT.normalmap,HT.displacementmap,{opacity:{value:1}}]),vertexShader:zT.meshnormal_vert,fragmentShader:zT.meshnormal_frag},sprite:{uniforms:_T([HT.sprite,HT.fog]),vertexShader:zT.sprite_vert,fragmentShader:zT.sprite_frag},background:{uniforms:{uvTransform:{value:new ME},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zT.background_vert,fragmentShader:zT.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ME}},vertexShader:zT.backgroundCube_vert,fragmentShader:zT.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zT.cube_vert,fragmentShader:zT.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zT.equirect_vert,fragmentShader:zT.equirect_frag},distanceRGBA:{uniforms:_T([HT.common,HT.displacementmap,{referencePosition:{value:new rS},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zT.distanceRGBA_vert,fragmentShader:zT.distanceRGBA_frag},shadow:{uniforms:_T([HT.lights,HT.fog,{color:{value:new Ew(0)},opacity:{value:1}}]),vertexShader:zT.shadow_vert,fragmentShader:zT.shadow_frag}};VT.physical={uniforms:_T([VT.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ME},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ME},clearcoatNormalScale:{value:new TE(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ME},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ME},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ME},sheen:{value:0},sheenColor:{value:new Ew(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ME},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ME},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ME},transmissionSamplerSize:{value:new TE},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ME},attenuationDistance:{value:0},attenuationColor:{value:new Ew(0)},specularColor:{value:new Ew(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ME},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ME},anisotropyVector:{value:new TE},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ME}}]),vertexShader:zT.meshphysical_vert,fragmentShader:zT.meshphysical_frag};const XT={r:0,b:0,g:0},WT=new HS,YT=new NS;function qT(t,e,n,r,i,o,s){const a=new Ew(0);let l,u,c=!0===o?0:1,h=null,p=0,f=null;function d(t){let r=!0===t.isScene?t.background:null;if(r&&r.isTexture){r=(t.backgroundBlurriness>0?n:e).get(r)}return r}function m(e,n){e.getRGB(XT,bT(t)),r.buffers.color.setClear(XT.r,XT.g,XT.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(t),c=e,m(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,m(a,c)},render:function(e){let n=!1;const i=d(e);null===i?m(a,c):i&&i.isColor&&(m(i,1),n=!0);const o=t.xr.getEnvironmentBlendMode();"additive"===o?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===o&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||n)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil)},addToRenderList:function(e,n){const r=d(n);r&&(r.isCubeTexture||r.mapping===j_)?(void 0===u&&(u=new mT(new yT(1,1,1),new ET({name:"BackgroundCubeMaterial",uniforms:vT(VT.backgroundCube.uniforms),vertexShader:VT.backgroundCube.vertexShader,fragmentShader:VT.backgroundCube.fragmentShader,side:jv,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),WT.copy(n.backgroundRotation),WT.x*=-1,WT.y*=-1,WT.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(WT.y*=-1,WT.z*=-1),u.material.uniforms.envMap.value=r,u.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(YT.makeRotationFromEuler(WT)),u.material.toneMapped=BE.getTransfer(r.colorSpace)!==Rx,h===r&&p===r.version&&f===t.toneMapping||(u.material.needsUpdate=!0,h=r,p=r.version,f=t.toneMapping),u.layers.enableAll(),e.unshift(u,u.geometry,u.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new mT(new jT(2,2),new ET({name:"BackgroundMaterial",uniforms:vT(VT.background.uniforms),vertexShader:VT.background.vertexShader,fragmentShader:VT.background.fragmentShader,side:Gv,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=BE.getTransfer(r.colorSpace)!==Rx,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&p===r.version&&f===t.toneMapping||(l.material.needsUpdate=!0,h=r,p=r.version,f=t.toneMapping),l.layers.enableAll(),e.unshift(l,l.geometry,l.material,0,0,null))}}}function $T(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=u(null);let o=i,s=!1;function a(e){return t.bindVertexArray(e)}function l(e){return t.deleteVertexArray(e)}function u(t){const e=[],r=[],i=[];for(let o=0;o<n;o++)e[o]=0,r[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:r,attributeDivisors:i,object:t,attributes:{},index:null}}function c(){const t=o.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function h(t){p(t,0)}function p(e,n){const r=o.newAttributes,i=o.enabledAttributes,s=o.attributeDivisors;r[e]=1,0===i[e]&&(t.enableVertexAttribArray(e),i[e]=1),s[e]!==n&&(t.vertexAttribDivisor(e,n),s[e]=n)}function f(){const e=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function d(e,n,r,i,o,s,a){!0===a?t.vertexAttribIPointer(e,n,r,o,s):t.vertexAttribPointer(e,n,r,i,o,s)}function m(){g(),s=!0,o!==i&&(o=i,a(o.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let y=!1;const v=function(e,n,i){const o=!0===i.wireframe;let s=r[e.id];void 0===s&&(s={},r[e.id]=s);let a=s[n.id];void 0===a&&(a={},s[n.id]=a);let l=a[o];void 0===l&&(l=u(t.createVertexArray()),a[o]=l);return l}(m,l,i);o!==v&&(o=v,a(o.object)),y=function(t,e,n,r){const i=o.attributes,s=e.attributes;let a=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){const e=i[o];let n=s[o];if(void 0===n&&("instanceMatrix"===o&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===o&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;a++}}return o.attributesNum!==a||o.index!==r}(n,m,l,g),y&&function(t,e,n,r){const i={},s=e.attributes;let a=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){let e=s[o];void 0===e&&("instanceMatrix"===o&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===o&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[o]=n,a++}}o.attributes=i,o.attributesNum=a,o.index=r}(n,m,l,g),null!==g&&e.update(g,t.ELEMENT_ARRAY_BUFFER),(y||s)&&(s=!1,function(n,r,i,o){c();const s=o.attributes,a=i.getAttributes(),l=r.defaultAttributeValues;for(const u in a){const r=a[u];if(r.location>=0){let i=s[u];if(void 0===i&&("instanceMatrix"===u&&n.instanceMatrix&&(i=n.instanceMatrix),"instanceColor"===u&&n.instanceColor&&(i=n.instanceColor)),void 0!==i){const s=i.normalized,a=i.itemSize,l=e.get(i);if(void 0===l)continue;const u=l.buffer,c=l.type,f=l.bytesPerElement,m=c===t.INT||c===t.UNSIGNED_INT||i.gpuType===ob;if(i.isInterleavedBufferAttribute){const e=i.data,l=e.stride,g=i.offset;if(e.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)p(r.location+t,e.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<r.locationSize;t++)h(r.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<r.locationSize;t++)d(r.location+t,a/r.locationSize,c,s,l*f,(g+a/r.locationSize*t)*f,m)}else{if(i.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)p(r.location+t,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<r.locationSize;t++)h(r.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<r.locationSize;t++)d(r.location+t,a/r.locationSize,c,s,a*f,a/r.locationSize*t*f,m)}}else if(void 0!==l){const e=l[u];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(r.location,e);break;case 3:t.vertexAttrib3fv(r.location,e);break;case 4:t.vertexAttrib4fv(r.location,e);break;default:t.vertexAttrib1fv(r.location,e)}}}}f()}(n,i,l,m),null!==g&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const t in r){const e=r[t];for(const t in e){const n=e[t];for(const t in n)l(n[t].object),delete n[t];delete e[t]}delete r[t]}},releaseStatesOfGeometry:function(t){if(void 0===r[t.id])return;const e=r[t.id];for(const n in e){const t=e[n];for(const e in t)l(t[e].object),delete t[e];delete e[n]}delete r[t.id]},releaseStatesOfProgram:function(t){for(const e in r){const n=r[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)l(i[t].object),delete i[t];delete n[t.id]}},initAttributes:c,enableAttribute:h,disableUnusedAttributes:f}}function KT(t,e,n){let r;function i(e,i,o){0!==o&&(t.drawArraysInstanced(r,e,i,o),n.update(i,r,o))}this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(t,i,o){if(0===o)return;const s=e.get("WEBGL_multi_draw");if(null===s)for(let e=0;e<o;e++)this.render(t[e],i[e]);else{s.multiDrawArraysWEBGL(r,t,0,i,0,o);let e=0;for(let t=0;t<o;t++)e+=i[t];n.update(e,r,1)}},this.renderMultiDrawInstances=function(t,o,s,a){if(0===s)return;const l=e.get("WEBGL_multi_draw");if(null===l)for(let e=0;e<t.length;e++)i(t[e],o[e],a[e]);else{l.multiDrawArraysInstancedWEBGL(r,t,0,o,0,a,0,s);let e=0;for(let t=0;t<s;t++)e+=o[t];for(let t=0;t<a.length;t++)n.update(e,r,a[t])}}}function ZT(t,e,n,r){let i;function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp";const a=o(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=!0===n.logarithmicDepthBuffer,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,textureFormatReadable:function(e){return e===mb||r.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===lb&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(n!==eb&&r.convert(n)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==ab&&!i)},precision:s,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:c>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function JT(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new DT,a=new ME,l={value:null,needsUpdate:!1};function u(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let n=0,l=r;n!==o;++n,l+=4)s.copy(t[n]).applyMatrix4(i,a),s.normal.toArray(u,l),u[l+3]=s.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(s,a,c){const h=s.clippingPlanes,p=s.clipIntersection,f=s.clipShadows,d=t.get(s);if(!i||null===h||0===h.length||o&&!f)o?u(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);e.numPlanes=r,e.numIntersection=0}();else{const t=o?0:r,e=4*t;let i=d.clippingState||null;l.value=i,i=u(h,a,e,c);for(let r=0;r!==e;++r)i[r]=n[r];d.clippingState=i,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}}}function QT(t){let e=new WeakMap;function n(t,e){return e===B_?t.mapping=F_:e===G_&&(t.mapping=k_),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===B_||o===G_){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const s=new CT(o.height);return s.fromEquirectangularTexture(t,i),e.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}class tM extends ST{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const eM=[.125,.215,.35,.446,.526,.582],nM=20,rM=new tM,iM=new Ew;let oM=null,sM=0,aM=0,lM=!1;const uM=(1+Math.sqrt(5))/2,cM=1/uM,hM=[new rS(-uM,cM,0),new rS(uM,cM,0),new rS(-cM,0,uM),new rS(cM,0,uM),new rS(0,uM,-cM),new rS(0,uM,cM),new rS(-1,1,-1),new rS(1,1,-1),new rS(-1,1,1),new rS(1,1,1)];class pM{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;oM=this._renderer.getRenderTarget(),sM=this._renderer.getActiveCubeFace(),aM=this._renderer.getActiveMipmapLevel(),lM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}fromCubemap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=gM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=mM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(oM,sM,aM),this._renderer.xr.enabled=lM,t.scissorTest=!1,dM(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===F_||t.mapping===k_?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),oM=this._renderer.getRenderTarget(),sM=this._renderer.getActiveCubeFace(),aM=this._renderer.getActiveMipmapLevel(),lM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:K_,minFilter:K_,generateMipmaps:!1,type:lb,format:mb,colorSpace:Sx,depthBuffer:!1},r=fM(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fM(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const o=t-4+1+eM.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>t-4?a=eM[s-t+4-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],p=6,f=6,d=3,m=2,g=1,y=new Float32Array(d*f*p),v=new Float32Array(m*f*p),_=new Float32Array(g*f*p);for(let t=0;t<p;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];y.set(r,d*f*t),v.set(h,m*f*t);const i=[t,t,t,t,t,t];_.set(i,g*f*t)}const b=new Zw;b.setAttribute("position",new Lw(y,d)),b.setAttribute("uv",new Lw(v,m)),b.setAttribute("faceIndex",new Lw(_,g)),e.push(b),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(nM),i=new rS(0,1,0),o=new ET({name:"SphericalGaussianBlur",defines:{n:nM,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Hv,depthTest:!1,depthWrite:!1});return o}(r,t,e)}return r}_compileMaterial(t){const e=new mT(this._lodPlanes[0],t);this._renderer.compile(e,rM)}_sceneToCubeUV(t,e,n,r){const i=new RT(90,1,e,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,u=a.toneMapping;a.getClearColor(iM),a.toneMapping=M_,a.autoClear=!1;const c=new Mw({name:"PMREM.Background",side:jv,depthWrite:!1,depthTest:!1}),h=new mT(new yT,c);let p=!1;const f=t.background;f?f.isColor&&(c.color.copy(f),t.background=null,p=!0):(c.color.copy(iM),p=!0);for(let d=0;d<6;d++){const e=d%3;0===e?(i.up.set(0,o[d],0),i.lookAt(s[d],0,0)):1===e?(i.up.set(0,0,o[d]),i.lookAt(0,s[d],0)):(i.up.set(0,o[d],0),i.lookAt(0,0,s[d]));const n=this._cubeSize;dM(r,e*n,d>2?n:0,n,n),a.setRenderTarget(r),p&&a.render(h,i),a.render(t,i)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=u,a.autoClear=l,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===F_||t.mapping===k_;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=gM()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=mM());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new mT(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const s=this._cubeSize;dM(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(o,rM)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=hM[(r-i-1)%hM.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new mT(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,p=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/p,d=isFinite(i)?1+Math.floor(3*f):nM;d>nM&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(d," samples when the maximum is set to ").concat(nM));const m=[];let g=0;for(let _=0;_<nM;++_){const t=_/f,e=Math.exp(-t*t/2);m.push(e),0===_?g+=e:_<d&&(g+=2*e)}for(let _=0;_<m.length;_++)m[_]=m[_]/g;c.envMap.value=t.texture,c.samples.value=d,c.weights.value=m,c.latitudinal.value="latitudinal"===o,s&&(c.poleAxis.value=s);const{_lodMax:y}=this;c.dTheta.value=p,c.mipInt.value=y-n;const v=this._sizeLods[r];dM(e,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),a.setRenderTarget(e),a.render(u,rM)}}function fM(t,e,n){const r=new ZE(t,e,n);return r.texture.mapping=j_,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function dM(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function mM(){return new ET({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Hv,depthTest:!1,depthWrite:!1})}function gM(){return new ET({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Hv,depthTest:!1,depthWrite:!1})}function yM(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,s=o===B_||o===G_,a=o===F_||o===k_;if(s||a){let o=e.get(i);const l=void 0!==o?o.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new pM(t)),o=s?n.fromEquirectangular(i,o):n.fromCubemap(i,o),o.texture.pmremVersion=i.pmremVersion,e.set(i,o),o.texture;if(void 0!==o)return o.texture;{const l=i.image;return s&&l&&l.height>0||a&&l&&function(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}(l)?(null===n&&(n=new pM(t)),o=s?n.fromEquirectangular(i):n.fromCubemap(i),o.texture.pmremVersion=i.pmremVersion,e.set(i,o),i.addEventListener("dispose",r),o.texture):null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function vM(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function _M(t,e,n,r){const i={},o=new WeakMap;function s(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);for(const n in a.morphAttributes){const t=a.morphAttributes[n];for(let n=0,r=t.length;n<r;n++)e.remove(t[n])}a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(e.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{if(void 0===i)return;{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}}const a=new(AE(n)?jw:Bw)(n,1);a.version=s;const l=o.get(t);l&&e.remove(l),o.set(t,a)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e},update:function(n){const r=n.attributes;for(const o in r)e.update(r[o],t.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)e.update(n[r],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return o.get(t)}}}function bM(t,e,n){let r,i,o;function s(e,s,a){0!==a&&(t.drawElementsInstanced(r,s,i,e*o,a),n.update(s,r,a))}this.setMode=function(t){r=t},this.setIndex=function(t){i=t.type,o=t.bytesPerElement},this.render=function(e,s){t.drawElements(r,s,i,e*o),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(t,s,a){if(0===a)return;const l=e.get("WEBGL_multi_draw");if(null===l)for(let e=0;e<a;e++)this.render(t[e]/o,s[e]);else{l.multiDrawElementsWEBGL(r,s,0,i,t,0,a);let e=0;for(let t=0;t<a;t++)e+=s[t];n.update(e,r,1)}},this.renderMultiDrawInstances=function(t,a,l,u){if(0===l)return;const c=e.get("WEBGL_multi_draw");if(null===c)for(let e=0;e<t.length;e++)s(t[e]/o,a[e],u[e]);else{c.multiDrawElementsInstancedWEBGL(r,a,0,i,t,0,u,0,l);let e=0;for(let t=0;t<l;t++)e+=a[t];for(let t=0;t<u.length;t++)n.update(e,r,u[t])}}}function xM(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,i){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=i*(n/3);break;case t.LINES:e.lines+=i*(n/2);break;case t.LINE_STRIP:e.lines+=i*(n-1);break;case t.LINE_LOOP:e.lines+=i*n;break;case t.POINTS:e.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function EM(t,e,n){const r=new WeakMap,i=new $E;return{update:function(o,s,a){const l=o.morphTargetInfluences,u=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,c=void 0!==u?u.length:0;let h=r.get(s);if(void 0===h||h.count!==c){void 0!==h&&h.texture.dispose();const p=void 0!==s.morphAttributes.position,f=void 0!==s.morphAttributes.normal,d=void 0!==s.morphAttributes.color,m=s.morphAttributes.position||[],g=s.morphAttributes.normal||[],y=s.morphAttributes.color||[];let v=0;!0===p&&(v=1),!0===f&&(v=2),!0===d&&(v=3);let _=s.attributes.position.count*v,b=1;_>e.maxTextureSize&&(b=Math.ceil(_/e.maxTextureSize),_=e.maxTextureSize);const x=new Float32Array(_*b*4*c),E=new JE(x,_,b,c);E.type=ab,E.needsUpdate=!0;const S=4*v;for(let T=0;T<c;T++){const M=m[T],R=g[T],A=y[T],P=_*b*4*T;for(let I=0;I<M.count;I++){const C=I*S;!0===p&&(i.fromBufferAttribute(M,I),x[P+C+0]=i.x,x[P+C+1]=i.y,x[P+C+2]=i.z,x[P+C+3]=0),!0===f&&(i.fromBufferAttribute(R,I),x[P+C+4]=i.x,x[P+C+5]=i.y,x[P+C+6]=i.z,x[P+C+7]=0),!0===d&&(i.fromBufferAttribute(A,I),x[P+C+8]=i.x,x[P+C+9]=i.y,x[P+C+10]=i.z,x[P+C+11]=4===A.itemSize?i.w:1)}}function w(){E.dispose(),r.delete(s),s.removeEventListener("dispose",w)}h={count:c,texture:E,size:new TE(_,b)},r.set(s,h),s.addEventListener("dispose",w)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)a.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let O=0;for(let L=0;L<l.length;L++)O+=l[L];const N=s.morphTargetsRelative?1:1-O;a.getUniforms().setValue(t,"morphTargetBaseInfluence",N),a.getUniforms().setValue(t,"morphTargetInfluences",l)}a.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),a.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}}}function SM(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(s){const a=r.render.frame,l=s.geometry,u=e.get(s,l);if(i.get(u)!==a&&(e.update(u),i.set(u,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),i.get(s)!==a&&(n.update(s.instanceMatrix,t.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,t.ARRAY_BUFFER),i.set(s,a))),s.isSkinnedMesh){const t=s.skeleton;i.get(t)!==a&&(t.update(),i.set(t,a))}return u},dispose:function(){i=new WeakMap}}}class wM extends qE{constructor(t,e,n,r,i,o,s,a,l,u){if((u=void 0!==u?u:vb)!==vb&&u!==_b)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===vb&&(n=sb),void 0===n&&u===_b&&(n=hb),super(null,r,i,o,s,a,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:X_,this.minFilter=void 0!==a?a:X_,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const TM=new qE,MM=new wM(1,1);MM.compareFunction=$x;const RM=new JE,AM=new tS,PM=new IT,IM=[],CM=[],OM=new Float32Array(16),NM=new Float32Array(9),LM=new Float32Array(4);function DM(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=IM[i];if(void 0===o&&(o=new Float32Array(i),IM[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function UM(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function FM(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function kM(t,e){let n=CM[e];void 0===n&&(n=new Int32Array(e),CM[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function BM(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function GM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(UM(n,e))return;t.uniform2fv(this.addr,e),FM(n,e)}}function jM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(UM(n,e))return;t.uniform3fv(this.addr,e),FM(n,e)}}function zM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(UM(n,e))return;t.uniform4fv(this.addr,e),FM(n,e)}}function HM(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(UM(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),FM(n,e)}else{if(UM(n,r))return;LM.set(r),t.uniformMatrix2fv(this.addr,!1,LM),FM(n,r)}}function VM(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(UM(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),FM(n,e)}else{if(UM(n,r))return;NM.set(r),t.uniformMatrix3fv(this.addr,!1,NM),FM(n,r)}}function XM(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(UM(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),FM(n,e)}else{if(UM(n,r))return;OM.set(r),t.uniformMatrix4fv(this.addr,!1,OM),FM(n,r)}}function WM(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function YM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(UM(n,e))return;t.uniform2iv(this.addr,e),FM(n,e)}}function qM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(UM(n,e))return;t.uniform3iv(this.addr,e),FM(n,e)}}function $M(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(UM(n,e))return;t.uniform4iv(this.addr,e),FM(n,e)}}function KM(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ZM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(UM(n,e))return;t.uniform2uiv(this.addr,e),FM(n,e)}}function JM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(UM(n,e))return;t.uniform3uiv(this.addr,e),FM(n,e)}}function QM(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(UM(n,e))return;t.uniform4uiv(this.addr,e),FM(n,e)}}function tR(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?MM:TM;n.setTexture2D(e||o,i)}function eR(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||AM,i)}function nR(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||PM,i)}function rR(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||RM,i)}function iR(t,e){t.uniform1fv(this.addr,e)}function oR(t,e){const n=DM(e,this.size,2);t.uniform2fv(this.addr,n)}function sR(t,e){const n=DM(e,this.size,3);t.uniform3fv(this.addr,n)}function aR(t,e){const n=DM(e,this.size,4);t.uniform4fv(this.addr,n)}function lR(t,e){const n=DM(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function uR(t,e){const n=DM(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function cR(t,e){const n=DM(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function hR(t,e){t.uniform1iv(this.addr,e)}function pR(t,e){t.uniform2iv(this.addr,e)}function fR(t,e){t.uniform3iv(this.addr,e)}function dR(t,e){t.uniform4iv(this.addr,e)}function mR(t,e){t.uniform1uiv(this.addr,e)}function gR(t,e){t.uniform2uiv(this.addr,e)}function yR(t,e){t.uniform3uiv(this.addr,e)}function vR(t,e){t.uniform4uiv(this.addr,e)}function _R(t,e,n){const r=this.cache,i=e.length,o=kM(n,i);UM(r,o)||(t.uniform1iv(this.addr,o),FM(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||TM,o[s])}function bR(t,e,n){const r=this.cache,i=e.length,o=kM(n,i);UM(r,o)||(t.uniform1iv(this.addr,o),FM(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||AM,o[s])}function xR(t,e,n){const r=this.cache,i=e.length,o=kM(n,i);UM(r,o)||(t.uniform1iv(this.addr,o),FM(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||PM,o[s])}function ER(t,e,n){const r=this.cache,i=e.length,o=kM(n,i);UM(r,o)||(t.uniform1iv(this.addr,o),FM(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||RM,o[s])}class SR{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return BM;case 35664:return GM;case 35665:return jM;case 35666:return zM;case 35674:return HM;case 35675:return VM;case 35676:return XM;case 5124:case 35670:return WM;case 35667:case 35671:return YM;case 35668:case 35672:return qM;case 35669:case 35673:return $M;case 5125:return KM;case 36294:return ZM;case 36295:return JM;case 36296:return QM;case 35678:case 36198:case 36298:case 36306:case 35682:return tR;case 35679:case 36299:case 36307:return eR;case 35680:case 36300:case 36308:case 36293:return nR;case 36289:case 36303:case 36311:case 36292:return rR}}(e.type)}}class wR{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return iR;case 35664:return oR;case 35665:return sR;case 35666:return aR;case 35674:return lR;case 35675:return uR;case 35676:return cR;case 5124:case 35670:return hR;case 35667:case 35671:return pR;case 35668:case 35672:return fR;case 35669:case 35673:return dR;case 5125:return mR;case 36294:return gR;case 36295:return yR;case 36296:return vR;case 35678:case 36198:case 36298:case 36306:case 35682:return _R;case 35679:case 36299:case 36307:return bR;case 35680:case 36300:case 36308:case 36293:return xR;case 36289:case 36303:case 36311:case 36292:return ER}}(e.type)}}class TR{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const MR=/(\w+)(\])?(\[|\.)?/g;function RR(t,e){t.seq.push(e),t.map[e.id]=e}function AR(t,e,n){const r=t.name,i=r.length;for(MR.lastIndex=0;;){const o=MR.exec(r),s=MR.lastIndex;let a=o[1];const l="]"===o[2],u=o[3];if(l&&(a|=0),void 0===u||"["===u&&s+2===i){RR(n,void 0===u?new SR(a,t,e):new wR(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new TR(a),RR(n,t)),n=t}}}class PR{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);AR(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function IR(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const CR=37297;let OR=0;function NR(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const t=s+1;r.push("".concat(t===e?">":" "," ").concat(t,": ").concat(n[s]))}return r.join("\n")}(t.getShaderSource(e),r)}return i}function LR(t,e){const n=function(t){const e=BE.getPrimaries(BE.workingColorSpace),n=BE.getPrimaries(t);let r;switch(e===n?r="":e===Px&&n===Ax?r="LinearDisplayP3ToLinearSRGB":e===Ax&&n===Px&&(r="LinearSRGBToLinearDisplayP3"),t){case Sx:case Tx:return[r,"LinearTransferOETF"];case Ex:case wx:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}(e);return"vec4 ".concat(t,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function DR(t,e){let n;switch(e){case R_:n="Linear";break;case A_:n="Reinhard";break;case P_:n="OptimizedCineon";break;case I_:n="ACESFilmic";break;case O_:n="AgX";break;case N_:n="Neutral";break;case C_:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function UR(t){return""!==t}function FR(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kR(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const BR=/^[ \t]*#include +<([\w\d./]+)>/gm;function GR(t){return t.replace(BR,zR)}const jR=new Map;function zR(t,e){let n=zT[e];if(void 0===n){const t=jR.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=zT[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return GR(n)}const HR=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function VR(t){return t.replace(HR,XR)}function XR(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function WR(t){let e="precision ".concat(t.precision," float;\n\tprecision ").concat(t.precision," int;\n\tprecision ").concat(t.precision," sampler2D;\n\tprecision ").concat(t.precision," samplerCube;\n\tprecision ").concat(t.precision," sampler3D;\n\tprecision ").concat(t.precision," sampler2DArray;\n\tprecision ").concat(t.precision," sampler2DShadow;\n\tprecision ").concat(t.precision," samplerCubeShadow;\n\tprecision ").concat(t.precision," sampler2DArrayShadow;\n\tprecision ").concat(t.precision," isampler2D;\n\tprecision ").concat(t.precision," isampler3D;\n\tprecision ").concat(t.precision," isamplerCube;\n\tprecision ").concat(t.precision," isampler2DArray;\n\tprecision ").concat(t.precision," usampler2D;\n\tprecision ").concat(t.precision," usampler3D;\n\tprecision ").concat(t.precision," usamplerCube;\n\tprecision ").concat(t.precision," usampler2DArray;\n\t");return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function YR(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Fv?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===kv?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Bv&&(e="SHADOWMAP_TYPE_VSM"),e}(n),u=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case F_:case k_:e="ENVMAP_TYPE_CUBE";break;case j_:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),c=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===k_&&(e="ENVMAP_MODE_REFRACTION");return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case S_:e="ENVMAP_BLENDING_MULTIPLY";break;case w_:e="ENVMAP_BLENDING_MIX";break;case T_:e="ENVMAP_BLENDING_ADD"}return e}(n),p=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(UR).join("\n")}(n),d=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),m=i.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,d].filter(UR).join("\n"),g.length>0&&(g+="\n"),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,d].filter(UR).join("\n"),y.length>0&&(y+="\n")):(g=[WR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,d,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(UR).join("\n"),y=[WR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==M_?"#define TONE_MAPPING":"",n.toneMapping!==M_?zT.tonemapping_pars_fragment:"",n.toneMapping!==M_?DR("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",zT.colorspace_pars_fragment,LR("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(UR).join("\n")),s=GR(s),s=FR(s,n),s=kR(s,n),a=GR(a),a=FR(a,n),a=kR(a,n),s=VR(s),a=VR(a),!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===cE?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===cE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const _=v+g+s,b=v+y+a,x=IR(i,i.VERTEX_SHADER,_),E=IR(i,i.FRAGMENT_SHADER,b);function S(e){if(t.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(x).trim(),o=i.getShaderInfoLog(E).trim();let s=!0,a=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(s=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(i,m,x,E);else{const t=NR(i,x,"vertex"),r=NR(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+e.name+"\nMaterial Type: "+e.type+"\n\nProgram Info Log: "+n+"\n"+t+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(a=!1);a&&(e.diagnostics={runnable:s,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:o,prefix:y}})}i.deleteShader(x),i.deleteShader(E),w=new PR(i,m),T=function(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let s=1;r.type===t.FLOAT_MAT2&&(s=2),r.type===t.FLOAT_MAT3&&(s=3),r.type===t.FLOAT_MAT4&&(s=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}(i,m)}let w,T;i.attachShader(m,x),i.attachShader(m,E),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===w&&S(this),w},this.getAttributes=function(){return void 0===T&&S(this),T};let M=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=i.getProgramParameter(m,CR)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=OR++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=E,this}let qR=0;class $R{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new KR(t),e.set(t,n)),n}}class KR{constructor(t){this.id=qR++,this.code=t,this.usedTimes=0}}function ZR(t,e,n,r,i,o,s){const a=new VS,l=new $R,u=new Set,c=[],h=i.logarithmicDepthBuffer,p=i.vertexTextures;let f=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return u.add(t),0===t?"uv":"uv".concat(t)}return{getParameters:function(o,a,c,g,y){const v=g.fog,_=y.geometry,b=o.isMeshStandardMaterial?g.environment:null,x=(o.isMeshStandardMaterial?n:e).get(o.envMap||b),E=x&&x.mapping===j_?x.image.height:null,S=d[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const w=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,T=void 0!==w?w.length:0;let M,R,A,P,I=0;if(void 0!==_.morphAttributes.position&&(I=1),void 0!==_.morphAttributes.normal&&(I=2),void 0!==_.morphAttributes.color&&(I=3),S){const t=VT[S];M=t.vertexShader,R=t.fragmentShader}else M=o.vertexShader,R=o.fragmentShader,l.update(o),A=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const C=t.getRenderTarget(),O=!0===y.isInstancedMesh,N=!0===y.isBatchedMesh,L=!!o.map,D=!!o.matcap,U=!!x,F=!!o.aoMap,k=!!o.lightMap,B=!!o.bumpMap,G=!!o.normalMap,j=!!o.displacementMap,z=!!o.emissiveMap,H=!!o.metalnessMap,V=!!o.roughnessMap,X=o.anisotropy>0,W=o.clearcoat>0,Y=o.dispersion>0,q=o.iridescence>0,$=o.sheen>0,K=o.transmission>0,Z=X&&!!o.anisotropyMap,J=W&&!!o.clearcoatMap,Q=W&&!!o.clearcoatNormalMap,tt=W&&!!o.clearcoatRoughnessMap,et=q&&!!o.iridescenceMap,nt=q&&!!o.iridescenceThicknessMap,rt=$&&!!o.sheenColorMap,it=$&&!!o.sheenRoughnessMap,ot=!!o.specularMap,st=!!o.specularColorMap,at=!!o.specularIntensityMap,lt=K&&!!o.transmissionMap,ut=K&&!!o.thicknessMap,ct=!!o.gradientMap,ht=!!o.alphaMap,pt=o.alphaTest>0,ft=!!o.alphaHash,dt=!!o.extensions;let mt=M_;o.toneMapped&&(null!==C&&!0!==C.isXRRenderTarget||(mt=t.toneMapping));const gt={shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:M,fragmentShader:R,defines:o.defines,customVertexShaderID:A,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:N,instancing:O,instancingColor:O&&null!==y.instanceColor,instancingMorph:O&&null!==y.morphTexture,supportsVertexTextures:p,outputColorSpace:null===C?t.outputColorSpace:!0===C.isXRRenderTarget?C.texture.colorSpace:Sx,alphaToCoverage:!!o.alphaToCoverage,map:L,matcap:D,envMap:U,envMapMode:U&&x.mapping,envMapCubeUVHeight:E,aoMap:F,lightMap:k,bumpMap:B,normalMap:G,displacementMap:p&&j,emissiveMap:z,normalMapObjectSpace:G&&o.normalMapType===bx,normalMapTangentSpace:G&&o.normalMapType===_x,metalnessMap:H,roughnessMap:V,anisotropy:X,anisotropyMap:Z,clearcoat:W,clearcoatMap:J,clearcoatNormalMap:Q,clearcoatRoughnessMap:tt,dispersion:Y,iridescence:q,iridescenceMap:et,iridescenceThicknessMap:nt,sheen:$,sheenColorMap:rt,sheenRoughnessMap:it,specularMap:ot,specularColorMap:st,specularIntensityMap:at,transmission:K,transmissionMap:lt,thicknessMap:ut,gradientMap:ct,opaque:!1===o.transparent&&o.blending===Vv&&!1===o.alphaToCoverage,alphaMap:ht,alphaTest:pt,alphaHash:ft,combine:o.combine,mapUv:L&&m(o.map.channel),aoMapUv:F&&m(o.aoMap.channel),lightMapUv:k&&m(o.lightMap.channel),bumpMapUv:B&&m(o.bumpMap.channel),normalMapUv:G&&m(o.normalMap.channel),displacementMapUv:j&&m(o.displacementMap.channel),emissiveMapUv:z&&m(o.emissiveMap.channel),metalnessMapUv:H&&m(o.metalnessMap.channel),roughnessMapUv:V&&m(o.roughnessMap.channel),anisotropyMapUv:Z&&m(o.anisotropyMap.channel),clearcoatMapUv:J&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:it&&m(o.sheenRoughnessMap.channel),specularMapUv:ot&&m(o.specularMap.channel),specularColorMapUv:st&&m(o.specularColorMap.channel),specularIntensityMapUv:at&&m(o.specularIntensityMap.channel),transmissionMapUv:lt&&m(o.transmissionMap.channel),thicknessMapUv:ut&&m(o.thicknessMap.channel),alphaMapUv:ht&&m(o.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(G||X),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,pointsUvs:!0===y.isPoints&&!!_.attributes.uv&&(L||ht),fog:!!v,useFog:!0===o.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:T,morphTextureStride:I,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:mt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:L&&!0===o.map.isVideoTexture&&BE.getTransfer(o.map.colorSpace)===Rx,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===zv,flipSided:o.side===jv,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:dt&&!0===o.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:dt&&!0===o.extensions.multiDraw&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return gt.vertexUv1s=u.has(1),gt.vertexUv2s=u.has(2),gt.vertexUv3s=u.has(3),u.clear(),gt},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){a.disableAll(),e.supportsVertexTextures&&a.enable(0);e.instancing&&a.enable(1);e.instancingColor&&a.enable(2);e.instancingMorph&&a.enable(3);e.matcap&&a.enable(4);e.envMap&&a.enable(5);e.normalMapObjectSpace&&a.enable(6);e.normalMapTangentSpace&&a.enable(7);e.clearcoat&&a.enable(8);e.iridescence&&a.enable(9);e.alphaTest&&a.enable(10);e.vertexColors&&a.enable(11);e.vertexAlphas&&a.enable(12);e.vertexUv1s&&a.enable(13);e.vertexUv2s&&a.enable(14);e.vertexUv3s&&a.enable(15);e.vertexTangents&&a.enable(16);e.anisotropy&&a.enable(17);e.alphaHash&&a.enable(18);e.batching&&a.enable(19);e.dispersion&&a.enable(20);t.push(a.mask),a.disableAll(),e.fog&&a.enable(0);e.useFog&&a.enable(1);e.flatShading&&a.enable(2);e.logarithmicDepthBuffer&&a.enable(3);e.skinning&&a.enable(4);e.morphTargets&&a.enable(5);e.morphNormals&&a.enable(6);e.morphColors&&a.enable(7);e.premultipliedAlpha&&a.enable(8);e.shadowMapEnabled&&a.enable(9);e.useLegacyLights&&a.enable(10);e.doubleSided&&a.enable(11);e.flipSided&&a.enable(12);e.useDepthPacking&&a.enable(13);e.dithering&&a.enable(14);e.transmission&&a.enable(15);e.sheen&&a.enable(16);e.opaque&&a.enable(17);e.pointsUvs&&a.enable(18);e.decodeVideoTexture&&a.enable(19);e.alphaToCoverage&&a.enable(20);t.push(a.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=d[t.type];let n;if(e){const t=VT[e];n=xT.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,i=c.length;t<i;t++){const e=c[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new YR(t,n,e,o),c.push(r)),r},releaseProgram:function(t){if(0===--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function JR(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function QR(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function tA(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function eA(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,s,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,s,a,l,u){const c=o(t,e,s,a,l,u);s.transmission>0?r.push(c):!0===s.transparent?i.push(c):n.push(c)},unshift:function(t,e,s,a,l,u){const c=o(t,e,s,a,l,u);s.transmission>0?r.unshift(c):!0===s.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||QR),r.length>1&&r.sort(e||tA),i.length>1&&i.sort(e||tA)}}}function nA(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new eA,t.set(e,[i])):n>=r.length?(i=new eA,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function rA(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new rS,color:new Ew};break;case"SpotLight":n={position:new rS,direction:new rS,color:new Ew,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new rS,color:new Ew,distance:0,decay:0};break;case"HemisphereLight":n={direction:new rS,skyColor:new Ew,groundColor:new Ew};break;case"RectAreaLight":n={color:new Ew,position:new rS,halfWidth:new rS,halfHeight:new rS}}return t[e.id]=n,n}}}let iA=0;function oA(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function sA(t){const e=new rA,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new TE};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new TE,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)r.probe.push(new rS);const i=new rS,o=new NS,s=new NS;return{setup:function(i,o){let s=0,a=0,l=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,c=0,h=0,p=0,f=0,d=0,m=0,g=0,y=0,v=0,_=0;i.sort(oA);const b=!0===o?Math.PI:1;for(let t=0,E=i.length;t<E;t++){const o=i[t],x=o.color,E=o.intensity,S=o.distance,w=o.shadow&&o.shadow.map?o.shadow.map.texture:null;if(o.isAmbientLight)s+=x.r*E*b,a+=x.g*E*b,l+=x.b*E*b;else if(o.isLightProbe){for(let t=0;t<9;t++)r.probe[t].addScaledVector(o.sh.coefficients[t],E);_++}else if(o.isDirectionalLight){const t=e.get(o);if(t.color.copy(o.color).multiplyScalar(o.intensity*b),o.castShadow){const t=o.shadow,e=n.get(o);e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,r.directionalShadow[u]=e,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=o.shadow.matrix,d++}r.directional[u]=t,u++}else if(o.isSpotLight){const t=e.get(o);t.position.setFromMatrixPosition(o.matrixWorld),t.color.copy(x).multiplyScalar(E*b),t.distance=S,t.coneCos=Math.cos(o.angle),t.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),t.decay=o.decay,r.spot[h]=t;const i=o.shadow;if(o.map&&(r.spotLightMap[y]=o.map,y++,i.updateMatrices(o),o.castShadow&&v++),r.spotLightMatrix[h]=i.matrix,o.castShadow){const t=n.get(o);t.shadowBias=i.bias,t.shadowNormalBias=i.normalBias,t.shadowRadius=i.radius,t.shadowMapSize=i.mapSize,r.spotShadow[h]=t,r.spotShadowMap[h]=w,g++}h++}else if(o.isRectAreaLight){const t=e.get(o);t.color.copy(x).multiplyScalar(E),t.halfWidth.set(.5*o.width,0,0),t.halfHeight.set(0,.5*o.height,0),r.rectArea[p]=t,p++}else if(o.isPointLight){const t=e.get(o);if(t.color.copy(o.color).multiplyScalar(o.intensity*b),t.distance=o.distance,t.decay=o.decay,o.castShadow){const t=o.shadow,e=n.get(o);e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,e.shadowCameraNear=t.camera.near,e.shadowCameraFar=t.camera.far,r.pointShadow[c]=e,r.pointShadowMap[c]=w,r.pointShadowMatrix[c]=o.shadow.matrix,m++}r.point[c]=t,c++}else if(o.isHemisphereLight){const t=e.get(o);t.skyColor.copy(o.color).multiplyScalar(E*b),t.groundColor.copy(o.groundColor).multiplyScalar(E*b),r.hemi[f]=t,f++}}p>0&&(!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=HT.LTC_FLOAT_1,r.rectAreaLTC2=HT.LTC_FLOAT_2):(r.rectAreaLTC1=HT.LTC_HALF_1,r.rectAreaLTC2=HT.LTC_HALF_2)),r.ambient[0]=s,r.ambient[1]=a,r.ambient[2]=l;const x=r.hash;x.directionalLength===u&&x.pointLength===c&&x.spotLength===h&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===d&&x.numPointShadows===m&&x.numSpotShadows===g&&x.numSpotMaps===y&&x.numLightProbes===_||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=c,r.hemi.length=f,r.directionalShadow.length=d,r.directionalShadowMap.length=d,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=d,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=g+y-v,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=_,x.directionalLength=u,x.pointLength=c,x.spotLength=h,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=d,x.numPointShadows=m,x.numSpotShadows=g,x.numSpotMaps=y,x.numLightProbes=_,r.version=iA++)},setupView:function(t,e){let n=0,a=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let p=0,f=t.length;p<f;p++){const e=t[p];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),i.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(i),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),i.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(i),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=r.rectArea[u];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),s.identity(),o.copy(e.matrixWorld),o.premultiply(h),s.extractRotation(o),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),u++}else if(e.isPointLight){const t=r.point[a];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),a++}else if(e.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),c++}}},state:r}}function aA(t){const e=new sA(t),n=[],r=[];const i={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){i.camera=t,n.length=0,r.length=0},state:i,setupLights:function(t){e.setup(n,t)},setupLightsView:function(t){e.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function lA(t){let e=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=e.get(n);let o;return void 0===i?(o=new aA(t),e.set(n,[o])):r>=i.length?(o=new aA(t),i.push(o)):o=i[r],o},dispose:function(){e=new WeakMap}}}class uA extends Tw{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yx,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class cA extends Tw{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function hA(t,e,n){let r=new kT;const i=new TE,o=new TE,s=new $E,a=new uA({depthPacking:vx}),l=new cA,u={},c=n.maxTextureSize,h={[Gv]:jv,[jv]:Gv,[zv]:zv},p=new ET({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new TE},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=p.clone();f.defines.HORIZONTAL_PASS=1;const d=new Zw;d.setAttribute("position",new Lw(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new mT(d,p),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fv;let y=this.type;function v(n,r){const o=e.update(m);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new ZE(i.x,i.y)),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,p,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,f,m,null)}function _(e,n,r,i){let o=null;const s=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?l:a,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i,n.addEventListener("dispose",x)),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===Bv?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){t.properties.get(o).light=r}return o}function b(n,i,o,s,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===Bv)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),l=n.material;if(Array.isArray(l)){const e=r.groups;for(let u=0,c=e.length;u<c;u++){const c=e[u],h=l[c.materialIndex];if(h&&h.visible){const e=_(n,h,s,a);n.onBeforeShadow(t,n,i,o,r,e,c),t.renderBufferDirect(o,null,r,e,n,c),n.onAfterShadow(t,n,i,o,r,e,c)}}}else if(l.visible){const e=_(n,l,s,a);n.onBeforeShadow(t,n,i,o,r,e,null),t.renderBufferDirect(o,null,r,e,n,null),n.onAfterShadow(t,n,i,o,r,e,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)b(l[t],i,o,s,a)}function x(t){t.target.removeEventListener("dispose",x);for(const e in u){const n=u[e],r=t.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(e,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),p=t.state;p.setBlending(Hv),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const f=y!==Bv&&this.type===Bv,d=y===Bv&&this.type!==Bv;for(let m=0,g=e.length;m<g;m++){const l=e[m],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const h=u.getFrameExtents();if(i.multiply(h),o.copy(u.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/h.x),i.x=o.x*h.x,u.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/h.y),i.y=o.y*h.y,u.mapSize.y=o.y)),null===u.map||!0===f||!0===d){const t=this.type!==Bv?{minFilter:X_,magFilter:X_}:{};null!==u.map&&u.map.dispose(),u.map=new ZE(i.x,i.y,t),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const g=u.getViewportCount();for(let t=0;t<g;t++){const e=u.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),p.viewport(s),u.updateMatrices(l,t),r=u.getFrustum(),b(n,a,u.camera,l,this.type)}!0!==u.isPointLightShadow&&this.type===Bv&&v(u,a),u.needsUpdate=!1}y=this.type,g.needsUpdate=!1,t.setRenderTarget(l,u,h)}}function pA(t){const e=new function(){let e=!1;const n=new $E;let r=null;const i=new $E(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s,a){!0===a&&(e*=s,r*=s,o*=s),n.set(e,r,o,s),!1===i.equals(n)&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},n=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(e){e?B(t.DEPTH_TEST):G(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case m_:t.depthFunc(t.NEVER);break;case g_:t.depthFunc(t.ALWAYS);break;case y_:t.depthFunc(t.LESS);break;case v_:t.depthFunc(t.LEQUAL);break;case __:t.depthFunc(t.EQUAL);break;case b_:t.depthFunc(t.GEQUAL);break;case x_:t.depthFunc(t.GREATER);break;case E_:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},r=new function(){let e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,u=null;return{setTest:function(n){e||(n?B(t.STENCIL_TEST):G(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&l===r||(t.stencilOp(e,n,r),s=e,a=n,l=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,u=null}}},i=new WeakMap,o=new WeakMap;let s={},a={},l=new WeakMap,u=[],c=null,h=!1,p=null,f=null,d=null,m=null,g=null,y=null,v=null,_=new Ew(0,0,0),b=0,x=!1,E=null,S=null,w=null,T=null,M=null;const R=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let A=!1,P=0;const I=t.getParameter(t.VERSION);-1!==I.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(I)[1]),A=P>=1):-1!==I.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),A=P>=2);let C=null,O={};const N=t.getParameter(t.SCISSOR_BOX),L=t.getParameter(t.VIEWPORT),D=(new $E).fromArray(N),U=(new $E).fromArray(L);function F(e,n,r,i){const o=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let a=0;a<r;a++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,i,0,t.RGBA,t.UNSIGNED_BYTE,o):t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,o);return s}const k={};function B(e){!0!==s[e]&&(t.enable(e),s[e]=!0)}function G(e){!1!==s[e]&&(t.disable(e),s[e]=!1)}k[t.TEXTURE_2D]=F(t.TEXTURE_2D,t.TEXTURE_2D,1),k[t.TEXTURE_CUBE_MAP]=F(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),k[t.TEXTURE_2D_ARRAY]=F(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),k[t.TEXTURE_3D]=F(t.TEXTURE_3D,t.TEXTURE_3D,1,1),e.setClear(0,0,0,1),n.setClear(1),r.setClear(0),B(t.DEPTH_TEST),n.setFunc(v_),V(!1),X(Nv),B(t.CULL_FACE),H(Hv);const j={[$v]:t.FUNC_ADD,[Kv]:t.FUNC_SUBTRACT,[Zv]:t.FUNC_REVERSE_SUBTRACT};j[Jv]=t.MIN,j[Qv]=t.MAX;const z={[t_]:t.ZERO,[e_]:t.ONE,[n_]:t.SRC_COLOR,[i_]:t.SRC_ALPHA,[c_]:t.SRC_ALPHA_SATURATE,[l_]:t.DST_COLOR,[s_]:t.DST_ALPHA,[r_]:t.ONE_MINUS_SRC_COLOR,[o_]:t.ONE_MINUS_SRC_ALPHA,[u_]:t.ONE_MINUS_DST_COLOR,[a_]:t.ONE_MINUS_DST_ALPHA,[h_]:t.CONSTANT_COLOR,[p_]:t.ONE_MINUS_CONSTANT_COLOR,[f_]:t.CONSTANT_ALPHA,[d_]:t.ONE_MINUS_CONSTANT_ALPHA};function H(e,n,r,i,o,s,a,l,u,c){if(e!==Hv){if(!1===h&&(B(t.BLEND),h=!0),e===qv)o=o||n,s=s||r,a=a||i,n===f&&o===g||(t.blendEquationSeparate(j[n],j[o]),f=n,g=o),r===d&&i===m&&s===y&&a===v||(t.blendFuncSeparate(z[r],z[i],z[s],z[a]),d=r,m=i,y=s,v=a),!1!==l.equals(_)&&u===b||(t.blendColor(l.r,l.g,l.b,u),_.copy(l),b=u),p=e,x=!1;else if(e!==p||c!==x){if(f===$v&&g===$v||(t.blendEquation(t.FUNC_ADD),f=$v,g=$v),c)switch(e){case Vv:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Xv:t.blendFunc(t.ONE,t.ONE);break;case Wv:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Yv:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case Vv:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Xv:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Wv:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Yv:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}d=null,m=null,y=null,v=null,_.set(0,0,0),b=0,p=e,x=c}}else!0===h&&(G(t.BLEND),h=!1)}function V(e){E!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),E=e)}function X(e){e!==Ov?(B(t.CULL_FACE),e!==S&&(e===Nv?t.cullFace(t.BACK):e===Lv?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):G(t.CULL_FACE),S=e}function W(e,n,r){e?(B(t.POLYGON_OFFSET_FILL),T===n&&M===r||(t.polygonOffset(n,r),T=n,M=r)):G(t.POLYGON_OFFSET_FILL)}return{buffers:{color:e,depth:n,stencil:r},enable:B,disable:G,bindFramebuffer:function(e,n){return a[e]!==n&&(t.bindFramebuffer(e,n),a[e]=n,e===t.DRAW_FRAMEBUFFER&&(a[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(a[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let r=u,i=!1;if(e){r=l.get(n),void 0===r&&(r=[],l.set(n,r));const o=e.textures;if(r.length!==o.length||r[0]!==t.COLOR_ATTACHMENT0){for(let e=0,n=o.length;e<n;e++)r[e]=t.COLOR_ATTACHMENT0+e;r.length=o.length,i=!0}}else r[0]!==t.BACK&&(r[0]=t.BACK,i=!0);i&&t.drawBuffers(r)},useProgram:function(e){return c!==e&&(t.useProgram(e),c=e,!0)},setBlending:H,setMaterial:function(i,o){i.side===zv?G(t.CULL_FACE):B(t.CULL_FACE);let s=i.side===jv;o&&(s=!s),V(s),i.blending===Vv&&!1===i.transparent?H(Hv):H(i.blending,i.blendEquation,i.blendSrc,i.blendDst,i.blendEquationAlpha,i.blendSrcAlpha,i.blendDstAlpha,i.blendColor,i.blendAlpha,i.premultipliedAlpha),n.setFunc(i.depthFunc),n.setTest(i.depthTest),n.setMask(i.depthWrite),e.setMask(i.colorWrite);const a=i.stencilWrite;r.setTest(a),a&&(r.setMask(i.stencilWriteMask),r.setFunc(i.stencilFunc,i.stencilRef,i.stencilFuncMask),r.setOp(i.stencilFail,i.stencilZFail,i.stencilZPass)),W(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits),!0===i.alphaToCoverage?B(t.SAMPLE_ALPHA_TO_COVERAGE):G(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:V,setCullFace:X,setLineWidth:function(e){e!==w&&(A&&t.lineWidth(e),w=e)},setPolygonOffset:W,setScissorTest:function(e){e?B(t.SCISSOR_TEST):G(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+R-1),C!==e&&(t.activeTexture(e),C=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===C?t.TEXTURE0+R-1:C);let i=O[r];void 0===i&&(i={type:void 0,texture:void 0},O[r]=i),i.type===e&&i.texture===n||(C!==r&&(t.activeTexture(r),C=r),t.bindTexture(e,n||k[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=O[C];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},updateUBOMapping:function(e,n){let r=o.get(n);void 0===r&&(r=new WeakMap,o.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=o.get(n).get(e);i.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(oU){console.error("THREE.WebGLState:",oU)}},scissor:function(e){!1===D.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),s={},C=null,O={},a={},l=new WeakMap,u=[],c=null,h=!1,p=null,f=null,d=null,m=null,g=null,y=null,v=null,_=new Ew(0,0,0),b=0,x=!1,E=null,S=null,w=null,T=null,M=null,D.set(0,0,t.canvas.width,t.canvas.height),U.set(0,0,t.canvas.width,t.canvas.height),e.reset(),n.reset(),r.reset()}}}function fA(t,e,n,r,i,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new TE,c=new WeakMap;let h;const p=new WeakMap;let f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(G){}function d(t,e){return f?new OffscreenCanvas(t,e):CE("canvas")}function m(t,e,n){let r=1;const i=B(t);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&t instanceof VideoFrame){const n=Math.floor(r*i.width),o=Math.floor(r*i.height);void 0===h&&(h=d(n,o));const s=e?d(n,o):h;s.width=n,s.height=o;return s.getContext("2d").drawImage(t,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+o+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),t}return t}function g(t){return t.generateMipmaps&&t.minFilter!==X_&&t.minFilter!==K_}function y(e){t.generateMipmap(e)}function v(n,r,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=r;if(r===t.RED&&(i===t.FLOAT&&(a=t.R32F),i===t.HALF_FLOAT&&(a=t.R16F),i===t.UNSIGNED_BYTE&&(a=t.R8)),r===t.RED_INTEGER&&(i===t.UNSIGNED_BYTE&&(a=t.R8UI),i===t.UNSIGNED_SHORT&&(a=t.R16UI),i===t.UNSIGNED_INT&&(a=t.R32UI),i===t.BYTE&&(a=t.R8I),i===t.SHORT&&(a=t.R16I),i===t.INT&&(a=t.R32I)),r===t.RG&&(i===t.FLOAT&&(a=t.RG32F),i===t.HALF_FLOAT&&(a=t.RG16F),i===t.UNSIGNED_BYTE&&(a=t.RG8)),r===t.RG_INTEGER&&(i===t.UNSIGNED_BYTE&&(a=t.RG8UI),i===t.UNSIGNED_SHORT&&(a=t.RG16UI),i===t.UNSIGNED_INT&&(a=t.RG32UI),i===t.BYTE&&(a=t.RG8I),i===t.SHORT&&(a=t.RG16I),i===t.INT&&(a=t.RG32I)),r===t.RGB&&i===t.UNSIGNED_INT_5_9_9_9_REV&&(a=t.RGB9_E5),r===t.RGBA){const e=s?Mx:BE.getTransfer(o);i===t.FLOAT&&(a=t.RGBA32F),i===t.HALF_FLOAT&&(a=t.RGBA16F),i===t.UNSIGNED_BYTE&&(a=e===Rx?t.SRGB8_ALPHA8:t.RGBA8),i===t.UNSIGNED_SHORT_4_4_4_4&&(a=t.RGBA4),i===t.UNSIGNED_SHORT_5_5_5_1&&(a=t.RGB5_A1)}return a!==t.R16F&&a!==t.R32F&&a!==t.RG16F&&a!==t.RG32F&&a!==t.RGBA16F&&a!==t.RGBA32F||e.get("EXT_color_buffer_float"),a}function _(t,e){return!0===g(t)||t.isFramebufferTexture&&t.minFilter!==X_&&t.minFilter!==K_?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function b(t){const e=t.target;e.removeEventListener("dispose",b),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=p.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(t),0===Object.keys(i).length&&p.delete(n)}r.remove(t)}(e),e.isVideoTexture&&c.delete(e)}function x(e){const n=e.target;n.removeEventListener("dispose",x),function(e){const n=r.get(e);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let e=0;e<n.__webglFramebuffer[r].length;e++)t.deleteFramebuffer(n.__webglFramebuffer[r][e]);else t.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=e.textures;for(let o=0,a=i.length;o<a;o++){const e=r.get(i[o]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),r.remove(i[o])}r.remove(e)}(n)}function E(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete p.get(i)[n.__cacheKey],s.memory.textures--}let S=0;function w(e,i){const o=r.get(e);if(e.isVideoTexture&&function(t){const e=s.render.frame;c.get(t)!==e&&(c.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void I(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+i)}const T={[z_]:t.REPEAT,[H_]:t.CLAMP_TO_EDGE,[V_]:t.MIRRORED_REPEAT},M={[X_]:t.NEAREST,[W_]:t.NEAREST_MIPMAP_NEAREST,[q_]:t.NEAREST_MIPMAP_LINEAR,[K_]:t.LINEAR,[Z_]:t.LINEAR_MIPMAP_NEAREST,[Q_]:t.LINEAR_MIPMAP_LINEAR},R={[Wx]:t.NEVER,[Qx]:t.ALWAYS,[Yx]:t.LESS,[$x]:t.LEQUAL,[qx]:t.EQUAL,[Jx]:t.GEQUAL,[Kx]:t.GREATER,[Zx]:t.NOTEQUAL};function A(n,o){if(o.type!==ab||!1!==e.has("OES_texture_float_linear")||o.magFilter!==K_&&o.magFilter!==Z_&&o.magFilter!==q_&&o.magFilter!==Q_&&o.minFilter!==K_&&o.minFilter!==Z_&&o.minFilter!==q_&&o.minFilter!==Q_||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(n,t.TEXTURE_WRAP_S,T[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,T[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,T[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,M[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,M[o.minFilter]),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,R[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(o.magFilter===X_)return;if(o.minFilter!==q_&&o.minFilter!==Q_)return;if(o.type===ab&&!1===e.has("OES_texture_float_linear"))return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){const s=e.get("EXT_texture_filter_anisotropic");t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy}}}function P(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",b));const i=n.source;let o=p.get(i);void 0===o&&(o={},p.set(i,o));const a=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&E(n)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return r}function I(e,s,a){let l=t.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=t.TEXTURE_3D);const u=P(e,s),c=s.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+a);const h=r.get(c);if(c.version!==h.__version||!0===u){n.activeTexture(t.TEXTURE0+a);const e=BE.getPrimaries(BE.workingColorSpace),r=s.colorSpace===xx?null:BE.getPrimaries(s.colorSpace),p=s.colorSpace===xx||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,s.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,s.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let f=m(s.image,!1,i.maxTextureSize);f=k(s,f);const d=o.convert(s.format,s.colorSpace),b=o.convert(s.type);let x,E=v(s.internalFormat,d,b,s.colorSpace,s.isVideoTexture);A(l,s);const S=s.mipmaps,w=!0!==s.isVideoTexture,T=void 0===h.__version||!0===u,M=c.dataReady,R=_(s,f);if(s.isDepthTexture)E=t.DEPTH_COMPONENT16,s.type===ab?E=t.DEPTH_COMPONENT32F:s.type===sb?E=t.DEPTH_COMPONENT24:s.type===hb&&(E=t.DEPTH24_STENCIL8),T&&(w?n.texStorage2D(t.TEXTURE_2D,1,E,f.width,f.height):n.texImage2D(t.TEXTURE_2D,0,E,f.width,f.height,0,d,b,null));else if(s.isDataTexture)if(S.length>0){w&&T&&n.texStorage2D(t.TEXTURE_2D,R,E,S[0].width,S[0].height);for(let e=0,r=S.length;e<r;e++)x=S[e],w?M&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,x.width,x.height,d,b,x.data):n.texImage2D(t.TEXTURE_2D,e,E,x.width,x.height,0,d,b,x.data);s.generateMipmaps=!1}else w?(T&&n.texStorage2D(t.TEXTURE_2D,R,E,f.width,f.height),M&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,f.width,f.height,d,b,f.data)):n.texImage2D(t.TEXTURE_2D,0,E,f.width,f.height,0,d,b,f.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){w&&T&&n.texStorage3D(t.TEXTURE_2D_ARRAY,R,E,S[0].width,S[0].height,f.depth);for(let e=0,r=S.length;e<r;e++)x=S[e],s.format!==mb?null!==d?w?M&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,x.width,x.height,f.depth,d,x.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,E,x.width,x.height,f.depth,0,x.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?M&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,x.width,x.height,f.depth,d,b,x.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,E,x.width,x.height,f.depth,0,d,b,x.data)}else{w&&T&&n.texStorage2D(t.TEXTURE_2D,R,E,S[0].width,S[0].height);for(let e=0,r=S.length;e<r;e++)x=S[e],s.format!==mb?null!==d?w?M&&n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,x.width,x.height,d,x.data):n.compressedTexImage2D(t.TEXTURE_2D,e,E,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?M&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,x.width,x.height,d,b,x.data):n.texImage2D(t.TEXTURE_2D,e,E,x.width,x.height,0,d,b,x.data)}else if(s.isDataArrayTexture)w?(T&&n.texStorage3D(t.TEXTURE_2D_ARRAY,R,E,f.width,f.height,f.depth),M&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,d,b,f.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,E,f.width,f.height,f.depth,0,d,b,f.data);else if(s.isData3DTexture)w?(T&&n.texStorage3D(t.TEXTURE_3D,R,E,f.width,f.height,f.depth),M&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,d,b,f.data)):n.texImage3D(t.TEXTURE_3D,0,E,f.width,f.height,f.depth,0,d,b,f.data);else if(s.isFramebufferTexture){if(T)if(w)n.texStorage2D(t.TEXTURE_2D,R,E,f.width,f.height);else{let e=f.width,r=f.height;for(let i=0;i<R;i++)n.texImage2D(t.TEXTURE_2D,i,E,e,r,0,d,b,null),e>>=1,r>>=1}}else if(S.length>0){if(w&&T){const e=B(S[0]);n.texStorage2D(t.TEXTURE_2D,R,E,e.width,e.height)}for(let e=0,r=S.length;e<r;e++)x=S[e],w?M&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,d,b,x):n.texImage2D(t.TEXTURE_2D,e,E,d,b,x);s.generateMipmaps=!1}else if(w){if(T){const e=B(f);n.texStorage2D(t.TEXTURE_2D,R,E,e.width,e.height)}M&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,d,b,f)}else n.texImage2D(t.TEXTURE_2D,0,E,d,b,f);g(s)&&y(l),h.__version=c.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}function C(e,i,s,l,u,c){const h=o.convert(s.format,s.colorSpace),p=o.convert(s.type),f=v(s.internalFormat,h,p,s.colorSpace);if(!r.get(i).__hasExternalTextures){const e=Math.max(1,i.width>>c),r=Math.max(1,i.height>>c);u===t.TEXTURE_3D||u===t.TEXTURE_2D_ARRAY?n.texImage3D(u,c,f,e,r,i.depth,0,h,p,null):n.texImage2D(u,c,f,e,r,0,h,p,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),F(i)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,l,u,r.get(s).__webglTexture,0,U(i)):(u===t.TEXTURE_2D||u>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,l,u,r.get(s).__webglTexture,c),n.bindFramebuffer(t.FRAMEBUFFER,null)}function O(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let i=t.DEPTH_COMPONENT24;if(r||F(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===ab?i=t.DEPTH_COMPONENT32F:e.type===sb&&(i=t.DEPTH_COMPONENT24));const r=U(n);F(n)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,i,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,r,i,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,i,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=U(n);r&&!1===F(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):F(n)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=n.textures;for(let i=0;i<e.length;i++){const s=e[i],l=o.convert(s.format,s.colorSpace),u=o.convert(s.type),c=v(s.internalFormat,l,u,s.colorSpace),h=U(n);r&&!1===F(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,c,n.width,n.height):F(n)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,h,c,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,c,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function N(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),w(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,s=U(i);if(i.depthTexture.format===vb)F(i)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0,s):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==_b)throw new Error("Unknown depthTexture format");F(i)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0,s):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),O(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),O(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}const L=[],D=[];function U(t){return Math.min(i.maxSamples,t.samples)}function F(t){const n=r.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function k(t,e){const n=t.colorSpace,r=t.format,i=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||n!==Sx&&n!==xx&&(BE.getTransfer(n)===Rx?r===mb&&i===eb||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),e}function B(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?(u.width=t.naturalWidth||t.width,u.height=t.naturalHeight||t.height):"undefined"!==typeof VideoFrame&&t instanceof VideoFrame?(u.width=t.displayWidth,u.height=t.displayHeight):(u.width=t.width,u.height=t.height),u}this.allocateTextureUnit=function(){const t=S;return t>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+i.maxTextures),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=w,this.setTexture2DArray=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?I(o,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+i)},this.setTexture3D=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?I(o,e,i):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+i)},this.setTextureCube=function(e,s){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,s,a){if(6!==s.image.length)return;const l=P(e,s),u=s.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+a);const c=r.get(u);if(u.version!==c.__version||!0===l){n.activeTexture(t.TEXTURE0+a);const e=BE.getPrimaries(BE.workingColorSpace),r=s.colorSpace===xx?null:BE.getPrimaries(s.colorSpace),h=s.colorSpace===xx||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,s.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,s.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=p||f?f?s.image[t].image:s.image[t]:m(s.image[t],!0,i.maxCubemapSize),d[t]=k(s,d[t]);const b=d[0],x=o.convert(s.format,s.colorSpace),E=o.convert(s.type),S=v(s.internalFormat,x,E,s.colorSpace),w=!0!==s.isVideoTexture,T=void 0===c.__version||!0===l,M=u.dataReady;let R,P=_(s,b);if(A(t.TEXTURE_CUBE_MAP,s),p){w&&T&&n.texStorage2D(t.TEXTURE_CUBE_MAP,P,S,b.width,b.height);for(let e=0;e<6;e++){R=d[e].mipmaps;for(let r=0;r<R.length;r++){const i=R[r];s.format!==mb?null!==x?w?M&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,i.width,i.height,x,i.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,S,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):w?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,i.width,i.height,x,E,i.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,S,i.width,i.height,0,x,E,i.data)}}}else{if(R=s.mipmaps,w&&T){R.length>0&&P++;const e=B(d[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,P,S,e.width,e.height)}for(let e=0;e<6;e++)if(f){w?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,d[e].width,d[e].height,x,E,d[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,d[e].width,d[e].height,0,x,E,d[e].data);for(let r=0;r<R.length;r++){const i=R[r].image[e].image;w?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,i.width,i.height,x,E,i.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,S,i.width,i.height,0,x,E,i.data)}}else{w?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,x,E,d[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,x,E,d[e]);for(let r=0;r<R.length;r++){const i=R[r];w?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,x,E,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,S,x,E,i.image[e])}}}g(s)&&y(t.TEXTURE_CUBE_MAP),c.__version=u.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}(a,e,s):n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture,t.TEXTURE0+s)},this.rebindTextures=function(e,n,i){const o=r.get(e);void 0!==n&&C(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==i&&N(e)},this.setupRenderTarget=function(e){const i=e.texture,a=r.get(e),l=r.get(i);e.addEventListener("dispose",x);const u=e.textures,c=!0===e.isWebGLCubeRenderTarget,h=u.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=i.version,s.memory.textures++),c){a.__webglFramebuffer=[];for(let e=0;e<6;e++)if(i.mipmaps&&i.mipmaps.length>0){a.__webglFramebuffer[e]=[];for(let n=0;n<i.mipmaps.length;n++)a.__webglFramebuffer[e][n]=t.createFramebuffer()}else a.__webglFramebuffer[e]=t.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){a.__webglFramebuffer=[];for(let e=0;e<i.mipmaps.length;e++)a.__webglFramebuffer[e]=t.createFramebuffer()}else a.__webglFramebuffer=t.createFramebuffer();if(h)for(let e=0,n=u.length;e<n;e++){const n=r.get(u[e]);void 0===n.__webglTexture&&(n.__webglTexture=t.createTexture(),s.memory.textures++)}if(e.samples>0&&!1===F(e)){a.__webglMultisampledFramebuffer=t.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<u.length;n++){const r=u[n];a.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,a.__webglColorRenderbuffer[n]);const i=o.convert(r.format,r.colorSpace),s=o.convert(r.type),l=v(r.internalFormat,i,s,r.colorSpace,!0===e.isXRRenderTarget),c=U(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,c,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,a.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(a.__webglDepthRenderbuffer=t.createRenderbuffer(),O(a.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(c){n.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture),A(t.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)C(a.__webglFramebuffer[n][r],e,i,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else C(a.__webglFramebuffer[n],e,i,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,o=u.length;i<o;i++){const o=u[i],s=r.get(o);n.bindTexture(t.TEXTURE_2D,s.__webglTexture),A(t.TEXTURE_2D,o),C(a.__webglFramebuffer,e,o,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,0),g(o)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),A(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)C(a.__webglFramebuffer[n],e,i,t.COLOR_ATTACHMENT0,r,n);else C(a.__webglFramebuffer,e,i,t.COLOR_ATTACHMENT0,r,0);g(i)&&y(r),n.unbindTexture()}e.depthBuffer&&N(e)},this.updateRenderTargetMipmap=function(e){const i=e.textures;for(let o=0,s=i.length;o<s;o++){const s=i[o];if(g(s)){const i=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=r.get(s).__webglTexture;n.bindTexture(i,o),y(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===F(e)){const i=e.textures,o=e.width,s=e.height;let a=t.COLOR_BUFFER_BIT;const u=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=r.get(e),h=i.length>1;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(a|=t.STENCIL_BUFFER_BIT)),h){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,s,0,0,o,s,a,t.NEAREST),!0===l&&(L.length=0,D.length=0,L.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&!1===e.resolveDepthBuffer&&(L.push(u),D.push(u),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,D)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,L))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,c.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&l){const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=C,this.useMultisampledRTT=F}function dA(t,e){return{convert:function(n){let r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xx;const o=BE.getTransfer(i);if(n===eb)return t.UNSIGNED_BYTE;if(n===ub)return t.UNSIGNED_SHORT_4_4_4_4;if(n===cb)return t.UNSIGNED_SHORT_5_5_5_1;if(n===pb)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===nb)return t.BYTE;if(n===rb)return t.SHORT;if(n===ib)return t.UNSIGNED_SHORT;if(n===ob)return t.INT;if(n===sb)return t.UNSIGNED_INT;if(n===ab)return t.FLOAT;if(n===lb)return t.HALF_FLOAT;if(n===fb)return t.ALPHA;if(n===db)return t.RGB;if(n===mb)return t.RGBA;if(n===gb)return t.LUMINANCE;if(n===yb)return t.LUMINANCE_ALPHA;if(n===vb)return t.DEPTH_COMPONENT;if(n===_b)return t.DEPTH_STENCIL;if(n===bb)return t.RED;if(n===xb)return t.RED_INTEGER;if(n===Eb)return t.RG;if(n===Sb)return t.RG_INTEGER;if(n===wb)return t.RGBA_INTEGER;if(n===Tb||n===Mb||n===Rb||n===Ab)if(o===Rx){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Tb)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Mb)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Rb)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ab)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Tb)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Mb)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Rb)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ab)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Pb||n===Ib||n===Cb||n===Ob){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===Pb)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ib)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Cb)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ob)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Nb||n===Lb||n===Db){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Nb||n===Lb)return o===Rx?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Db)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ub||n===Fb||n===kb||n===Bb||n===Gb||n===jb||n===zb||n===Hb||n===Vb||n===Xb||n===Wb||n===Yb||n===qb||n===$b){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Ub)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Fb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===kb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Bb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Gb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===jb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===zb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Hb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Vb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Xb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Wb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Yb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===qb)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===$b)return o===Rx?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Kb||n===Zb||n===Jb){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Kb)return o===Rx?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Zb)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Jb)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Qb||n===tx||n===ex||n===nx){if(r=e.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===Kb)return r.COMPRESSED_RED_RGTC1_EXT;if(n===tx)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===ex)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===nx)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===hb?t.UNSIGNED_INT_24_8:void 0!==t[n]?t[n]:null}}}class mA extends RT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=t}}class gA extends sw{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yA={type:"move"};class vA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new gA,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new gA,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new rS,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new rS),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new gA,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new rS,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new rS),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n),r=this._getHandJoint(l,o);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,u=.005;l.inputState.pinching&&s>a+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=a-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(yA)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new gA;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class _A{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new qE;t.properties.get(r).__webglTexture=e.texture,e.depthNear==n.depthNear&&e.depthFar==n.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}render(t,e){if(null!==this.texture){if(null===this.mesh){const t=e.cameras[0].viewport,n=new ET({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new mT(new jT(20,20),n)}t.render(this.mesh,e)}}reset(){this.texture=null,this.mesh=null}}class bA extends fE{constructor(t,e){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,l=null,u=null,c=null,h=null,p=null,f=null;const d=new _A,m=e.getContextAttributes();let g=null,y=null;const v=[],_=[],b=new TE;let x=null;const E=new RT;E.layers.enable(1),E.viewport=new $E;const S=new RT;S.layers.enable(2),S.viewport=new $E;const w=[E,S],T=new mA;T.layers.enable(1),T.layers.enable(2);let M=null,R=null;function A(t){const e=_.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function P(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",I);for(let t=0;t<v.length;t++){const e=_[t];null!==e&&(_[t]=null,v[t].disconnect(e))}M=null,R=null,d.reset(),t.setRenderTarget(g),p=null,h=null,c=null,r=null,y=null,D.stop(),n.isPresenting=!1,t.setPixelRatio(x),t.setSize(b.width,b.height,!1),n.dispatchEvent({type:"sessionend"})}function I(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=_.indexOf(n);r>=0&&(_[r]=null,v[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=_.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=_.length){_.push(n),r=t;break}if(null===_[t]){_[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new vA,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new vA,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new vA,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(u){if(r=u,null!==r){if(g=t.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",P),r.addEventListener("inputsourceschange",I),!0!==m.xrCompatible&&await e.makeXRCompatible(),x=t.getPixelRatio(),t.getSize(b),void 0===r.renderState.layers){const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};p=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),y=new ZE(p.framebufferWidth,p.framebufferHeight,{format:mb,type:eb,colorSpace:t.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,o=null,s=null;m.depth&&(s=m.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=m.stencil?_b:vb,o=m.stencil?hb:sb);const a={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:i};c=new XRWebGLBinding(r,e),h=c.createProjectionLayer(a),r.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),y=new ZE(h.textureWidth,h.textureHeight,{format:mb,type:eb,depthTexture:new wM(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:t.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}y.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await r.requestReferenceSpace(s),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const C=new rS,O=new rS;function N(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;null!==d.texture&&(t.near=d.depthNear,t.far=d.depthFar),T.near=S.near=E.near=t.near,T.far=S.far=E.far=t.far,M===T.near&&R===T.far||(r.updateRenderState({depthNear:T.near,depthFar:T.far}),M=T.near,R=T.far,E.near=M,E.far=R,S.near=M,S.far=R,E.updateProjectionMatrix(),S.updateProjectionMatrix(),t.updateProjectionMatrix());const e=t.parent,n=T.cameras;N(T,e);for(let r=0;r<n.length;r++)N(n[r],e);2===n.length?function(t,e,n){C.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const r=C.distanceTo(O),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],p=s*c,f=s*h,d=r/(-c+h),m=d*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+d,y=a+d,v=p-m,_=f+(r-m),b=l*a/y*g,x=u*a/y*g;t.projectionMatrix.makePerspective(v,_,b,x,g,y),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(T,E,S):T.projectionMatrix.copy(E.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*yE*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,T,e)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==h||null!==p)return a},this.setFoveation=function(t){a=t,null!==h&&(h.fixedFoveation=t),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==d.texture};let L=null;const D=new BT;D.setAnimationLoop((function(e,i){if(u=i.getViewerPose(l||o),f=i,null!==u){const e=u.views;null!==p&&(t.setRenderTargetFramebuffer(y,p.framebuffer),t.setRenderTarget(y));let n=!1;e.length!==T.cameras.length&&(T.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==p)o=p.getViewport(i);else{const e=c.getViewSubImage(h,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(y,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(y))}let s=w[r];void 0===s&&(s=new RT,s.layers.enable(r),s.viewport=new $E,w[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(T.matrix.copy(s.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===n&&T.cameras.push(s)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=c.getDepthInformation(e[0]);n&&n.isValid&&n.texture&&d.init(t,n,r.renderState)}}for(let t=0;t<v.length;t++){const e=_[t],n=v[t];null!==e&&void 0!==n&&n.update(e,i,l||o)}d.render(t,T),L&&L(e,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null})),this.setAnimationLoop=function(t){L=t},this.dispose=function(){}}}const xA=new HS,EA=new NS;function SA(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===jv&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===jv&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=e.get(i),s=o.envMap,a=o.envMapRotation;if(s&&(r.envMap.value=s,xA.copy(a),xA.x*=-1,xA.y*=-1,xA.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(xA.y*=-1,xA.z*=-1),r.envMapRotation.value.setFromMatrix4(EA.makeRotationFromEuler(xA)),r.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0===t._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,bT(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,i,o,s,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(t,i):i.isMeshToonMaterial?(r(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(r(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(r(t,i),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,n(e.metalnessMap,t.metalnessMapTransform));t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,n(e.roughnessMap,t.roughnessMapTransform));e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===jv&&t.clearcoatNormalScale.value.negate()));e.dispersion>0&&(t.dispersion.value=e.dispersion);e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,i,a)):i.isMeshMatcapMaterial?(r(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?r(t,i):i.isMeshDistanceMaterial?(r(t,i),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,i)):i.isMeshNormalMaterial?r(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i,o,s):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function wA(t,e,n,r){let i={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(t,e,n,r){const i=t.value,o=e+"_"+n;if(void 0===r[o])return r[o]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const t=r[o];if("number"===typeof i||"boolean"===typeof i){if(t!==i)return r[o]=i,!0}else if(!1===t.equals(i))return t.copy(i),!0}return!1}function u(t){const e={boundary:0,storage:0};return"number"===typeof t||"boolean"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const n=e.target;n.removeEventListener("dispose",c);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let p=i[n.id];void 0===p&&(!function(t){const e=t.uniforms;let n=0;const r=16;for(let o=0,s=e.length;o<s;o++){const t=Array.isArray(e[o])?e[o]:[e[o]];for(let e=0,i=t.length;e<i;e++){const i=t[e],o=Array.isArray(i.value)?i.value:[i.value];for(let t=0,e=o.length;t<e;t++){const e=u(o[t]),s=n%r;0!==s&&r-s<e.boundary&&(n+=r-s),i.__data=new Float32Array(e.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=e.storage}}}const i=n%r;i>0&&(n+=r-i);t.__size=n,t.__cache={}}(n),p=function(e){const n=function(){for(let t=0;t<a;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=p,n.addEventListener("dispose",c));const f=h.program;r.updateUBOMapping(n,f);const d=e.render.frame;o[n.id]!==d&&(!function(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const e=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=e.length;n<r;n++){const r=e[n];if(!0===l(r,i,n,o)){const e=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let o=0;o<n.length;o++){const s=n[o],a=u(s);"number"===typeof s||"boolean"===typeof s?(r.__data[0]=s,t.bufferSubData(t.UNIFORM_BUFFER,e+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,r.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),o[n.id]=d)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},o={}}}}class TA{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:e=OE(),context:n=null,depth:r=!0,stencil:i=!1,alpha:o=!1,antialias:s=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:c=!1}=t;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const p=new Uint32Array(4),f=new Int32Array(4);let d=null,m=null;const g=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ex,this._useLegacyLights=!1,this.toneMapping=M_,this.toneMappingExposure=1;const v=this;let _=!1,b=0,x=0,E=null,S=-1,w=null;const T=new $E,M=new $E;let R=null;const A=new Ew(0);let P=0,I=e.width,C=e.height,O=1,N=null,L=null;const D=new $E(0,0,I,C),U=new $E(0,0,I,C);let F=!1;const k=new kT;let B=!1,G=!1;const j=new NS,z=new rS,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===E?O:1}let X,W,Y,q,$,K,Z,J,Q,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,ht,pt,ft,dt,mt=n;function gt(t,n){return e.getContext(t,n)}try{const t={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(Pv)),e.addEventListener("webglcontextlost",_t,!1),e.addEventListener("webglcontextrestored",bt,!1),e.addEventListener("webglcontextcreationerror",xt,!1),null===mt){const e="webgl2";if(mt=gt(e,t),null===mt)throw gt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(oU){throw console.error("THREE.WebGLRenderer: "+oU.message),oU}function yt(){X=new vM(mt),X.init(),pt=new dA(mt,X),W=new ZT(mt,X,t,pt),Y=new pA(mt),q=new xM(mt),$=new JR,K=new fA(mt,X,Y,$,W,pt,q),Z=new QT(v),J=new yM(v),Q=new GT(mt),ft=new $T(mt,Q),tt=new _M(mt,Q,q,ft),et=new SM(mt,tt,Q,q),ut=new EM(mt,W,K),st=new JT($),nt=new ZR(v,Z,J,X,W,ft,st),rt=new SA(v,$),it=new nA,ot=new lA(X),lt=new qT(v,Z,J,Y,et,h,a),at=new hA(v,et,W),dt=new wA(mt,q,W,Y),ct=new KT(mt,X,q),ht=new bM(mt,X,q),q.programs=nt.programs,v.capabilities=W,v.extensions=X,v.properties=$,v.renderLists=it,v.shadowMap=at,v.state=Y,v.info=q}yt();const vt=new bA(v,mt);function _t(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const t=q.autoReset,e=at.enabled,n=at.autoUpdate,r=at.needsUpdate,i=at.type;yt(),q.autoReset=t,at.enabled=e,at.autoUpdate=n,at.needsUpdate=r,at.type=i}function xt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){const e=$.get(t).programs;void 0!==e&&(e.forEach((function(t){nt.releaseProgram(t)})),t.isShaderMaterial&&nt.releaseShaderCache(t))})(t),$.remove(t)}(e)}function St(t,e,n){!0===t.transparent&&t.side===zv&&!1===t.forceSinglePass?(t.side=jv,t.needsUpdate=!0,Nt(t,e,n),t.side=Gv,t.needsUpdate=!0,Nt(t,e,n),t.side=zv):Nt(t,e,n)}this.xr=vt,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){const t=X.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=X.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(t){void 0!==t&&(O=t,this.setSize(I,C,!1))},this.getSize=function(t){return t.set(I,C)},this.setSize=function(t,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=t,C=n,e.width=Math.floor(t*O),e.height=Math.floor(n*O),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(I*O,C*O).floor()},this.setDrawingBufferSize=function(t,n,r){I=t,C=n,O=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(T)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,n,r){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,r),Y.viewport(T.copy(D).multiplyScalar(O).round())},this.getScissor=function(t){return t.copy(U)},this.setScissor=function(t,e,n,r){t.isVector4?U.set(t.x,t.y,t.z,t.w):U.set(t,e,n,r),Y.scissor(M.copy(U).multiplyScalar(O).round())},this.getScissorTest=function(){return F},this.setScissorTest=function(t){Y.setScissorTest(F=t)},this.setOpaqueSort=function(t){N=t},this.setTransparentSort=function(t){L=t},this.getClearColor=function(t){return t.copy(lt.getClearColor())},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let t=!1;if(null!==E){const e=E.texture.format;t=e===wb||e===Sb||e===xb}if(t){const t=E.texture.type,e=t===eb||t===sb||t===ib||t===hb||t===ub||t===cb,n=lt.getClearColor(),r=lt.getClearAlpha(),i=n.r,o=n.g,s=n.b;e?(p[0]=i,p[1]=o,p[2]=s,p[3]=r,mt.clearBufferuiv(mt.COLOR,0,p)):(f[0]=i,f[1]=o,f[2]=s,f[3]=r,mt.clearBufferiv(mt.COLOR,0,f))}else n|=mt.COLOR_BUFFER_BIT}t&&(n|=mt.DEPTH_BUFFER_BIT),e&&(n|=mt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),mt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",_t,!1),e.removeEventListener("webglcontextrestored",bt,!1),e.removeEventListener("webglcontextcreationerror",xt,!1),it.dispose(),ot.dispose(),$.dispose(),Z.dispose(),J.dispose(),et.dispose(),ft.dispose(),dt.dispose(),nt.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",Tt),vt.removeEventListener("sessionend",Mt),Rt.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=H);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=function(t,e,n,r,i){!0!==e.isScene&&(e=H);K.resetTextureUnits();const o=e.fog,s=r.isMeshStandardMaterial?e.environment:null,a=null===E?v.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:Sx,l=(r.isMeshStandardMaterial?J:Z).get(r.envMap||s),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let d=M_;r.toneMapped&&(null!==E&&!0!==E.isXRRenderTarget||(d=v.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,_=$.get(r),b=m.state.lights;if(!0===B&&(!0===G||t!==w)){const e=t===w&&r.id===S;st.setState(r,t,e)}let x=!1;r.version===_.__version?_.needsLights&&_.lightsStateVersion!==b.state.version||_.outputColorSpace!==a||i.isBatchedMesh&&!1===_.batching?x=!0:i.isBatchedMesh||!0!==_.batching?i.isInstancedMesh&&!1===_.instancing?x=!0:i.isInstancedMesh||!0!==_.instancing?i.isSkinnedMesh&&!1===_.skinning?x=!0:i.isSkinnedMesh||!0!==_.skinning?i.isInstancedMesh&&!0===_.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===_.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===_.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===_.instancingMorph&&null!==i.morphTexture||_.envMap!==l||!0===r.fog&&_.fog!==o?x=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===st.numPlanes&&_.numIntersection===st.numIntersection?(_.vertexAlphas!==u||_.vertexTangents!==c||_.morphTargets!==h||_.morphNormals!==p||_.morphColors!==f||_.toneMapping!==d||_.morphTargetsCount!==y)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,_.__version=r.version);let T=_.currentProgram;!0===x&&(T=Nt(r,e,i));let M=!1,R=!1,A=!1;const P=T.getUniforms(),I=_.uniforms;Y.useProgram(T.program)&&(M=!0,R=!0,A=!0);r.id!==S&&(S=r.id,R=!0);if(M||w!==t){P.setValue(mt,"projectionMatrix",t.projectionMatrix),P.setValue(mt,"viewMatrix",t.matrixWorldInverse);const e=P.map.cameraPosition;void 0!==e&&e.setValue(mt,z.setFromMatrixPosition(t.matrixWorld)),W.logarithmicDepthBuffer&&P.setValue(mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&P.setValue(mt,"isOrthographic",!0===t.isOrthographicCamera),w!==t&&(w=t,R=!0,A=!0)}if(i.isSkinnedMesh){P.setOptional(mt,i,"bindMatrix"),P.setOptional(mt,i,"bindMatrixInverse");const t=i.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),P.setValue(mt,"boneTexture",t.boneTexture,K))}i.isBatchedMesh&&(P.setOptional(mt,i,"batchingTexture"),P.setValue(mt,"batchingTexture",i._matricesTexture,K));const N=n.morphAttributes;void 0===N.position&&void 0===N.normal&&void 0===N.color||ut.update(i,n,T);(R||_.receiveShadow!==i.receiveShadow)&&(_.receiveShadow=i.receiveShadow,P.setValue(mt,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(I.envMap.value=l,I.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==e.environment&&(I.envMapIntensity.value=e.environmentIntensity);R&&(P.setValue(mt,"toneMappingExposure",v.toneMappingExposure),_.needsLights&&(D=A,(L=I).ambientLightColor.needsUpdate=D,L.lightProbe.needsUpdate=D,L.directionalLights.needsUpdate=D,L.directionalLightShadows.needsUpdate=D,L.pointLights.needsUpdate=D,L.pointLightShadows.needsUpdate=D,L.spotLights.needsUpdate=D,L.spotLightShadows.needsUpdate=D,L.rectAreaLights.needsUpdate=D,L.hemisphereLights.needsUpdate=D),o&&!0===r.fog&&rt.refreshFogUniforms(I,o),rt.refreshMaterialUniforms(I,r,O,C,m.state.transmissionRenderTarget[t.id]),PR.upload(mt,Lt(_),I,K));var L,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(PR.upload(mt,Lt(_),I,K),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&P.setValue(mt,"center",i.center);if(P.setValue(mt,"modelViewMatrix",i.modelViewMatrix),P.setValue(mt,"normalMatrix",i.normalMatrix),P.setValue(mt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++){const n=t[e];dt.update(n,T),dt.bind(n,T)}}return T}(t,e,n,r,i);Y.setMaterial(r,s);let l=n.index,u=1;if(!0===r.wireframe){if(l=tt.getWireframeAttribute(n),void 0===l)return;u=2}const c=n.drawRange,h=n.attributes.position;let p=c.start*u,f=(c.start+c.count)*u;null!==o&&(p=Math.max(p,o.start*u),f=Math.min(f,(o.start+o.count)*u)),null!==l?(p=Math.max(p,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(p=Math.max(p,0),f=Math.min(f,h.count));const d=f-p;if(d<0||d===1/0)return;let g;ft.setup(i,r,a,n,l);let y=ct;if(null!==l&&(g=Q.get(l),y=ht,y.setIndex(g)),i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*V()),y.setMode(mt.LINES)):y.setMode(mt.TRIANGLES);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Y.setLineWidth(t*V()),i.isLineSegments?y.setMode(mt.LINES):i.isLineLoop?y.setMode(mt.LINE_LOOP):y.setMode(mt.LINE_STRIP)}else i.isPoints?y.setMode(mt.POINTS):i.isSprite&&y.setMode(mt.TRIANGLES);if(i.isBatchedMesh)null!==i._multiDrawInstances?y.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances):y.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)y.renderInstances(p,d,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);y.renderInstances(p,d,e)}else y.render(p,d)},this.compile=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=t),m=ot.get(n),m.init(e),y.push(m),n.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),t!==n&&t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),m.setupLights(v._useLegacyLights);const r=new Set;return t.traverse((function(t){const e=t.material;if(e)if(Array.isArray(e))for(let i=0;i<e.length;i++){const o=e[i];St(o,n,t),r.add(o)}else St(e,n,t),r.add(e)})),y.pop(),m=null,r},this.compileAsync=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(t,e,n);return new Promise((e=>{function n(){r.forEach((function(t){$.get(t).currentProgram.isReady()&&r.delete(t)})),0!==r.size?setTimeout(n,10):e(t)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let wt=null;function Tt(){Rt.stop()}function Mt(){Rt.start()}const Rt=new BT;function At(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||k.intersectsSprite(t)){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=et.update(t),i=t.material;i.visible&&d.push(t,e,i,n,z.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||k.intersectsObject(t))){const e=et.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),z.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),z.copy(e.boundingSphere.center)),z.applyMatrix4(t.matrixWorld).applyMatrix4(j)),Array.isArray(i)){const r=e.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&d.push(t,e,a,n,z.z,s)}}else i.visible&&d.push(t,e,i,n,z.z,null)}const i=t.children;for(let o=0,s=i.length;o<s;o++)At(i[o],e,n,r)}function Pt(t,e,n,r){const i=t.opaque,o=t.transmissive,s=t.transparent;m.setupLightsView(n),!0===B&&st.setGlobalState(v.clippingPlanes,n),r&&Y.viewport(T.copy(r)),i.length>0&&Ct(i,e,n),o.length>0&&Ct(o,e,n),s.length>0&&Ct(s,e,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function It(t,e,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[r.id]&&(m.state.transmissionRenderTarget[r.id]=new ZE(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")||X.has("EXT_color_buffer_float")?lb:eb,minFilter:Q_,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const o=m.state.transmissionRenderTarget[r.id],s=r.viewport||T;o.setSize(s.z,s.w);const a=v.getRenderTarget();v.setRenderTarget(o),v.getClearColor(A),P=v.getClearAlpha(),P<1&&v.setClearColor(16777215,.5),v.clear();const l=v.toneMapping;v.toneMapping=M_;const u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),m.setupLightsView(r),!0===B&&st.setGlobalState(v.clippingPlanes,r),Ct(t,n,r),K.updateMultisampleRenderTarget(o),K.updateRenderTargetMipmap(o),!1===X.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.object,a=o.geometry,l=o.material,u=o.group;if(l.side===zv&&s.layers.test(r.layers)){const e=l.side;l.side=jv,l.needsUpdate=!0,Ot(s,n,r,a,l,u),l.side=e,l.needsUpdate=!0,t=!0}}!0===t&&(K.updateMultisampleRenderTarget(o),K.updateRenderTargetMipmap(o))}v.setRenderTarget(a),v.setClearColor(A,P),void 0!==u&&(r.viewport=u),v.toneMapping=l}function Ct(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.object,a=o.geometry,l=null===r?o.material:r,u=o.group;s.layers.test(n.layers)&&Ot(s,e,n,a,l,u)}}function Ot(t,e,n,r,i,o){t.onBeforeRender(v,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(v,e,n,r,t,o),!0===i.transparent&&i.side===zv&&!1===i.forceSinglePass?(i.side=jv,i.needsUpdate=!0,v.renderBufferDirect(n,e,r,i,t,o),i.side=Gv,i.needsUpdate=!0,v.renderBufferDirect(n,e,r,i,t,o),i.side=zv):v.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(v,e,n,r,i,o)}function Nt(t,e,n){!0!==e.isScene&&(e=H);const r=$.get(t),i=m.state.lights,o=m.state.shadowsArray,s=i.state.version,a=nt.getParameters(t,i.state,o,e,n),l=nt.getProgramCacheKey(a);let u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?J:Z).get(t.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===u&&(t.addEventListener("dispose",Et),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===s)return Dt(t,a),c}else a.uniforms=nt.getUniforms(t),t.onBuild(n,a,v),t.onBeforeCompile(a,v),c=nt.acquireProgram(a,l),u.set(l,c),r.uniforms=a.uniforms;const h=r.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=st.uniform),Dt(t,a),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=c,r.uniformsList=null,c}function Lt(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=PR.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function Dt(t,e){const n=$.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.instancingMorph=e.instancingMorph,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Rt.setAnimationLoop((function(t){wt&&wt(t)})),"undefined"!==typeof self&&Rt.setContext(self),this.setAnimationLoop=function(t){wt=t,vt.setAnimationLoop(t),null===t?Rt.stop():Rt.start()},vt.addEventListener("sessionstart",Tt),vt.addEventListener("sessionend",Mt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(!0===vt.cameraAutoUpdate&&vt.updateCamera(e),e=vt.getCamera()),!0===t.isScene&&t.onBeforeRender(v,t,e,E),m=ot.get(t,y.length),m.init(e),y.push(m),j.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),k.setFromProjectionMatrix(j),G=this.localClippingEnabled,B=st.init(this.clippingPlanes,G),d=it.get(t,g.length),d.init(),g.push(d),At(t,e,0,v.sortObjects),d.finish(),!0===v.sortObjects&&d.sort(N,L);const n=!1===vt.enabled||!1===vt.isPresenting||!1===vt.hasDepthSensing();n&&lt.addToRenderList(d,t),this.info.render.frame++,!0===B&&st.beginShadows();const r=m.state.shadowsArray;at.render(r,t,e),!0===B&&st.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=d.opaque,o=d.transmissive;if(m.setupLights(v._useLegacyLights),e.isArrayCamera){const r=e.cameras;if(o.length>0)for(let e=0,n=r.length;e<n;e++){It(i,o,t,r[e])}n&&lt.render(t);for(let e=0,n=r.length;e<n;e++){const n=r[e];Pt(d,t,n,n.viewport)}}else o.length>0&&It(i,o,t,e),n&&lt.render(t),Pt(d,t,e);null!==E&&(K.updateMultisampleRenderTarget(E),K.updateRenderTargetMipmap(E)),!0===t.isScene&&t.onAfterRender(v,t,e),ft.resetDefaultState(),S=-1,w=null,y.pop(),y.length>0?(m=y[y.length-1],!0===B&&st.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,g.pop(),d=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(t,e,n){$.get(t.texture).__webglTexture=e,$.get(t.depthTexture).__webglTexture=n;const r=$.get(t);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,e){const n=$.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;E=t,b=e,x=n;let r=!0,i=null,o=!1,s=!1;if(t){const a=$.get(t);void 0!==a.__useDefaultFramebuffer?(Y.bindFramebuffer(mt.FRAMEBUFFER,null),r=!1):void 0===a.__webglFramebuffer?K.setupRenderTarget(t):a.__hasExternalTextures&&K.rebindTextures(t,$.get(t.texture).__webglTexture,$.get(t.depthTexture).__webglTexture);const l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const u=$.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=Array.isArray(u[e])?u[e][n]:u[e],o=!0):i=t.samples>0&&!1===K.useMultisampledRTT(t)?$.get(t).__webglMultisampledFramebuffer:Array.isArray(u)?u[n]:u,T.copy(t.viewport),M.copy(t.scissor),R=t.scissorTest}else T.copy(D).multiplyScalar(O).floor(),M.copy(U).multiplyScalar(O).floor(),R=F;if(Y.bindFramebuffer(mt.FRAMEBUFFER,i)&&r&&Y.drawBuffers(t,i),Y.viewport(T),Y.scissor(M),Y.setScissorTest(R),o){const r=$.get(t.texture);mt.framebufferTexture2D(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(s){const r=$.get(t.texture),i=e||0;mt.framebufferTextureLayer(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=$.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){Y.bindFramebuffer(mt.FRAMEBUFFER,a);try{const s=t.texture,a=s.format,l=s.type;if(!W.textureFormatReadable(a))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!W.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&mt.readPixels(e,n,r,i,pt.convert(a),pt.convert(l),o)}finally{const t=null!==E?$.get(E).__webglFramebuffer:null;Y.bindFramebuffer(mt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);K.setTexture2D(e,0),mt.copyTexSubImage2D(mt.TEXTURE_2D,n,0,0,t.x,t.y,i,o),Y.unbindTexture()},this.copyTextureToTexture=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=e.image.width,o=e.image.height,s=pt.convert(n.format),a=pt.convert(n.type);K.setTexture2D(n,0),mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,n.flipY),mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),mt.pixelStorei(mt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?mt.texSubImage2D(mt.TEXTURE_2D,r,t.x,t.y,i,o,s,a,e.image.data):e.isCompressedTexture?mt.compressedTexSubImage2D(mt.TEXTURE_2D,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):mt.texSubImage2D(mt.TEXTURE_2D,r,t.x,t.y,s,a,e.image),0===r&&n.generateMipmaps&&mt.generateMipmap(mt.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=t.max.x-t.min.x,s=t.max.y-t.min.y,a=t.max.z-t.min.z,l=pt.convert(r.format),u=pt.convert(r.type);let c;if(r.isData3DTexture)K.setTexture3D(r,0),c=mt.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),c=mt.TEXTURE_2D_ARRAY}mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,r.flipY),mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),mt.pixelStorei(mt.UNPACK_ALIGNMENT,r.unpackAlignment);const h=mt.getParameter(mt.UNPACK_ROW_LENGTH),p=mt.getParameter(mt.UNPACK_IMAGE_HEIGHT),f=mt.getParameter(mt.UNPACK_SKIP_PIXELS),d=mt.getParameter(mt.UNPACK_SKIP_ROWS),m=mt.getParameter(mt.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[i]:n.image;mt.pixelStorei(mt.UNPACK_ROW_LENGTH,g.width),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,g.height),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,t.min.x),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,t.min.y),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?mt.texSubImage3D(c,i,e.x,e.y,e.z,o,s,a,l,u,g.data):r.isCompressedArrayTexture?mt.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,s,a,l,g.data):mt.texSubImage3D(c,i,e.x,e.y,e.z,o,s,a,l,u,g),mt.pixelStorei(mt.UNPACK_ROW_LENGTH,h),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,p),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,f),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,d),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&mt.generateMipmap(c),Y.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?K.setTextureCube(t,0):t.isData3DTexture?K.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?K.setTexture2DArray(t,0):K.setTexture2D(t,0),Y.unbindTexture()},this.resetState=function(){b=0,x=0,E=null,Y.reset(),ft.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return hE}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===wx?"display-p3":"srgb",e.unpackColorSpace=BE.workingColorSpace===Tx?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class MA{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Ew(t),this.density=e}clone(){return new MA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class RA{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Ew(t),this.near=e,this.far=n}clone(){return new RA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class AA extends sw{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new HS,this.environmentIntensity=1,this.environmentRotation=new HS,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class PA{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=tE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=vE()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return LE("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vE()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vE()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const IA=new rS;class CA{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)IA.fromBufferAttribute(this,e),IA.applyMatrix4(t),this.setXYZ(e,IA.x,IA.y,IA.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)IA.fromBufferAttribute(this,e),IA.applyNormalMatrix(t),this.setXYZ(e,IA.x,IA.y,IA.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)IA.fromBufferAttribute(this,e),IA.transformDirection(t),this.setXYZ(e,IA.x,IA.y,IA.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=EE(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=SE(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=SE(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=SE(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=SE(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=SE(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=EE(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=EE(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=EE(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=EE(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array),r=SE(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=SE(e,this.array),n=SE(n,this.array),r=SE(r,this.array),i=SE(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Lw(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new CA(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class OA extends Tw{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ew(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let NA;const LA=new rS,DA=new rS,UA=new rS,FA=new TE,kA=new TE,BA=new NS,GA=new rS,jA=new rS,zA=new rS,HA=new TE,VA=new TE,XA=new TE;class WA extends sw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OA;if(super(),this.isSprite=!0,this.type="Sprite",void 0===NA){NA=new Zw;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new PA(t,5);NA.setIndex([0,1,2,0,2,3]),NA.setAttribute("position",new CA(e,3,0,!1)),NA.setAttribute("uv",new CA(e,2,3,!1))}this.geometry=NA,this.material=t,this.center=new TE(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),DA.setFromMatrixScale(this.matrixWorld),BA.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),UA.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&DA.multiplyScalar(-UA.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;YA(GA.set(-.5,-.5,0),UA,o,DA,r,i),YA(jA.set(.5,-.5,0),UA,o,DA,r,i),YA(zA.set(.5,.5,0),UA,o,DA,r,i),HA.set(0,0),VA.set(1,0),XA.set(1,1);let s=t.ray.intersectTriangle(GA,jA,zA,!1,LA);if(null===s&&(YA(jA.set(-.5,.5,0),UA,o,DA,r,i),VA.set(0,1),s=t.ray.intersectTriangle(GA,zA,jA,!1,LA),null===s))return;const a=t.ray.origin.distanceTo(LA);a<t.near||a>t.far||e.push({distance:a,point:LA.clone(),uv:yw.getInterpolation(LA,GA,jA,zA,HA,VA,XA,new TE),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function YA(t,e,n,r,i,o){FA.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(kA.x=o*FA.x-i*FA.y,kA.y=i*FA.x+o*FA.y):kA.copy(FA),t.copy(e),t.x+=kA.x,t.y+=kA.y,t.applyMatrix4(BA)}const qA=new rS,$A=new rS;class KA extends sw{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,r=e.length;n<r;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance,t.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=Math.abs(e);const r=this.levels;let i;for(i=0;i<r.length&&!(e<r[i].distance);i++);return r.splice(i,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){qA.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(qA);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){qA.setFromMatrixPosition(t.matrixWorld),$A.setFromMatrixPosition(this.matrixWorld);const n=qA.distanceTo($A)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i;r++){let t=e[r].distance;if(e[r].object.visible&&(t-=t*e[r].hysteresis),!(n>=t))break;e[r-1].object.visible=!1,e[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const t=n[r];e.object.levels.push({object:t.object.uuid,distance:t.distance,hysteresis:t.hysteresis})}return e}}const ZA=new rS,JA=new $E,QA=new $E,tP=new rS,eP=new NS,nP=new rS,rP=new wS,iP=new NS,oP=new OS;class sP extends mT{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=L_,this.bindMatrix=new NS,this.bindMatrixInverse=new NS,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new sS),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,nP),this.boundingBox.expandByPoint(nP)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new wS),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,nP),this.boundingSphere.expandByPoint(nP)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),rP.copy(this.boundingSphere),rP.applyMatrix4(r),!1!==t.ray.intersectsSphere(rP)&&(iP.copy(r).invert(),oP.copy(t.ray).applyMatrix4(iP),null!==this.boundingBox&&!1===oP.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,oP)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new $E,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===L_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===D_?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;JA.fromBufferAttribute(r.attributes.skinIndex,t),QA.fromBufferAttribute(r.attributes.skinWeight,t),ZA.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=QA.getComponent(i);if(0!==t){const r=JA.getComponent(i);eP.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(tP.copy(ZA).applyMatrix4(eP),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}class aP extends sw{constructor(){super(),this.isBone=!0,this.type="Bone"}}class lP extends qE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:X_,arguments.length>9&&void 0!==arguments[9]?arguments[9]:X_,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const uP=new NS,cP=new NS;class hP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=vE(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new NS)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new NS;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=t.length;i<o;i++){const r=t[i]?t[i].matrixWorld:cP;uP.multiplyMatrices(r,e[i]),uP.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new hP(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new lP(e,t,t,mb,ab);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new aP),this.bones.push(i),this.boneInverses.push((new NS).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}}class pP extends Lw{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const fP=new NS,dP=new NS,mP=[],gP=new sS,yP=new NS,vP=new mT,_P=new wS;class bP extends mT{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new pP(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,yP)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new sS),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,fP),gP.copy(t.boundingBox).applyMatrix4(fP),this.boundingBox.union(gP)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new wS),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,fP),_P.copy(t.boundingSphere).applyMatrix4(fP),this.boundingSphere.union(_P)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,r=this.morphTexture.source.data.data,i=t*(n.length+1)+1;for(let o=0;o<n.length;o++)n[o]=r[i+o]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(vP.geometry=this.geometry,vP.material=this.material,void 0!==vP.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),_P.copy(this.boundingSphere),_P.applyMatrix4(n),!1!==t.ray.intersectsSphere(_P)))for(let i=0;i<r;i++){this.getMatrixAt(i,fP),dP.multiplyMatrices(n,fP),vP.matrixWorld=dP,vP.raycast(t,mP);for(let t=0,n=mP.length;t<n;t++){const n=mP[t];n.instanceId=i,n.object=this,e.push(n)}mP.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new pP(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new lP(new Float32Array(r*this.count),r,this.count,bb,ab));const i=this.morphTexture.source.data.data;let o=0;for(let l=0;l<n.length;l++)o+=n[l];const s=this.geometry.morphTargetsRelative?1:1-o,a=r*t;i[a]=s,i.set(n,a+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function xP(t,e){return t.z-e.z}function EP(t,e){return e.z-t.z}class SP{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const i=n[this.index];r.push(i),this.index++,i.start=t.start,i.count=t.count,i.z=e}reset(){this.list.length=0,this.index=0}}const wP="batchId",TP=new NS,MP=new NS,RP=new NS,AP=new NS,PP=new kT,IP=new sS,CP=new wS,OP=new rS,NP=new SP,LP=new mT,DP=[];function UP(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let o=0;o<i;o++)for(let i=0;i<r;i++)e.setComponent(o+n,i,t.getComponent(o,i))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class FP extends mT{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*e,r=arguments.length>3?arguments[3]:void 0;super(new Zw,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let t=Math.sqrt(4*this._maxGeometryCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new lP(e,t,t,mb,ab);this._matricesTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in t.attributes){const i=t.getAttribute(r),{array:o,itemSize:s,normalized:a}=i,l=new o.constructor(n*s),u=new Lw(l,s,a);e.setAttribute(r,u)}if(null!==t.getIndex()){const t=n>65536?new Uint32Array(i):new Uint16Array(i);e.setIndex(new Lw(t,1))}const o=r>65536?new Uint32Array(n):new Uint16Array(n);e.setAttribute(wP,new Lw(o,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(wP))throw new Error('BatchedMesh: Geometry cannot use attribute "'.concat(wP,'"'));const e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(n===wP)continue;if(!t.hasAttribute(n))throw new Error('BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const r=t.getAttribute(n),i=e.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new sS);const t=this._geometryCount,e=this.boundingBox,n=this._active;e.makeEmpty();for(let r=0;r<t;r++)!1!==n[r]&&(this.getMatrixAt(r,TP),this.getBoundingBoxAt(r,IP).applyMatrix4(TP),e.union(IP))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wS);const t=this._geometryCount,e=this.boundingSphere,n=this._active;e.makeEmpty();for(let r=0;r<t;r++)!1!==n[r]&&(this.getMatrixAt(r,TP),this.getBoundingSphereAt(r,CP).applyMatrix4(TP),e.union(CP))}addGeometry(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let i=null;const o=this._reservedRanges,s=this._drawRanges,a=this._bounds;0!==this._geometryCount&&(i=o[o.length-1]),r.vertexCount=-1===e?t.getAttribute("position").count:e,r.vertexStart=null===i?0:i.vertexStart+i.vertexCount;const l=t.getIndex(),u=null!==l;if(u&&(r.indexCount=-1===n?l.count:n,r.indexStart=null===i?0:i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const c=this._visibility,h=this._active,p=this._matricesTexture,f=this._matricesTexture.image.data;c.push(!0),h.push(!0);const d=this._geometryCount;this._geometryCount++,RP.toArray(f,16*d),p.needsUpdate=!0,o.push(r),s.push({start:u?r.indexStart:r.vertexStart,count:-1}),a.push({boxInitialized:!1,box:new sS,sphereInitialized:!1,sphere:new wS});const m=this.geometry.getAttribute(wP);for(let g=0;g<r.vertexCount;g++)m.setX(r.vertexStart+g,d);return m.needsUpdate=!0,this.setGeometryAt(d,t),d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),o=e.getIndex(),s=this._reservedRanges[t];if(r&&o.count>s.indexCount||e.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const a=s.vertexStart,l=s.vertexCount;for(const p in n.attributes){if(p===wP)continue;const t=e.getAttribute(p),r=n.getAttribute(p);UP(t,r,a);const i=t.itemSize;for(let e=t.count,n=l;e<n;e++){const t=a+e;for(let e=0;e<i;e++)r.setComponent(t,e,0)}r.needsUpdate=!0,r.addUpdateRange(a*i,l*i)}if(r){const t=s.indexStart;for(let e=0;e<o.count;e++)i.setX(t+e,a+o.getX(e));for(let e=o.count,n=s.indexCount;e<n;e++)i.setX(t+e,a);i.needsUpdate=!0,i.addUpdateRange(t,s.indexCount)}const u=this._bounds[t];null!==e.boundingBox?(u.box.copy(e.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,null!==e.boundingSphere?(u.sphere.copy(e.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const c=this._drawRanges[t],h=e.getAttribute("position");return c.count=r?o.count:h.count,this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._active;return t>=e.length||!1===e[t]||(e[t]=!1,this._visibilityChanged=!0),this}getInstanceCountAt(t){return null===this._multiDrawInstances?null:this._multiDrawInstances[t]}setInstanceCountAt(t,e){return null===this._multiDrawInstances&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[t]=e,t}getBoundingBoxAt(t,e){if(!1===this._active[t])return null;const n=this._bounds[t],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();const e=i.index,o=i.attributes.position,s=this._drawRanges[t];for(let t=s.start,n=s.start+s.count;t<n;t++){let n=t;e&&(n=e.getX(n)),r.expandByPoint(OP.fromBufferAttribute(o,n))}n.boxInitialized=!0}return e.copy(r),e}getBoundingSphereAt(t,e){if(!1===this._active[t])return null;const n=this._bounds[t],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(t,IP),IP.getCenter(r.center);const e=i.index,o=i.attributes.position,s=this._drawRanges[t];let a=0;for(let t=s.start,n=s.start+s.count;t<n;t++){let n=t;e&&(n=e.getX(n)),OP.fromBufferAttribute(o,n),a=Math.max(a,r.center.distanceToSquared(OP))}r.radius=Math.sqrt(a),n.sphereInitialized=!0}return e.copy(r),e}setMatrixAt(t,e){const n=this._active,r=this._matricesTexture,i=this._matricesTexture.image.data;return t>=this._geometryCount||!1===n[t]||(e.toArray(i,16*t),r.needsUpdate=!0),this}getMatrixAt(t,e){const n=this._active,r=this._matricesTexture.image.data;return t>=this._geometryCount||!1===n[t]?null:e.fromArray(r,16*t)}setVisibleAt(t,e){const n=this._visibility,r=this._active;return t>=this._geometryCount||!1===r[t]||n[t]===e||(n[t]=e,this._visibilityChanged=!0),this}getVisibleAt(t){const e=this._visibility,n=this._active;return!(t>=this._geometryCount||!1===n[t])&&e[t]}raycast(t,e){const n=this._visibility,r=this._active,i=this._drawRanges,o=this._geometryCount,s=this.matrixWorld,a=this.geometry;LP.material=this.material,LP.geometry.index=a.index,LP.geometry.attributes=a.attributes,null===LP.geometry.boundingBox&&(LP.geometry.boundingBox=new sS),null===LP.geometry.boundingSphere&&(LP.geometry.boundingSphere=new wS);for(let l=0;l<o;l++){if(!n[l]||!r[l])continue;const o=i[l];LP.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(l,LP.matrixWorld).premultiply(s),this.getBoundingBoxAt(l,LP.geometry.boundingBox),this.getBoundingSphereAt(l,LP.geometry.boundingSphere),LP.raycast(t,DP);for(let t=0,n=DP.length;t<n;t++){const n=DP[t];n.object=this,n.batchId=l,e.push(n)}DP.length=0}LP.material=null,LP.geometry.index=null,LP.geometry.attributes={},LP.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map((t=>({...t}))),this._reservedRanges=t._reservedRanges.map((t=>({...t}))),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map((t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()}))),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(t,e,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),s=null===o?1:o.array.BYTES_PER_ELEMENT,a=this._active,l=this._visibility,u=this._multiDrawStarts,c=this._multiDrawCounts,h=this._drawRanges,p=this.perObjectFrustumCulled;p&&(AP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),PP.setFromProjectionMatrix(AP,t.coordinateSystem));let f=0;if(this.sortObjects){MP.copy(this.matrixWorld).invert(),OP.setFromMatrixPosition(n.matrixWorld).applyMatrix4(MP);for(let n=0,r=l.length;n<r;n++)if(l[n]&&a[n]){this.getMatrixAt(n,TP),this.getBoundingSphereAt(n,CP).applyMatrix4(TP);let t=!1;if(p&&(t=!PP.intersectsSphere(CP)),!t){const t=OP.distanceTo(CP.center);NP.push(h[n],t)}}const t=NP.list,e=this.customSort;null===e?t.sort(i.transparent?EP:xP):e.call(this,t,n);for(let n=0,r=t.length;n<r;n++){const e=t[n];u[f]=e.start*s,c[f]=e.count,f++}NP.reset()}else for(let d=0,m=l.length;d<m;d++)if(l[d]&&a[d]){let t=!1;if(p&&(this.getMatrixAt(d,TP),this.getBoundingSphereAt(d,CP).applyMatrix4(TP),t=!PP.intersectsSphere(CP)),!t){const t=h[d];u[f]=t.start*s,c[f]=t.count,f++}}this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(t,e,n,r,i,o){this.onBeforeRender(t,null,r,i,o)}}class kP extends Tw{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ew(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const BP=new rS,GP=new rS,jP=new NS,zP=new OS,HP=new wS,VP=new rS,XP=new rS;class WP extends sw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zw,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kP;super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)BP.fromBufferAttribute(e,t-1),GP.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=BP.distanceTo(GP);t.setAttribute("lineDistance",new Hw(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),HP.copy(n.boundingSphere),HP.applyMatrix4(r),HP.radius+=i,!1===t.ray.intersectsSphere(HP))return;jP.copy(r).invert(),zP.copy(t.ray).applyMatrix4(jP);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=this.isLineSegments?2:1,u=n.index,c=n.attributes.position;if(null!==u){const n=Math.max(0,o.start),r=Math.min(u.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=l){const n=u.getX(i),r=u.getX(i+1),o=YP(this,t,zP,a,n,r);o&&e.push(o)}if(this.isLineLoop){const i=u.getX(r-1),o=u.getX(n),s=YP(this,t,zP,a,i,o);s&&e.push(s)}}else{const n=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=l){const n=YP(this,t,zP,a,i,i+1);n&&e.push(n)}if(this.isLineLoop){const i=YP(this,t,zP,a,r-1,n);i&&e.push(i)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function YP(t,e,n,r,i,o){const s=t.geometry.attributes.position;BP.fromBufferAttribute(s,i),GP.fromBufferAttribute(s,o);if(n.distanceSqToSegment(BP,GP,VP,XP)>r)return;VP.applyMatrix4(t.matrixWorld);const a=e.ray.origin.distanceTo(VP);return a<e.near||a>e.far?void 0:{distance:a,point:XP.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,object:t}}const qP=new rS,$P=new rS;class KP extends WP{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)qP.fromBufferAttribute(e,t),$P.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+qP.distanceTo($P);t.setAttribute("lineDistance",new Hw(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ZP extends WP{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class JP extends Tw{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ew(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const QP=new NS,tI=new OS,eI=new wS,nI=new rS;class rI extends sw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zw,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JP;super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),eI.copy(n.boundingSphere),eI.applyMatrix4(r),eI.radius+=i,!1===t.ray.intersectsSphere(eI))return;QP.copy(r).invert(),tI.copy(t.ray).applyMatrix4(QP);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=n.index,u=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);nI.fromBufferAttribute(u,i),iI(nI,i,a,r,t,e,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(u.count,o.start+o.count);n<i;n++)nI.fromBufferAttribute(u,n),iI(nI,n,a,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function iI(t,e,n,r,i,o,s){const a=tI.distanceSqToPoint(t);if(a<n){const n=new rS;tI.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:s})}}class oI extends qE{constructor(t,e,n,r,i,o,s,a,l){super(t,e,n,r,i,o,s,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:K_,this.magFilter=void 0!==i?i:K_,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){u.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sI extends qE{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=X_,this.minFilter=X_,this.generateMipmaps=!1,this.needsUpdate=!0}}class aI extends qE{constructor(t,e,n,r,i,o,s,a,l,u,c,h){super(null,o,s,a,l,u,r,i,c,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class lI extends aI{constructor(t,e,n,r,i,o){super(t,e,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=H_}}class uI extends aI{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,F_),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class cI extends qE{constructor(t,e,n,r,i,o,s,a,l){super(t,e,n,r,i,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class hI{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let s,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(i-1)}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=e||(o.isVector2?new TE:new rS);return a.copy(s).sub(o).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new rS,r=[],i=[],o=[],s=new rS,a=new NS;for(let p=0;p<=t;p++){const e=p/t;r[p]=this.getTangentAt(e,new rS)}i[0]=new rS,o[0]=new rS;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let p=1;p<=t;p++){if(i[p]=i[p-1].clone(),o[p]=o[p-1].clone(),s.crossVectors(r[p-1],r[p]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(_E(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(a.makeRotationAxis(s,t))}o[p].crossVectors(r[p],i[p])}if(!0===e){let e=Math.acos(_E(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class pI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);const o=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,r=a-this.aY;s=n*t-r*e+this.aX,a=n*e+r*t+this.aY}return e.set(s,a)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class fI extends pI{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function dI(){let t=0,e=0,n=0,r=0;function i(i,o,s,a){t=i,e=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,s,a){let l=(e-t)/o-(n-t)/(o+s)+(n-e)/s,u=(n-e)/s-(r-e)/(s+a)+(r-n)/a;l*=s,u*=s,i(e,n,l,u)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}const mI=new rS,gI=new dI,yI=new dI,vI=new dI;class _I extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS,n=this.points,r=n.length,i=(r-(this.closed?0:1))*t;let o,s,a=Math.floor(i),l=i-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:0===l&&a===r-1&&(a=r-2,l=1),this.closed||a>0?o=n[(a-1)%r]:(mI.subVectors(n[0],n[1]).add(n[0]),o=mI);const u=n[a%r],c=n[(a+1)%r];if(this.closed||a+2<r?s=n[(a+2)%r]:(mI.subVectors(n[r-1],n[r-2]).add(n[r-1]),s=mI),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(c),t),r=Math.pow(c.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),gI.initNonuniformCatmullRom(o.x,u.x,c.x,s.x,e,n,r),yI.initNonuniformCatmullRom(o.y,u.y,c.y,s.y,e,n,r),vI.initNonuniformCatmullRom(o.z,u.z,c.z,s.z,e,n,r)}else"catmullrom"===this.curveType&&(gI.initCatmullRom(o.x,u.x,c.x,s.x,this.tension),yI.initCatmullRom(o.y,u.y,c.y,s.y,this.tension),vI.initCatmullRom(o.z,u.z,c.z,s.z,this.tension));return e.set(gI.calc(l),yI.calc(l),vI.calc(l)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new rS).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function bI(t,e,n,r,i){const o=.5*(r-e),s=.5*(i-n),a=t*t;return(2*n-2*r+o+s)*(t*a)+(-3*n+3*r-2*o-s)*a+o*t+n}function xI(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function EI(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}class SI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new TE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new TE;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(EI(t,n.x,r.x,i.x,o.x),EI(t,n.y,r.y,i.y,o.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class wI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rS,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new rS;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(EI(t,n.x,r.x,i.x,o.x),EI(t,n.y,r.y,i.y,o.y),EI(t,n.z,r.z,i.z,o.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class TI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new TE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class MI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class RI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new TE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TE;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE,n=this.v0,r=this.v1,i=this.v2;return e.set(xI(t,n.x,r.x,i.x),xI(t,n.y,r.y,i.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class AI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rS;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS,n=this.v0,r=this.v1,i=this.v2;return e.set(xI(t,n.x,r.x,i.x),xI(t,n.y,r.y,i.y),xI(t,n.z,r.z,i.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class PI extends hI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE,n=this.points,r=(n.length-1)*t,i=Math.floor(r),o=r-i,s=n[0===i?i:i-1],a=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return e.set(bI(o,s.x,a.x,l.x,u.x),bI(o,s.y,a.y,l.y,u.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new TE).fromArray(n))}return this}}var II=Object.freeze({__proto__:null,ArcCurve:fI,CatmullRomCurve3:_I,CubicBezierCurve:SI,CubicBezierCurve3:wI,EllipseCurve:pI,LineCurve:TI,LineCurve3:MI,QuadraticBezierCurve:RI,QuadraticBezierCurve3:AI,SplineCurve:PI});class CI extends hI{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new II[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const t=r[i]-n,o=this.curves[i],s=o.getLength(),a=0===s?0:1-t/s;return o.getPointAt(a,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],s=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s);for(let t=0;t<a.length;t++){const r=a[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new II[n.type]).fromJSON(n))}return this}}class OI extends CI{constructor(t){super(),this.type="Path",this.currentPoint=new TE,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new TI(this.currentPoint.clone(),new TE(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new RI(this.currentPoint.clone(),new TE(t,e),new TE(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,o){const s=new SI(this.currentPoint.clone(),new TE(t,e),new TE(n,r),new TE(i,o));return this.curves.push(s),this.currentPoint.set(i,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new PI(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+s,e+a,n,r,i,o),this}absarc(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}ellipse(t,e,n,r,i,o,s,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,n,r,i,o,s,a),this}absellipse(t,e,n,r,i,o,s,a){const l=new pI(t,e,n,r,i,o,s,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class NI extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new TE(0,-.5),new TE(.5,0),new TE(0,.5)],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=_E(r,0,2*Math.PI);const i=[],o=[],s=[],a=[],l=[],u=1/e,c=new rS,h=new TE,p=new rS,f=new rS,d=new rS;let m=0,g=0;for(let y=0;y<=t.length-1;y++)switch(y){case 0:m=t[y+1].x-t[y].x,g=t[y+1].y-t[y].y,p.x=1*g,p.y=-m,p.z=0*g,d.copy(p),p.normalize(),a.push(p.x,p.y,p.z);break;case t.length-1:a.push(d.x,d.y,d.z);break;default:m=t[y+1].x-t[y].x,g=t[y+1].y-t[y].y,p.x=1*g,p.y=-m,p.z=0*g,f.copy(p),p.x+=d.x,p.y+=d.y,p.z+=d.z,p.normalize(),a.push(p.x,p.y,p.z),d.copy(f)}for(let y=0;y<=e;y++){const i=n+y*u*r,p=Math.sin(i),f=Math.cos(i);for(let n=0;n<=t.length-1;n++){c.x=t[n].x*p,c.y=t[n].y,c.z=t[n].x*f,o.push(c.x,c.y,c.z),h.x=y/e,h.y=n/(t.length-1),s.push(h.x,h.y);const r=a[3*n+0]*p,i=a[3*n+1],u=a[3*n+0]*f;l.push(r,i,u)}}for(let y=0;y<e;y++)for(let e=0;e<t.length-1;e++){const n=e+y*t.length,r=n,o=n+t.length,s=n+t.length+1,a=n+1;i.push(r,o,a),i.push(s,a,o)}this.setIndex(i),this.setAttribute("position",new Hw(o,3)),this.setAttribute("uv",new Hw(s,2)),this.setAttribute("normal",new Hw(l,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new NI(t.points,t.segments,t.phiStart,t.phiLength)}}class LI extends NI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=new OI;i.absarc(0,-e/2,t,1.5*Math.PI,0),i.absarc(0,e/2,t,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new LI(t.radius,t.length,t.capSegments,t.radialSegments)}}class DI extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],o=[],s=[],a=[],l=new rS,u=new TE;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let c=0,h=3;c<=e;c++,h+=3){const i=n+c/e*r;l.x=t*Math.cos(i),l.y=t*Math.sin(i),o.push(l.x,l.y,l.z),s.push(0,0,1),u.x=(o[h]/t+1)/2,u.y=(o[h+1]/t+1)/2,a.push(u.x,u.y)}for(let c=1;c<=e;c++)i.push(c,c+1,0);this.setIndex(i),this.setAttribute("position",new Hw(o,3)),this.setAttribute("normal",new Hw(s,3)),this.setAttribute("uv",new Hw(a,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new DI(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class UI extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const u=[],c=[],h=[],p=[];let f=0;const d=[],m=n/2;let g=0;function y(n){const i=f,o=new TE,d=new rS;let y=0;const v=!0===n?t:e,_=!0===n?1:-1;for(let t=1;t<=r;t++)c.push(0,m*_,0),h.push(0,_,0),p.push(.5,.5),f++;const b=f;for(let t=0;t<=r;t++){const e=t/r*a+s,n=Math.cos(e),i=Math.sin(e);d.x=v*i,d.y=m*_,d.z=v*n,c.push(d.x,d.y,d.z),h.push(0,_,0),o.x=.5*n+.5,o.y=.5*i*_+.5,p.push(o.x,o.y),f++}for(let t=0;t<r;t++){const e=i+t,r=b+t;!0===n?u.push(r,r+1,e):u.push(r+1,r,e),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const o=new rS,y=new rS;let v=0;const _=(e-t)/n;for(let l=0;l<=i;l++){const u=[],g=l/i,v=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+s,l=Math.sin(i),d=Math.cos(i);y.x=v*l,y.y=-g*n+m,y.z=v*d,c.push(y.x,y.y,y.z),o.set(l,_,d).normalize(),h.push(o.x,o.y,o.z),p.push(e,1-g),u.push(f++)}d.push(u)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=d[e][t],r=d[e+1][t],i=d[e+1][t+1],o=d[e][t+1];u.push(n,r,o),u.push(r,i,o),v+=6}l.addGroup(g,v,0),g+=v}(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Hw(c,3)),this.setAttribute("normal",new Hw(h,3)),this.setAttribute("uv",new Hw(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new UI(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class FI extends UI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,t,e,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(t){return new FI(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class kI extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],o=[];function s(t,e,n,r){const i=r+1,o=[];for(let s=0;s<=i;s++){o[s]=[];const r=t.clone().lerp(n,s/i),a=e.clone().lerp(n,s/i),l=i-s;for(let t=0;t<=l;t++)o[s][t]=0===t&&s===i?r:r.clone().lerp(a,t/l)}for(let s=0;s<i;s++)for(let t=0;t<2*(i-s)-1;t++){const e=Math.floor(t/2);t%2===0?(a(o[s][e+1]),a(o[s+1][e]),a(o[s][e])):(a(o[s][e+1]),a(o[s+1][e+1]),a(o[s+1][e]))}}function a(t){i.push(t.x,t.y,t.z)}function l(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function u(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new rS,r=new rS,i=new rS;for(let o=0;o<e.length;o+=3)l(e[o+0],n),l(e[o+1],r),l(e[o+2],i),s(n,r,i,t)}(r),function(t){const e=new rS;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new rS;for(let n=0;n<i.length;n+=3){t.x=i[n+0],t.y=i[n+1],t.z=i[n+2];const r=c(t)/2/Math.PI+.5,s=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(r,1-s)}var e;(function(){const t=new rS,e=new rS,n=new rS,r=new rS,s=new TE,a=new TE,l=new TE;for(let h=0,p=0;h<i.length;h+=9,p+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),s.set(o[p+0],o[p+1]),a.set(o[p+2],o[p+3]),l.set(o[p+4],o[p+5]),r.copy(t).add(e).add(n).divideScalar(3);const f=c(r);u(s,p+0,t,f),u(a,p+2,e,f),u(l,p+4,n,f)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),s=Math.min(e,n,r);i>.9&&s<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Hw(i,3)),this.setAttribute("normal",new Hw(i.slice(),3)),this.setAttribute("uv",new Hw(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new kI(t.vertices,t.indices,t.radius,t.details)}}class BI extends kI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new BI(t.radius,t.detail)}}const GI=new rS,jI=new rS,zI=new rS,HI=new yw;class VI extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,r=Math.pow(10,n),i=Math.cos(gE*e),o=t.getIndex(),s=t.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},p=[];for(let t=0;t<a;t+=3){o?(l[0]=o.getX(t),l[1]=o.getX(t+1),l[2]=o.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:a}=HI;if(e.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),HI.getNormal(zI),c[0]="".concat(Math.round(e.x*r),",").concat(Math.round(e.y*r),",").concat(Math.round(e.z*r)),c[1]="".concat(Math.round(n.x*r),",").concat(Math.round(n.y*r),",").concat(Math.round(n.z*r)),c[2]="".concat(Math.round(a.x*r),",").concat(Math.round(a.y*r),",").concat(Math.round(a.z*r)),c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],r=c[e],o=HI[u[t]],s=HI[u[e]],a="".concat(n,"_").concat(r),f="".concat(r,"_").concat(n);f in h&&h[f]?(zI.dot(h[f].normal)<=i&&(p.push(o.x,o.y,o.z),p.push(s.x,s.y,s.z)),h[f]=null):a in h||(h[a]={index0:l[t],index1:l[e],normal:zI.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:n}=h[t];GI.fromBufferAttribute(s,e),jI.fromBufferAttribute(s,n),p.push(GI.x,GI.y,GI.z),p.push(jI.x,jI.y,jI.z)}this.setAttribute("position",new Hw(p,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class XI extends OI{constructor(t){super(t),this.uuid=vE(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new OI).fromJSON(n))}return this}}const WI=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=e&&e.length,i=r?e[0]*n:t.length;let o=YI(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,c,h,p,f;if(r&&(o=function(t,e,n,r){const i=[];let o,s,a,l,u;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:t.length,u=YI(t,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(iC(u));for(i.sort(tC),o=0;o<i.length;o++)n=eC(i[o],n);return n}(t,e,o,n)),t.length>80*n){a=u=t[0],l=c=t[1];for(let e=n;e<i;e+=n)h=t[e],p=t[e+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>c&&(c=p);f=Math.max(u-a,c-l),f=0!==f?32767/f:0}return $I(o,s,n,a,l,f,0),s};function YI(t,e,n,r,i){let o,s;if(i===function(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)s=dC(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=dC(o,t[o],t[o+1],s);return s&&lC(s,s.next)&&(mC(s),s=s.next),s}function qI(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!lC(r,r.next)&&0!==aC(r.prev,r,r.next))r=r.next;else{if(mC(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function $I(t,e,n,r,i,o,s){if(!t)return;!s&&o&&function(t,e,n,r){let i=t;do{0===i.z&&(i.z=rC(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ,r);e++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(t,r,i,o);let a,l,u=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,o?ZI(t,r,i,o):KI(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),mC(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?$I(t=JI(qI(t),e,n),e,n,r,i,o,2):2===s&&QI(t,e,n,r,i,o):$I(qI(t),e,n,r,i,o,1);break}}function KI(t){const e=t.prev,n=t,r=t.next;if(aC(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,u=r.y,c=i<o?i<s?i:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,p=i>o?i>s?i:s:o>s?o:s,f=a>l?a>u?a:u:l>u?l:u;let d=r.next;for(;d!==e;){if(d.x>=c&&d.x<=p&&d.y>=h&&d.y<=f&&oC(i,a,o,l,s,u,d.x,d.y)&&aC(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function ZI(t,e,n,r){const i=t.prev,o=t,s=t.next;if(aC(i,o,s)>=0)return!1;const a=i.x,l=o.x,u=s.x,c=i.y,h=o.y,p=s.y,f=a<l?a<u?a:u:l<u?l:u,d=c<h?c<p?c:p:h<p?h:p,m=a>l?a>u?a:u:l>u?l:u,g=c>h?c>p?c:p:h>p?h:p,y=rC(f,d,e,n,r),v=rC(m,g,e,n,r);let _=t.prevZ,b=t.nextZ;for(;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=d&&_.y<=g&&_!==i&&_!==s&&oC(a,c,l,h,u,p,_.x,_.y)&&aC(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=d&&b.y<=g&&b!==i&&b!==s&&oC(a,c,l,h,u,p,b.x,b.y)&&aC(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=d&&_.y<=g&&_!==i&&_!==s&&oC(a,c,l,h,u,p,_.x,_.y)&&aC(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=f&&b.x<=m&&b.y>=d&&b.y<=g&&b!==i&&b!==s&&oC(a,c,l,h,u,p,b.x,b.y)&&aC(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function JI(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!lC(i,o)&&uC(i,r,r.next,o)&&pC(i,o)&&pC(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),mC(r),mC(r.next),r=t=o),r=r.next}while(r!==t);return qI(r)}function QI(t,e,n,r,i,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&sC(s,t)){let a=fC(s,t);return s=qI(s,s.next),a=qI(a,a.next),$I(s,e,n,r,i,o,0),void $I(a,e,n,r,i,o,0)}t=t.next}s=s.next}while(s!==t)}function tC(t,e){return t.x-e.x}function eC(t,e){const n=function(t,e){let n,r=e,i=-1/0;const o=t.x,s=t.y;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const t=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(t<=o&&t>i&&(i=t,n=r.x<r.next.x?r:r.next,t===o))return n}r=r.next}while(r!==e);if(!n)return null;const a=n,l=n.x,u=n.y;let c,h=1/0;r=n;do{o>=r.x&&r.x>=l&&o!==r.x&&oC(s<u?o:i,s,l,u,s<u?i:o,s,r.x,r.y)&&(c=Math.abs(s-r.y)/(o-r.x),pC(r,t)&&(c<h||c===h&&(r.x>n.x||r.x===n.x&&nC(n,r)))&&(n=r,h=c)),r=r.next}while(r!==a);return n}(t,e);if(!n)return e;const r=fC(n,t);return qI(r,r.next),qI(n,n.next)}function nC(t,e){return aC(t.prev,t,e.prev)<0&&aC(e.next,t,t.next)<0}function rC(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iC(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function oC(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function sC(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&uC(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(pC(t,e)&&pC(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(aC(t.prev,t,e.prev)||aC(t,e.prev,e))||lC(t,e)&&aC(t.prev,t,t.next)>0&&aC(e.prev,e,e.next)>0)}function aC(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lC(t,e){return t.x===e.x&&t.y===e.y}function uC(t,e,n,r){const i=hC(aC(t,e,n)),o=hC(aC(t,e,r)),s=hC(aC(n,r,t)),a=hC(aC(n,r,e));return i!==o&&s!==a||(!(0!==i||!cC(t,n,e))||(!(0!==o||!cC(t,r,e))||(!(0!==s||!cC(n,t,r))||!(0!==a||!cC(n,e,r)))))}function cC(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function hC(t){return t>0?1:t<0?-1:0}function pC(t,e){return aC(t.prev,t,t.next)<0?aC(t,e,t.next)>=0&&aC(t,t.prev,e)>=0:aC(t,e,t.prev)<0||aC(t,t.next,e)<0}function fC(t,e){const n=new gC(t.i,t.x,t.y),r=new gC(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function dC(t,e,n,r){const i=new gC(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mC(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gC(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class yC{static area(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}static isClockWise(t){return yC.area(t)<0}static triangulateShape(t,e){const n=[],r=[],i=[];vC(t),_C(n,t);let o=t.length;e.forEach(vC);for(let a=0;a<e.length;a++)r.push(o),o+=e[a].length,_C(n,e[a]);const s=WI(n,r);for(let a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}}function vC(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function _C(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class bC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new XI([new TE(.5,.5),new TE(-.5,.5),new TE(-.5,-.5),new TE(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let s=0,a=t.length;s<a;s++){o(t[s])}function o(t){const o=[],s=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let u=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:c-.1,p=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const d=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:xC;let g,y,v,_,b,x=!1;d&&(g=d.getSpacedPoints(a),x=!0,u=!1,y=d.computeFrenetFrames(a,!1),v=new rS,_=new rS,b=new rS),u||(f=0,c=0,h=0,p=0);const E=t.extractPoints(s);let S=E.shape;const w=E.holes;if(!yC.isClockWise(S)){S=S.reverse();for(let t=0,e=w.length;t<e;t++){const e=w[t];yC.isClockWise(e)&&(w[t]=e.reverse())}}const T=yC.triangulateShape(S,w),M=S;for(let e=0,n=w.length;e<n;e++){const t=w[e];S=S.concat(t)}function R(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const A=S.length,P=T.length;function I(t,e,n){let r,i,o;const s=t.x-e.x,a=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=s*s+a*a,h=s*u-a*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=e.x-a/h,d=e.y+s/h,m=((n.x-u/p-f)*u-(n.y+l/p-d)*l)/(s*u-a*l);r=f+s*m-t.x,i=d+a*m-t.y;const g=r*r+i*i;if(g<=2)return new TE(r,i);o=Math.sqrt(g/2)}else{let t=!1;s>Number.EPSILON?l>Number.EPSILON&&(t=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(u)&&(t=!0),t?(r=-a,i=s,o=Math.sqrt(c)):(r=s,i=a,o=Math.sqrt(c/2))}return new TE(r/o,i/o)}const C=[];for(let e=0,n=M.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),C[e]=I(M[e],M[r],M[i]);const O=[];let N,L=C.concat();for(let e=0,n=w.length;e<n;e++){const t=w[e];N=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),N[e]=I(t[e],t[r],t[i]);O.push(N),L=L.concat(N)}for(let e=0;e<f;e++){const t=e/f,n=c*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,i=M.length;e<i;e++){const t=R(M[e],C[e],r);F(t.x,t.y,-n)}for(let e=0,i=w.length;e<i;e++){const t=w[e];N=O[e];for(let e=0,i=t.length;e<i;e++){const i=R(t[e],N[e],r);F(i.x,i.y,-n)}}}const D=h+p;for(let e=0;e<A;e++){const t=u?R(S[e],L[e],D):S[e];x?(_.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(_).add(v),F(b.x,b.y,b.z)):F(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<A;t++){const n=u?R(S[t],L[t],D):S[t];x?(_.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),b.copy(g[e]).add(_).add(v),F(b.x,b.y,b.z)):F(n.x,n.y,l/a*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=c*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,i=M.length;e<i;e++){const t=R(M[e],C[e],r);F(t.x,t.y,l+n)}for(let e=0,i=w.length;e<i;e++){const t=w[e];N=O[e];for(let e=0,i=t.length;e<i;e++){const i=R(t[e],N[e],r);x?F(i.x,i.y+g[a-1].y,g[a-1].x+n):F(i.x,i.y,l+n)}}}function U(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=a+2*f;t<n;t++){const n=A*t,o=A*(t+1);B(e+r+n,e+i+n,e+i+o,e+r+o)}}}function F(t,e,n){o.push(t),o.push(e),o.push(n)}function k(t,e,i){G(t),G(e),G(i);const o=r.length/3,s=m.generateTopUV(n,r,o-3,o-2,o-1);j(s[0]),j(s[1]),j(s[2])}function B(t,e,i,o){G(t),G(e),G(o),G(e),G(i),G(o);const s=r.length/3,a=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);j(a[0]),j(a[1]),j(a[3]),j(a[1]),j(a[2]),j(a[3])}function G(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function j(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(u){let t=0,e=A*t;for(let n=0;n<P;n++){const t=T[n];k(t[2]+e,t[1]+e,t[0]+e)}t=a+2*f,e=A*t;for(let n=0;n<P;n++){const t=T[n];k(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<P;t++){const e=T[t];k(e[2],e[1],e[0])}for(let t=0;t<P;t++){const e=T[t];k(e[0]+A*a,e[1]+A*a,e[2]+A*a)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;U(M,e),e+=M.length;for(let n=0,r=w.length;n<r;n++){const t=w[n];U(t,e),e+=t.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Hw(r,3)),this.setAttribute("uv",new Hw(i,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const e=t[r];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,o=t.shapes.length;i<o;i++){const r=e[t.shapes[i]];n.push(r)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new II[r.type]).fromJSON(r)),new bC(n,t.options)}}const xC={generateTopUV:function(t,e,n,r,i){const o=e[3*n],s=e[3*n+1],a=e[3*r],l=e[3*r+1],u=e[3*i],c=e[3*i+1];return[new TE(o,s),new TE(a,l),new TE(u,c)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[3*n],a=e[3*n+1],l=e[3*n+2],u=e[3*r],c=e[3*r+1],h=e[3*r+2],p=e[3*i],f=e[3*i+1],d=e[3*i+2],m=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(a-c)<Math.abs(s-u)?[new TE(s,1-l),new TE(u,1-h),new TE(p,1-d),new TE(m,1-y)]:[new TE(a,1-l),new TE(c,1-h),new TE(f,1-d),new TE(g,1-y)]}};class EC extends kI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new EC(t.radius,t.detail)}}class SC extends kI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new SC(t.radius,t.detail)}}class wC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const s=[],a=[],l=[],u=[];let c=t;const h=(e-t)/r,p=new rS,f=new TE;for(let d=0;d<=r;d++){for(let t=0;t<=n;t++){const r=i+t/n*o;p.x=c*Math.cos(r),p.y=c*Math.sin(r),a.push(p.x,p.y,p.z),l.push(0,0,1),f.x=(p.x/e+1)/2,f.y=(p.y/e+1)/2,u.push(f.x,f.y)}c+=h}for(let d=0;d<r;d++){const t=d*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,a=r+n+2,l=r+1;s.push(i,o,l),s.push(o,a,l)}}this.setIndex(s),this.setAttribute("position",new Hw(a,3)),this.setAttribute("normal",new Hw(l,3)),this.setAttribute("uv",new Hw(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new wC(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class TC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new XI([new TE(0,.5),new TE(-.5,-.5),new TE(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let s=0,a=0;if(!1===Array.isArray(t))l(t);else for(let u=0;u<t.length;u++)l(t[u]),this.addGroup(s,a,u),s+=a,a=0;function l(t){const s=r.length/3,l=t.extractPoints(e);let u=l.shape;const c=l.holes;!1===yC.isClockWise(u)&&(u=u.reverse());for(let e=0,n=c.length;e<n;e++){const t=c[e];!0===yC.isClockWise(t)&&(c[e]=t.reverse())}const h=yC.triangulateShape(u,c);for(let e=0,n=c.length;e<n;e++){const t=c[e];u=u.concat(t)}for(let e=0,n=u.length;e<n;e++){const t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,r=h.length;e<r;e++){const t=h[e],r=t[0]+s,i=t[1]+s,o=t[2]+s;n.push(r,i,o),a+=3}}this.setIndex(n),this.setAttribute("position",new Hw(r,3)),this.setAttribute("normal",new Hw(i,3)),this.setAttribute("uv",new Hw(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];n.push(i)}return new TC(n,t.curveSegments)}}class MC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const u=[],c=new rS,h=new rS,p=[],f=[],d=[],m=[];for(let g=0;g<=n;g++){const p=[],y=g/n;let v=0;0===g&&0===o?v=.5/e:g===n&&a===Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const a=n/e;c.x=-t*Math.cos(r+a*i)*Math.sin(o+y*s),c.y=t*Math.cos(o+y*s),c.z=t*Math.sin(r+a*i)*Math.sin(o+y*s),f.push(c.x,c.y,c.z),h.copy(c).normalize(),d.push(h.x,h.y,h.z),m.push(a+v,1-y),p.push(l++)}u.push(p)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=u[g][t+1],r=u[g][t],i=u[g+1][t],s=u[g+1][t+1];(0!==g||o>0)&&p.push(e,r,s),(g!==n-1||a<Math.PI)&&p.push(r,i,s)}this.setIndex(p),this.setAttribute("position",new Hw(f,3)),this.setAttribute("normal",new Hw(d,3)),this.setAttribute("uv",new Hw(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new MC(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class RC extends kI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new RC(t.radius,t.detail)}}class AC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],a=[],l=[],u=new rS,c=new rS,h=new rS;for(let p=0;p<=n;p++)for(let o=0;o<=r;o++){const f=o/r*i,d=p/n*Math.PI*2;c.x=(t+e*Math.cos(d))*Math.cos(f),c.y=(t+e*Math.cos(d))*Math.sin(f),c.z=e*Math.sin(d),s.push(c.x,c.y,c.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),h.subVectors(c,u).normalize(),a.push(h.x,h.y,h.z),l.push(o/r),l.push(p/n)}for(let p=1;p<=n;p++)for(let t=1;t<=r;t++){const e=(r+1)*p+t-1,n=(r+1)*(p-1)+t-1,i=(r+1)*(p-1)+t,s=(r+1)*p+t;o.push(e,n,s),o.push(n,i,s)}this.setIndex(o),this.setAttribute("position",new Hw(s,3)),this.setAttribute("normal",new Hw(a,3)),this.setAttribute("uv",new Hw(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new AC(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class PC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],l=[],u=[],c=new rS,h=new rS,p=new rS,f=new rS,d=new rS,m=new rS,g=new rS;for(let v=0;v<=n;++v){const s=v/n*i*Math.PI*2;y(s,i,o,t,p),y(s+.01,i,o,t,f),m.subVectors(f,p),g.addVectors(f,p),d.crossVectors(m,g),g.crossVectors(d,m),d.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,o=-e*Math.cos(i),s=e*Math.sin(i);c.x=p.x+(o*g.x+s*d.x),c.y=p.y+(o*g.y+s*d.y),c.z=p.z+(o*g.z+s*d.z),a.push(c.x,c.y,c.z),h.subVectors(c,p).normalize(),l.push(h.x,h.y,h.z),u.push(v/n),u.push(t/r)}}for(let v=1;v<=n;v++)for(let t=1;t<=r;t++){const e=(r+1)*(v-1)+(t-1),n=(r+1)*v+(t-1),i=(r+1)*v+t,o=(r+1)*(v-1)+t;s.push(e,n,o),s.push(n,i,o)}function y(t,e,n,r,i){const o=Math.cos(t),s=Math.sin(t),a=n/e*t,l=Math.cos(a);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Hw(a,3)),this.setAttribute("normal",new Hw(l,3)),this.setAttribute("uv",new Hw(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new PC(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class IC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new AI(new rS(-1,-1,0),new rS(-1,1,0),new rS(1,1,0)),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new rS,a=new rS,l=new TE;let u=new rS;const c=[],h=[],p=[],f=[];function d(i){u=t.getPointAt(i/e,u);const l=o.normals[i],p=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);a.x=o*l.x+i*p.x,a.y=o*l.y+i*p.y,a.z=o*l.z+i*p.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=u.x+n*a.x,s.y=u.y+n*a.y,s.z=u.z+n*a.z,c.push(s.x,s.y,s.z)}}!function(){for(let t=0;t<e;t++)d(t);d(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)l.x=t/e,l.y=n/r,p.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;f.push(n,i,s),f.push(i,o,s)}}()}(),this.setIndex(f),this.setAttribute("position",new Hw(c,3)),this.setAttribute("normal",new Hw(h,3)),this.setAttribute("uv",new Hw(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new IC((new II[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class CC extends Zw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,r=new rS,i=new rS;if(null!==t.index){const o=t.attributes.position,s=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let t=0,l=a.length;t<l;++t){const l=a[t],u=l.start;for(let t=u,a=u+l.count;t<a;t+=3)for(let l=0;l<3;l++){const a=s.getX(t+l),u=s.getX(t+(l+1)%3);r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,u),!0===OC(r,i,n)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}}else{const o=t.attributes.position;for(let t=0,s=o.count/3;t<s;t++)for(let a=0;a<3;a++){const s=3*t+a,l=3*t+(a+1)%3;r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,l),!0===OC(r,i,n)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}this.setAttribute("position",new Hw(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function OC(t,e,n){const r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var NC=Object.freeze({__proto__:null,BoxGeometry:yT,CapsuleGeometry:LI,CircleGeometry:DI,ConeGeometry:FI,CylinderGeometry:UI,DodecahedronGeometry:BI,EdgesGeometry:VI,ExtrudeGeometry:bC,IcosahedronGeometry:EC,LatheGeometry:NI,OctahedronGeometry:SC,PlaneGeometry:jT,PolyhedronGeometry:kI,RingGeometry:wC,ShapeGeometry:TC,SphereGeometry:MC,TetrahedronGeometry:RC,TorusGeometry:AC,TorusKnotGeometry:PC,TubeGeometry:IC,WireframeGeometry:CC});class LC extends Tw{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ew(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class DC extends ET{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class UC extends Tw{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ew(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ew(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_x,this.normalScale=new TE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new HS,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class FC extends UC{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new TE(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _E(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ew(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ew(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ew(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!==t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!==t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!==t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class kC extends Tw{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ew(16777215),this.specular=new Ew(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ew(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_x,this.normalScale=new TE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new HS,this.combine=S_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class BC extends Tw{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ew(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ew(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_x,this.normalScale=new TE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class GC extends Tw{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_x,this.normalScale=new TE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class jC extends Tw{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ew(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ew(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_x,this.normalScale=new TE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new HS,this.combine=S_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class zC extends Tw{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ew(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_x,this.normalScale=new TE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class HC extends kP{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function VC(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function XC(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function WC(t){const e=t.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n}function YC(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,s=0;s!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[s++]=t[r+n]}return i}function qC(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let s=o[r];if(void 0!==s)if(Array.isArray(s))do{s=o[r],void 0!==s&&(e.push(o.time),n.push.apply(n,s)),o=t[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[r],void 0!==s&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{s=o[r],void 0!==s&&(e.push(o.time),n.push(s)),o=t[i++]}while(void 0!==o)}const $C={convertArray:VC,isTypedArray:XC,getKeyframeOrder:WC,sortedArray:YC,flattenJSON:qC,subclip:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=t.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const t=o.tracks[l],e=t.getValueSize(),a=[],u=[];for(let o=0;o<t.times.length;++o){const s=t.times[o]*i;if(!(s<n||s>=r)){a.push(t.times[o]);for(let n=0;n<e;++n)u.push(t.values[o*e+n])}}0!==a.length&&(t.times=VC(a,t.times.constructor),t.values=VC(u,t.values.constructor),s.push(t))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let s=0;s<i;++s){const e=n.tracks[s],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===r}));if(void 0===i)continue;let a=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let u=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=e.times.length-1;let p;if(o<=e.times[0]){const t=a,n=l-a;p=e.values.slice(t,n)}else if(o>=e.times[h]){const t=h*l+a,n=t+l-a;p=e.values.slice(t,n)}else{const t=e.createInterpolant(),n=a,r=l-a;t.evaluate(o),p=t.resultBuffer.slice(n,r)}if("quaternion"===r){(new nS).fromArray(p).normalize().conjugate().toArray(p)}const f=i.times.length;for(let t=0;t<f;++t){const e=t*c+u;if("quaternion"===r)nS.multiplyQuaternionsFlat(i.values,e,p,0,i.values,e);else{const t=c-2*u;for(let n=0;n<t;++n)i.values[e+n]-=p[n]}}}return t.blendMode=fx,t}};class KC{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ZC extends KC{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ux,endingEnd:ux}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case cx:i=t,s=2*e-n;break;case hx:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case cx:o=t,a=2*n-e;break;case hx:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-e)/(r-e),d=f*f,m=d*f,g=-h*m+2*h*d-h*f,y=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*f+1,v=(-1-p)*m+(1.5+p)*d+.5*f,_=p*m-p*d;for(let b=0;b!==s;++b)i[b]=g*o[u+b]+y*o[l+b]+v*o[a+b]+_*o[c+b];return i}}class JC extends KC{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,u=(n-e)/(r-e),c=1-u;for(let h=0;h!==s;++h)i[h]=o[l+h]*c+o[a+h]*u;return i}}class QC extends KC{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class tO{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=VC(e,this.TimeBufferType),this.values=VC(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:VC(t.times,Array),values:VC(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new QC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new JC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new ZC(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case sx:e=this.InterpolantFactoryMethodDiscrete;break;case ax:e=this.InterpolantFactoryMethodLinear;break;case lx:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sx;case this.InterpolantFactoryMethodLinear:return ax;case this.InterpolantFactoryMethodSmooth:return lx}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=n.slice(i,o),this.values=this.values.slice(i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let s=0;s!==i;s++){const e=n[s];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,o),t=!1;break}o=e}if(void 0!==r&&XC(r))for(let s=0,a=r.length;s!==a;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===lx,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s];if(a!==t[s+1]&&(1!==s||a!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,o=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const r=s*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,s=0;s!==n;++s)e[r+s]=e[t+s];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}tO.prototype.TimeBufferType=Float32Array,tO.prototype.ValueBufferType=Float32Array,tO.prototype.DefaultInterpolation=ax;class eO extends tO{}eO.prototype.ValueTypeName="bool",eO.prototype.ValueBufferType=Array,eO.prototype.DefaultInterpolation=sx,eO.prototype.InterpolantFactoryMethodLinear=void 0,eO.prototype.InterpolantFactoryMethodSmooth=void 0;class nO extends tO{}nO.prototype.ValueTypeName="color";class rO extends tO{}rO.prototype.ValueTypeName="number";class iO extends KC{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(r-e);let l=t*s;for(let u=l+s;l!==u;l+=4)nS.slerpFlat(i,0,o,l-s,o,l,a);return i}}class oO extends tO{InterpolantFactoryMethodLinear(t){return new iO(this.times,this.values,this.getValueSize(),t)}}oO.prototype.ValueTypeName="quaternion",oO.prototype.DefaultInterpolation=ax,oO.prototype.InterpolantFactoryMethodSmooth=void 0;class sO extends tO{}sO.prototype.ValueTypeName="string",sO.prototype.ValueBufferType=Array,sO.prototype.DefaultInterpolation=sx,sO.prototype.InterpolantFactoryMethodLinear=void 0,sO.prototype.InterpolantFactoryMethodSmooth=void 0;class aO extends tO{}aO.prototype.ValueTypeName="vector";class lO{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:px;this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=vE(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,s=n.length;o!==s;++o)e.push(uO(n[o]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,o=n.length;i!==o;++i)e.push(tO.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let s=0;s<i;s++){let t=[],a=[];t.push((s+i-1)%i,s,(s+1)%i),a.push(0,1,0);const l=WC(t);t=YC(t,1,l),a=YC(a,1,l),r||0!==t[0]||(t.push(i),a.push(a[0])),o.push(new rO(".morphTargetInfluences["+e[s].name+"]",t,a).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,a=t.length;s<a;s++){const e=t[s],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const o=[];for(const s in r)o.push(this.CreateFromMorphTargetSequence(s,r[s],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],s=[];qC(n,o,s,r),0!==o.length&&i.push(new t(e,o,s))}},r=[],i=t.name||"default",o=t.fps||30,s=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let u=0;u<l.length;u++){const t=l[u].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],o=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new rO(".morphTargetInfluence["+i+"]",e,o))}a=e.length*o}else{const i=".bones["+e[u].name+"]";n(aO,i+".position",t,"pos",r),n(oO,i+".quaternion",t,"rot",r),n(aO,i+".scale",t,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,s)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function uO(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rO;case"vector":case"vector2":case"vector3":case"vector4":return aO;case"color":return nO;case"quaternion":return oO;case"bool":case"boolean":return eO;case"string":return sO}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];qC(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const cO={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hO{constructor(t,e,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const pO=new hO;class fO{constructor(t){this.manager=void 0!==t?t:pO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}fO.DEFAULT_MATERIAL_NAME="__DEFAULT";const dO={};class mO extends Error{constructor(t,e){super(t),this.response=e}}class gO extends fO{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=cO.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==dO[t])return void dO[t].push({onLoad:e,onProgress:n,onError:r});dO[t]=[],dO[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=dO[t],r=e.body.getReader(),i=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),o=i?parseInt(i):0,s=0!==o;let a=0;const l=new ReadableStream({start(t){!function e(){r.read().then((r=>{let{done:i,value:l}=r;if(i)t.close();else{a+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(l),e()}}))}()}});return new Response(l)}throw new mO('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText),e)})).then((t=>{switch(a){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,s)));case"json":return t.json();default:if(void 0===s)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(s),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{cO.add(t,e);const n=dO[t];delete dO[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=dO[t];if(void 0===n)throw this.manager.itemError(t),e;delete dO[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class yO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new gO(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(Dn){r?r(Dn):console.error(Dn),i.manager.itemError(t)}}),n,r)}parse(t){const e=[];for(let n=0;n<t.length;n++){const r=lO.parse(t[n]);e.push(r)}return e}}class vO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=this,o=[],s=new aI,a=new gO(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let l=0;function u(u){a.load(t[u],(function(t){const n=i.parse(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=K_),s.image=o,s.format=n.format,s.needsUpdate=!0,e&&e(s))}),n,r)}if(Array.isArray(t))for(let c=0,h=t.length;c<h;++c)u(c);else a.load(t,(function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=K_),s.format=n.format,s.needsUpdate=!0,e&&e(s)}),n,r);return s}}class _O extends fO{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=cO.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const s=CE("img");function a(){u(),cO.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){u(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function u(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class bO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=new IT;i.colorSpace=Ex;const o=new _O(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(t[n],(function(t){i.images[n]=t,s++,6===s&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let l=0;l<t.length;++l)a(l);return i}}class xO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new lP,s=new gO(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(t,(function(t){let n;try{n=i.parse(t)}catch(oU){if(void 0===r)return void console.error(oU);r(oU)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:H_,o.wrapT=void 0!==n.wrapT?n.wrapT:H_,o.magFilter=void 0!==n.magFilter?n.magFilter:K_,o.minFilter=void 0!==n.minFilter?n.minFilter:K_,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(o.colorSpace=n.colorSpace),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Q_),1===n.mipmapCount&&(o.minFilter=K_),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,e&&e(o,n)}),n,r),o}}class EO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=new qE,o=new _O(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class SO extends sw{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Ew(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class wO extends SO{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(sw.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ew(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const TO=new NS,MO=new rS,RO=new rS;class AO{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new TE(512,512),this.map=null,this.mapPass=null,this.matrix=new NS,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kT,this._frameExtents=new TE(1,1),this._viewportCount=1,this._viewports=[new $E(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;MO.setFromMatrixPosition(t.matrixWorld),e.position.copy(MO),RO.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(RO),e.updateMatrixWorld(),TO.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TO),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(TO)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class PO extends AO{constructor(){super(new RT(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*yE*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class IO extends SO{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(sw.DEFAULT_UP),this.updateMatrix(),this.target=new sw,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new PO}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const CO=new NS,OO=new rS,NO=new rS;class LO extends AO{constructor(){super(new RT(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new TE(4,2),this._viewportCount=6,this._viewports=[new $E(2,1,1,1),new $E(0,1,1,1),new $E(3,1,1,1),new $E(1,1,1,1),new $E(3,0,1,1),new $E(1,0,1,1)],this._cubeDirections=[new rS(1,0,0),new rS(-1,0,0),new rS(0,0,1),new rS(0,0,-1),new rS(0,1,0),new rS(0,-1,0)],this._cubeUps=[new rS(0,1,0),new rS(0,1,0),new rS(0,1,0),new rS(0,1,0),new rS(0,0,1),new rS(0,0,-1)]}updateMatrices(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),OO.setFromMatrixPosition(t.matrixWorld),n.position.copy(OO),NO.copy(n.position),NO.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(NO),n.updateMatrixWorld(),r.makeTranslation(-OO.x,-OO.y,-OO.z),CO.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CO)}}class DO extends SO{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new LO}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class UO extends AO{constructor(){super(new tM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class FO extends SO{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(sw.DEFAULT_UP),this.updateMatrix(),this.target=new sw,this.shadow=new UO}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class kO extends SO{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class BO extends SO{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class GO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new rS)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}class jO extends SO{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new GO;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class zO extends fO{constructor(t){super(t),this.textures={}}load(t,e,n,r){const i=this,o=new gO(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(Dn){r?r(Dn):console.error(Dn),i.manager.itemError(t)}}),n,r)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=zO.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new Ew).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(r.dispersion=t.dispersion),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(r.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(r.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(r.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(r.depthFunc=t.depthFunc),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(r.blendSrc=t.blendSrc),void 0!==t.blendDst&&(r.blendDst=t.blendDst),void 0!==t.blendEquation&&(r.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(r.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(r.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(r.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(r.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),void 0!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(r.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const i in t.uniforms){const e=t.uniforms[i];switch(r.uniforms[i]={},e.type){case"t":r.uniforms[i].value=n(e.value);break;case"c":r.uniforms[i].value=(new Ew).setHex(e.value);break;case"v2":r.uniforms[i].value=(new TE).fromArray(e.value);break;case"v3":r.uniforms[i].value=(new rS).fromArray(e.value);break;case"v4":r.uniforms[i].value=(new $E).fromArray(e.value);break;case"m3":r.uniforms[i].value=(new ME).fromArray(e.value);break;case"m4":r.uniforms[i].value=(new NS).fromArray(e.value);break;default:r.uniforms[i].value=e.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(r.glslVersion=t.glslVersion),void 0!==t.extensions)for(const i in t.extensions)r.extensions[i]=t.extensions[i];if(void 0!==t.lights&&(r.lights=t.lights),void 0!==t.clipping&&(r.clipping=t.clipping),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new TE).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapRotation&&r.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new TE).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(r.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:LC,SpriteMaterial:OA,RawShaderMaterial:DC,ShaderMaterial:ET,PointsMaterial:JP,MeshPhysicalMaterial:FC,MeshStandardMaterial:UC,MeshPhongMaterial:kC,MeshToonMaterial:BC,MeshNormalMaterial:GC,MeshLambertMaterial:jC,MeshDepthMaterial:uA,MeshDistanceMaterial:cA,MeshBasicMaterial:Mw,MeshMatcapMaterial:zC,LineDashedMaterial:HC,LineBasicMaterial:kP,Material:Tw}[t]}}class HO{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(Dn){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class VO extends Zw{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class XO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new gO(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(Dn){r?r(Dn):console.error(Dn),i.manager.itemError(t)}}),n,r)}parse(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],o=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers,i=r[e],o=new Uint32Array(i).buffer;return n[e]=o,o}(t,i.buffer),s=IE(i.type,o),a=new PA(s,i.stride);return a.uuid=i.uuid,e[r]=a,a}const i=t.isInstancedBufferGeometry?new VO:new Zw,o=t.data.index;if(void 0!==o){const t=IE(o.type,o.array);i.setIndex(new Lw(t,1))}const s=t.data.attributes;for(const c in s){const e=s[c];let n;if(e.isInterleavedBufferAttribute){const i=r(t.data,e.data);n=new CA(i,e.itemSize,e.offset,e.normalized)}else{const t=IE(e.type,e.array);n=new(e.isInstancedBufferAttribute?pP:Lw)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),i.setAttribute(c,n)}const a=t.data.morphAttributes;if(a)for(const c in a){const e=a[c],n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];let s;if(o.isInterleavedBufferAttribute){const e=r(t.data,o.data);s=new CA(e,o.itemSize,o.offset,o.normalized)}else{const t=IE(o.type,o.array);s=new Lw(t,o.itemSize,o.normalized)}void 0!==o.name&&(s.name=o.name),n.push(s)}i.morphAttributes[c]=n}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let c=0,h=l.length;c!==h;++c){const t=l[c];i.addGroup(t.start,t.count,t.materialIndex)}const u=t.data.boundingSphere;if(void 0!==u){const t=new rS;void 0!==u.center&&t.fromArray(u.center),i.boundingSphere=new wS(t,u.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}}class WO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=this,o=""===this.path?HO.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const s=new gO(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(oU){return void 0!==r&&r(oU),void console.error("THREE:ObjectLoader: Can't parse "+t+".",oU.message)}const s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);i.parse(o,e)}),n,r)}async loadAsync(t,e){const n=""===this.path?HO.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const r=new gO(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(t,e),o=JSON.parse(i),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(o)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),o=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),s=this.parseTextures(t.textures,o),a=this.parseMaterials(t.materials,s),l=this.parseObject(t.object,i,a,s,n),u=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,u),void 0!==e){let t=!1;for(const e in o)if(o[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,n),i=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,i),s=this.parseMaterials(t.materials,o),a=this.parseObject(t.object,r,s,o,e),l=this.parseSkeletons(t.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new XI).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let i=0,o=t.length;i<o;i++){const e=(new hP).fromJSON(t[i],r);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};if(void 0!==t){const r=new XO;for(let i=0,o=t.length;i<o;i++){let o;const s=t[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;default:s.type in NC?o=NC[s.type].fromJSON(s,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new zO;i.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=t[n],i=lO.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const n=this,r={};let i;function o(t){if("string"===typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:IE(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new hO(e);i=new _O(n),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const n=t[e],i=n.url;if(Array.isArray(i)){const t=[];for(let e=0,n=i.length;e<n;e++){const n=o(i[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new lP(n.data,n.width,n.height)))}r[n.uuid]=new XE(t)}else{const t=o(n.url);r[n.uuid]=new XE(t)}}}return r}async parseImagesAsync(t){const e=this,n={};let r;async function i(t){if("string"===typeof t){const n=t,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await r.loadAsync(i)}return t.data?{data:IE(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){r=new _O(this.manager),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const r=t[e],o=r.url;if(Array.isArray(o)){const t=[];for(let e=0,n=o.length;e<n;e++){const n=o[e],r=await i(n);null!==r&&(r instanceof HTMLImageElement?t.push(r):t.push(new lP(r.data,r.width,r.height)))}n[r.uuid]=new XE(t)}else{const t=await i(r.url);n[r.uuid]=new XE(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const o=t[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=e[o.image],a=s.data;let l;Array.isArray(a)?(l=new IT,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new lP:new qE,a&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,YO)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],qO),l.wrapT=n(o.wrap[1],qO)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,$O)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,$O)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}parseObject(t,e,n,r,i){let o,s,a;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function u(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function c(t){return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),r[t]}switch(t.type){case"Scene":o=new AA,void 0!==t.background&&(Number.isInteger(t.background)?o.background=new Ew(t.background):o.background=c(t.background)),void 0!==t.environment&&(o.environment=c(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new RA(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new MA(t.fog.color,t.fog.density)),""!==t.fog.name&&(o.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(o.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(o.backgroundIntensity=t.backgroundIntensity),void 0!==t.backgroundRotation&&o.backgroundRotation.fromArray(t.backgroundRotation),void 0!==t.environmentIntensity&&(o.environmentIntensity=t.environmentIntensity),void 0!==t.environmentRotation&&o.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":o=new RT(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new tM(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new kO(t.color,t.intensity);break;case"DirectionalLight":o=new FO(t.color,t.intensity);break;case"PointLight":o=new DO(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new BO(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new IO(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new wO(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new jO).fromJSON(t);break;case"SkinnedMesh":s=l(t.geometry),a=u(t.material),o=new sP(s,a),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":s=l(t.geometry),a=u(t.material),o=new mT(s,a);break;case"InstancedMesh":s=l(t.geometry),a=u(t.material);const e=t.count,n=t.instanceMatrix,r=t.instanceColor;o=new bP(s,a,e),o.instanceMatrix=new pP(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new pP(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":s=l(t.geometry),a=u(t.material),o=new FP(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,a),o.geometry=s,o.perObjectFrustumCulled=t.perObjectFrustumCulled,o.sortObjects=t.sortObjects,o._drawRanges=t.drawRanges,o._reservedRanges=t.reservedRanges,o._visibility=t.visibility,o._active=t.active,o._bounds=t.bounds.map((t=>{const e=new sS;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);const n=new wS;return n.radius=t.sphereRadius,n.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:n}})),o._maxGeometryCount=t.maxGeometryCount,o._maxVertexCount=t.maxVertexCount,o._maxIndexCount=t.maxIndexCount,o._geometryInitialized=t.geometryInitialized,o._geometryCount=t.geometryCount,o._matricesTexture=c(t.matricesTexture.uuid);break;case"LOD":o=new KA;break;case"Line":o=new WP(l(t.geometry),u(t.material));break;case"LineLoop":o=new ZP(l(t.geometry),u(t.material));break;case"LineSegments":o=new KP(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":o=new rI(l(t.geometry),u(t.material));break;case"Sprite":o=new WA(u(t.material));break;case"Group":o=new gA;break;case"Bone":o=new aP;break;default:o=new sw}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.up&&o.up.fromArray(t.up),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children){const s=t.children;for(let t=0;t<s.length;t++)o.add(this.parseObject(s[t],e,n,r,i))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];o.animations.push(i[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance,n.hysteresis)}}return o}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}}const YO={UVMapping:U_,CubeReflectionMapping:F_,CubeRefractionMapping:k_,EquirectangularReflectionMapping:B_,EquirectangularRefractionMapping:G_,CubeUVReflectionMapping:j_},qO={RepeatWrapping:z_,ClampToEdgeWrapping:H_,MirroredRepeatWrapping:V_},$O={NearestFilter:X_,NearestMipmapNearestFilter:W_,NearestMipmapLinearFilter:q_,LinearFilter:K_,LinearMipmapNearestFilter:Z_,LinearMipmapLinearFilter:Q_};class KO extends fO{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=cO.get(t);if(void 0!==o)return i.manager.itemStart(t),o.then?void o.then((n=>{e&&e(n),i.manager.itemEnd(t)})).catch((t=>{r&&r(t)})):(setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;const a=fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return cO.add(t,n),e&&e(n),i.manager.itemEnd(t),n})).catch((function(e){r&&r(e),cO.remove(t),i.manager.itemError(t),i.manager.itemEnd(t)}));cO.add(t,a),i.manager.itemStart(t)}}let ZO;class JO{static getContext(){return void 0===ZO&&(ZO=new(window.AudioContext||window.webkitAudioContext)),ZO}static setContext(t){ZO=t}}class QO extends fO{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new gO(this.manager);function s(e){r?r(e):console.error(e),i.manager.itemError(t)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(t){try{const n=t.slice(0);JO.getContext().decodeAudioData(n,(function(t){e(t)})).catch(s)}catch(Dn){s(Dn)}}),n,r)}}const tN=new NS,eN=new NS,nN=new NS;class rN{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new RT,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new RT,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,nN.copy(t.projectionMatrix);const n=e.eyeSep/2,r=n*e.near/e.focus,i=e.near*Math.tan(gE*e.fov*.5)/e.zoom;let o,s;eN.elements[12]=-n,tN.elements[12]=n,o=-i*e.aspect+r,s=i*e.aspect+r,nN.elements[0]=2*e.near/(s-o),nN.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(nN),o=-i*e.aspect-r,s=i*e.aspect-r,nN.elements[0]=2*e.near/(s-o),nN.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(nN)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(eN),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(tN)}}class iN{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=oN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=oN();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function oN(){return("undefined"===typeof performance?Date:performance).now()}const sN=new rS,aN=new nS,lN=new rS,uN=new rS;class cN extends sw{constructor(){super(),this.type="AudioListener",this.context=JO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new iN}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(sN,aN,lN),uN.set(0,0,-1).applyQuaternion(aN),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(sN.x,t),e.positionY.linearRampToValueAtTime(sN.y,t),e.positionZ.linearRampToValueAtTime(sN.z,t),e.forwardX.linearRampToValueAtTime(uN.x,t),e.forwardY.linearRampToValueAtTime(uN.y,t),e.forwardZ.linearRampToValueAtTime(uN.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(sN.x,sN.y,sN.z),e.setOrientation(uN.x,uN.y,uN.z,n.x,n.y,n.z)}}class hN extends sw{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const pN=new rS,fN=new nS,dN=new rS,mN=new rS;class gN extends hN{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(pN,fN,dN),mN.set(0,0,1).applyQuaternion(fN);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(pN.x,t),e.positionY.linearRampToValueAtTime(pN.y,t),e.positionZ.linearRampToValueAtTime(pN.z,t),e.orientationX.linearRampToValueAtTime(mN.x,t),e.orientationY.linearRampToValueAtTime(mN.y,t),e.orientationZ.linearRampToValueAtTime(mN.z,t)}else e.setPosition(pN.x,pN.y,pN.z),e.setOrientation(mN.x,mN.y,mN.z)}}class yN{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class vN{constructor(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){s.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)t[e+o]=t[n+o]}_slerp(t,e,n,r){nS.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const o=this._workIndex*i;nS.multiplyQuaternionsFlat(t,o,t,e,t,n),nS.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,i){const o=1-r;for(let s=0;s!==i;++s){const i=e+s;t[i]=t[i]*o+t[n+s]*r}}_lerpAdditive(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}}const _N="\\[\\]\\.:\\/",bN=new RegExp("["+_N+"]","g"),xN="[^"+_N+"]",EN="[^"+_N.replace("\\.","")+"]",SN=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",xN)+/(WCOD+)?/.source.replace("WCOD",EN)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xN)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xN)+"$"),wN=["material","materials","bones","map"];class TN{constructor(t,e,n){this.path=e,this.parsedPath=n||TN.parseTrackName(e),this.node=TN.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new TN.Composite(t,e,n):new TN(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(bN,"")}static parseTrackName(t){const e=SN.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==wN.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=TN.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}TN.Composite=class{constructor(t,e,n){const r=n||TN.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},TN.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},TN.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},TN.prototype.GetterByBindingType=[TN.prototype._getValue_direct,TN.prototype._getValue_array,TN.prototype._getValue_arrayElement,TN.prototype._getValue_toArray],TN.prototype.SetterByBindingTypeAndVersioning=[[TN.prototype._setValue_direct,TN.prototype._setValue_direct_setNeedsUpdate,TN.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[TN.prototype._setValue_array,TN.prototype._setValue_array_setNeedsUpdate,TN.prototype._setValue_array_setMatrixWorldNeedsUpdate],[TN.prototype._setValue_arrayElement,TN.prototype._setValue_arrayElement_setNeedsUpdate,TN.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[TN.prototype._setValue_fromArray,TN.prototype._setValue_fromArray_setNeedsUpdate,TN.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class MN{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vE(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let s,a=t.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const c=arguments[u],h=c.uuid;let p=e[h];if(void 0===p){p=a++,e[h]=p,t.push(c);for(let t=0,e=o;t!==e;++t)i[t].push(new TN(c,n[t],r[t]))}else if(p<l){s=t[p];const a=--l,u=t[a];e[u.uuid]=p,t[p]=u,e[h]=a,t[a]=c;for(let t=0,e=o;t!==e;++t){const e=i[t],o=e[a];let s=e[p];e[p]=o,void 0===s&&(s=new TN(c,n[t],r[t])),e[a]=s}}else t[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=e[a];if(void 0!==l&&l>=i){const o=i++,u=t[o];e[u.uuid]=l,t[l]=u,e[a]=o,t[o]=s;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[o],i=e[l];e[l]=r,e[o]=i}}}this.nCachedObjects_=i}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=t.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=e[a];if(void 0!==l)if(delete e[a],l<i){const s=--i,a=t[s],u=--o,c=t[u];e[a.uuid]=l,t[l]=a,e[c.uuid]=s,t[s]=c,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[s],i=e[u];e[l]=r,e[s]=i,e.pop()}}else{const i=--o,s=t[i];i>0&&(e[s.uuid]=l),t[l]=s,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[l]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[t]=r,o.push(t),s.push(e),i.push(c);for(let h=u,p=a.length;h!==p;++h){const n=a[h];c[h]=new TN(n,t,e)}return c}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];e[t[s]]=n,o[n]=a,o.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}class RN{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,s=new Array(o),a={endingStart:ux,endingEnd:ux};for(let l=0;l!==o;++l){const t=i[l].createInterpolant(null);s[l]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ix,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=i,a[1]=i+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;r<0||0===n?e=0:(this._startTime=null,e=n*r)}e*=this._updateTimeScale(t);const o=this._updateTime(e),s=this._updateWeight(t);if(s>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===fx)for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(s);else for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,s)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=n===ox;if(0===t)return-1===i?r:o&&1===(1&i)?e-r:r;if(n===rx){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=cx,r.endingEnd=cx):(r.endingStart=t?this.zeroSlopeAtStart?cx:ux:hx,r.endingEnd=e?this.zeroSlopeAtEnd?cx:ux:hx)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=e,s[1]=i+t,a[1]=n,this}}const AN=new Float32Array(1);class PN extends fE{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,s=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let u=l[a];void 0===u&&(u={},l[a]=u);for(let c=0;c!==i;++c){const t=r[c],i=t.name;let l=u[i];if(void 0!==l)++l.referenceCount,o[c]=l;else{if(l=o[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,i));continue}const r=e&&e._propertyBindings[c].binding.parsedPath;l=new vN(TN.create(n,i,r),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,i),o[c]=l}s[c].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,l=a[a.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,a[u]=l,a.pop(),t._byClipCacheIndex=null;delete s.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete o[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,s=o[r],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete s[i],0===Object.keys(s).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new JC(new Float32Array(2),new Float32Array(2),1,AN),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let o="string"===typeof t?lO.findByName(r,t):t;const s=null!==o?o.uuid:t,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:px),void 0!==a){const t=a.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new RN(this,o,e,n);return this._bindAction(u,l),this._addInactiveAction(u,s,i),u}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"===typeof t?lO.findByName(n,t):t,o=i?i.uuid:t,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(r,t,i,o)}const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const i in n){const t=n[i].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const i in r){const t=r[i];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class IN{constructor(t){this.value=t}clone(){return new IN(void 0===this.value.clone?this.value:this.value.clone())}}let CN=0;class ON extends fE{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:CN++}),this.name="",this.usage=tE,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,r=e.length;n<r;n++){const t=Array.isArray(e[n])?e[n]:[e[n]];for(let e=0;e<t.length;e++)this.uniforms.push(t[e].clone())}return this}clone(){return(new this.constructor).copy(this)}}class NN extends PA{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class LN{constructor(t,e,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const DN=new NS;class UN{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new OS(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new VS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return DN.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(DN),this}intersectObject(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return kN(t,this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),e.sort(FN),e}intersectObjects(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=t.length;r<i;r++)kN(t[r],this,n,e);return n.sort(FN),n}}function FN(t,e){return t.distance-e.distance}function kN(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)kN(r[t],e,n,!0)}}class BN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(_E(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class GN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const jN=new TE;class zN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new TE(1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TE(-1/0,-1/0);this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=jN.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,jN).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const HN=new rS,VN=new rS;class XN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS;this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){HN.subVectors(t,this.start),VN.subVectors(this.end,this.start);const n=VN.dot(VN);let r=VN.dot(HN)/n;return e&&(r=_E(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const WN=new rS;class YN extends sw{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new Zw,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const t=o/a*Math.PI*2,e=s/a*Math.PI*2;r.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new Hw(r,3));const i=new kP({fog:!1,toneMapped:!1});this.cone=new KP(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),WN.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(WN),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qN=new rS,$N=new NS,KN=new NS;class ZN extends KP{constructor(t){const e=JN(t),n=new Zw,r=[],i=[],o=new Ew(0,0,1),s=new Ew(0,1,0);for(let a=0;a<e.length;a++){const t=e[a];t.parent&&t.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new Hw(r,3)),n.setAttribute("color",new Hw(i,3));super(n,new kP({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");KN.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<e.length;i++){const t=e[i];t.parent&&t.parent.isBone&&($N.multiplyMatrices(KN,t.matrixWorld),qN.setFromMatrixPosition($N),r.setXYZ(o,qN.x,qN.y,qN.z),$N.multiplyMatrices(KN,t.parent.matrixWorld),qN.setFromMatrixPosition($N),r.setXYZ(o+1,qN.x,qN.y,qN.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function JN(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,JN(t.children[n]));return e}class QN extends mT{constructor(t,e,n){super(new MC(e,4,2),new Mw({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tL=new rS,eL=new Ew,nL=new Ew;class rL extends sw{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new SC(e);r.rotateY(.5*Math.PI),this.material=new Mw({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Lw(o,3)),this.add(new mT(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");eL.copy(this.light.color),nL.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?eL:nL;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(tL.setFromMatrixPosition(this.light.matrixWorld).negate())}}class iL extends KP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Ew(n),r=new Ew(r);const i=e/2,o=t/e,s=t/2,a=[],l=[];for(let c=0,h=0,p=-s;c<=e;c++,p+=o){a.push(-s,0,p,s,0,p),a.push(p,0,-s,p,0,s);const t=c===i?n:r;t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3}const u=new Zw;u.setAttribute("position",new Hw(a,3)),u.setAttribute("color",new Hw(l,3));super(u,new kP({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class oL extends KP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new Ew(i),o=new Ew(o);const s=[],a=[];if(e>1)for(let u=0;u<e;u++){const n=u/e*(2*Math.PI),r=Math.sin(n)*t,l=Math.cos(n)*t;s.push(0,0,0),s.push(r,0,l);const c=1&u?i:o;a.push(c.r,c.g,c.b),a.push(c.r,c.g,c.b)}for(let u=0;u<n;u++){const e=1&u?i:o,l=t-t/n*u;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l;s.push(i,0,o),a.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l,s.push(i,0,o),a.push(e.r,e.g,e.b)}}const l=new Zw;l.setAttribute("position",new Hw(s,3)),l.setAttribute("color",new Hw(a,3));super(l,new kP({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sL=new rS,aL=new rS,lL=new rS;class uL extends sw{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let r=new Zw;r.setAttribute("position",new Hw([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new kP({fog:!1,toneMapped:!1});this.lightPlane=new WP(r,i),this.add(this.lightPlane),r=new Zw,r.setAttribute("position",new Hw([0,0,0,0,0,1],3)),this.targetLine=new WP(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sL.setFromMatrixPosition(this.light.matrixWorld),aL.setFromMatrixPosition(this.light.target.matrixWorld),lL.subVectors(aL,sL),this.lightPlane.lookAt(aL),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(aL),this.targetLine.scale.z=lL.length()}}const cL=new rS,hL=new ST;class pL extends KP{constructor(t){const e=new Zw,n=new kP({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function s(t,e){a(t),a(e)}function a(t){r.push(0,0,0),i.push(0,0,0),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),e.setAttribute("position",new Hw(r,3)),e.setAttribute("color",new Hw(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Ew(16755200),u=new Ew(16711680),c=new Ew(43775),h=new Ew(16777215),p=new Ew(3355443);this.setColors(l,u,c,h,p)}setColors(t,e,n,r,i){const o=this.geometry.getAttribute("color");o.setXYZ(0,t.r,t.g,t.b),o.setXYZ(1,t.r,t.g,t.b),o.setXYZ(2,t.r,t.g,t.b),o.setXYZ(3,t.r,t.g,t.b),o.setXYZ(4,t.r,t.g,t.b),o.setXYZ(5,t.r,t.g,t.b),o.setXYZ(6,t.r,t.g,t.b),o.setXYZ(7,t.r,t.g,t.b),o.setXYZ(8,t.r,t.g,t.b),o.setXYZ(9,t.r,t.g,t.b),o.setXYZ(10,t.r,t.g,t.b),o.setXYZ(11,t.r,t.g,t.b),o.setXYZ(12,t.r,t.g,t.b),o.setXYZ(13,t.r,t.g,t.b),o.setXYZ(14,t.r,t.g,t.b),o.setXYZ(15,t.r,t.g,t.b),o.setXYZ(16,t.r,t.g,t.b),o.setXYZ(17,t.r,t.g,t.b),o.setXYZ(18,t.r,t.g,t.b),o.setXYZ(19,t.r,t.g,t.b),o.setXYZ(20,t.r,t.g,t.b),o.setXYZ(21,t.r,t.g,t.b),o.setXYZ(22,t.r,t.g,t.b),o.setXYZ(23,t.r,t.g,t.b),o.setXYZ(24,e.r,e.g,e.b),o.setXYZ(25,e.r,e.g,e.b),o.setXYZ(26,e.r,e.g,e.b),o.setXYZ(27,e.r,e.g,e.b),o.setXYZ(28,e.r,e.g,e.b),o.setXYZ(29,e.r,e.g,e.b),o.setXYZ(30,e.r,e.g,e.b),o.setXYZ(31,e.r,e.g,e.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;hL.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fL("c",e,t,hL,0,0,-1),fL("t",e,t,hL,0,0,1),fL("n1",e,t,hL,-1,-1,-1),fL("n2",e,t,hL,1,-1,-1),fL("n3",e,t,hL,-1,1,-1),fL("n4",e,t,hL,1,1,-1),fL("f1",e,t,hL,-1,-1,1),fL("f2",e,t,hL,1,-1,1),fL("f3",e,t,hL,-1,1,1),fL("f4",e,t,hL,1,1,1),fL("u1",e,t,hL,.7,1.1,-1),fL("u2",e,t,hL,-.7,1.1,-1),fL("u3",e,t,hL,0,2,-1),fL("cf1",e,t,hL,-1,0,1),fL("cf2",e,t,hL,1,0,1),fL("cf3",e,t,hL,0,-1,1),fL("cf4",e,t,hL,0,1,1),fL("cn1",e,t,hL,-1,0,-1),fL("cn2",e,t,hL,1,0,-1),fL("cn3",e,t,hL,0,-1,-1),fL("cn4",e,t,hL,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fL(t,e,n,r,i,o,s){cL.set(i,o,s).unproject(r);const a=e[t];if(void 0!==a){const t=n.getAttribute("position");for(let e=0,n=a.length;e<n;e++)t.setXYZ(a[e],cL.x,cL.y,cL.z)}}const dL=new sS;class mL extends KP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Zw;i.setIndex(new Lw(n,1)),i.setAttribute("position",new Lw(r,3)),super(i,new kP({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&dL.setFromObject(this.object),dL.isEmpty())return;const e=dL.min,n=dL.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gL extends KP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Zw;r.setIndex(new Lw(n,1)),r.setAttribute("position",new Hw([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new kP({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class yL extends WP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new Zw;r.setAttribute("position",new Hw([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new kP({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const i=new Zw;i.setAttribute("position",new Hw([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new mT(i,new Mw({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const vL=new rS;let _L,bL;class xL extends sw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rS(0,0,1),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rS(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===_L&&(_L=new Zw,_L.setAttribute("position",new Hw([0,0,0,0,1,0],3)),bL=new UI(0,.5,1,5,1),bL.translate(0,-.5,0)),this.position.copy(e),this.line=new WP(_L,new kP({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mT(bL,new Mw({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{vL.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(vL,e)}}setLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class EL extends KP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Zw;n.setAttribute("position",new Hw(e,3)),n.setAttribute("color",new Hw([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new kP({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const r=new Ew,i=this.geometry.attributes.color.array;return r.set(t),r.toArray(i,0),r.toArray(i,3),r.set(e),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class SL{constructor(){this.type="ShapePath",this.color=new Ew,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new OI,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],s=e[o],a=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[o],a=-a,s=e[i],l=-l),t.y<n.y||t.y>s.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-a*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(s.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=s.x)return!0}}return r}const n=yC.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,o,s;const a=[];if(1===r.length)return o=r[0],s=new XI,s.curves=o.curves,a.push(s),a;let l=!n(r[0].getPoints());l=t?!l:l;const u=[],c=[];let h,p,f=[],d=0;c[d]=void 0,f[d]=[];for(let m=0,g=r.length;m<g;m++)o=r[m],h=o.getPoints(),i=n(h),i=t?!i:i,i?(!l&&c[d]&&d++,c[d]={s:new XI,p:h},c[d].s.curves=o.curves,l&&d++,f[d]=[]):f[d].push({h:o,p:h[0]});if(!c[0])return function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new XI;i.curves=r.curves,e.push(i)}return e}(r);if(c.length>1){let t=!1,n=0;for(let e=0,r=c.length;e<r;e++)u[e]=[];for(let r=0,i=c.length;r<i;r++){const i=f[r];for(let o=0;o<i.length;o++){const s=i[o];let a=!0;for(let i=0;i<c.length;i++)e(s.p,c[i].p)&&(r!==i&&n++,a?(a=!1,u[i].push(s)):t=!0);a&&u[r].push(s)}}n>0&&!1===t&&(f=u)}for(let m=0,g=c.length;m<g;m++){s=c[m].s,a.push(s),p=f[m];for(let t=0,e=p.length;t<e;t++)s.holes.push(p[t].h)}return a}}class wL extends ZE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(t,e,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Pv}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Pv);var TL=n(4585);function ML(t){let e;const n=new Set,r=(t,r)=>{const i="function"===typeof t?t(e):t;if(i!==e){const t=e;e=r?i:Object.assign({},e,i),n.forEach((n=>n(e,t)))}},i=()=>e,o={setState:r,getState:i,subscribe:(t,r,o)=>r||o?function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(e);function a(){const n=r(e);if(!o(s,n)){const e=s;t(s=n,e)}}return n.add(a),()=>n.delete(a)}(t,r,o):(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(r,i,o),o}const RL="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;var AL=n(258),PL=n.n(AL),IL=n(4545);const CL=[];function OL(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t===e;if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function NL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===e&&(e=[t]);for(const s of CL)if(OL(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const t=CL.indexOf(i);-1!==t&&CL.splice(t,1)},promise:(o=t,"object"===typeof o&&"function"===typeof o.then?t:t(...e)).then((t=>{i.response=t,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((t=>i.error=t))};var o;if(CL.push(i),!n)throw i.promise}const LL={};var DL,UL;const FL=t=>"colorSpace"in t||"outputColorSpace"in t,kL=()=>{var t;return null!=(t=LL.ColorManagement)?t:null},BL=t=>t&&t.isOrthographicCamera,GL="undefined"!==typeof window&&(null!=(DL=window.document)&&DL.createElement||"ReactNative"===(null==(UL=window.navigator)?void 0:UL.product))?i.useLayoutEffect:i.useEffect;function jL(t){const e=i.useRef(t);return GL((()=>{e.current=t}),[t]),e}function zL(t){let{set:e}=t;return GL((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class HL extends i.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}HL.getDerivedStateFromError=()=>({error:!0});const VL="__default",XL=new Map,WL=t=>t&&!!t.memoized&&!!t.changes;function YL(t){var e;const n="undefined"!==typeof window?null!=(e=window.devicePixelRatio)?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const qL=t=>{var e;return null==(e=t.__r3f)?void 0:e.root.getState()};function $L(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const KL={obj:t=>t===Object(t)&&!KL.arr(t)&&"function"!==typeof t,fun:t=>"function"===typeof t,str:t=>"string"===typeof t,num:t=>"number"===typeof t,boo:t=>"boolean"===typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e){let{arrays:n="shallow",objects:r="reference",strict:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof t!==typeof e||!!t!==!!e)return!1;if(KL.str(t)||KL.num(t))return t===e;const o=KL.obj(t);if(o&&"reference"===r)return t===e;const s=KL.arr(t);if(s&&"reference"===n)return t===e;if((s||o)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(o&&"shallow"===n&&"shallow"===r){for(a in i?e:t)if(!KL.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(KL.und(a)){if(s&&0===t.length&&0===e.length)return!0;if(o&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}};function ZL(t){const e={nodes:{},materials:{}};return t&&t.traverse((t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)})),e}function JL(t,e){return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function QL(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce(((t,e)=>t[e]),t),{target:n,key:i}}return{target:n,key:e}}const tD=/-\d+$/;function eD(t,e,n){if(KL.str(n)){if(tD.test(n)){const e=n.replace(tD,""),{target:r,key:i}=QL(t,e);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=QL(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function nD(t,e,n){var r,i;if(KL.str(n)){const{target:r,key:i}=QL(t,n),o=e.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=e.__r3f)||null==r.previousAttach||r.previousAttach(t,e);null==(i=e.__r3f)||delete i.previousAttach}function rD(t,e){let{children:n,key:r,ref:i,...o}=e,{children:s,key:a,ref:l,...u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var h;const p=null!=(h=null==t?void 0:t.__r3f)?h:{},f=Object.entries(o),d=[];if(c){const t=Object.keys(u);for(let e=0;e<t.length;e++)o.hasOwnProperty(t[e])||f.unshift([t[e],VL+"remove"])}f.forEach((e=>{let[n,r]=e;var i;if(null!=(i=t.__r3f)&&i.primitive&&"object"===n)return;if(KL.equ(r,u[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return d.push([n,r,!0,[]]);let s=[];n.includes("-")&&(s=n.split("-")),d.push([n,r,!1,s]);for(const t in o){const e=o[t];t.startsWith("".concat(n,"-"))&&d.push([t,e,!1,t.split("-")])}}));const m={...o};return p.memoizedProps&&p.memoizedProps.args&&(m.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(m.attach=p.memoizedProps.attach),{memoized:m,changes:d}}const iD="undefined"!==typeof process&&!1;function oD(t,e){var n,r,i;const o=null!=(n=t.__r3f)?n:{},s=o.root,a=null!=(r=null==s||null==s.getState?void 0:s.getState())?r:{},{memoized:l,changes:u}=WL(e)?e:rD(t,e),c=o.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[e,n,r,i]=u[h];if(FL(t)){const t=3001,r="srgb",i="srgb-linear";"encoding"===e?(e="colorSpace",n=n===t?r:i):"outputEncoding"===e&&(e="outputColorSpace",n=n===t?r:i)}let s=t,l=s[e];if(i.length&&(l=i.reduce(((t,e)=>t[e]),t),!l||!l.set)){const[n,...r]=i.reverse();s=r.reverse().reduce(((t,e)=>t[e]),t),e=n}if(n===VL+"remove")if(s.constructor){let t=XL.get(s.constructor);t||(t=new s.constructor,XL.set(s.constructor,t)),n=t[e]}else n=0;if(r)n?o.handlers[e]=n:delete o.handlers[e],o.eventCount=Object.keys(o.handlers).length;else if(l&&l.set&&(l.copy||l instanceof VS)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&(iD?l.constructor.name===n.constructor.name:l.constructor===n.constructor))l.copy(n);else if(void 0!==n){const t=l instanceof Ew;!t&&l.setScalar?l.setScalar(n):l instanceof VS&&n instanceof VS?l.mask=n.mask:l.set(n),kL()||a.linear||!t||l.convertSRGBToLinear()}}else if(s[e]=n,s[e]instanceof qE&&s[e].format===mb&&s[e].type===eb){const t=s[e];FL(t)&&FL(a.gl)?t.colorSpace=a.gl.outputColorSpace:t.encoding=a.gl.outputEncoding}sD(t)}if(o.parent&&t.raycast&&c!==o.eventCount){const e=$L(t).getState().internal,n=e.interaction.indexOf(t);n>-1&&e.interaction.splice(n,1),o.eventCount&&e.interaction.push(t)}return!(1===u.length&&"onUpdate"===u[0][0])&&u.length&&null!=(i=t.__r3f)&&i.parent&&aD(t),t}function sD(t){var e,n;const r=null==(e=t.__r3f)||null==(n=e.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function aD(t){null==t.onUpdate||t.onUpdate(t)}function lD(t,e){t.manual||(BL(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function uD(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function cD(t,e,n,r){const i=n.get(e);i&&(n.delete(e),0===n.size&&(t.delete(r),i.target.releasePointerCapture(r)))}function hD(t){function e(t){return t.filter((t=>["Move","Over","Enter","Out","Leave"].some((e=>{var n;return null==(n=t.__r3f)?void 0:n.handlers["onPointer"+e]}))))}function n(e){const{internal:n}=t.getState();for(const t of n.hovered.values())if(!e.length||!e.find((e=>e.object===t.object&&e.index===t.index&&e.instanceId===t.instanceId))){const r=t.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(uD(t)),null!=r&&r.eventCount){const n={...t,intersections:e};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(t,e){for(let n=0;n<e.length;n++){const r=e[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(t)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return e=>{const{internal:r}=t.getState();"pointerId"in e&&r.capturedMap.has(e.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(e.pointerId)&&(r.capturedMap.delete(e.pointerId),n([]))}))}}return function(o){const{onPointerMissed:s,internal:a}=t.getState();a.lastEvent.current=o;const l="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,c=function(e,n){const r=t.getState(),i=new Set,o=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let t=0;t<s.length;t++){const e=qL(s[t]);e&&(e.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(e,r);let a=s.flatMap((function(t){const n=qL(t);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(e,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(t,!0):[]):[];var r})).sort(((t,e)=>{const n=qL(t.object),r=qL(e.object);return n&&r&&r.events.priority-n.events.priority||t.distance-e.distance})).filter((t=>{const e=uD(t);return!i.has(e)&&(i.add(e),!0)}));r.events.filter&&(a=r.events.filter(a,r));for(const t of a){let e=t.object;for(;e;){var l;null!=(l=e.__r3f)&&l.eventCount&&o.push({...t,eventObject:e}),e=e.parent}}if("pointerId"in e&&r.internal.capturedMap.has(e.pointerId))for(let t of r.internal.capturedMap.get(e.pointerId).values())i.has(uD(t.intersection))||o.push(t.intersection);return o}(o,l?e:void 0),h=u?function(e){const{internal:n}=t.getState(),r=e.offsetX-n.initialClick[0],i=e.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===i&&(a.initialClick=[o.offsetX,o.offsetY],a.initialHits=c.map((t=>t.eventObject))),u&&!c.length&&h<=2&&(r(o,a.interaction),s&&s(o)),l&&n(c),function(e,r,i,o){const s=t.getState();if(e.length){const t={stopped:!1};for(const a of e){const l=qL(a.object)||s,{raycaster:u,pointer:c,camera:h,internal:p}=l,f=new rS(c.x,c.y,0).unproject(h),d=t=>{var e,n;return null!=(e=null==(n=p.capturedMap.get(t))?void 0:n.has(a.eventObject))&&e},m=t=>{const e={intersection:a,target:r.target};p.capturedMap.has(t)?p.capturedMap.get(t).set(a.eventObject,e):p.capturedMap.set(t,new Map([[a.eventObject,e]])),r.target.setPointerCapture(t)},g=t=>{const e=p.capturedMap.get(t);e&&cD(p.capturedMap,a.eventObject,e,t)};let y={};for(let t in r){let e=r[t];"function"!==typeof e&&(y[t]=e)}let v={...a,...y,pointer:c,intersections:e,stopped:t.stopped,delta:i,unprojectedPoint:f,ray:u.ray,camera:h,stopPropagation(){const i="pointerId"in r&&p.capturedMap.get(r.pointerId);(!i||i.has(a.eventObject))&&(v.stopped=t.stopped=!0,p.hovered.size&&Array.from(p.hovered.values()).find((t=>t.eventObject===a.eventObject)))&&n([...e.slice(0,e.indexOf(a)),a])},target:{hasPointerCapture:d,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:d,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r};if(o(v),!0===t.stopped)break}}}(c,o,h,(function(t){const e=t.eventObject,n=e.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const e=uD(t),n=a.hovered.get(e);n?n.stopped&&t.stopPropagation():(a.hovered.set(e,t),null==s.onPointerOver||s.onPointerOver(t),null==s.onPointerEnter||s.onPointerEnter(t))}null==s.onPointerMove||s.onPointerMove(t)}else{const n=s[i];n?u&&!a.initialHits.includes(e)||(r(o,a.interaction.filter((t=>!a.initialHits.includes(t)))),n(t)):u&&a.initialHits.includes(e)&&r(o,a.interaction.filter((t=>!a.initialHits.includes(t))))}}))}}}}const pD=t=>!(null==t||!t.render),fD=i.createContext(null),dD=(t,e)=>{const n=function(t){const e="function"===typeof t?ML(t):t,n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,i.useReducer)((t=>t+1),0),o=e.getState(),s=(0,i.useRef)(o),a=(0,i.useRef)(t),l=(0,i.useRef)(n),u=(0,i.useRef)(!1),c=(0,i.useRef)();let h;void 0===c.current&&(c.current=t(o));let p=!1;(s.current!==o||a.current!==t||l.current!==n||u.current)&&(h=t(o),p=!n(c.current,h)),RL((()=>{p&&(c.current=h),s.current=o,a.current=t,l.current=n,u.current=!1}));const f=(0,i.useRef)(o);RL((()=>{const t=()=>{try{const t=e.getState(),n=a.current(t);l.current(c.current,n)||(s.current=t,c.current=n,r())}catch(oU){u.current=!0,r()}},n=e.subscribe(t);return e.getState()!==f.current&&t(),n}),[]);const d=p?h:c.current;return(0,i.useDebugValue)(d),d};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[n,e];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}},n}(((n,r)=>{const o=new rS,s=new rS,a=new rS;function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:u,left:c}=n,h=i/l;e instanceof rS?a.copy(e):a.set(...e);const p=t.getWorldPosition(o).distanceTo(a);if(BL(t))return{width:i/t.zoom,height:l/t.zoom,top:u,left:c,factor:1,distance:p,aspect:h};{const e=t.fov*Math.PI/180,n=2*Math.tan(e/2)*p,r=n*(i/l);return{width:r,height:n,top:u,left:c,factor:i/r,distance:p,aspect:h}}}let u;const c=t=>n((e=>({performance:{...e.performance,current:t}}))),h=new TE,p={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t(r(),e)},advance:(t,n)=>e(t,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new iN,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const t=r();u&&clearTimeout(u),t.performance.current!==t.performance.min&&c(t.performance.min),u=setTimeout((()=>c(r().performance.max)),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:t=>n((e=>({...e,events:{...e.events,...t}}))),setSize:(t,e,i,o,a)=>{const u=r().camera,c={width:t,height:e,top:o||0,left:a||0,updateStyle:i};n((t=>({size:c,viewport:{...t.viewport,...l(u,s,c)}})))},setDpr:t=>n((e=>{const n=YL(t);return{viewport:{...e.viewport,dpr:n,initialDpr:e.viewport.initialDpr||n}}})),setFrameloop:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const e=r().clock;e.stop(),e.elapsedTime=0,"never"!==t&&(e.start(),e.elapsedTime=0),n((()=>({frameloop:t})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:i.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(t,e,n)=>{const i=r().internal;return i.priority=i.priority+(e>0?1:0),i.subscribers.push({ref:t,priority:e,store:n}),i.subscribers=i.subscribers.sort(((t,e)=>t.priority-e.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(e>0?1:0),n.subscribers=n.subscribers.filter((e=>e.ref!==t)))}}}};return p})),r=n.getState();let o=r.size,s=r.viewport.dpr,a=r.camera;return n.subscribe((()=>{const{camera:t,size:e,viewport:r,gl:i,set:l}=n.getState();if(e.width!==o.width||e.height!==o.height||r.dpr!==s){var u;o=e,s=r.dpr,lD(t,e),i.setPixelRatio(r.dpr);const n=null!=(u=e.updateStyle)?u:"undefined"!==typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(e.width,e.height,n)}t!==a&&(a=t,l((e=>({viewport:{...e.viewport,...e.viewport.getCurrentViewport(t)}}))))})),n.subscribe((e=>t(e))),n};let mD,gD=new Set,yD=new Set,vD=new Set;function _D(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function bD(t,e){switch(t){case"before":return _D(gD,e);case"after":return _D(yD,e);case"tail":return _D(vD,e)}}let xD,ED;function SD(t,e,n){let r=e.clock.getDelta();for("never"===e.frameloop&&"number"===typeof t&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),xD=e.internal.subscribers,mD=0;mD<xD.length;mD++)ED=xD[mD],ED.ref.current(ED.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}function wD(){const t=i.useContext(fD);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function TD(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>t,e=arguments.length>1?arguments[1]:void 0;return wD()(t,e)}function MD(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=wD(),r=n.getState().internal.subscribe,i=jL(t);return GL((()=>r(i,e,n)),[e,r,n]),null}const RD=new WeakMap;function AD(t,e){return function(n){let r=RD.get(n);r||(r=new n,RD.set(n,r)),t&&t(r);for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return Promise.all(o.map((t=>new Promise(((n,i)=>r.load(t,(t=>{t.scene&&Object.assign(t,ZL(t.scene)),n(t)}),e,(e=>i(new Error("Could not load ".concat(t,": ").concat(null==e?void 0:e.message))))))))))}}function PD(t,e,n,r){const i=Array.isArray(e)?e:[e],o=((t,e,n)=>NL(t,e,!1,n))(AD(n,r),[t,...i],{equal:KL.equ});return Array.isArray(e)?o:o[0]}PD.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return((t,e,n)=>{NL(t,e,!0,n)})(AD(n),[t,...r])},PD.clear=function(t,e){return(t=>{if(void 0===t||0===t.length)CL.splice(0,CL.length);else{const e=CL.find((e=>OL(t,e.keys,e.equal)));e&&e.remove()}})([t,...Array.isArray(e)?e:[e]])};const ID=new Map,{invalidate:CD,advance:OD}=function(t){let e,n,r,i=!1,o=!1;function s(a){n=requestAnimationFrame(s),i=!0,e=0,bD("before",a),o=!0;for(const n of t.values()){var l;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(l=r.gl.xr)&&l.isPresenting||(e+=SD(a,r))}if(o=!1,bD("after",a),0===e)return bD("tail",a),i=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function e(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a;if(!n)return t.forEach((t=>e(t.store.getState(),r)));null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):o?2:1,i||(i=!0,requestAnimationFrame(s)))},advance:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&bD("before",e),r)SD(e,r,i);else for(const o of t.values())SD(e,o.store.getState());n&&bD("after",e)}}}(ID),{reconciler:ND,applyProps:LD}=function(t,e){function n(t,e,n){let r,{args:i=[],attach:o,...s}=e,a="".concat(t[0].toUpperCase()).concat(t.slice(1));if("primitive"===t){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=JL(s.object,{type:t,root:n,attach:o,primitive:!0})}else{const e=LL[a];if(!e)throw new Error("R3F: ".concat(a," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");r=JL(new e(...i),{type:t,root:n,attach:o,memoizedProps:{args:i}})}return void 0===r.__r3f.attach&&(r instanceof Zw?r.__r3f.attach="geometry":r instanceof Tw&&(r.__r3f.attach="material")),"inject"!==a&&oD(r,s),r}function r(t,e){let n=!1;var r,i;e&&(null!=(r=e.__r3f)&&r.attach?eD(t,e,e.__r3f.attach):e.isObject3D&&t.isObject3D&&(t.add(e),n=!0),n||null==(i=t.__r3f)||i.objects.push(e),e.__r3f||JL(e,{}),e.__r3f.parent=t,aD(e),sD(e))}function i(t,e,n){let r=!1;if(e){var i,o;if(null!=(i=e.__r3f)&&i.attach)eD(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){e.parent=t,e.dispatchEvent({type:"added"}),t.dispatchEvent({type:"childadded",child:e});const i=t.children.filter((t=>t!==e)),o=i.indexOf(n);t.children=[...i.slice(0,o),e,...i.slice(o)],r=!0}r||null==(o=t.__r3f)||o.objects.push(e),e.__r3f||JL(e,{}),e.__r3f.parent=t,aD(e),sD(e)}}function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&[...t].forEach((t=>s(e,t,n)))}function s(t,e,n){if(e){var r,i,s;if(e.__r3f&&(e.__r3f.parent=null),null!=(r=t.__r3f)&&r.objects&&(t.__r3f.objects=t.__r3f.objects.filter((t=>t!==e))),null!=(i=e.__r3f)&&i.attach)nD(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){var a;t.remove(e),null!=(a=e.__r3f)&&a.root&&function(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter((t=>t!==e)),n.initialHits=n.initialHits.filter((t=>t!==e)),n.hovered.forEach(((t,r)=>{t.eventObject!==e&&t.object!==e||n.hovered.delete(r)})),n.capturedMap.forEach(((t,r)=>{cD(n.capturedMap,e,t,r)}))}($L(e),e)}const u=null==(s=e.__r3f)?void 0:s.primitive,c=!u&&(void 0===n?null!==e.dispose:n);var l;if(!u)o(null==(l=e.__r3f)?void 0:l.objects,e,c),o(e.children,e,c);if(delete e.__r3f,c&&e.dispose&&"Scene"!==e.type){const t=()=>{try{e.dispose()}catch(Dn){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,IL.unstable_scheduleCallback)(IL.unstable_IdlePriority,t):t()}sD(t)}}const a=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:PL()({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,e)=>{if(!e)return;const n=t.getState().scene;n.__r3f&&(n.__r3f.root=t,r(n,e))},removeChildFromContainer:(t,e)=>{e&&s(t.getState().scene,e)},insertInContainerBefore:(t,e,n)=>{if(!e||!n)return;const r=t.getState().scene;r.__r3f&&i(r,e,n)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var e;const n=null!=(e=null==t?void 0:t.__r3f)?e:{};return Boolean(n.handlers)},prepareUpdate(t,e,n,r){var i;if((null!=(i=null==t?void 0:t.__r3f)?i:{}).primitive&&r.object&&r.object!==t)return[!0];{const{args:e=[],children:i,...o}=r,{args:s=[],children:a,...l}=n;if(!Array.isArray(e))throw new Error("R3F: the args prop must be an array!");if(e.some(((t,e)=>t!==s[e])))return[!0];const u=rD(t,o,l,!0);return u.changes.length?[!1,u]:null}},commitUpdate(t,e,i,o,a,l){let[u,c]=e;u?function(t,e,i,o){var a;const l=null==(a=t.__r3f)?void 0:a.parent;if(!l)return;const u=n(e,i,t.__r3f.root);if(t.children){for(const e of t.children)e.__r3f&&r(u,e);t.children=t.children.filter((t=>!t.__r3f))}t.__r3f.objects.forEach((t=>r(u,t))),t.__r3f.objects=[],t.__r3f.autoRemovedBeforeAppend||s(l,t),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),r(l,u),u.raycast&&u.__r3f.eventCount&&$L(u).getState().internal.interaction.push(u);[o,o.alternate].forEach((t=>{null!==t&&(t.stateNode=u,t.ref&&("function"===typeof t.ref?t.ref(u):t.ref.current=u))}))}(t,i,a,l):oD(t,c)},commitMount(t,e,n,r){var i;const o=null!=(i=t.__r3f)?i:{};t.raycast&&o.handlers&&o.eventCount&&$L(t).getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>JL(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var e;const{attach:n,parent:r}=null!=(e=t.__r3f)?e:{};n&&r&&nD(r,t,n),t.isObject3D&&(t.visible=!1),sD(t)},unhideInstance(t,e){var n;const{attach:r,parent:i}=null!=(n=t.__r3f)?n:{};r&&i&&eD(i,t,r),(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0),sD(t)},createTextInstance:a,hideTextInstance:a,unhideTextInstance:a,getCurrentEventPriority:()=>e?e():TL.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&KL.fun(performance.now)?performance.now:KL.fun(Date.now)?Date.now:()=>0,scheduleTimeout:KL.fun(setTimeout)?setTimeout:void 0,cancelTimeout:KL.fun(clearTimeout)?clearTimeout:void 0}),applyProps:oD}}(0,(function(){var t;const e="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!e)return TL.DefaultEventPriority;switch(null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return TL.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return TL.ContinuousEventPriority;default:return TL.DefaultEventPriority}})),DD={objects:"shallow",strict:!1},UD=(t,e)=>{const n="function"===typeof t?t(e):t;return pD(n)?n:new TA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function FD(t){const e=ID.get(t),n=null==e?void 0:e.fiber,r=null==e?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const o="function"===typeof reportError?reportError:console.error,s=r||dD(CD,OD),a=n||ND.createContainer(s,TL.ConcurrentRoot,null,!1,null,"",o,null);let l;e||ID.set(t,{fiber:a,store:s});let u,c=!1;return{configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:r,scene:i,events:o,onCreated:a,shadows:h=!1,linear:p=!1,flat:f=!1,legacy:d=!1,orthographic:m=!1,frameloop:g="always",dpr:y=[1,2],performance:v,raycaster:_,camera:b,onPointerMissed:x}=e,E=s.getState(),S=E.gl;E.gl||E.set({gl:S=UD(n,t)});let w=E.raycaster;w||E.set({raycaster:w=new UN});const{params:T,...M}=_||{};if(KL.equ(M,w,DD)||LD(w,{...M}),KL.equ(T,w.params,DD)||LD(w,{params:{...w.params,...T}}),!E.camera||E.camera===u&&!KL.equ(u,b,DD)){u=b;const t=b instanceof ST,e=t?b:m?new tM(0,0,0,0,.1,1e3):new RT(75,0,.1,1e3);t||(e.position.z=5,b&&(LD(e,b),("aspect"in b||"left"in b||"right"in b||"bottom"in b||"top"in b)&&(e.manual=!0,e.updateProjectionMatrix())),E.camera||null!=b&&b.rotation||e.lookAt(0,0,0)),E.set({camera:e}),w.camera=e}if(!E.scene){let t;i instanceof AA?t=i:(t=new AA,i&&LD(t,i)),E.set({scene:JL(t)})}if(!E.xr){var R;const t=(t,e)=>{const n=s.getState();"never"!==n.frameloop&&OD(t,!0,n,e)},e=()=>{const e=s.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?t:null),e.gl.xr.isPresenting||CD(e)},n={connect(){const t=s.getState().gl;t.xr.addEventListener("sessionstart",e),t.xr.addEventListener("sessionend",e)},disconnect(){const t=s.getState().gl;t.xr.removeEventListener("sessionstart",e),t.xr.removeEventListener("sessionend",e)}};"function"===typeof(null==(R=S.xr)?void 0:R.addEventListener)&&n.connect(),E.set({xr:n})}if(S.shadowMap){const t=S.shadowMap.enabled,e=S.shadowMap.type;if(S.shadowMap.enabled=!!h,KL.boo(h))S.shadowMap.type=kv;else if(KL.str(h)){var A;const t={basic:Uv,percentage:Fv,soft:kv,variance:Bv};S.shadowMap.type=null!=(A=t[h])?A:kv}else KL.obj(h)&&Object.assign(S.shadowMap,h);t===S.shadowMap.enabled&&e===S.shadowMap.type||(S.shadowMap.needsUpdate=!0)}const P=kL();if(P&&("enabled"in P?P.enabled=!d:"legacyMode"in P&&(P.legacyMode=d)),!c){LD(S,{outputEncoding:p?3e3:3001,toneMapping:f?M_:I_})}E.legacy!==d&&E.set((()=>({legacy:d}))),E.linear!==p&&E.set((()=>({linear:p}))),E.flat!==f&&E.set((()=>({flat:f}))),!n||KL.fun(n)||pD(n)||KL.equ(n,S,DD)||LD(S,n),o&&!E.events.handlers&&E.set({events:o(s)});const I=function(t,e){const n="undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement;if(e){const{width:t,height:r,top:i,left:o,updateStyle:s=n}=e;return{width:t,height:r,top:i,left:o,updateStyle:s}}if("undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:e,height:r,top:i,left:o}=t.parentElement.getBoundingClientRect();return{width:e,height:r,top:i,left:o,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?{width:t.width,height:t.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(t,r);return KL.equ(I,E.size,DD)||E.setSize(I.width,I.height,I.updateStyle,I.top,I.left),y&&E.viewport.dpr!==YL(y)&&E.setDpr(y),E.frameloop!==g&&E.setFrameloop(g),E.onPointerMissed||E.set({onPointerMissed:x}),v&&!KL.equ(v,E.performance,DD)&&E.set((t=>({performance:{...t.performance,...v}}))),l=a,c=!0,this},render(e){return c||this.configure(),ND.updateContainer(i.createElement(kD,{store:s,children:e,onCreated:l,rootElement:t}),a,null,(()=>{})),s},unmount(){BD(t)}}}function kD(t){let{store:e,children:n,onCreated:r,rootElement:o}=t;return GL((()=>{const t=e.getState();t.set((t=>({internal:{...t.internal,active:!0}}))),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(o)}),[]),i.createElement(fD.Provider,{value:e},n)}function BD(t,e){const n=ID.get(t),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),ND.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),function(t){t.dispose&&"Scene"!==t.type&&t.dispose();for(const e in t)null==e.dispose||e.dispose(),delete t[e]}(i),ID.delete(t),e&&e(t)}catch(Dn){}}),500)}))}}ND.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version});i.unstable_act;function GD(){return GD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GD.apply(this,arguments)}var jD=n(7494),zD=n.n(jD);function HD(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:o}=void 0===t?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||("undefined"===typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=(0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),c=e?"number"===typeof e?e:e.scroll:null,h=e?"number"===typeof e?e:e.resize:null,p=(0,i.useRef)(!1);(0,i.useEffect)((()=>(p.current=!0,()=>{p.current=!1})));const[f,d,m]=(0,i.useMemo)((()=>{const t=()=>{if(!u.current.element)return;const{left:t,top:e,width:n,height:r,bottom:i,right:s,x:a,y:c}=u.current.element.getBoundingClientRect(),h={left:t,top:e,width:n,height:r,bottom:i,right:s,x:a,y:c};u.current.element instanceof HTMLElement&&o&&(h.height=u.current.element.offsetHeight,h.width=u.current.element.offsetWidth),Object.freeze(h),p.current&&!WD(u.current.lastBounds,h)&&l(u.current.lastBounds=h)};return[t,h?zD()(t,h):t,c?zD()(t,c):t]}),[l,o,c,h]);function g(){u.current.scrollContainers&&(u.current.scrollContainers.forEach((t=>t.removeEventListener("scroll",m,!0))),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function y(){u.current.element&&(u.current.resizeObserver=new s(m),u.current.resizeObserver.observe(u.current.element),n&&u.current.scrollContainers&&u.current.scrollContainers.forEach((t=>t.addEventListener("scroll",m,{capture:!0,passive:!0}))))}var v,_,b;return v=m,_=Boolean(n),(0,i.useEffect)((()=>{if(_){const t=v;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[v,_]),b=d,(0,i.useEffect)((()=>{const t=b;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[b]),(0,i.useEffect)((()=>{g(),y()}),[n,m,d]),(0,i.useEffect)((()=>g),[]),[t=>{t&&t!==u.current.element&&(g(),u.current.element=t,u.current.scrollContainers=VD(t),y())},a,f]}function VD(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some((t=>"auto"===t||"scroll"===t))&&e.push(t),[...e,...VD(t.parentElement)]}const XD=["x","y","top","bottom","left","right","width","height"],WD=(t,e)=>XD.every((n=>t[n]===e[n]));var YD,qD,$D=Object.defineProperty,KD=Object.defineProperties,ZD=Object.getOwnPropertyDescriptors,JD=Object.getOwnPropertySymbols,QD=Object.prototype.hasOwnProperty,tU=Object.prototype.propertyIsEnumerable,eU=(t,e,n)=>e in t?$D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nU=(t,e)=>{for(var n in e||(e={}))QD.call(e,n)&&eU(t,n,e[n]);if(JD)for(var n of JD(e))tU.call(e,n)&&eU(t,n,e[n]);return t};"undefined"===typeof window||!(null==(YD=window.document)?void 0:YD.createElement)&&"ReactNative"!==(null==(qD=window.navigator)?void 0:qD.product)?i.useEffect:i.useLayoutEffect;function rU(t,e,n){if(!t)return;if(!0===n(t))return t;let r=e?t.return:t.child;for(;r;){const t=rU(r,e,n);if(t)return t;r=e?null:r.sibling}}function iU(t){try{return Object.defineProperties(t,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(sr){return t}}const oU=console.error;console.error=function(){const t=[...arguments].join("");if(!(null==t?void 0:t.startsWith("Warning:"))||!t.includes("useContext"))return oU.apply(this,arguments);console.error=oU};const sU=iU(i.createContext(null));class aU extends i.Component{render(){return i.createElement(sU.Provider,{value:this._reactInternals},this.props.children)}}function lU(){const t=i.useContext(sU);if(null===t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=i.useId();return i.useMemo((()=>{for(const n of[t,null==t?void 0:t.alternate]){if(!n)continue;const t=rU(n,!1,(t=>{let n=t.memoizedState;for(;n;){if(n.memoizedState===e)return!0;n=n.next}}));if(t)return t}}),[t,e])}function uU(){const t=function(){const t=lU(),[e]=i.useState((()=>new Map));e.clear();let n=t;for(;n;){if(n.type&&"object"===typeof n.type){const t=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;t&&t!==sU&&!e.has(t)&&e.set(t,i.useContext(iU(t)))}n=n.return}return e}();return i.useMemo((()=>Array.from(t.keys()).reduce(((e,n)=>r=>{return i.createElement(e,null,i.createElement(n.Provider,(o=nU({},r),s={value:t.get(n)},KD(o,ZD(s)))));var o,s}),(t=>i.createElement(aU,nU({},t))))),[t])}const cU={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function hU(t){const{handlePointer:e}=hD(t);return{priority:1,enabled:!0,compute(t,e,n){e.pointer.set(t.offsetX/e.size.width*2-1,-t.offsetY/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(cU).reduce(((t,n)=>({...t,[n]:e(n)})),{}),update:()=>{var e;const{events:n,internal:r}=t.getState();null!=(e=r.lastEvent)&&e.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:e=>{var n;const{set:r,events:i}=t.getState();null==i.disconnect||i.disconnect(),r((t=>({events:{...t.events,connected:e}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((t=>{let[n,r]=t;const[i,o]=cU[n];e.addEventListener(i,r,{passive:o})}))},disconnect:()=>{const{set:e,events:n}=t.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((t=>{let[e,r]=t;if(n&&n.connected instanceof HTMLElement){const[t]=cU[e];n.connected.removeEventListener(t,r)}})),e((t=>({events:{...t.events,connected:void 0}}))))}}}const pU=i.forwardRef((function(t,n){let{children:r,fallback:o,resize:s,style:a,gl:l,events:u=hU,eventSource:c,eventPrefix:h,shadows:p,linear:f,flat:d,legacy:m,orthographic:g,frameloop:y,dpr:v,performance:_,raycaster:b,camera:x,scene:E,onPointerMissed:S,onCreated:w,...T}=t;i.useMemo((()=>{return t=e,void Object.assign(LL,t);var t}),[]);const M=uU(),[R,A]=HD({scroll:!0,debounce:{scroll:50,resize:0},...s}),P=i.useRef(null),I=i.useRef(null);i.useImperativeHandle(n,(()=>P.current));const C=jL(S),[O,N]=i.useState(!1),[L,D]=i.useState(!1);if(O)throw O;if(L)throw L;const U=i.useRef(null);GL((()=>{const t=P.current;A.width>0&&A.height>0&&t&&(U.current||(U.current=FD(t)),U.current.configure({gl:l,events:u,shadows:p,linear:f,flat:d,legacy:m,orthographic:g,frameloop:y,dpr:v,performance:_,raycaster:b,camera:x,scene:E,size:A,onPointerMissed:function(){return null==C.current?void 0:C.current(...arguments)},onCreated:t=>{var e;null==t.events.connect||t.events.connect(c?(e=c)&&e.hasOwnProperty("current")?c.current:c:I.current),h&&t.setEvents({compute:(t,e)=>{const n=t[h+"X"],r=t[h+"Y"];e.pointer.set(n/e.size.width*2-1,-r/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)}}),null==w||w(t)}}),U.current.render(i.createElement(M,null,i.createElement(HL,{set:D},i.createElement(i.Suspense,{fallback:i.createElement(zL,{set:N})},r)))))})),i.useEffect((()=>{const t=P.current;if(t)return()=>BD(t)}),[]);const F=c?"none":"auto";return i.createElement("div",GD({ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...a}},T),i.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},i.createElement("canvas",{ref:P,style:{display:"block"}},o)))})),fU=i.forwardRef((function(t,e){return i.createElement(aU,null,i.createElement(pU,GD({},t,{ref:e})))})),dU=(n.p,n.p+"static/media/hardwood2_diffuse.4c1710129123f60ec2f3.jpg"),mU=n.p+"static/media/hardwood2_bump.41a409043d35b8189e5f.jpg",gU=n.p+"static/media/hardwood2_roughness.eaf5e893334b43cd487c.jpg",yU=n.p+"static/media/brick_diffuse.6a71feccea9d170df4d1.png",vU=n.p+"static/media/brick_bump.8257ea063a89fe678f35.jpg";const _U=i.forwardRef(((t,e)=>{let{envMap:n,resolution:r=256,frames:o=1/0,makeDefault:s,children:a,...l}=t;const u=TD((t=>{let{set:e}=t;return e})),c=TD((t=>{let{camera:e}=t;return e})),h=TD((t=>{let{size:e}=t;return e})),p=i.useRef(null);i.useImperativeHandle(e,(()=>p.current),[]);const f=i.useRef(null),d=function(t,e,n){const r=TD((t=>t.size)),o=TD((t=>t.viewport)),s="number"===typeof t?t:r.width*o.dpr,a="number"===typeof e?e:r.height*o.dpr,l=("number"===typeof t?n:t)||{},{samples:u=0,depth:c,...h}=l,p=i.useMemo((()=>{const t=new ZE(s,a,{minFilter:K_,magFilter:K_,type:lb,...h});return c&&(t.depthTexture=new wM(s,a,ab)),t.samples=u,t}),[]);return i.useLayoutEffect((()=>{p.setSize(s,a),u&&(p.samples=u)}),[u,p,s,a]),i.useEffect((()=>()=>p.dispose()),[]),p}(r);i.useLayoutEffect((()=>{l.manual||(p.current.aspect=h.width/h.height)}),[h,l]),i.useLayoutEffect((()=>{p.current.updateProjectionMatrix()}));let m=0,g=null;const y="function"===typeof a;return MD((t=>{y&&(o===1/0||m<o)&&(f.current.visible=!1,t.gl.setRenderTarget(d),g=t.scene.background,n&&(t.scene.background=n),t.gl.render(t.scene,p.current),t.scene.background=g,t.gl.setRenderTarget(null),f.current.visible=!0,m++)})),i.useLayoutEffect((()=>{if(s){const t=c;return u((()=>({camera:p.current}))),()=>u((()=>({camera:t})))}}),[p,s,u]),i.createElement(i.Fragment,null,i.createElement("perspectiveCamera",GD({ref:p},l),!y&&a),i.createElement("group",{ref:f},y&&a(d.texture)))}));var bU=Object.defineProperty,xU=(t,e,n)=>(((t,e,n)=>{e in t?bU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);const EU=new OS,SU=new DT,wU=Math.cos(Math.PI/180*70),TU=(t,e)=>(t%e+e)%e;class MU extends fE{constructor(t,e){super(),xU(this,"object"),xU(this,"domElement"),xU(this,"enabled",!0),xU(this,"target",new rS),xU(this,"minDistance",0),xU(this,"maxDistance",1/0),xU(this,"minZoom",0),xU(this,"maxZoom",1/0),xU(this,"minPolarAngle",0),xU(this,"maxPolarAngle",Math.PI),xU(this,"minAzimuthAngle",-1/0),xU(this,"maxAzimuthAngle",1/0),xU(this,"enableDamping",!1),xU(this,"dampingFactor",.05),xU(this,"enableZoom",!0),xU(this,"zoomSpeed",1),xU(this,"enableRotate",!0),xU(this,"rotateSpeed",1),xU(this,"enablePan",!0),xU(this,"panSpeed",1),xU(this,"screenSpacePanning",!0),xU(this,"keyPanSpeed",7),xU(this,"zoomToCursor",!1),xU(this,"autoRotate",!1),xU(this,"autoRotateSpeed",2),xU(this,"reverseOrbit",!1),xU(this,"reverseHorizontalOrbit",!1),xU(this,"reverseVerticalOrbit",!1),xU(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),xU(this,"mouseButtons",{LEFT:Iv.ROTATE,MIDDLE:Iv.DOLLY,RIGHT:Iv.PAN}),xU(this,"touches",{ONE:Cv.ROTATE,TWO:Cv.DOLLY_PAN}),xU(this,"target0"),xU(this,"position0"),xU(this,"zoom0"),xU(this,"_domElementKeyEvents",null),xU(this,"getPolarAngle"),xU(this,"getAzimuthalAngle"),xU(this,"setPolarAngle"),xU(this,"setAzimuthalAngle"),xU(this,"getDistance"),xU(this,"listenToKeyEvents"),xU(this,"stopListenToKeyEvents"),xU(this,"saveState"),xU(this,"reset"),xU(this,"update"),xU(this,"connect"),xU(this,"dispose"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=t=>{let e=TU(t,2*Math.PI),r=u.phi;r<0&&(r+=2*Math.PI),e<0&&(e+=2*Math.PI);let i=Math.abs(e-r);2*Math.PI-i<i&&(e<r?e+=2*Math.PI:r+=2*Math.PI),c.phi=e-r,n.update()},this.setAzimuthalAngle=t=>{let e=TU(t,2*Math.PI),r=u.theta;r<0&&(r+=2*Math.PI),e<0&&(e+=2*Math.PI);let i=Math.abs(e-r);2*Math.PI-i<i&&(e<r?e+=2*Math.PI:r+=2*Math.PI),c.theta=e-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",K),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),a=s.NONE},this.update=(()=>{const e=new rS,i=new rS(0,1,0),o=(new nS).setFromUnitVectors(t.up,i),f=o.clone().invert(),d=new rS,m=new nS,g=2*Math.PI;return function(){const y=n.object.position;o.setFromUnitVectors(t.up,i),f.copy(o).invert(),e.copy(y).sub(n.target),e.applyQuaternion(o),u.setFromVector3(e),n.autoRotate&&a===s.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=c.theta*n.dampingFactor,u.phi+=c.phi*n.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let v=n.minAzimuthAngle,_=n.maxAzimuthAngle;isFinite(v)&&isFinite(_)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),_<-Math.PI?_+=g:_>Math.PI&&(_-=g),u.theta=v<=_?Math.max(v,Math.min(_,u.theta)):u.theta>(v+_)/2?Math.max(v,u.theta):Math.min(_,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.zoomToCursor&&w||n.object.isOrthographicCamera?u.radius=U(u.radius):u.radius=U(u.radius*h),e.setFromSpherical(u),e.applyQuaternion(f),y.copy(n.target).add(e),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),p.set(0,0,0));let b=!1;if(n.zoomToCursor&&w){let r=null;if(n.object instanceof RT&&n.object.isPerspectiveCamera){const t=e.length();r=U(t*h);const i=t-r;n.object.position.addScaledVector(E,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const t=new rS(S.x,S.y,0);t.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),b=!0;const i=new rS(S.x,S.y,0);i.unproject(n.object),n.object.position.sub(i).add(t),n.object.updateMatrixWorld(),r=e.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(EU.origin.copy(n.object.position),EU.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(EU.direction))<wU?t.lookAt(n.target):(SU.setFromNormalAndCoplanarPoint(n.object.up,n.target),EU.intersectPlane(SU,n.target))))}else n.object instanceof tM&&n.object.isOrthographicCamera&&(b=1!==h,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,w=!1,!!(b||d.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),d.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=t=>{t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=t,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",X),n.domElement.addEventListener("pointercancel",q),n.domElement.addEventListener("wheel",$,{passive:!0})},this.dispose=()=>{var t,e,r,i,o,s;n.domElement&&(n.domElement.style.touchAction="auto"),null==(t=n.domElement)||t.removeEventListener("contextmenu",Z),null==(e=n.domElement)||e.removeEventListener("pointerdown",X),null==(r=n.domElement)||r.removeEventListener("pointercancel",q),null==(i=n.domElement)||i.removeEventListener("wheel",$),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",W),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",Y),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=s.NONE;const l=1e-6,u=new BN,c=new BN;let h=1;const p=new rS,f=new TE,d=new TE,m=new TE,g=new TE,y=new TE,v=new TE,_=new TE,b=new TE,x=new TE,E=new rS,S=new TE;let w=!1;const T=[],M={};function R(){return Math.pow(.95,n.zoomSpeed)}function A(t){n.reverseOrbit||n.reverseHorizontalOrbit?c.theta+=t:c.theta-=t}function P(t){n.reverseOrbit||n.reverseVerticalOrbit?c.phi+=t:c.phi-=t}const I=(()=>{const t=new rS;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),p.add(t)}})(),C=(()=>{const t=new rS;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),p.add(t)}})(),O=(()=>{const t=new rS;return function(e,r){const i=n.domElement;if(i&&n.object instanceof RT&&n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),I(2*e*s/i.clientHeight,n.object.matrix),C(2*r*s/i.clientHeight,n.object.matrix)}else i&&n.object instanceof tM&&n.object.isOrthographicCamera?(I(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),C(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function N(t){n.object instanceof RT&&n.object.isPerspectiveCamera||n.object instanceof tM&&n.object.isOrthographicCamera?h/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(t){n.object instanceof RT&&n.object.isPerspectiveCamera||n.object instanceof tM&&n.object.isOrthographicCamera?h*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(t){if(!n.zoomToCursor||!n.domElement)return;w=!0;const e=n.domElement.getBoundingClientRect(),r=t.clientX-e.left,i=t.clientY-e.top,o=e.width,s=e.height;S.x=r/o*2-1,S.y=-i/s*2+1,E.set(S.x,S.y,1).unproject(n.object).sub(n.object.position).normalize()}function U(t){return Math.max(n.minDistance,Math.min(n.maxDistance,t))}function F(t){f.set(t.clientX,t.clientY)}function k(t){g.set(t.clientX,t.clientY)}function B(){if(1==T.length)f.set(T[0].pageX,T[0].pageY);else{const t=.5*(T[0].pageX+T[1].pageX),e=.5*(T[0].pageY+T[1].pageY);f.set(t,e)}}function G(){if(1==T.length)g.set(T[0].pageX,T[0].pageY);else{const t=.5*(T[0].pageX+T[1].pageX),e=.5*(T[0].pageY+T[1].pageY);g.set(t,e)}}function j(){const t=T[0].pageX-T[1].pageX,e=T[0].pageY-T[1].pageY,n=Math.sqrt(t*t+e*e);_.set(0,n)}function z(t){if(1==T.length)d.set(t.pageX,t.pageY);else{const e=tt(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);d.set(n,r)}m.subVectors(d,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(A(2*Math.PI*m.x/e.clientHeight),P(2*Math.PI*m.y/e.clientHeight)),f.copy(d)}function H(t){if(1==T.length)y.set(t.pageX,t.pageY);else{const e=tt(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);y.set(n,r)}v.subVectors(y,g).multiplyScalar(n.panSpeed),O(v.x,v.y),g.copy(y)}function V(t){const e=tt(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);b.set(0,o),x.set(0,Math.pow(b.y/_.y,n.zoomSpeed)),N(x.y),_.copy(b)}function X(t){var e,r;!1!==n.enabled&&(0===T.length&&(null==(e=n.domElement)||e.ownerDocument.addEventListener("pointermove",W),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",Y)),function(t){T.push(t)}(t),"touch"===t.pointerType?function(t){switch(Q(t),T.length){case 1:switch(n.touches.ONE){case Cv.ROTATE:if(!1===n.enableRotate)return;B(),a=s.TOUCH_ROTATE;break;case Cv.PAN:if(!1===n.enablePan)return;G(),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(n.touches.TWO){case Cv.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&j(),n.enablePan&&G(),a=s.TOUCH_DOLLY_PAN;break;case Cv.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&j(),n.enableRotate&&B(),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(i)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Iv.DOLLY:if(!1===n.enableZoom)return;!function(t){D(t),_.set(t.clientX,t.clientY)}(t),a=s.DOLLY;break;case Iv.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;k(t),a=s.PAN}else{if(!1===n.enableRotate)return;F(t),a=s.ROTATE}break;case Iv.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;F(t),a=s.ROTATE}else{if(!1===n.enablePan)return;k(t),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(i)}(t))}function W(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(Q(t),a){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;z(t),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;H(t),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&V(t),n.enablePan&&H(t)}(t),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&V(t),n.enableRotate&&z(t)}(t),n.update();break;default:a=s.NONE}}(t):function(t){if(!1===n.enabled)return;switch(a){case s.ROTATE:if(!1===n.enableRotate)return;!function(t){d.set(t.clientX,t.clientY),m.subVectors(d,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(A(2*Math.PI*m.x/e.clientHeight),P(2*Math.PI*m.y/e.clientHeight)),f.copy(d),n.update()}(t);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(t){b.set(t.clientX,t.clientY),x.subVectors(b,_),x.y>0?N(R()):x.y<0&&L(R()),_.copy(b),n.update()}(t);break;case s.PAN:if(!1===n.enablePan)return;!function(t){y.set(t.clientX,t.clientY),v.subVectors(y,g).multiplyScalar(n.panSpeed),O(v.x,v.y),g.copy(y),n.update()}(t)}}(t))}function Y(t){var e,r,i;J(t),0===T.length&&(null==(e=n.domElement)||e.releasePointerCapture(t.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",W),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(o),a=s.NONE}function q(t){J(t)}function $(t){!1===n.enabled||!1===n.enableZoom||a!==s.NONE&&a!==s.ROTATE||(n.dispatchEvent(i),function(t){D(t),t.deltaY<0?L(R()):t.deltaY>0&&N(R()),n.update()}(t),n.dispatchEvent(o))}function K(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:O(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:O(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:O(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:O(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function Z(t){!1!==n.enabled&&t.preventDefault()}function J(t){delete M[t.pointerId];for(let e=0;e<T.length;e++)if(T[e].pointerId==t.pointerId)return void T.splice(e,1)}function Q(t){let e=M[t.pointerId];void 0===e&&(e=new TE,M[t.pointerId]=e),e.set(t.pageX,t.pageY)}function tt(t){const e=t.pointerId===T[0].pointerId?T[1]:T[0];return M[e.pointerId]}void 0!==e&&this.connect(e),this.update()}}const RU=i.forwardRef(((t,e)=>{let{makeDefault:n,camera:r,regress:o,domElement:s,enableDamping:a=!0,keyEvents:l=!1,onChange:u,onStart:c,onEnd:h,...p}=t;const f=TD((t=>t.invalidate)),d=TD((t=>t.camera)),m=TD((t=>t.gl)),g=TD((t=>t.events)),y=TD((t=>t.setEvents)),v=TD((t=>t.set)),_=TD((t=>t.get)),b=TD((t=>t.performance)),x=r||d,E=s||g.connected||m.domElement,S=i.useMemo((()=>new MU(x)),[x]);return MD((()=>{S.enabled&&S.update()}),-1),i.useEffect((()=>(l&&S.connect(!0===l?E:l),S.connect(E),()=>{S.dispose()})),[l,E,o,S,f]),i.useEffect((()=>{const t=t=>{f(),o&&b.regress(),u&&u(t)},e=t=>{c&&c(t)},n=t=>{h&&h(t)};return S.addEventListener("change",t),S.addEventListener("start",e),S.addEventListener("end",n),()=>{S.removeEventListener("start",e),S.removeEventListener("end",n),S.removeEventListener("change",t)}}),[u,c,h,S,f,y]),i.useEffect((()=>{if(n){const t=_().controls;return v({controls:S}),()=>v({controls:t})}}),[n,S]),i.createElement("primitive",GD({ref:e,object:S,enableDamping:a},p))})),AU=.1,PU=3,IU=.1;function CU(t){const{scene:e}=TD(),n=(0,i.useRef)();(0,i.useRef)();return(0,i.useEffect)((()=>{let n=new RT(50,window.innerWidth/window.innerHeight,.1,100);n.position.x=-4,n.position.z=2,n.position.y=-6;const r=new wO(16777215,9276813,3);r.position.set(0,100,0),e.add(r);const i=new FO(9276813,3);i.position.set(-0,15,30),i.castShadow=!0,i.shadow.camera.top=50,i.shadow.camera.bottom=-25,i.shadow.camera.left=-25,i.shadow.camera.right=25,i.shadow.camera.near=.1,i.shadow.camera.far=200,i.shadow.mapSize.set(1024,1024),e.add(i);let o=new UC({roughness:.8,color:16777215,metalness:.2,bumpScale:1});const s=new EO;s.load(dU,(function(t){t.wrapS=z_,t.wrapT=z_,t.anisotropy=4,t.repeat.set(10,24),t.colorSpace=Ex,o.map=t,o.needsUpdate=!0})),s.load(mU,(function(t){t.wrapS=z_,t.wrapT=z_,t.anisotropy=4,t.repeat.set(10,24),o.bumpMap=t,o.needsUpdate=!0})),s.load(gU,(function(t){t.wrapS=z_,t.wrapT=z_,t.anisotropy=4,t.repeat.set(10,24),o.roughnessMap=t,o.needsUpdate=!0}));const a=new jT(30,30),l=new mT(a,o);l.receiveShadow=!0,l.rotation.x=-Math.PI/2,e.add(l);let u=new UC({roughness:.7,color:16777215,bumpScale:1,metalness:.2});s.load(yU,(function(t){t.wrapS=z_,t.wrapT=z_,t.anisotropy=4,t.repeat.set(1,1),t.colorSpace=Ex,u.map=t,u.needsUpdate=!0})),s.load(vU,(function(t){t.wrapS=z_,t.wrapT=z_,t.anisotropy=4,t.repeat.set(1,1),u.bumpMap=t,u.needsUpdate=!0}));const c=(t,n)=>{const r=t.x===n.x,i=(r?Math.abs(n.y-t.y):Math.abs(n.x-t.x))*IU,o=new yT(AU,PU,i),s=new mT(o,u);s.position.y=PU/2,s.position.x=(r?t.x:(t.x+n.x)/2)*IU,s.position.z=-1*(r?(t.y+n.y)/2:t.y)*IU,r||(s.rotation.y=Math.PI/2),s.receiveShadow=!0,s.name="cube";const a=e.getObjectByName("cube");a&&(a.castShadow=!0,a.receiveShadow=!0),e.add(s)},h=t.deliveredMask.ExteriorWall.map((t=>[t.x,t.y])),p=t.deliveredMask.InteriorWall.map((t=>[t.x,t.y]));function f(t){let e=t[0][0],n=t[0][0],r=t[0][1],i=t[0][1];for(let l=0;l<t.length-1;l++)t[l+1][0]<e&&(e=t[l+1][0]),t[l+1][1]<r&&(r=t[l+1][1]),t[l+1][0]>n&&(n=t[l+1][0]),t[l+1][1]>i&&(i=t[l+1][1]);const o=(n+e)/2,s=(i+r)/2,a=t.map((t=>[t[0]-o,t[1]-s]));return{cx:o,cy:s,newPoints:a}}const d=f(h).newPoints,m=f(h).cx,g=f(h).cy;for(let t=0;t<d.length;t++){const e=d.length-1===t;c({x:d[t][0],y:d[t][1]},e?{x:d[0][0],y:d[0][1]}:{x:d[t+1][0],y:d[t+1][1]})}for(let t=0;t<p.length-1;t+=1){c({x:p[t][0]-m,y:p[t][1]-g},{x:p[t+1][0]-m,y:p[t+1][1]-g})}}),[]),(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)(_U,{makeDefault:!0,position:[-16,16,8]}),(0,_n.jsx)(RU,{ref:n,enableZoom:!0,enablePan:!0})]})}function OU(){const t=J();console.log("this is location",t);let e=t.state;console.log("this mask ",e);const n={ExteriorWall:[],InteriorWall:[]};let r=[];for(let i=0;i<e.InteriorWall.length;i++)for(let t=0;t<e.InteriorWall[i].length;t++)r.push(e.InteriorWall[i][t]);return n.ExteriorWall=e.ExteriorWall,n.InteriorWall=r,console.log("this is the final mask",n),(0,_n.jsx)(fU,{shadows:!0,style:{position:"relative",width:1600,height:750,overflow:"hidden"},children:(0,_n.jsx)(CU,{deliveredMask:n})})}const NU=function(){return(0,_n.jsx)(xt,{children:(0,_n.jsx)("div",{className:"overflow-hidden",children:(0,_n.jsxs)(mt,{children:[(0,_n.jsx)(ft,{exact:!0,path:"/",element:(0,_n.jsx)(kr,{})}),(0,_n.jsx)(ft,{exact:!0,path:"team",element:(0,_n.jsx)(jr,{})}),(0,_n.jsx)(ft,{path:"/login",element:(0,_n.jsx)(xn,{})}),(0,_n.jsx)(ft,{path:"/forgetPassword",element:(0,_n.jsx)(Br,{})}),(0,_n.jsx)(ft,{path:"/register",element:(0,_n.jsx)(bn,{})}),(0,_n.jsx)(ft,{path:"/contact-us",element:(0,_n.jsx)(zr,{})}),(0,_n.jsx)(ft,{path:"/about-project",element:(0,_n.jsx)(Hr,{})}),(0,_n.jsx)(ft,{path:"/ViewPlanify",element:(0,_n.jsx)(Vr,{})}),(0,_n.jsx)(ft,{path:"/studio",element:(0,_n.jsx)(Av,{})}),(0,_n.jsx)(ft,{path:"/scene",element:(0,_n.jsx)(OU,{})})]})})})};s.createRoot(document.getElementById("root")).render((0,_n.jsx)(i.StrictMode,{children:(0,_n.jsx)(NU,{})}))})()})();
//# sourceMappingURL=main.522eb424.js.map